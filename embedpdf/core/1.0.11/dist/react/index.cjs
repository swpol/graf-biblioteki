"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const u=require("preact"),c=require("preact/hooks"),N=require("../jsxRuntime.module-B3sGoTIU.cjs"),x=require("../math-BJ_3g2sS.cjs");function U(e,r){for(var t in r)e[t]=r[t];return e}function m(e,r){for(var t in e)if(t!=="__source"&&!(t in r))return!0;for(var o in r)if(o!=="__source"&&e[o]!==r[o])return!0;return!1}function b(e,r){this.props=e,this.context=r}(b.prototype=new u.Component).isPureReactComponent=!0,b.prototype.shouldComponentUpdate=function(e,r){return m(this.props,e)||m(this.state,r)};var P=u.options.__b;u.options.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),P&&P(e)};var z=u.options.__e;u.options.__e=function(e,r,t,o){if(e.then){for(var n,s=r;s=s.__;)if((n=s.__c)&&n.__c)return r.__e==null&&(r.__e=t.__e,r.__k=t.__k),n.__c(e,r)}z(e,r,t,o)};var S=u.options.unmount;function O(e,r,t){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(o){typeof o.__c=="function"&&o.__c()}),e.__c.__H=null),(e=U({},e)).__c!=null&&(e.__c.__P===t&&(e.__c.__P=r),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(o){return O(o,r,t)})),e}function D(e,r,t){return e&&t&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(o){return D(o,r,t)}),e.__c&&e.__c.__P===r&&(e.__e&&t.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=t)),e}function y(){this.__u=0,this.o=null,this.__b=null}function A(e){var r=e.__.__c;return r&&r.__a&&r.__a(e)}function d(){this.i=null,this.l=null}u.options.unmount=function(e){var r=e.__c;r&&r.__R&&r.__R(),r&&32&e.__u&&(e.type=null),S&&S(e)},(y.prototype=new u.Component).__c=function(e,r){var t=r.__c,o=this;o.o==null&&(o.o=[]),o.o.push(t);var n=A(o.__v),s=!1,i=function(){s||(s=!0,t.__R=null,n?n(l):l())};t.__R=i;var l=function(){if(!--o.__u){if(o.state.__a){var a=o.state.__a;o.__v.__k[0]=D(a,a.__c.__P,a.__c.__O)}var _;for(o.setState({__a:o.__b=null});_=o.o.pop();)_.forceUpdate()}};o.__u++||32&r.__u||o.setState({__a:o.__b=o.__v.__k[0]}),e.then(i,i)},y.prototype.componentWillUnmount=function(){this.o=[]},y.prototype.render=function(e,r){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),o=this.__v.__k[0].__c;this.__v.__k[0]=O(this.__b,t,o.__O=o.__P)}this.__b=null}var n=r.__a&&u.createElement(u.Fragment,null,e.fallback);return n&&(n.__u&=-33),[u.createElement(u.Fragment,null,r.__a?null:e.children),n]};var C=function(e,r,t){if(++t[1]===t[0]&&e.l.delete(r),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(t=e.i;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;e.i=t=t[2]}};(d.prototype=new u.Component).__a=function(e){var r=this,t=A(r.__v),o=r.l.get(e);return o[0]++,function(n){var s=function(){r.props.revealOrder?(o.push(n),C(r,e,o)):n()};t?t(s):s()}},d.prototype.render=function(e){this.i=null,this.l=new Map;var r=u.toChildArray(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&r.reverse();for(var t=r.length;t--;)this.l.set(r[t],this.i=[1,0,this.i]);return e.children},d.prototype.componentDidUpdate=d.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(r,t){C(e,t,r)})};var V=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,j=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,q=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,L=/[A-Z0-9]/g,W=typeof document<"u",H=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};u.Component.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(u.Component.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(r){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:r})}})});var w=u.options.event;function $(){}function B(){return this.cancelBubble}function M(){return this.defaultPrevented}u.options.event=function(e){return w&&(e=w(e)),e.persist=$,e.isPropagationStopped=B,e.isDefaultPrevented=M,e.nativeEvent=e};var T={enumerable:!1,configurable:!0,get:function(){return this.class}},E=u.options.vnode;u.options.vnode=function(e){typeof e.type=="string"&&function(r){var t=r.props,o=r.type,n={},s=o.indexOf("-")===-1;for(var i in t){var l=t[i];if(!(i==="value"&&"defaultValue"in t&&l==null||W&&i==="children"&&o==="noscript"||i==="class"||i==="className")){var a=i.toLowerCase();i==="defaultValue"&&"value"in t&&t.value==null?i="value":i==="download"&&l===!0?l="":a==="translate"&&l==="no"?l=!1:a[0]==="o"&&a[1]==="n"?a==="ondoubleclick"?i="ondblclick":a!=="onchange"||o!=="input"&&o!=="textarea"||H(t.type)?a==="onfocus"?i="onfocusin":a==="onblur"?i="onfocusout":q.test(i)&&(i=a):a=i="oninput":s&&j.test(i)?i=i.replace(L,"-$&").toLowerCase():l===null&&(l=void 0),a==="oninput"&&n[i=a]&&(i="oninputCapture"),n[i]=l}}o=="select"&&n.multiple&&Array.isArray(n.value)&&(n.value=u.toChildArray(t.children).forEach(function(_){_.props.selected=n.value.indexOf(_.props.value)!=-1})),o=="select"&&n.defaultValue!=null&&(n.value=u.toChildArray(t.children).forEach(function(_){_.props.selected=n.multiple?n.defaultValue.indexOf(_.props.value)!=-1:n.defaultValue==_.props.value})),t.class&&!t.className?(n.class=t.class,Object.defineProperty(n,"className",T)):(t.className&&!t.class||t.class&&t.className)&&(n.class=n.className=t.className),r.props=n}(e),e.$$typeof=V,E&&E(e)};var k=u.options.__r;u.options.__r=function(e){k&&k(e),e.__c};var R=u.options.diffed;u.options.diffed=function(e){R&&R(e);var r=e.props,t=e.__e;t!=null&&e.type==="textarea"&&"value"in r&&r.value!==t.value&&(t.value=r.value==null?"":r.value)};const h=u.createContext({registry:null,isInitializing:!0,pluginsReady:!1});function I({engine:e,onInitialized:r,plugins:t,children:o}){const[n,s]=c.useState(null),[i,l]=c.useState(!0),[a,_]=c.useState(!1),p=c.useRef(r);return c.useEffect(()=>{p.current=r},[r]),c.useEffect(()=>{const f=new x.PluginRegistry(e);return f.registerPluginBatch(t),(async()=>{var g;await f.initialize(),!f.isDestroyed()&&(await((g=p.current)==null?void 0:g.call(p,f)),!f.isDestroyed()&&(f.pluginsReady().then(()=>{f.isDestroyed()||_(!0)}),s(f),l(!1)))})().catch(console.error),()=>{f.destroy(),s(null),l(!0),_(!1)}},[e,t]),N.u(h.Provider,{value:{registry:n,isInitializing:i,pluginsReady:a},children:typeof o=="function"?o({registry:n,isInitializing:i,pluginsReady:a}):o})}function v(){const e=c.useContext(h);if(e===void 0)throw new Error("useCapability must be used within a PDFContext.Provider");const{registry:r,isInitializing:t}=e;if(t)return e;if(r===null)throw new Error("PDF registry failed to initialize properly");return e}function F(e){const{registry:r}=v();if(r===null)return{plugin:null,isLoading:!0,ready:new Promise(()=>{})};const t=r.getPlugin(e);if(!t)throw new Error(`Plugin ${e} not found`);return{plugin:t,isLoading:!1,ready:t.ready()}}function Z(e){const{plugin:r,isLoading:t,ready:o}=F(e);if(!r)return{provides:null,isLoading:t,ready:o};if(!r.provides)throw new Error(`Plugin ${e} does not provide a capability`);return{provides:r.provides(),isLoading:t,ready:o}}function G(){const{registry:e}=v(),[r,t]=c.useState(null);return c.useEffect(()=>{if(!e)return;t(e.getStore().getState());const o=e.getStore().subscribe((n,s)=>{t(s)});return()=>o()},[e]),r}function J(){const{registry:e}=v(),[r,t]=c.useState(null);return c.useEffect(()=>{if(!e)return;const o=e.getStore();t(o.getState().core);const n=o.subscribe((s,i,l)=>{o.isCoreAction(s)&&!x.arePropsEqual(i.core,l.core)&&t(i.core)});return()=>n()},[e]),r}exports.EmbedPDF=I;exports.PDFContext=h;exports.useCapability=Z;exports.useCoreState=J;exports.usePlugin=F;exports.useRegistry=v;exports.useStoreState=G;
//# sourceMappingURL=index.cjs.map
