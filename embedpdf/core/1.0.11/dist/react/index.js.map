{"version":3,"file":"index.js","sources":["../../../../node_modules/.pnpm/preact@10.26.9/node_modules/preact/compat/dist/compat.module.js","../../src/react/context.ts","../../src/react/components/embed-pdf.tsx","../../src/react/hooks/use-registry.ts","../../src/react/hooks/use-plugin.ts","../../src/react/hooks/use-capability.ts","../../src/react/hooks/use-store-state.ts","../../src/react/hooks/use-core-state.ts"],"sourcesContent":["import{Component as n,createElement as t,options as e,toChildArray as r,Fragment as u,render as o,hydrate as i,createContext as l,createRef as c,cloneElement as f}from\"preact\";export{Component,Fragment,createContext,createElement,createRef}from\"preact\";import{useState as a,useLayoutEffect as s,useEffect as h,useCallback as v,useContext as d,useDebugValue as m,useId as p,useImperativeHandle as y,useMemo as _,useReducer as b,useRef as S}from\"preact/hooks\";export*from\"preact/hooks\";function g(n,t){for(var e in t)n[e]=t[e];return n}function E(n,t){for(var e in n)if(\"__source\"!==e&&!(e in t))return!0;for(var r in t)if(\"__source\"!==r&&n[r]!==t[r])return!0;return!1}function C(n,t){var e=t(),r=a({t:{__:e,u:t}}),u=r[0].t,o=r[1];return s(function(){u.__=e,u.u=t,x(u)&&o({t:u})},[n,e,t]),h(function(){return x(u)&&o({t:u}),n(function(){x(u)&&o({t:u})})},[n]),e}function x(n){var t,e,r=n.u,u=n.__;try{var o=r();return!((t=u)===(e=o)&&(0!==t||1/t==1/e)||t!=t&&e!=e)}catch(n){return!0}}function R(n){n()}function w(n){return n}function k(){return[!1,R]}var I=s;function N(n,t){this.props=n,this.context=t}function M(n,e){function r(n){var t=this.props.ref,r=t==n.ref;return!r&&t&&(t.call?t(null):t.current=null),e?!e(this.props,n)||!r:E(this.props,n)}function u(e){return this.shouldComponentUpdate=r,t(n,e)}return u.displayName=\"Memo(\"+(n.displayName||n.name)+\")\",u.prototype.isReactComponent=!0,u.__f=!0,u}(N.prototype=new n).isPureReactComponent=!0,N.prototype.shouldComponentUpdate=function(n,t){return E(this.props,n)||E(this.state,t)};var T=e.__b;e.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),T&&T(n)};var A=\"undefined\"!=typeof Symbol&&Symbol.for&&Symbol.for(\"react.forward_ref\")||3911;function D(n){function t(t){var e=g({},t);return delete e.ref,n(e,t.ref||null)}return t.$$typeof=A,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName=\"ForwardRef(\"+(n.displayName||n.name)+\")\",t}var L=function(n,t){return null==n?null:r(r(n).map(t))},O={map:L,forEach:L,count:function(n){return n?r(n).length:0},only:function(n){var t=r(n);if(1!==t.length)throw\"Children.only\";return t[0]},toArray:r},F=e.__e;e.__e=function(n,t,e,r){if(n.then)for(var u,o=t;o=o.__;)if((u=o.__c)&&u.__c)return null==t.__e&&(t.__e=e.__e,t.__k=e.__k),u.__c(n,t);F(n,t,e,r)};var U=e.unmount;function V(n,t,e){return n&&(n.__c&&n.__c.__H&&(n.__c.__H.__.forEach(function(n){\"function\"==typeof n.__c&&n.__c()}),n.__c.__H=null),null!=(n=g({},n)).__c&&(n.__c.__P===e&&(n.__c.__P=t),n.__c.__e=!0,n.__c=null),n.__k=n.__k&&n.__k.map(function(n){return V(n,t,e)})),n}function W(n,t,e){return n&&e&&(n.__v=null,n.__k=n.__k&&n.__k.map(function(n){return W(n,t,e)}),n.__c&&n.__c.__P===t&&(n.__e&&e.appendChild(n.__e),n.__c.__e=!0,n.__c.__P=e)),n}function P(){this.__u=0,this.o=null,this.__b=null}function j(n){var t=n.__.__c;return t&&t.__a&&t.__a(n)}function z(n){var e,r,u;function o(o){if(e||(e=n()).then(function(n){r=n.default||n},function(n){u=n}),u)throw u;if(!r)throw e;return t(r,o)}return o.displayName=\"Lazy\",o.__f=!0,o}function B(){this.i=null,this.l=null}e.unmount=function(n){var t=n.__c;t&&t.__R&&t.__R(),t&&32&n.__u&&(n.type=null),U&&U(n)},(P.prototype=new n).__c=function(n,t){var e=t.__c,r=this;null==r.o&&(r.o=[]),r.o.push(e);var u=j(r.__v),o=!1,i=function(){o||(o=!0,e.__R=null,u?u(l):l())};e.__R=i;var l=function(){if(!--r.__u){if(r.state.__a){var n=r.state.__a;r.__v.__k[0]=W(n,n.__c.__P,n.__c.__O)}var t;for(r.setState({__a:r.__b=null});t=r.o.pop();)t.forceUpdate()}};r.__u++||32&t.__u||r.setState({__a:r.__b=r.__v.__k[0]}),n.then(i,i)},P.prototype.componentWillUnmount=function(){this.o=[]},P.prototype.render=function(n,e){if(this.__b){if(this.__v.__k){var r=document.createElement(\"div\"),o=this.__v.__k[0].__c;this.__v.__k[0]=V(this.__b,r,o.__O=o.__P)}this.__b=null}var i=e.__a&&t(u,null,n.fallback);return i&&(i.__u&=-33),[t(u,null,e.__a?null:n.children),i]};var H=function(n,t,e){if(++e[1]===e[0]&&n.l.delete(t),n.props.revealOrder&&(\"t\"!==n.props.revealOrder[0]||!n.l.size))for(e=n.i;e;){for(;e.length>3;)e.pop()();if(e[1]<e[0])break;n.i=e=e[2]}};function Z(n){return this.getChildContext=function(){return n.context},n.children}function Y(n){var e=this,r=n.h;if(e.componentWillUnmount=function(){o(null,e.v),e.v=null,e.h=null},e.h&&e.h!==r&&e.componentWillUnmount(),!e.v){for(var u=e.__v;null!==u&&!u.__m&&null!==u.__;)u=u.__;e.h=r,e.v={nodeType:1,parentNode:r,childNodes:[],__k:{__m:u.__m},contains:function(){return!0},insertBefore:function(n,t){this.childNodes.push(n),e.h.insertBefore(n,t)},removeChild:function(n){this.childNodes.splice(this.childNodes.indexOf(n)>>>1,1),e.h.removeChild(n)}}}o(t(Z,{context:e.context},n.__v),e.v)}function $(n,e){var r=t(Y,{__v:n,h:e});return r.containerInfo=e,r}(B.prototype=new n).__a=function(n){var t=this,e=j(t.__v),r=t.l.get(n);return r[0]++,function(u){var o=function(){t.props.revealOrder?(r.push(u),H(t,n,r)):u()};e?e(o):o()}},B.prototype.render=function(n){this.i=null,this.l=new Map;var t=r(n.children);n.revealOrder&&\"b\"===n.revealOrder[0]&&t.reverse();for(var e=t.length;e--;)this.l.set(t[e],this.i=[1,0,this.i]);return n.children},B.prototype.componentDidUpdate=B.prototype.componentDidMount=function(){var n=this;this.l.forEach(function(t,e){H(n,e,t)})};var q=\"undefined\"!=typeof Symbol&&Symbol.for&&Symbol.for(\"react.element\")||60103,G=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,J=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,K=/[A-Z0-9]/g,Q=\"undefined\"!=typeof document,X=function(n){return(\"undefined\"!=typeof Symbol&&\"symbol\"==typeof Symbol()?/fil|che|rad/:/fil|che|ra/).test(n)};function nn(n,t,e){return null==t.__k&&(t.textContent=\"\"),o(n,t),\"function\"==typeof e&&e(),n?n.__c:null}function tn(n,t,e){return i(n,t),\"function\"==typeof e&&e(),n?n.__c:null}n.prototype.isReactComponent={},[\"componentWillMount\",\"componentWillReceiveProps\",\"componentWillUpdate\"].forEach(function(t){Object.defineProperty(n.prototype,t,{configurable:!0,get:function(){return this[\"UNSAFE_\"+t]},set:function(n){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:n})}})});var en=e.event;function rn(){}function un(){return this.cancelBubble}function on(){return this.defaultPrevented}e.event=function(n){return en&&(n=en(n)),n.persist=rn,n.isPropagationStopped=un,n.isDefaultPrevented=on,n.nativeEvent=n};var ln,cn={enumerable:!1,configurable:!0,get:function(){return this.class}},fn=e.vnode;e.vnode=function(n){\"string\"==typeof n.type&&function(n){var t=n.props,e=n.type,u={},o=-1===e.indexOf(\"-\");for(var i in t){var l=t[i];if(!(\"value\"===i&&\"defaultValue\"in t&&null==l||Q&&\"children\"===i&&\"noscript\"===e||\"class\"===i||\"className\"===i)){var c=i.toLowerCase();\"defaultValue\"===i&&\"value\"in t&&null==t.value?i=\"value\":\"download\"===i&&!0===l?l=\"\":\"translate\"===c&&\"no\"===l?l=!1:\"o\"===c[0]&&\"n\"===c[1]?\"ondoubleclick\"===c?i=\"ondblclick\":\"onchange\"!==c||\"input\"!==e&&\"textarea\"!==e||X(t.type)?\"onfocus\"===c?i=\"onfocusin\":\"onblur\"===c?i=\"onfocusout\":J.test(i)&&(i=c):c=i=\"oninput\":o&&G.test(i)?i=i.replace(K,\"-$&\").toLowerCase():null===l&&(l=void 0),\"oninput\"===c&&u[i=c]&&(i=\"oninputCapture\"),u[i]=l}}\"select\"==e&&u.multiple&&Array.isArray(u.value)&&(u.value=r(t.children).forEach(function(n){n.props.selected=-1!=u.value.indexOf(n.props.value)})),\"select\"==e&&null!=u.defaultValue&&(u.value=r(t.children).forEach(function(n){n.props.selected=u.multiple?-1!=u.defaultValue.indexOf(n.props.value):u.defaultValue==n.props.value})),t.class&&!t.className?(u.class=t.class,Object.defineProperty(u,\"className\",cn)):(t.className&&!t.class||t.class&&t.className)&&(u.class=u.className=t.className),n.props=u}(n),n.$$typeof=q,fn&&fn(n)};var an=e.__r;e.__r=function(n){an&&an(n),ln=n.__c};var sn=e.diffed;e.diffed=function(n){sn&&sn(n);var t=n.props,e=n.__e;null!=e&&\"textarea\"===n.type&&\"value\"in t&&t.value!==e.value&&(e.value=null==t.value?\"\":t.value),ln=null};var hn={ReactCurrentDispatcher:{current:{readContext:function(n){return ln.__n[n.__c].props.value},useCallback:v,useContext:d,useDebugValue:m,useDeferredValue:w,useEffect:h,useId:p,useImperativeHandle:y,useInsertionEffect:I,useLayoutEffect:s,useMemo:_,useReducer:b,useRef:S,useState:a,useSyncExternalStore:C,useTransition:k}}},vn=\"18.3.1\";function dn(n){return t.bind(null,n)}function mn(n){return!!n&&n.$$typeof===q}function pn(n){return mn(n)&&n.type===u}function yn(n){return!!n&&!!n.displayName&&(\"string\"==typeof n.displayName||n.displayName instanceof String)&&n.displayName.startsWith(\"Memo(\")}function _n(n){return mn(n)?f.apply(null,arguments):n}function bn(n){return!!n.__k&&(o(null,n),!0)}function Sn(n){return n&&(n.base||1===n.nodeType&&n)||null}var gn=function(n,t){return n(t)},En=function(n,t){return n(t)},Cn=u,xn=mn,Rn={useState:a,useId:p,useReducer:b,useEffect:h,useLayoutEffect:s,useInsertionEffect:I,useTransition:k,useDeferredValue:w,useSyncExternalStore:C,startTransition:R,useRef:S,useImperativeHandle:y,useMemo:_,useCallback:v,useContext:d,useDebugValue:m,version:\"18.3.1\",Children:O,render:nn,hydrate:tn,unmountComponentAtNode:bn,createPortal:$,createElement:t,createContext:l,createFactory:dn,cloneElement:_n,createRef:c,Fragment:u,isValidElement:mn,isElement:xn,isFragment:pn,isMemo:yn,findDOMNode:Sn,Component:n,PureComponent:N,memo:M,forwardRef:D,flushSync:En,unstable_batchedUpdates:gn,StrictMode:Cn,Suspense:P,SuspenseList:B,lazy:z,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:hn};export{O as Children,N as PureComponent,Cn as StrictMode,P as Suspense,B as SuspenseList,hn as __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_n as cloneElement,dn as createFactory,$ as createPortal,Rn as default,Sn as findDOMNode,En as flushSync,D as forwardRef,tn as hydrate,xn as isElement,pn as isFragment,yn as isMemo,mn as isValidElement,z as lazy,M as memo,nn as render,R as startTransition,bn as unmountComponentAtNode,gn as unstable_batchedUpdates,w as useDeferredValue,I as useInsertionEffect,C as useSyncExternalStore,k as useTransition,vn as version};\n//# sourceMappingURL=compat.module.js.map\n","import { createContext } from 'react';\nimport type { PluginRegistry } from '@embedpdf/core';\n\nexport interface PDFContextState {\n  registry: PluginRegistry | null;\n  isInitializing: boolean;\n  pluginsReady: boolean;\n}\n\nexport const PDFContext = createContext<PDFContextState>({\n  registry: null,\n  isInitializing: true,\n  pluginsReady: false,\n});\n","import React, { useState, useEffect, useRef } from 'react';\nimport { PdfEngine } from '@embedpdf/models';\nimport { PluginRegistry } from '@embedpdf/core';\nimport type { IPlugin, PluginBatchRegistration } from '@embedpdf/core';\n\nimport { PDFContext, PDFContextState } from '../context';\n\ninterface EmbedPDFProps {\n  engine: PdfEngine;\n  onInitialized?: (registry: PluginRegistry) => Promise<void>;\n  plugins: PluginBatchRegistration<IPlugin<any>, any>[];\n  children: React.ReactNode | ((state: PDFContextState) => React.ReactNode);\n}\n\nexport function EmbedPDF({ engine, onInitialized, plugins, children }: EmbedPDFProps) {\n  const [registry, setRegistry] = useState<PluginRegistry | null>(null);\n  const [isInitializing, setIsInitializing] = useState<boolean>(true);\n  const [pluginsReady, setPluginsReady] = useState<boolean>(false);\n  const initRef = useRef<EmbedPDFProps['onInitialized']>(onInitialized);\n\n  useEffect(() => {\n    initRef.current = onInitialized; // update without triggering re-runs\n  }, [onInitialized]);\n\n  useEffect(() => {\n    const pdfViewer = new PluginRegistry(engine);\n    pdfViewer.registerPluginBatch(plugins);\n\n    const initialize = async () => {\n      await pdfViewer.initialize();\n      // if the registry is destroyed, don't do anything\n      if (pdfViewer.isDestroyed()) {\n        return;\n      }\n\n      /* always call the *latest* callback */\n      await initRef.current?.(pdfViewer);\n\n      // if the registry is destroyed, don't do anything\n      if (pdfViewer.isDestroyed()) {\n        return;\n      }\n\n      pdfViewer.pluginsReady().then(() => {\n        if (!pdfViewer.isDestroyed()) {\n          setPluginsReady(true);\n        }\n      });\n\n      // Provide the registry to children via context\n      setRegistry(pdfViewer);\n      setIsInitializing(false);\n    };\n\n    initialize().catch(console.error);\n\n    return () => {\n      pdfViewer.destroy();\n      setRegistry(null);\n      setIsInitializing(true);\n      setPluginsReady(false);\n    };\n  }, [engine, plugins]);\n\n  return (\n    <PDFContext.Provider value={{ registry, isInitializing, pluginsReady }}>\n      {typeof children === 'function'\n        ? children({ registry, isInitializing, pluginsReady })\n        : children}\n    </PDFContext.Provider>\n  );\n}\n","import { useContext } from 'react';\nimport { PDFContext, PDFContextState } from '../context';\n\n/**\n * Hook to access the PDF registry.\n * @returns The PDF registry or null during initialization\n */\nexport function useRegistry(): PDFContextState {\n  const contextValue = useContext(PDFContext);\n\n  // Error if used outside of context\n  if (contextValue === undefined) {\n    throw new Error('useCapability must be used within a PDFContext.Provider');\n  }\n\n  const { registry, isInitializing } = contextValue;\n\n  // During initialization, return null instead of throwing an error\n  if (isInitializing) {\n    return contextValue;\n  }\n\n  // At this point, initialization is complete but registry is still null, which is unexpected\n  if (registry === null) {\n    throw new Error('PDF registry failed to initialize properly');\n  }\n\n  return contextValue;\n}\n","import type { BasePlugin } from '@embedpdf/core';\nimport { useRegistry } from './use-registry';\n\ntype PluginState<T extends BasePlugin> = {\n  plugin: T | null;\n  isLoading: boolean;\n  ready: Promise<void>;\n};\n\n/**\n * Hook to access a plugin.\n * @param pluginId The ID of the plugin to access\n * @returns The plugin or null during initialization\n * @example\n * // Get zoom plugin\n * const zoom = usePlugin<ZoomPlugin>(ZoomPlugin.id);\n */\nexport function usePlugin<T extends BasePlugin>(pluginId: T['id']): PluginState<T> {\n  const { registry } = useRegistry();\n\n  if (registry === null) {\n    return {\n      plugin: null,\n      isLoading: true,\n      ready: new Promise(() => {}),\n    };\n  }\n\n  const plugin = registry.getPlugin<T>(pluginId);\n\n  if (!plugin) {\n    throw new Error(`Plugin ${pluginId} not found`);\n  }\n\n  return {\n    plugin,\n    isLoading: false,\n    ready: plugin.ready(),\n  };\n}\n","import type { BasePlugin } from '@embedpdf/core';\nimport { usePlugin } from './use-plugin';\n\ntype CapabilityState<T extends BasePlugin> = {\n  provides: ReturnType<NonNullable<T['provides']>> | null;\n  isLoading: boolean;\n  ready: Promise<void>;\n};\n\n/**\n * Hook to access a plugin's capability.\n * @param pluginId The ID of the plugin to access\n * @returns The capability provided by the plugin or null during initialization\n * @example\n * // Get zoom capability\n * const zoom = useCapability<ZoomPlugin>(ZoomPlugin.id);\n */\nexport function useCapability<T extends BasePlugin>(pluginId: T['id']): CapabilityState<T> {\n  const { plugin, isLoading, ready } = usePlugin<T>(pluginId);\n\n  if (!plugin) {\n    return {\n      provides: null,\n      isLoading,\n      ready,\n    };\n  }\n\n  if (!plugin.provides) {\n    throw new Error(`Plugin ${pluginId} does not provide a capability`);\n  }\n\n  return {\n    provides: plugin.provides() as ReturnType<NonNullable<T['provides']>>,\n    isLoading,\n    ready,\n  };\n}\n","import { useState, useEffect } from 'react';\nimport { CoreState, StoreState } from '@embedpdf/core';\nimport { useRegistry } from './use-registry';\n\n/**\n * Hook that provides access to the current global store state\n * and re-renders the component when the state changes\n */\nexport function useStoreState<T = CoreState>(): StoreState<T> | null {\n  const { registry } = useRegistry();\n  const [state, setState] = useState<StoreState<T> | null>(null);\n\n  useEffect(() => {\n    if (!registry) return;\n\n    // Get initial state\n    setState(registry.getStore().getState() as StoreState<T>);\n\n    // Subscribe to store changes\n    const unsubscribe = registry.getStore().subscribe((_action, newState) => {\n      setState(newState as StoreState<T>);\n    });\n\n    return () => unsubscribe();\n  }, [registry]);\n\n  return state;\n}\n","import { useState, useEffect } from 'react';\nimport { CoreState, arePropsEqual } from '@embedpdf/core';\nimport { useRegistry } from './use-registry';\n\n/**\n * Hook that provides access to the current core state\n * and re-renders the component only when the core state changes\n */\nexport function useCoreState(): CoreState | null {\n  const { registry } = useRegistry();\n  const [coreState, setCoreState] = useState<CoreState | null>(null);\n\n  useEffect(() => {\n    if (!registry) return;\n\n    const store = registry.getStore();\n\n    // Get initial core state\n    setCoreState(store.getState().core);\n\n    // Create a single subscription that handles all core actions\n    const unsubscribe = store.subscribe((action, newState, oldState) => {\n      // Only update if it's a core action and the core state changed\n      if (store.isCoreAction(action) && !arePropsEqual(newState.core, oldState.core)) {\n        setCoreState(newState.core);\n      }\n    });\n\n    return () => unsubscribe();\n  }, [registry]);\n\n  return coreState;\n}\n"],"names":["g","n","t","e","E","r","N","T","F","u","o","U","V","W","P","j","B","i","H","q","G","J","K","Q","X","en","rn","un","on","cn","fn","c","an","sn","PDFContext","createContext","EmbedPDF","engine","onInitialized","plugins","children","registry","setRegistry","useState","isInitializing","setIsInitializing","pluginsReady","setPluginsReady","initRef","useRef","useEffect","pdfViewer","PluginRegistry","_a","jsx","useRegistry","contextValue","useContext","usePlugin","pluginId","plugin","useCapability","isLoading","ready","useStoreState","state","setState","unsubscribe","_action","newState","useCoreState","coreState","setCoreState","store","action","oldState","arePropsEqual"],"mappings":"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","x_google_ignoreList":[0]}