"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const a=require("preact"),o=require("preact/hooks"),l=require("../loader-plugin-knutO_6_.cjs"),s=require("../jsxRuntime.module-B3sGoTIU.cjs"),f=a.createContext({registry:null,isInitializing:!0,pluginsReady:!1});function g(){const e=o.useContext(f);if(e===void 0)throw new Error("useCapability must be used within a PDFContext.Provider");const{registry:i,isInitializing:r}=e;if(r)return e;if(i===null)throw new Error("PDF registry failed to initialize properly");return e}function d(e){const{registry:i}=g();if(i===null)return{plugin:null,isLoading:!0,ready:new Promise(()=>{})};const r=i.getPlugin(e);if(!r)throw new Error(`Plugin ${e} not found`);return{plugin:r,isLoading:!1,ready:r.ready()}}function p(e){const{plugin:i,isLoading:r,ready:n}=d(e);if(!i)return{provides:null,isLoading:r,ready:n};if(!i.provides)throw new Error(`Plugin ${e} does not provide a capability`);return{provides:i.provides(),isLoading:r,ready:n}}const y=()=>d(l.LoaderPlugin.id),c=()=>p(l.LoaderPlugin.id);function P(){const{provides:e}=c(),i=o.useRef(null);o.useEffect(()=>e?e.onOpenFileRequest(t=>{t==="open"&&i.current&&i.current.click()}):void 0,[e]);const r=async n=>{var u;const t=(u=n.currentTarget.files)==null?void 0:u[0];t&&e&&await e.loadDocument({type:"buffer",pdfFile:{id:Math.random().toString(36).substring(2,15),content:await t.arrayBuffer()}})};return s.u(a.Fragment,{children:s.u("input",{ref:i,type:"file",accept:"application/pdf",style:{display:"none"},onChange:r})})}exports.FilePicker=P;exports.useLoaderCapability=c;exports.useLoaderPlugin=y;
//# sourceMappingURL=index.cjs.map
