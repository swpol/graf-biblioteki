"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const e=require("vue"),g=require("@embedpdf/models"),y=require("@embedpdf/core/vue"),m=require("@embedpdf/plugin-tiling"),f=()=>y.usePlugin(m.TilingPlugin.id),p=()=>y.useCapability(m.TilingPlugin.id),k=["src"],v=e.defineComponent({__name:"tile-img",props:{pageIndex:{},tile:{},scale:{},dpr:{default:()=>window.devicePixelRatio},style:{type:[Boolean,null,String,Object,Array]}},setup(c){const t=c,{provides:o}=p(),r=e.ref();let n=null,l=null;function u(){n&&(URL.revokeObjectURL(n),n=null)}function a(){l&&!n&&l.abort({code:g.PdfErrorCode.Cancelled,message:"canceled tile render"})}e.onMounted(()=>{if(!o.value)return;const i=o.value.renderTile({pageIndex:t.pageIndex,tile:e.toRaw(t.tile),dpr:t.dpr});l=i,i.wait(d=>{n=URL.createObjectURL(d),r.value=n,l=null},g.ignore)}),e.onBeforeUnmount(()=>{a(),u()});const s=t.scale/t.tile.srcScale;return(i,d)=>r.value?(e.openBlock(),e.createElementBlock("img",{key:0,src:r.value,style:e.normalizeStyle([{position:"absolute",left:i.tile.screenRect.origin.x*s+"px",top:i.tile.screenRect.origin.y*s+"px",width:i.tile.screenRect.size.width*s+"px",height:i.tile.screenRect.size.height*s+"px",display:"block"},t.style]),onLoad:u},null,44,k)):e.createCommentVNode("",!0)}}),b=e.defineComponent({__name:"tiling-layer",props:{pageIndex:{},scale:{},style:{type:[Boolean,null,String,Object,Array]}},setup(c){const t=c,o=e.ref([]),{provides:r}=p();let n;return e.onMounted(()=>{r.value&&(n=r.value.onTileRendering(l=>{o.value=l[t.pageIndex]??[]}))}),e.onBeforeUnmount(()=>{n==null||n()}),(l,u)=>(e.openBlock(),e.createElementBlock("div",e.mergeProps({style:l.style},l.$attrs),[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.value,a=>(e.openBlock(),e.createBlock(v,{key:a.id,pageIndex:l.pageIndex,tile:a,scale:l.scale},null,8,["pageIndex","tile","scale"]))),128))],16))}});exports.TileImg=v;exports.TilingLayer=b;exports.useTilingCapability=p;exports.useTilingPlugin=f;
//# sourceMappingURL=index.cjs.map
