"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const T=require("@embedpdf/core/react"),b=require("@embedpdf/plugin-tiling"),a=require("react/jsx-runtime"),s=require("react"),R=require("@embedpdf/models"),L=()=>T.usePlugin(b.TilingPlugin.id),d=()=>T.useCapability(b.TilingPlugin.id);function j({pageIndex:t,tile:r,dpr:u,scale:l}){const{provides:i}=d(),[n,o]=s.useState(),e=s.useRef(null),c=l/r.srcScale;s.useEffect(()=>{if(r.status==="ready"&&e.current||!i)return;const g=i.renderTile({pageIndex:t,tile:r,dpr:u});return g.wait(p=>{const f=URL.createObjectURL(p);e.current=f,o(f)},R.ignore),()=>{e.current?(URL.revokeObjectURL(e.current),e.current=null):g.abort({code:R.PdfErrorCode.Cancelled,message:"canceled render task"})}},[t,r.id]);const y=()=>{e.current&&(URL.revokeObjectURL(e.current),e.current=null)};return n?a.jsx("img",{src:n,onLoad:y,style:{position:"absolute",left:r.screenRect.origin.x*c,top:r.screenRect.origin.y*c,width:r.screenRect.size.width*c,height:r.screenRect.size.height*c,display:"block"}}):null}function v({pageIndex:t,scale:r,style:u,...l}){const{provides:i}=d(),[n,o]=s.useState([]);return s.useEffect(()=>{if(i)return i.onTileRendering(e=>o(e[t]))},[i]),a.jsx("div",{style:{...u},...l,children:n==null?void 0:n.map(e=>a.jsx(j,{pageIndex:t,tile:e,dpr:window.devicePixelRatio,scale:r},e.id))})}exports.TilingLayer=v;exports.useTilingCapability=d;exports.useTilingPlugin=L;
//# sourceMappingURL=index.cjs.map
