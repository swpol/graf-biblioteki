"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const u=require("@embedpdf/core/preact"),p=require("@embedpdf/plugin-viewport"),a=require("preact/jsx-runtime"),l=require("preact/hooks"),g=()=>u.usePlugin(p.ViewportPlugin.id),d=()=>u.useCapability(p.ViewportPlugin.id);function h(){const{plugin:t}=g(),o=l.useRef(null);return l.useLayoutEffect(()=>{if(!t)return;const e=o.current;if(!e)return;const c=()=>{const i=e.getBoundingClientRect();return{origin:{x:i.left,y:i.top},size:{width:i.width,height:i.height}}};t.registerBoundingRectProvider(c);const s=()=>{t.setViewportScrollMetrics({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft})};e.addEventListener("scroll",s);const r=new ResizeObserver(()=>{t.setViewportResizeMetrics({width:e.offsetWidth,height:e.offsetHeight,clientWidth:e.clientWidth,clientHeight:e.clientHeight,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight})});r.observe(e);const n=t.onScrollRequest(({x:i,y:f,behavior:w="auto"})=>{requestAnimationFrame(()=>{e.scrollTo({left:i,top:f,behavior:w})})});return()=>{t.registerBoundingRectProvider(null),e.removeEventListener("scroll",s),r.disconnect(),n()}},[t]),o}function v({children:t,...o}){const[e,c]=l.useState(0),s=h(),{provides:r}=d();l.useEffect(()=>{r&&c(r.getViewportGap())},[r]);const{style:n,...i}=o;return a.jsx("div",{...i,ref:s,style:{...typeof n=="object"?n:{},padding:`${e}px`},children:t})}exports.Viewport=v;exports.useViewportCapability=d;exports.useViewportPlugin=g;
//# sourceMappingURL=index.cjs.map
