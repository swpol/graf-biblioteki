"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const l=require("preact"),c=require("preact/hooks"),D=require("../jsxRuntime.module-BSRTsKji.cjs"),N=require("../viewport-plugin-C6NBwaM2.cjs");function G(e,o){for(var t in o)e[t]=o[t];return e}function h(e,o){for(var t in e)if(t!=="__source"&&!(t in o))return!0;for(var n in o)if(n!=="__source"&&e[n]!==o[n])return!0;return!1}function m(e,o){this.props=e,this.context=o}(m.prototype=new l.Component).isPureReactComponent=!0,m.prototype.shouldComponentUpdate=function(e,o){return h(this.props,e)||h(this.state,o)};var y=l.options.__b;l.options.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),y&&y(e)};var I=l.options.__e;l.options.__e=function(e,o,t,n){if(e.then){for(var r,s=o;s=s.__;)if((r=s.__c)&&r.__c)return o.__e==null&&(o.__e=t.__e,o.__k=t.__k),r.__c(e,o)}I(e,o,t,n)};var g=l.options.unmount;function U(e,o,t){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),e.__c.__H=null),(e=G({},e)).__c!=null&&(e.__c.__P===t&&(e.__c.__P=o),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(n){return U(n,o,t)})),e}function W(e,o,t){return e&&t&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(n){return W(n,o,t)}),e.__c&&e.__c.__P===o&&(e.__e&&t.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=t)),e}function v(){this.__u=0,this.o=null,this.__b=null}function H(e){var o=e.__.__c;return o&&o.__a&&o.__a(e)}function p(){this.i=null,this.l=null}l.options.unmount=function(e){var o=e.__c;o&&o.__R&&o.__R(),o&&32&e.__u&&(e.type=null),g&&g(e)},(v.prototype=new l.Component).__c=function(e,o){var t=o.__c,n=this;n.o==null&&(n.o=[]),n.o.push(t);var r=H(n.__v),s=!1,i=function(){s||(s=!0,t.__R=null,r?r(_):_())};t.__R=i;var _=function(){if(!--n.__u){if(n.state.__a){var u=n.state.__a;n.__v.__k[0]=W(u,u.__c.__P,u.__c.__O)}var a;for(n.setState({__a:n.__b=null});a=n.o.pop();)a.forceUpdate()}};n.__u++||32&o.__u||n.setState({__a:n.__b=n.__v.__k[0]}),e.then(i,i)},v.prototype.componentWillUnmount=function(){this.o=[]},v.prototype.render=function(e,o){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=U(this.__b,t,n.__O=n.__P)}this.__b=null}var r=o.__a&&l.createElement(l.Fragment,null,e.fallback);return r&&(r.__u&=-33),[l.createElement(l.Fragment,null,o.__a?null:e.children),r]};var b=function(e,o,t){if(++t[1]===t[0]&&e.l.delete(o),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(t=e.i;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;e.i=t=t[2]}};(p.prototype=new l.Component).__a=function(e){var o=this,t=H(o.__v),n=o.l.get(e);return n[0]++,function(r){var s=function(){o.props.revealOrder?(n.push(r),b(o,e,n)):r()};t?t(s):s()}},p.prototype.render=function(e){this.i=null,this.l=new Map;var o=l.toChildArray(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&o.reverse();for(var t=o.length;t--;)this.l.set(o[t],this.i=[1,0,this.i]);return e.children},p.prototype.componentDidUpdate=p.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(o,t){b(e,t,o)})};var Z=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,J=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,K=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Q=/[A-Z0-9]/g,X=typeof document<"u",Y=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};l.Component.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(l.Component.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(o){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:o})}})});var w=l.options.event;function ee(){}function te(){return this.cancelBubble}function oe(){return this.defaultPrevented}l.options.event=function(e){return w&&(e=w(e)),e.persist=ee,e.isPropagationStopped=te,e.isDefaultPrevented=oe,e.nativeEvent=e};var ne={enumerable:!1,configurable:!0,get:function(){return this.class}},P=l.options.vnode;l.options.vnode=function(e){typeof e.type=="string"&&function(o){var t=o.props,n=o.type,r={},s=n.indexOf("-")===-1;for(var i in t){var _=t[i];if(!(i==="value"&&"defaultValue"in t&&_==null||X&&i==="children"&&n==="noscript"||i==="class"||i==="className")){var u=i.toLowerCase();i==="defaultValue"&&"value"in t&&t.value==null?i="value":i==="download"&&_===!0?_="":u==="translate"&&_==="no"?_=!1:u[0]==="o"&&u[1]==="n"?u==="ondoubleclick"?i="ondblclick":u!=="onchange"||n!=="input"&&n!=="textarea"||Y(t.type)?u==="onfocus"?i="onfocusin":u==="onblur"?i="onfocusout":K.test(i)&&(i=u):u=i="oninput":s&&J.test(i)?i=i.replace(Q,"-$&").toLowerCase():_===null&&(_=void 0),u==="oninput"&&r[i=u]&&(i="oninputCapture"),r[i]=_}}n=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=l.toChildArray(t.children).forEach(function(a){a.props.selected=r.value.indexOf(a.props.value)!=-1})),n=="select"&&r.defaultValue!=null&&(r.value=l.toChildArray(t.children).forEach(function(a){a.props.selected=r.multiple?r.defaultValue.indexOf(a.props.value)!=-1:r.defaultValue==a.props.value})),t.class&&!t.className?(r.class=t.class,Object.defineProperty(r,"className",ne)):(t.className&&!t.class||t.class&&t.className)&&(r.class=r.className=t.className),o.props=r}(e),e.$$typeof=Z,P&&P(e)};var k=l.options.__r;l.options.__r=function(e){k&&k(e),e.__c};var C=l.options.diffed;l.options.diffed=function(e){C&&C(e);var o=e.props,t=e.__e;t!=null&&e.type==="textarea"&&"value"in o&&o.value!==t.value&&(t.value=o.value==null?"":o.value)};function re(e,o){for(var t in o)e[t]=o[t];return e}function R(e,o){for(var t in e)if(t!=="__source"&&!(t in o))return!0;for(var n in o)if(n!=="__source"&&e[n]!==o[n])return!0;return!1}function E(e,o){this.props=e,this.context=o}(E.prototype=new l.Component).isPureReactComponent=!0,E.prototype.shouldComponentUpdate=function(e,o){return R(this.props,e)||R(this.state,o)};var O=l.options.__b;l.options.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),O&&O(e)};var ie=l.options.__e;l.options.__e=function(e,o,t,n){if(e.then){for(var r,s=o;s=s.__;)if((r=s.__c)&&r.__c)return o.__e==null&&(o.__e=t.__e,o.__k=t.__k),r.__c(e,o)}ie(e,o,t,n)};var S=l.options.unmount;function z(e,o,t){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),e.__c.__H=null),(e=re({},e)).__c!=null&&(e.__c.__P===t&&(e.__c.__P=o),e.__c.__e=!0,e.__c=null),e.__k=e.__k&&e.__k.map(function(n){return z(n,o,t)})),e}function T(e,o,t){return e&&t&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(n){return T(n,o,t)}),e.__c&&e.__c.__P===o&&(e.__e&&t.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=t)),e}function d(){this.__u=0,this.o=null,this.__b=null}function j(e){var o=e.__.__c;return o&&o.__a&&o.__a(e)}function f(){this.i=null,this.l=null}l.options.unmount=function(e){var o=e.__c;o&&o.__R&&o.__R(),o&&32&e.__u&&(e.type=null),S&&S(e)},(d.prototype=new l.Component).__c=function(e,o){var t=o.__c,n=this;n.o==null&&(n.o=[]),n.o.push(t);var r=j(n.__v),s=!1,i=function(){s||(s=!0,t.__R=null,r?r(_):_())};t.__R=i;var _=function(){if(!--n.__u){if(n.state.__a){var u=n.state.__a;n.__v.__k[0]=T(u,u.__c.__P,u.__c.__O)}var a;for(n.setState({__a:n.__b=null});a=n.o.pop();)a.forceUpdate()}};n.__u++||32&o.__u||n.setState({__a:n.__b=n.__v.__k[0]}),e.then(i,i)},d.prototype.componentWillUnmount=function(){this.o=[]},d.prototype.render=function(e,o){if(this.__b){if(this.__v.__k){var t=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=z(this.__b,t,n.__O=n.__P)}this.__b=null}var r=o.__a&&l.createElement(l.Fragment,null,e.fallback);return r&&(r.__u&=-33),[l.createElement(l.Fragment,null,o.__a?null:e.children),r]};var V=function(e,o,t){if(++t[1]===t[0]&&e.l.delete(o),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.l.size))for(t=e.i;t;){for(;t.length>3;)t.pop()();if(t[1]<t[0])break;e.i=t=t[2]}};(f.prototype=new l.Component).__a=function(e){var o=this,t=j(o.__v),n=o.l.get(e);return n[0]++,function(r){var s=function(){o.props.revealOrder?(n.push(r),V(o,e,n)):r()};t?t(s):s()}},f.prototype.render=function(e){this.i=null,this.l=new Map;var o=l.toChildArray(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&o.reverse();for(var t=o.length;t--;)this.l.set(o[t],this.i=[1,0,this.i]);return e.children},f.prototype.componentDidUpdate=f.prototype.componentDidMount=function(){var e=this;this.l.forEach(function(o,t){V(e,t,o)})};var le=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,ue=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,_e=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,se=/[A-Z0-9]/g,ae=typeof document<"u",ce=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};l.Component.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(l.Component.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(o){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:o})}})});var x=l.options.event;function pe(){}function fe(){return this.cancelBubble}function ve(){return this.defaultPrevented}l.options.event=function(e){return x&&(e=x(e)),e.persist=pe,e.isPropagationStopped=fe,e.isDefaultPrevented=ve,e.nativeEvent=e};var de={enumerable:!1,configurable:!0,get:function(){return this.class}},$=l.options.vnode;l.options.vnode=function(e){typeof e.type=="string"&&function(o){var t=o.props,n=o.type,r={},s=n.indexOf("-")===-1;for(var i in t){var _=t[i];if(!(i==="value"&&"defaultValue"in t&&_==null||ae&&i==="children"&&n==="noscript"||i==="class"||i==="className")){var u=i.toLowerCase();i==="defaultValue"&&"value"in t&&t.value==null?i="value":i==="download"&&_===!0?_="":u==="translate"&&_==="no"?_=!1:u[0]==="o"&&u[1]==="n"?u==="ondoubleclick"?i="ondblclick":u!=="onchange"||n!=="input"&&n!=="textarea"||ce(t.type)?u==="onfocus"?i="onfocusin":u==="onblur"?i="onfocusout":_e.test(i)&&(i=u):u=i="oninput":s&&ue.test(i)?i=i.replace(se,"-$&").toLowerCase():_===null&&(_=void 0),u==="oninput"&&r[i=u]&&(i="oninputCapture"),r[i]=_}}n=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=l.toChildArray(t.children).forEach(function(a){a.props.selected=r.value.indexOf(a.props.value)!=-1})),n=="select"&&r.defaultValue!=null&&(r.value=l.toChildArray(t.children).forEach(function(a){a.props.selected=r.multiple?r.defaultValue.indexOf(a.props.value)!=-1:r.defaultValue==a.props.value})),t.class&&!t.className?(r.class=t.class,Object.defineProperty(r,"className",de)):(t.className&&!t.class||t.class&&t.className)&&(r.class=r.className=t.className),o.props=r}(e),e.$$typeof=le,$&&$(e)};var A=l.options.__r;l.options.__r=function(e){A&&A(e),e.__c};var L=l.options.diffed;l.options.diffed=function(e){L&&L(e);var o=e.props,t=e.__e;t!=null&&e.type==="textarea"&&"value"in o&&o.value!==t.value&&(t.value=o.value==null?"":o.value)};const he=l.createContext({registry:null,isInitializing:!0,pluginsReady:!1});function me(){const e=c.useContext(he);if(e===void 0)throw new Error("useCapability must be used within a PDFContext.Provider");const{registry:o,isInitializing:t}=e;if(t)return e;if(o===null)throw new Error("PDF registry failed to initialize properly");return e}function F(e){const{registry:o}=me();if(o===null)return{plugin:null,isLoading:!0,ready:new Promise(()=>{})};const t=o.getPlugin(e);if(!t)throw new Error(`Plugin ${e} not found`);return{plugin:t,isLoading:!1,ready:t.ready()}}function ye(e){const{plugin:o,isLoading:t,ready:n}=F(e);if(!o)return{provides:null,isLoading:t,ready:n};if(!o.provides)throw new Error(`Plugin ${e} does not provide a capability`);return{provides:o.provides(),isLoading:t,ready:n}}const M=()=>F(N.ViewportPlugin.id),q=()=>ye(N.ViewportPlugin.id);function B(){const{plugin:e}=M(),o=c.useRef(null);return c.useLayoutEffect(()=>{if(!e)return;const t=o.current;if(!t)return;const n=()=>{const _=t.getBoundingClientRect();return{origin:{x:_.left,y:_.top},size:{width:_.width,height:_.height}}};e.registerBoundingRectProvider(n);const r=()=>{e.setViewportScrollMetrics({scrollTop:t.scrollTop,scrollLeft:t.scrollLeft})};t.addEventListener("scroll",r);const s=new ResizeObserver(()=>{e.setViewportResizeMetrics({width:t.offsetWidth,height:t.offsetHeight,clientWidth:t.clientWidth,clientHeight:t.clientHeight,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft,scrollWidth:t.scrollWidth,scrollHeight:t.scrollHeight})});s.observe(t);const i=e.onScrollRequest(({x:_,y:u,behavior:a="auto"})=>{requestAnimationFrame(()=>{t.scrollTo({left:_,top:u,behavior:a})})});return()=>{e.registerBoundingRectProvider(null),t.removeEventListener("scroll",r),s.disconnect(),i()}},[e]),o}function ge({children:e,...o}){const[t,n]=c.useState(0),r=B(),{provides:s}=q();c.useEffect(()=>{s&&n(s.getViewportGap())},[s]);const{style:i,..._}=o;return D.u("div",{..._,ref:r,style:{...typeof i=="object"?i:{},padding:`${t}px`},children:e})}exports.Viewport=ge;exports.useViewportCapability=q;exports.useViewportPlugin=M;exports.useViewportRef=B;
//# sourceMappingURL=index.cjs.map
