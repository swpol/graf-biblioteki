{"version":3,"file":"index.cjs","sources":["../src/lib/manifest.ts","../src/lib/reducer.ts","../src/lib/index.ts"],"sourcesContent":["import { PluginManifest } from '@embedpdf/core';\n\nimport { ViewportPluginConfig } from './types';\n\nexport const VIEWPORT_PLUGIN_ID = 'viewport';\n\nexport const manifest: PluginManifest<ViewportPluginConfig> = {\n  id: VIEWPORT_PLUGIN_ID,\n  name: 'Viewport Plugin',\n  version: '1.0.0',\n  provides: ['viewport'],\n  requires: [],\n  optional: [],\n  defaultConfig: {\n    enabled: true,\n    viewportGap: 10,\n    scrollEndDelay: 300,\n  },\n};\n","import { Reducer } from '@embedpdf/core';\n\nimport {\n  SET_VIEWPORT_METRICS,\n  SET_VIEWPORT_SCROLL_METRICS,\n  SET_VIEWPORT_GAP,\n  ViewportAction,\n  SET_SCROLL_ACTIVITY,\n} from './actions';\nimport { ViewportState } from './types';\n\nexport const initialState: ViewportState = {\n  viewportGap: 0,\n  viewportMetrics: {\n    width: 0,\n    height: 0,\n    scrollTop: 0,\n    scrollLeft: 0,\n    clientWidth: 0,\n    clientHeight: 0,\n    scrollWidth: 0,\n    scrollHeight: 0,\n    relativePosition: {\n      x: 0,\n      y: 0,\n    },\n  },\n  isScrolling: false,\n};\n\nexport const viewportReducer: Reducer<ViewportState, ViewportAction> = (\n  state = initialState,\n  action,\n) => {\n  switch (action.type) {\n    case SET_VIEWPORT_GAP:\n      return { ...state, viewportGap: action.payload };\n    case SET_VIEWPORT_METRICS:\n      return {\n        ...state,\n        viewportMetrics: {\n          width: action.payload.width,\n          height: action.payload.height,\n          scrollTop: action.payload.scrollTop,\n          scrollLeft: action.payload.scrollLeft,\n          clientWidth: action.payload.clientWidth,\n          clientHeight: action.payload.clientHeight,\n          scrollWidth: action.payload.scrollWidth,\n          scrollHeight: action.payload.scrollHeight,\n          relativePosition: {\n            x:\n              action.payload.scrollWidth <= action.payload.clientWidth\n                ? 0\n                : action.payload.scrollLeft /\n                  (action.payload.scrollWidth - action.payload.clientWidth),\n            y:\n              action.payload.scrollHeight <= action.payload.clientHeight\n                ? 0\n                : action.payload.scrollTop /\n                  (action.payload.scrollHeight - action.payload.clientHeight),\n          },\n        },\n      };\n    case SET_VIEWPORT_SCROLL_METRICS:\n      return {\n        ...state,\n        viewportMetrics: {\n          ...state.viewportMetrics,\n          scrollTop: action.payload.scrollTop,\n          scrollLeft: action.payload.scrollLeft,\n        },\n        isScrolling: true,\n      };\n    case SET_SCROLL_ACTIVITY:\n      return { ...state, isScrolling: action.payload };\n    default:\n      return state;\n  }\n};\n","import { PluginPackage } from '@embedpdf/core';\n\nimport { ViewportAction } from './actions';\nimport { manifest, VIEWPORT_PLUGIN_ID } from './manifest';\nimport { viewportReducer, initialState } from './reducer';\nimport { ViewportPluginConfig, ViewportState } from './types';\nimport { ViewportPlugin } from './viewport-plugin';\n\nexport const ViewportPluginPackage: PluginPackage<\n  ViewportPlugin,\n  ViewportPluginConfig,\n  ViewportState,\n  ViewportAction\n> = {\n  manifest,\n  create: (registry, _engine, config) => new ViewportPlugin(VIEWPORT_PLUGIN_ID, registry, config),\n  reducer: viewportReducer,\n  initialState: initialState,\n};\n\nexport * from './viewport-plugin';\nexport * from './types';\nexport * from './manifest';\n"],"names":["VIEWPORT_PLUGIN_ID","manifest","initialState","viewportReducer","state","action","SET_VIEWPORT_GAP","SET_VIEWPORT_METRICS","SET_VIEWPORT_SCROLL_METRICS","SET_SCROLL_ACTIVITY","ViewportPluginPackage","registry","_engine","config","ViewportPlugin"],"mappings":"kIAIaA,EAAqB,WAErBC,EAAiD,CAC5D,GAAID,EACJ,KAAM,kBACN,QAAS,QACT,SAAU,CAAC,UAAU,EACrB,SAAU,CAAA,EACV,SAAU,CAAA,EACV,cAAe,CACb,QAAS,GACT,YAAa,GACb,eAAgB,GAAA,CAEpB,ECPaE,EAA8B,CACzC,YAAa,EACb,gBAAiB,CACf,MAAO,EACP,OAAQ,EACR,UAAW,EACX,WAAY,EACZ,YAAa,EACb,aAAc,EACd,YAAa,EACb,aAAc,EACd,iBAAkB,CAChB,EAAG,EACH,EAAG,CAAA,CACL,EAEF,YAAa,EACf,EAEaC,EAA0D,CACrEC,EAAQF,EACRG,IACG,CACH,OAAQA,EAAO,KAAA,CACb,KAAKC,EAAAA,iBACH,MAAO,CAAE,GAAGF,EAAO,YAAaC,EAAO,OAAA,EACzC,KAAKE,EAAAA,qBACH,MAAO,CACL,GAAGH,EACH,gBAAiB,CACf,MAAOC,EAAO,QAAQ,MACtB,OAAQA,EAAO,QAAQ,OACvB,UAAWA,EAAO,QAAQ,UAC1B,WAAYA,EAAO,QAAQ,WAC3B,YAAaA,EAAO,QAAQ,YAC5B,aAAcA,EAAO,QAAQ,aAC7B,YAAaA,EAAO,QAAQ,YAC5B,aAAcA,EAAO,QAAQ,aAC7B,iBAAkB,CAChB,EACEA,EAAO,QAAQ,aAAeA,EAAO,QAAQ,YACzC,EACAA,EAAO,QAAQ,YACdA,EAAO,QAAQ,YAAcA,EAAO,QAAQ,aACnD,EACEA,EAAO,QAAQ,cAAgBA,EAAO,QAAQ,aAC1C,EACAA,EAAO,QAAQ,WACdA,EAAO,QAAQ,aAAeA,EAAO,QAAQ,aAAA,CACtD,CACF,EAEJ,KAAKG,EAAAA,4BACH,MAAO,CACL,GAAGJ,EACH,gBAAiB,CACf,GAAGA,EAAM,gBACT,UAAWC,EAAO,QAAQ,UAC1B,WAAYA,EAAO,QAAQ,UAAA,EAE7B,YAAa,EAAA,EAEjB,KAAKI,EAAAA,oBACH,MAAO,CAAE,GAAGL,EAAO,YAAaC,EAAO,OAAA,EACzC,QACE,OAAOD,CAAA,CAEb,ECtEaM,EAKT,CACF,SAAAT,EACA,OAAQ,CAACU,EAAUC,EAASC,IAAW,IAAIC,iBAAed,EAAoBW,EAAUE,CAAM,EAC9F,QAASV,EACT,aAAAD,CACF"}