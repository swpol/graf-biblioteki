"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const t=require("vue"),u=require("@embedpdf/core/vue"),p=require("@embedpdf/plugin-viewport"),d=()=>u.usePlugin(p.ViewportPlugin.id),a=()=>u.useCapability(p.ViewportPlugin.id);function g(){const{plugin:c}=d(),n=t.ref(null);return t.onMounted(()=>{const o=c.value,e=n.value;if(!e||!o)return;const s=()=>{const i=e.getBoundingClientRect();return{origin:{x:i.left,y:i.top},size:{width:i.width,height:i.height}}};o.registerBoundingRectProvider(s);const r=()=>{o.setViewportScrollMetrics({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft})};e.addEventListener("scroll",r);const l=new ResizeObserver(()=>{o.setViewportResizeMetrics({width:e.offsetWidth,height:e.offsetHeight,clientWidth:e.clientWidth,clientHeight:e.clientHeight,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight})});l.observe(e);const f=o.onScrollRequest(({x:i,y:v,behavior:w="auto"})=>{requestAnimationFrame(()=>{e.scrollTo({left:i,top:v,behavior:w})})});t.onUnmounted(()=>{o.registerBoundingRectProvider(null),e.removeEventListener("scroll",r),l.disconnect(),f()})}),n}const h=t.defineComponent({__name:"viewport",setup(c){const n=t.useAttrs(),{provides:o}=a(),e=t.ref(0);t.watch(o,r=>{r&&(e.value=r.getViewportGap())},{immediate:!0});const s=g();return(r,l)=>(t.openBlock(),t.createElementBlock("div",t.mergeProps({ref_key:"viewportRef",ref:s},t.unref(n),{style:{padding:`${e.value}px`}}),[t.renderSlot(r.$slots,"default")],16))}});exports.Viewport=h;exports.useViewportCapability=a;exports.useViewportPlugin=d;exports.useViewportRef=g;
//# sourceMappingURL=index.cjs.map
