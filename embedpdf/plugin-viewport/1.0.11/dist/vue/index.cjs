"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const t=require("vue"),d=require("../viewport-plugin-C6NBwaM2.cjs"),h=Symbol("pdfKey");function m(){const i=t.inject(h);if(!i)throw new Error("useRegistry must be used inside <EmbedPDF>");return i}function p(i){const{registry:o}=m(),r=t.shallowRef(null),e=t.ref(!0),s=t.ref(new Promise(()=>{})),n=()=>{var l;if(!o.value)return;const u=o.value.getPlugin(i);if(!u)throw new Error(`Plugin ${i} not found`);r.value=u,e.value=!1,s.value=((l=u.ready)==null?void 0:l.call(u))??Promise.resolve()};return t.onMounted(n),t.watch(o,n),{plugin:r,isLoading:e,ready:s}}function P(i){const{plugin:o,isLoading:r,ready:e}=p(i);return{provides:t.computed(()=>{if(!o.value)return null;if(!o.value.provides)throw new Error(`Plugin ${i} does not implement provides()`);return o.value.provides()}),isLoading:r,ready:e}}const a=()=>p(d.ViewportPlugin.id),f=()=>P(d.ViewportPlugin.id);function g(){const{plugin:i}=a(),o=t.ref(null);return t.onMounted(()=>{const r=i.value,e=o.value;if(!e||!r)return;const s=()=>{const c=e.getBoundingClientRect();return{origin:{x:c.left,y:c.top},size:{width:c.width,height:c.height}}};r.registerBoundingRectProvider(s);const n=()=>{r.setViewportScrollMetrics({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft})};e.addEventListener("scroll",n);const l=new ResizeObserver(()=>{r.setViewportResizeMetrics({width:e.offsetWidth,height:e.offsetHeight,clientWidth:e.clientWidth,clientHeight:e.clientHeight,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight})});l.observe(e);const u=r.onScrollRequest(({x:c,y:v,behavior:w="auto"})=>{requestAnimationFrame(()=>{e.scrollTo({left:c,top:v,behavior:w})})});t.onUnmounted(()=>{r.registerBoundingRectProvider(null),e.removeEventListener("scroll",n),l.disconnect(),u()})}),o}const R=t.defineComponent({__name:"viewport",setup(i){const o=t.useAttrs(),{provides:r}=f(),e=t.ref(0);t.watch(r,n=>{n&&(e.value=n.getViewportGap())},{immediate:!0});const s=g();return(n,l)=>(t.openBlock(),t.createElementBlock("div",t.mergeProps({ref_key:"viewportRef",ref:s},t.unref(o),{style:{padding:`${e.value}px`}}),[t.renderSlot(n.$slots,"default")],16))}});exports.Viewport=R;exports.useViewportCapability=f;exports.useViewportPlugin=a;exports.useViewportRef=g;
//# sourceMappingURL=index.cjs.map
