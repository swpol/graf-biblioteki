import{jsx as e}from"react/jsx-runtime";var t,n,r,o,i,a,s,l,u,d,c,m,h={},g=[],F=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,p=Array.isArray;function _(e,t){for(var n in t)e[n]=t[n];return e}function b(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function f(e,n,r){var o,i,a,s={};for(a in n)"key"==a?o=n[a]:"ref"==a?i=n[a]:s[a]=n[a];if(arguments.length>2&&(s.children=arguments.length>3?t.call(arguments,2):r),"function"==typeof e&&null!=e.defaultProps)for(a in e.defaultProps)void 0===s[a]&&(s[a]=e.defaultProps[a]);return P(e,s,o,i,null)}function P(e,t,o,i,a){var s={type:e,props:t,key:o,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:null==a?++r:a,__i:-1,__u:0};return null==a&&null!=n.vnode&&n.vnode(s),s}function D(e){return e.children}function v(e,t){this.props=e,this.context=t}function y(e,t){if(null==t)return e.__?y(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?y(e):null}function w(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return w(e)}}function x(e){(!e.__d&&(e.__d=!0)&&o.push(e)&&!A.__r++||i!==n.debounceRendering)&&((i=n.debounceRendering)||a)(A)}function A(){for(var e,t,r,i,a,l,u,d=1;o.length;)o.length>d&&o.sort(s),e=o.shift(),d=o.length,e.__d&&(r=void 0,a=(i=(t=e).__v).__e,l=[],u=[],t.__P&&((r=_({},i)).__v=i.__v+1,n.vnode&&n.vnode(r),k(t.__P,r,i,t.__n,t.__P.namespaceURI,32&i.__u?[a]:null,l,null==a?y(i):a,!!(32&i.__u),u),r.__v=i.__v,r.__.__k[r.__i]=r,I(l,r,u),r.__e!=a&&w(r)));A.__r=0}function S(e,t,n,r,o,i,a,s,l,u,d){var c,m,F,_,b,f,v=r&&r.__k||g,w=t.length;for(l=function(e,t,n,r,o){var i,a,s,l,u,d=n.length,c=d,m=0;for(e.__k=new Array(o),i=0;i<o;i++)null!=(a=t[i])&&"boolean"!=typeof a&&"function"!=typeof a?(l=i+m,(a=e.__k[i]="string"==typeof a||"number"==typeof a||"bigint"==typeof a||a.constructor==String?P(null,a,null,null,null):p(a)?P(D,{children:a},null,null,null):void 0===a.constructor&&a.__b>0?P(a.type,a.props,a.key,a.ref?a.ref:null,a.__v):a).__=e,a.__b=e.__b+1,s=null,-1!==(u=a.__i=C(a,n,l,c))&&(c--,(s=n[u])&&(s.__u|=2)),null==s||null===s.__v?(-1==u&&(o>d?m--:o<d&&m++),"function"!=typeof a.type&&(a.__u|=4)):u!=l&&(u==l-1?m--:u==l+1?m++:(u>l?m--:m++,a.__u|=4))):e.__k[i]=null;if(c)for(i=0;i<d;i++)null!=(s=n[i])&&!(2&s.__u)&&(s.__e==r&&(r=y(s)),L(s,s));return r}(n,t,v,l,w),c=0;c<w;c++)null!=(F=n.__k[c])&&(m=-1===F.__i?h:v[F.__i]||h,F.__i=c,f=k(e,F,m,o,i,a,s,l,u,d),_=F.__e,F.ref&&m.ref!=F.ref&&(m.ref&&R(m.ref,null,F),d.push(F.ref,F.__c||_,F)),null==b&&null!=_&&(b=_),4&F.__u||m.__k===F.__k?l=E(F,l,e):"function"==typeof F.type&&void 0!==f?l=f:_&&(l=_.nextSibling),F.__u&=-7);return n.__e=b,l}function E(e,t,n){var r,o;if("function"==typeof e.type){for(r=e.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=e,t=E(r[o],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=y(e)),n.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8==t.nodeType);return t}function C(e,t,n,r){var o,i,a=e.key,s=e.type,l=t[n];if(null===l&&null==e.key||l&&a==l.key&&s===l.type&&!(2&l.__u))return n;if(r>(null==l||2&l.__u?0:1))for(o=n-1,i=n+1;o>=0||i<t.length;){if(o>=0){if((l=t[o])&&!(2&l.__u)&&a==l.key&&s===l.type)return o;o--}if(i<t.length){if((l=t[i])&&!(2&l.__u)&&a==l.key&&s===l.type)return i;i++}}return-1}function M(e,t,n){"-"==t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||F.test(t)?n:n+"px"}function T(e,t,n,r,o){var i;e:if("style"==t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||M(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||M(e.style,t,n[t])}else if("o"==t[0]&&"n"==t[1])i=t!=(t=t.replace(l,"$1")),t=t.toLowerCase()in e||"onFocusOut"==t||"onFocusIn"==t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r?n.t=r.t:(n.t=u,e.addEventListener(t,i?c:d,i)):e.removeEventListener(t,i?c:d,i);else{if("http://www.w3.org/2000/svg"==o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!=t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function G(e){return function(t){if(this.l){var r=this.l[t.type+e];if(null==t.u)t.u=u++;else if(t.u<r.t)return;return r(n.event?n.event(t):t)}}}function k(e,r,o,i,a,s,l,u,d,c){var m,g,F,f,P,w,x,A,E,C,M,G,k,I,R,L,N,B=r.type;if(void 0!==r.constructor)return null;128&o.__u&&(d=!!(32&o.__u),s=[u=r.__e=o.__e]),(m=n.__b)&&m(r);e:if("function"==typeof B)try{if(A=r.props,E="prototype"in B&&B.prototype.render,C=(m=B.contextType)&&i[m.__c],M=m?C?C.props.value:m.__:i,o.__c?x=(g=r.__c=o.__c).__=g.__E:(E?r.__c=g=new B(A,M):(r.__c=g=new v(A,M),g.constructor=B,g.render=j),C&&C.sub(g),g.props=A,g.state||(g.state={}),g.context=M,g.__n=i,F=g.__d=!0,g.__h=[],g._sb=[]),E&&null==g.__s&&(g.__s=g.state),E&&null!=B.getDerivedStateFromProps&&(g.__s==g.state&&(g.__s=_({},g.__s)),_(g.__s,B.getDerivedStateFromProps(A,g.__s))),f=g.props,P=g.state,g.__v=r,F)E&&null==B.getDerivedStateFromProps&&null!=g.componentWillMount&&g.componentWillMount(),E&&null!=g.componentDidMount&&g.__h.push(g.componentDidMount);else{if(E&&null==B.getDerivedStateFromProps&&A!==f&&null!=g.componentWillReceiveProps&&g.componentWillReceiveProps(A,M),!g.__e&&(null!=g.shouldComponentUpdate&&!1===g.shouldComponentUpdate(A,g.__s,M)||r.__v==o.__v)){for(r.__v!=o.__v&&(g.props=A,g.state=g.__s,g.__d=!1),r.__e=o.__e,r.__k=o.__k,r.__k.some((function(e){e&&(e.__=r)})),G=0;G<g._sb.length;G++)g.__h.push(g._sb[G]);g._sb=[],g.__h.length&&l.push(g);break e}null!=g.componentWillUpdate&&g.componentWillUpdate(A,g.__s,M),E&&null!=g.componentDidUpdate&&g.__h.push((function(){g.componentDidUpdate(f,P,w)}))}if(g.context=M,g.props=A,g.__P=e,g.__e=!1,k=n.__r,I=0,E){for(g.state=g.__s,g.__d=!1,k&&k(r),m=g.render(g.props,g.state,g.context),R=0;R<g._sb.length;R++)g.__h.push(g._sb[R]);g._sb=[]}else do{g.__d=!1,k&&k(r),m=g.render(g.props,g.state,g.context),g.state=g.__s}while(g.__d&&++I<25);g.state=g.__s,null!=g.getChildContext&&(i=_(_({},i),g.getChildContext())),E&&!F&&null!=g.getSnapshotBeforeUpdate&&(w=g.getSnapshotBeforeUpdate(f,P)),L=m,null!=m&&m.type===D&&null==m.key&&(L=O(m.props.children)),u=S(e,p(L)?L:[L],r,o,i,a,s,l,u,d,c),g.base=r.__e,r.__u&=-161,g.__h.length&&l.push(g),x&&(g.__E=g.__=null)}catch(e){if(r.__v=null,d||null!=s)if(e.then){for(r.__u|=d?160:128;u&&8==u.nodeType&&u.nextSibling;)u=u.nextSibling;s[s.indexOf(u)]=null,r.__e=u}else for(N=s.length;N--;)b(s[N]);else r.__e=o.__e,r.__k=o.__k;n.__e(e,r,o)}else null==s&&r.__v==o.__v?(r.__k=o.__k,r.__e=o.__e):u=r.__e=function(e,r,o,i,a,s,l,u,d){var c,m,g,F,_,f,P,D=o.props,v=r.props,w=r.type;if("svg"==w?a="http://www.w3.org/2000/svg":"math"==w?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),null!=s)for(c=0;c<s.length;c++)if((_=s[c])&&"setAttribute"in _==!!w&&(w?_.localName==w:3==_.nodeType)){e=_,s[c]=null;break}if(null==e){if(null==w)return document.createTextNode(v);e=document.createElementNS(a,w,v.is&&v),u&&(n.__m&&n.__m(r,s),u=!1),s=null}if(null===w)D===v||u&&e.data===v||(e.data=v);else{if(s=s&&t.call(e.childNodes),D=o.props||h,!u&&null!=s)for(D={},c=0;c<e.attributes.length;c++)D[(_=e.attributes[c]).name]=_.value;for(c in D)if(_=D[c],"children"==c);else if("dangerouslySetInnerHTML"==c)g=_;else if(!(c in v)){if("value"==c&&"defaultValue"in v||"checked"==c&&"defaultChecked"in v)continue;T(e,c,null,_,a)}for(c in v)_=v[c],"children"==c?F=_:"dangerouslySetInnerHTML"==c?m=_:"value"==c?f=_:"checked"==c?P=_:u&&"function"!=typeof _||D[c]===_||T(e,c,_,D[c],a);if(m)u||g&&(m.__html===g.__html||m.__html===e.innerHTML)||(e.innerHTML=m.__html),r.__k=[];else if(g&&(e.innerHTML=""),S("template"===r.type?e.content:e,p(F)?F:[F],r,o,i,"foreignObject"==w?"http://www.w3.org/1999/xhtml":a,s,l,s?s[0]:o.__k&&y(o,0),u,d),null!=s)for(c=s.length;c--;)b(s[c]);u||(c="value","progress"==w&&null==f?e.removeAttribute("value"):void 0!==f&&(f!==e[c]||"progress"==w&&!f||"option"==w&&f!==D[c])&&T(e,c,f,D[c],a),c="checked",void 0!==P&&P!==e[c]&&T(e,c,P,D[c],a))}return e}(o.__e,r,o,i,a,s,l,d,c);return(m=n.diffed)&&m(r),128&r.__u?void 0:u}function I(e,t,r){for(var o=0;o<r.length;o++)R(r[o],r[++o],r[++o]);n.__c&&n.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){n.__e(e,t.__v)}}))}function O(e){return"object"!=typeof e||null==e?e:p(e)?e.map(O):_({},e)}function R(e,t,r){try{if("function"==typeof e){var o="function"==typeof e.__u;o&&e.__u(),o&&null==t||(e.__u=e(t))}else e.current=t}catch(e){n.__e(e,r)}}function L(e,t,r){var o,i;if(n.unmount&&n.unmount(e),(o=e.ref)&&(o.current&&o.current!==e.__e||R(o,null,t)),null!=(o=e.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(e){n.__e(e,t)}o.base=o.__P=null}if(o=e.__k)for(i=0;i<o.length;i++)o[i]&&L(o[i],t,r||"function"!=typeof e.type);r||b(e.__e),e.__c=e.__=e.__e=void 0}function j(e,t,n){return this.constructor(e,n)}function N(e,r,o){var i,a,s,l;r==document&&(r=document.documentElement),n.__&&n.__(e,r),a=(i="function"==typeof o)?null:o&&o.__k||r.__k,s=[],l=[],k(r,e=(!i&&o||r).__k=f(D,null,[e]),a||h,h,r.namespaceURI,!i&&o?[o]:a?null:r.firstChild?t.call(r.childNodes):null,s,!i&&o?o:a?a.__e:r.firstChild,i,l),I(s,e,l)}function B(e){function t(e){var n,r;return this.getChildContext||(n=new Set,(r={})[t.__c]=this,this.getChildContext=function(){return r},this.componentWillUnmount=function(){n=null},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.forEach((function(e){e.__e=!0,x(e)}))},this.sub=function(e){n.add(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n&&n.delete(e),t&&t.call(e)}}),e.children}return t.__c="__cC"+m++,t.__=e,t.Provider=t.__l=(t.Consumer=function(e,t){return e.children(t)}).contextType=t,t}t=g.slice,n={__e:function(e,t,n,r){for(var o,i,a;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&null!=i.getDerivedStateFromError&&(o.setState(i.getDerivedStateFromError(e)),a=o.__d),null!=o.componentDidCatch&&(o.componentDidCatch(e,r||{}),a=o.__d),a)return o.__E=o}catch(t){e=t}throw e}},r=0,v.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=_({},this.state),"function"==typeof e&&(e=e(_({},n),this.props)),e&&_(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),x(this))},v.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),x(this))},v.prototype.render=D,o=[],a="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,s=function(e,t){return e.__v.__b-t.__v.__b},A.__r=0,l=/(PointerCapture)$|Capture$/i,u=0,d=G(!1),c=G(!0),m=0;var z='/*! tailwindcss v4.0.6 | MIT License | https://tailwindcss.com */\n@layer theme, base, components, utilities;\n@layer theme {\n  :root, :host {\n    --font-sans: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji",\n      "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";\n    --font-serif: ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;\n    --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",\n      "Courier New", monospace;\n    --color-red-50: oklch(97.1% 0.013 17.38);\n    --color-red-100: oklch(93.6% 0.032 17.717);\n    --color-red-200: oklch(88.5% 0.062 18.334);\n    --color-red-300: oklch(80.8% 0.114 19.571);\n    --color-red-400: oklch(70.4% 0.191 22.216);\n    --color-red-500: oklch(63.7% 0.237 25.331);\n    --color-red-600: oklch(57.7% 0.245 27.325);\n    --color-red-700: oklch(50.5% 0.213 27.518);\n    --color-red-800: oklch(44.4% 0.177 26.899);\n    --color-red-900: oklch(39.6% 0.141 25.723);\n    --color-red-950: oklch(25.8% 0.092 26.042);\n    --color-orange-50: oklch(98% 0.016 73.684);\n    --color-orange-100: oklch(95.4% 0.038 75.164);\n    --color-orange-200: oklch(90.1% 0.076 70.697);\n    --color-orange-300: oklch(83.7% 0.128 66.29);\n    --color-orange-400: oklch(75% 0.183 55.934);\n    --color-orange-500: oklch(70.5% 0.213 47.604);\n    --color-orange-600: oklch(64.6% 0.222 41.116);\n    --color-orange-700: oklch(55.3% 0.195 38.402);\n    --color-orange-800: oklch(47% 0.157 37.304);\n    --color-orange-900: oklch(40.8% 0.123 38.172);\n    --color-orange-950: oklch(26.6% 0.079 36.259);\n    --color-amber-50: oklch(98.7% 0.022 95.277);\n    --color-amber-100: oklch(96.2% 0.059 95.617);\n    --color-amber-200: oklch(92.4% 0.12 95.746);\n    --color-amber-300: oklch(87.9% 0.169 91.605);\n    --color-amber-400: oklch(82.8% 0.189 84.429);\n    --color-amber-500: oklch(76.9% 0.188 70.08);\n    --color-amber-600: oklch(66.6% 0.179 58.318);\n    --color-amber-700: oklch(55.5% 0.163 48.998);\n    --color-amber-800: oklch(47.3% 0.137 46.201);\n    --color-amber-900: oklch(41.4% 0.112 45.904);\n    --color-amber-950: oklch(27.9% 0.077 45.635);\n    --color-yellow-50: oklch(98.7% 0.026 102.212);\n    --color-yellow-100: oklch(97.3% 0.071 103.193);\n    --color-yellow-200: oklch(94.5% 0.129 101.54);\n    --color-yellow-300: oklch(90.5% 0.182 98.111);\n    --color-yellow-400: oklch(85.2% 0.199 91.936);\n    --color-yellow-500: oklch(79.5% 0.184 86.047);\n    --color-yellow-600: oklch(68.1% 0.162 75.834);\n    --color-yellow-700: oklch(55.4% 0.135 66.442);\n    --color-yellow-800: oklch(47.6% 0.114 61.907);\n    --color-yellow-900: oklch(42.1% 0.095 57.708);\n    --color-yellow-950: oklch(28.6% 0.066 53.813);\n    --color-lime-50: oklch(98.6% 0.031 120.757);\n    --color-lime-100: oklch(96.7% 0.067 122.328);\n    --color-lime-200: oklch(93.8% 0.127 124.321);\n    --color-lime-300: oklch(89.7% 0.196 126.665);\n    --color-lime-400: oklch(84.1% 0.238 128.85);\n    --color-lime-500: oklch(76.8% 0.233 130.85);\n    --color-lime-600: oklch(64.8% 0.2 131.684);\n    --color-lime-700: oklch(53.2% 0.157 131.589);\n    --color-lime-800: oklch(45.3% 0.124 130.933);\n    --color-lime-900: oklch(40.5% 0.101 131.063);\n    --color-lime-950: oklch(27.4% 0.072 132.109);\n    --color-green-50: oklch(98.2% 0.018 155.826);\n    --color-green-100: oklch(96.2% 0.044 156.743);\n    --color-green-200: oklch(92.5% 0.084 155.995);\n    --color-green-300: oklch(87.1% 0.15 154.449);\n    --color-green-400: oklch(79.2% 0.209 151.711);\n    --color-green-500: oklch(72.3% 0.219 149.579);\n    --color-green-600: oklch(62.7% 0.194 149.214);\n    --color-green-700: oklch(52.7% 0.154 150.069);\n    --color-green-800: oklch(44.8% 0.119 151.328);\n    --color-green-900: oklch(39.3% 0.095 152.535);\n    --color-green-950: oklch(26.6% 0.065 152.934);\n    --color-emerald-50: oklch(97.9% 0.021 166.113);\n    --color-emerald-100: oklch(95% 0.052 163.051);\n    --color-emerald-200: oklch(90.5% 0.093 164.15);\n    --color-emerald-300: oklch(84.5% 0.143 164.978);\n    --color-emerald-400: oklch(76.5% 0.177 163.223);\n    --color-emerald-500: oklch(69.6% 0.17 162.48);\n    --color-emerald-600: oklch(59.6% 0.145 163.225);\n    --color-emerald-700: oklch(50.8% 0.118 165.612);\n    --color-emerald-800: oklch(43.2% 0.095 166.913);\n    --color-emerald-900: oklch(37.8% 0.077 168.94);\n    --color-emerald-950: oklch(26.2% 0.051 172.552);\n    --color-teal-50: oklch(98.4% 0.014 180.72);\n    --color-teal-100: oklch(95.3% 0.051 180.801);\n    --color-teal-200: oklch(91% 0.096 180.426);\n    --color-teal-300: oklch(85.5% 0.138 181.071);\n    --color-teal-400: oklch(77.7% 0.152 181.912);\n    --color-teal-500: oklch(70.4% 0.14 182.503);\n    --color-teal-600: oklch(60% 0.118 184.704);\n    --color-teal-700: oklch(51.1% 0.096 186.391);\n    --color-teal-800: oklch(43.7% 0.078 188.216);\n    --color-teal-900: oklch(38.6% 0.063 188.416);\n    --color-teal-950: oklch(27.7% 0.046 192.524);\n    --color-cyan-50: oklch(98.4% 0.019 200.873);\n    --color-cyan-100: oklch(95.6% 0.045 203.388);\n    --color-cyan-200: oklch(91.7% 0.08 205.041);\n    --color-cyan-300: oklch(86.5% 0.127 207.078);\n    --color-cyan-400: oklch(78.9% 0.154 211.53);\n    --color-cyan-500: oklch(71.5% 0.143 215.221);\n    --color-cyan-600: oklch(60.9% 0.126 221.723);\n    --color-cyan-700: oklch(52% 0.105 223.128);\n    --color-cyan-800: oklch(45% 0.085 224.283);\n    --color-cyan-900: oklch(39.8% 0.07 227.392);\n    --color-cyan-950: oklch(30.2% 0.056 229.695);\n    --color-sky-50: oklch(97.7% 0.013 236.62);\n    --color-sky-100: oklch(95.1% 0.026 236.824);\n    --color-sky-200: oklch(90.1% 0.058 230.902);\n    --color-sky-300: oklch(82.8% 0.111 230.318);\n    --color-sky-400: oklch(74.6% 0.16 232.661);\n    --color-sky-500: oklch(68.5% 0.169 237.323);\n    --color-sky-600: oklch(58.8% 0.158 241.966);\n    --color-sky-700: oklch(50% 0.134 242.749);\n    --color-sky-800: oklch(44.3% 0.11 240.79);\n    --color-sky-900: oklch(39.1% 0.09 240.876);\n    --color-sky-950: oklch(29.3% 0.066 243.157);\n    --color-blue-50: oklch(97% 0.014 254.604);\n    --color-blue-100: oklch(93.2% 0.032 255.585);\n    --color-blue-200: oklch(88.2% 0.059 254.128);\n    --color-blue-300: oklch(80.9% 0.105 251.813);\n    --color-blue-400: oklch(70.7% 0.165 254.624);\n    --color-blue-500: oklch(62.3% 0.214 259.815);\n    --color-blue-600: oklch(54.6% 0.245 262.881);\n    --color-blue-700: oklch(48.8% 0.243 264.376);\n    --color-blue-800: oklch(42.4% 0.199 265.638);\n    --color-blue-900: oklch(37.9% 0.146 265.522);\n    --color-blue-950: oklch(28.2% 0.091 267.935);\n    --color-indigo-50: oklch(96.2% 0.018 272.314);\n    --color-indigo-100: oklch(93% 0.034 272.788);\n    --color-indigo-200: oklch(87% 0.065 274.039);\n    --color-indigo-300: oklch(78.5% 0.115 274.713);\n    --color-indigo-400: oklch(67.3% 0.182 276.935);\n    --color-indigo-500: oklch(58.5% 0.233 277.117);\n    --color-indigo-600: oklch(51.1% 0.262 276.966);\n    --color-indigo-700: oklch(45.7% 0.24 277.023);\n    --color-indigo-800: oklch(39.8% 0.195 277.366);\n    --color-indigo-900: oklch(35.9% 0.144 278.697);\n    --color-indigo-950: oklch(25.7% 0.09 281.288);\n    --color-violet-50: oklch(96.9% 0.016 293.756);\n    --color-violet-100: oklch(94.3% 0.029 294.588);\n    --color-violet-200: oklch(89.4% 0.057 293.283);\n    --color-violet-300: oklch(81.1% 0.111 293.571);\n    --color-violet-400: oklch(70.2% 0.183 293.541);\n    --color-violet-500: oklch(60.6% 0.25 292.717);\n    --color-violet-600: oklch(54.1% 0.281 293.009);\n    --color-violet-700: oklch(49.1% 0.27 292.581);\n    --color-violet-800: oklch(43.2% 0.232 292.759);\n    --color-violet-900: oklch(38% 0.189 293.745);\n    --color-violet-950: oklch(28.3% 0.141 291.089);\n    --color-purple-50: oklch(97.7% 0.014 308.299);\n    --color-purple-100: oklch(94.6% 0.033 307.174);\n    --color-purple-200: oklch(90.2% 0.063 306.703);\n    --color-purple-300: oklch(82.7% 0.119 306.383);\n    --color-purple-400: oklch(71.4% 0.203 305.504);\n    --color-purple-500: oklch(62.7% 0.265 303.9);\n    --color-purple-600: oklch(55.8% 0.288 302.321);\n    --color-purple-700: oklch(49.6% 0.265 301.924);\n    --color-purple-800: oklch(43.8% 0.218 303.724);\n    --color-purple-900: oklch(38.1% 0.176 304.987);\n    --color-purple-950: oklch(29.1% 0.149 302.717);\n    --color-fuchsia-50: oklch(97.7% 0.017 320.058);\n    --color-fuchsia-100: oklch(95.2% 0.037 318.852);\n    --color-fuchsia-200: oklch(90.3% 0.076 319.62);\n    --color-fuchsia-300: oklch(83.3% 0.145 321.434);\n    --color-fuchsia-400: oklch(74% 0.238 322.16);\n    --color-fuchsia-500: oklch(66.7% 0.295 322.15);\n    --color-fuchsia-600: oklch(59.1% 0.293 322.896);\n    --color-fuchsia-700: oklch(51.8% 0.253 323.949);\n    --color-fuchsia-800: oklch(45.2% 0.211 324.591);\n    --color-fuchsia-900: oklch(40.1% 0.17 325.612);\n    --color-fuchsia-950: oklch(29.3% 0.136 325.661);\n    --color-pink-50: oklch(97.1% 0.014 343.198);\n    --color-pink-100: oklch(94.8% 0.028 342.258);\n    --color-pink-200: oklch(89.9% 0.061 343.231);\n    --color-pink-300: oklch(82.3% 0.12 346.018);\n    --color-pink-400: oklch(71.8% 0.202 349.761);\n    --color-pink-500: oklch(65.6% 0.241 354.308);\n    --color-pink-600: oklch(59.2% 0.249 0.584);\n    --color-pink-700: oklch(52.5% 0.223 3.958);\n    --color-pink-800: oklch(45.9% 0.187 3.815);\n    --color-pink-900: oklch(40.8% 0.153 2.432);\n    --color-pink-950: oklch(28.4% 0.109 3.907);\n    --color-rose-50: oklch(96.9% 0.015 12.422);\n    --color-rose-100: oklch(94.1% 0.03 12.58);\n    --color-rose-200: oklch(89.2% 0.058 10.001);\n    --color-rose-300: oklch(81% 0.117 11.638);\n    --color-rose-400: oklch(71.2% 0.194 13.428);\n    --color-rose-500: oklch(64.5% 0.246 16.439);\n    --color-rose-600: oklch(58.6% 0.253 17.585);\n    --color-rose-700: oklch(51.4% 0.222 16.935);\n    --color-rose-800: oklch(45.5% 0.188 13.697);\n    --color-rose-900: oklch(41% 0.159 10.272);\n    --color-rose-950: oklch(27.1% 0.105 12.094);\n    --color-slate-50: oklch(98.4% 0.003 247.858);\n    --color-slate-100: oklch(96.8% 0.007 247.896);\n    --color-slate-200: oklch(92.9% 0.013 255.508);\n    --color-slate-300: oklch(86.9% 0.022 252.894);\n    --color-slate-400: oklch(70.4% 0.04 256.788);\n    --color-slate-500: oklch(55.4% 0.046 257.417);\n    --color-slate-600: oklch(44.6% 0.043 257.281);\n    --color-slate-700: oklch(37.2% 0.044 257.287);\n    --color-slate-800: oklch(27.9% 0.041 260.031);\n    --color-slate-900: oklch(20.8% 0.042 265.755);\n    --color-slate-950: oklch(12.9% 0.042 264.695);\n    --color-gray-50: oklch(98.5% 0.002 247.839);\n    --color-gray-100: oklch(96.7% 0.003 264.542);\n    --color-gray-200: oklch(92.8% 0.006 264.531);\n    --color-gray-300: oklch(87.2% 0.01 258.338);\n    --color-gray-400: oklch(70.7% 0.022 261.325);\n    --color-gray-500: oklch(55.1% 0.027 264.364);\n    --color-gray-600: oklch(44.6% 0.03 256.802);\n    --color-gray-700: oklch(37.3% 0.034 259.733);\n    --color-gray-800: oklch(27.8% 0.033 256.848);\n    --color-gray-900: oklch(21% 0.034 264.665);\n    --color-gray-950: oklch(13% 0.028 261.692);\n    --color-zinc-50: oklch(98.5% 0 0);\n    --color-zinc-100: oklch(96.7% 0.001 286.375);\n    --color-zinc-200: oklch(92% 0.004 286.32);\n    --color-zinc-300: oklch(87.1% 0.006 286.286);\n    --color-zinc-400: oklch(70.5% 0.015 286.067);\n    --color-zinc-500: oklch(55.2% 0.016 285.938);\n    --color-zinc-600: oklch(44.2% 0.017 285.786);\n    --color-zinc-700: oklch(37% 0.013 285.805);\n    --color-zinc-800: oklch(27.4% 0.006 286.033);\n    --color-zinc-900: oklch(21% 0.006 285.885);\n    --color-zinc-950: oklch(14.1% 0.005 285.823);\n    --color-neutral-50: oklch(98.5% 0 0);\n    --color-neutral-100: oklch(97% 0 0);\n    --color-neutral-200: oklch(92.2% 0 0);\n    --color-neutral-300: oklch(87% 0 0);\n    --color-neutral-400: oklch(70.8% 0 0);\n    --color-neutral-500: oklch(55.6% 0 0);\n    --color-neutral-600: oklch(43.9% 0 0);\n    --color-neutral-700: oklch(37.1% 0 0);\n    --color-neutral-800: oklch(26.9% 0 0);\n    --color-neutral-900: oklch(20.5% 0 0);\n    --color-neutral-950: oklch(14.5% 0 0);\n    --color-stone-50: oklch(98.5% 0.001 106.423);\n    --color-stone-100: oklch(97% 0.001 106.424);\n    --color-stone-200: oklch(92.3% 0.003 48.717);\n    --color-stone-300: oklch(86.9% 0.005 56.366);\n    --color-stone-400: oklch(70.9% 0.01 56.259);\n    --color-stone-500: oklch(55.3% 0.013 58.071);\n    --color-stone-600: oklch(44.4% 0.011 73.639);\n    --color-stone-700: oklch(37.4% 0.01 67.558);\n    --color-stone-800: oklch(26.8% 0.007 34.298);\n    --color-stone-900: oklch(21.6% 0.006 56.043);\n    --color-stone-950: oklch(14.7% 0.004 49.25);\n    --color-black: #000;\n    --color-white: #fff;\n    --spacing: 0.25rem;\n    --breakpoint-sm: 40rem;\n    --breakpoint-md: 48rem;\n    --breakpoint-lg: 64rem;\n    --breakpoint-xl: 80rem;\n    --breakpoint-2xl: 96rem;\n    --container-3xs: 16rem;\n    --container-2xs: 18rem;\n    --container-xs: 20rem;\n    --container-sm: 24rem;\n    --container-md: 28rem;\n    --container-lg: 32rem;\n    --container-xl: 36rem;\n    --container-2xl: 42rem;\n    --container-3xl: 48rem;\n    --container-4xl: 56rem;\n    --container-5xl: 64rem;\n    --container-6xl: 72rem;\n    --container-7xl: 80rem;\n    --text-xs: 0.75rem;\n    --text-xs--line-height: calc(1 / 0.75);\n    --text-sm: 0.875rem;\n    --text-sm--line-height: calc(1.25 / 0.875);\n    --text-base: 1rem;\n    --text-base--line-height: calc(1.5 / 1);\n    --text-lg: 1.125rem;\n    --text-lg--line-height: calc(1.75 / 1.125);\n    --text-xl: 1.25rem;\n    --text-xl--line-height: calc(1.75 / 1.25);\n    --text-2xl: 1.5rem;\n    --text-2xl--line-height: calc(2 / 1.5);\n    --text-3xl: 1.875rem;\n    --text-3xl--line-height: calc(2.25 / 1.875);\n    --text-4xl: 2.25rem;\n    --text-4xl--line-height: calc(2.5 / 2.25);\n    --text-5xl: 3rem;\n    --text-5xl--line-height: 1;\n    --text-6xl: 3.75rem;\n    --text-6xl--line-height: 1;\n    --text-7xl: 4.5rem;\n    --text-7xl--line-height: 1;\n    --text-8xl: 6rem;\n    --text-8xl--line-height: 1;\n    --text-9xl: 8rem;\n    --text-9xl--line-height: 1;\n    --font-weight-thin: 100;\n    --font-weight-extralight: 200;\n    --font-weight-light: 300;\n    --font-weight-normal: 400;\n    --font-weight-medium: 500;\n    --font-weight-semibold: 600;\n    --font-weight-bold: 700;\n    --font-weight-extrabold: 800;\n    --font-weight-black: 900;\n    --tracking-tighter: -0.05em;\n    --tracking-tight: -0.025em;\n    --tracking-normal: 0em;\n    --tracking-wide: 0.025em;\n    --tracking-wider: 0.05em;\n    --tracking-widest: 0.1em;\n    --leading-tight: 1.25;\n    --leading-snug: 1.375;\n    --leading-normal: 1.5;\n    --leading-relaxed: 1.625;\n    --leading-loose: 2;\n    --radius-xs: 0.125rem;\n    --radius-sm: 0.25rem;\n    --radius-md: 0.375rem;\n    --radius-lg: 0.5rem;\n    --radius-xl: 0.75rem;\n    --radius-2xl: 1rem;\n    --radius-3xl: 1.5rem;\n    --radius-4xl: 2rem;\n    --shadow-2xs: 0 1px rgb(0 0 0 / 0.05);\n    --shadow-xs: 0 1px 2px 0 rgb(0 0 0 / 0.05);\n    --shadow-sm: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);\n    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);\n    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);\n    --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);\n    --shadow-2xl: 0 25px 50px -12px rgb(0 0 0 / 0.25);\n    --inset-shadow-2xs: inset 0 1px rgb(0 0 0 / 0.05);\n    --inset-shadow-xs: inset 0 1px 1px rgb(0 0 0 / 0.05);\n    --inset-shadow-sm: inset 0 2px 4px rgb(0 0 0 / 0.05);\n    --drop-shadow-xs: 0 1px 1px rgb(0 0 0 / 0.05);\n    --drop-shadow-sm: 0 1px 2px rgb(0 0 0 / 0.15);\n    --drop-shadow-md: 0 3px 3px rgb(0 0 0 / 0.12);\n    --drop-shadow-lg: 0 4px 4px rgb(0 0 0 / 0.15);\n    --drop-shadow-xl: 0 9px 7px rgb(0 0 0 / 0.1);\n    --drop-shadow-2xl: 0 25px 25px rgb(0 0 0 / 0.15);\n    --text-shadow-2xs: 0px 1px 0px rgb(0 0 0 / 0.15);\n    --text-shadow-xs: 0px 1px 1px rgb(0 0 0 / 0.2);\n    --text-shadow-sm: 0px 1px 0px rgb(0 0 0 / 0.075), 0px 1px 1px rgb(0 0 0 / 0.075),\n      0px 2px 2px rgb(0 0 0 / 0.075);\n    --text-shadow-md: 0px 1px 1px rgb(0 0 0 / 0.1), 0px 1px 2px rgb(0 0 0 / 0.1),\n      0px 2px 4px rgb(0 0 0 / 0.1);\n    --text-shadow-lg: 0px 1px 2px rgb(0 0 0 / 0.1), 0px 3px 2px rgb(0 0 0 / 0.1),\n      0px 4px 8px rgb(0 0 0 / 0.1);\n    --ease-in: cubic-bezier(0.4, 0, 1, 1);\n    --ease-out: cubic-bezier(0, 0, 0.2, 1);\n    --ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);\n    --animate-spin: spin 1s linear infinite;\n    --animate-ping: ping 1s cubic-bezier(0, 0, 0.2, 1) infinite;\n    --animate-pulse: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;\n    --animate-bounce: bounce 1s infinite;\n    --blur-xs: 4px;\n    --blur-sm: 8px;\n    --blur-md: 12px;\n    --blur-lg: 16px;\n    --blur-xl: 24px;\n    --blur-2xl: 40px;\n    --blur-3xl: 64px;\n    --perspective-dramatic: 100px;\n    --perspective-near: 300px;\n    --perspective-normal: 500px;\n    --perspective-midrange: 800px;\n    --perspective-distant: 1200px;\n    --aspect-video: 16 / 9;\n    --default-transition-duration: 150ms;\n    --default-transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n    --default-font-family: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji",\n      "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";\n    --default-font-feature-settings: initial;\n    --default-font-variation-settings: initial;\n    --default-mono-font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",\n      "Courier New", monospace;\n    --default-mono-font-feature-settings: initial;\n    --default-mono-font-variation-settings: initial;\n  }\n}\n@layer base {\n  *, ::after, ::before, ::backdrop, ::file-selector-button {\n    box-sizing: border-box;\n    margin: 0;\n    padding: 0;\n    border: 0 solid;\n  }\n  html, :host {\n    line-height: 1.5;\n    -webkit-text-size-adjust: 100%;\n    -moz-tab-size: 4;\n      -o-tab-size: 4;\n         tab-size: 4;\n    font-family: ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji",\n      "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";\n    font-feature-settings: initial;\n    font-variation-settings: initial;\n    -webkit-tap-highlight-color: transparent;\n  }\n  hr {\n    height: 0;\n    color: inherit;\n    border-top-width: 1px;\n  }\n  abbr:where([title]) {\n    -webkit-text-decoration: underline dotted;\n    text-decoration: underline dotted;\n  }\n  h1, h2, h3, h4, h5, h6 {\n    font-size: inherit;\n    font-weight: inherit;\n  }\n  a {\n    color: inherit;\n    -webkit-text-decoration: inherit;\n    text-decoration: inherit;\n  }\n  b, strong {\n    font-weight: bolder;\n  }\n  code, kbd, samp, pre {\n    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono",\n      "Courier New", monospace;\n    font-feature-settings: initial;\n    font-variation-settings: initial;\n    font-size: 1em;\n  }\n  small {\n    font-size: 80%;\n  }\n  sub, sup {\n    font-size: 75%;\n    line-height: 0;\n    position: relative;\n    vertical-align: baseline;\n  }\n  sub {\n    bottom: -0.25em;\n  }\n  sup {\n    top: -0.5em;\n  }\n  table {\n    text-indent: 0;\n    border-color: inherit;\n    border-collapse: collapse;\n  }\n  :-moz-focusring {\n    outline: auto;\n  }\n  progress {\n    vertical-align: baseline;\n  }\n  summary {\n    display: list-item;\n  }\n  ol, ul, menu {\n    list-style: none;\n  }\n  img, svg, video, canvas, audio, iframe, embed, object {\n    display: block;\n    vertical-align: middle;\n  }\n  img, video {\n    max-width: 100%;\n    height: auto;\n  }\n  button, input, select, optgroup, textarea, ::file-selector-button {\n    font: inherit;\n    font-feature-settings: inherit;\n    font-variation-settings: inherit;\n    letter-spacing: inherit;\n    color: inherit;\n    border-radius: 0;\n    background-color: transparent;\n    opacity: 1;\n  }\n  :where(select:is([multiple], [size])) optgroup {\n    font-weight: bolder;\n  }\n  :where(select:is([multiple], [size])) optgroup option {\n    padding-inline-start: 20px;\n  }\n  ::file-selector-button {\n    margin-inline-end: 4px;\n  }\n  ::-moz-placeholder {\n    opacity: 1;\n  }\n  ::placeholder {\n    opacity: 1;\n  }\n  @supports (not (-webkit-appearance: -apple-pay-button))  or (contain-intrinsic-size: 1px) {\n    ::-moz-placeholder {\n      color: color-mix(in oklab, currentcolor 50%, transparent);\n    }\n    ::placeholder {\n      color: color-mix(in oklab, currentcolor 50%, transparent);\n    }\n  }\n  textarea {\n    resize: vertical;\n  }\n  ::-webkit-search-decoration {\n    -webkit-appearance: none;\n  }\n  ::-webkit-date-and-time-value {\n    min-height: 1lh;\n    text-align: inherit;\n  }\n  ::-webkit-datetime-edit {\n    display: inline-flex;\n  }\n  ::-webkit-datetime-edit-fields-wrapper {\n    padding: 0;\n  }\n  ::-webkit-datetime-edit, ::-webkit-datetime-edit-year-field, ::-webkit-datetime-edit-month-field, ::-webkit-datetime-edit-day-field, ::-webkit-datetime-edit-hour-field, ::-webkit-datetime-edit-minute-field, ::-webkit-datetime-edit-second-field, ::-webkit-datetime-edit-millisecond-field, ::-webkit-datetime-edit-meridiem-field {\n    padding-block: 0;\n  }\n  :-moz-ui-invalid {\n    box-shadow: none;\n  }\n  button, input:where([type="button"], [type="reset"], [type="submit"]), ::file-selector-button {\n    -webkit-appearance: button;\n       -moz-appearance: button;\n            appearance: button;\n  }\n  ::-webkit-inner-spin-button, ::-webkit-outer-spin-button {\n    height: auto;\n  }\n  [hidden]:where(:not([hidden="until-found"])) {\n    display: none !important;\n  }\n}\n@layer utilities {\n  .\\@container {\n    container-type: inline-size;\n  }\n  .pointer-events-none {\n    pointer-events: none;\n  }\n  .visible {\n    visibility: visible;\n  }\n  .absolute {\n    position: absolute;\n  }\n  .fixed {\n    position: fixed;\n  }\n  .relative {\n    position: relative;\n  }\n  .static {\n    position: static;\n  }\n  .inset-0 {\n    inset: calc(var(--spacing) * 0);\n  }\n  .inset-y-0 {\n    inset-block: calc(var(--spacing) * 0);\n  }\n  .top-0 {\n    top: calc(var(--spacing) * 0);\n  }\n  .right-0 {\n    right: calc(var(--spacing) * 0);\n  }\n  .right-3 {\n    right: calc(var(--spacing) * 3);\n  }\n  .bottom-0 {\n    bottom: calc(var(--spacing) * 0);\n  }\n  .bottom-4 {\n    bottom: calc(var(--spacing) * 4);\n  }\n  .left-0 {\n    left: calc(var(--spacing) * 0);\n  }\n  .left-1\\/2 {\n    left: calc(1/2 * 100%);\n  }\n  .z-10 {\n    z-index: 10;\n  }\n  .z-50 {\n    z-index: 50;\n  }\n  .z-100 {\n    z-index: 100;\n  }\n  .col-start-1 {\n    grid-column-start: 1;\n  }\n  .row-start-1 {\n    grid-row-start: 1;\n  }\n  .container {\n    width: 100%;\n    @media (width >= 40rem) {\n      max-width: 40rem;\n    }\n    @media (width >= 48rem) {\n      max-width: 48rem;\n    }\n    @media (width >= 64rem) {\n      max-width: 64rem;\n    }\n    @media (width >= 80rem) {\n      max-width: 80rem;\n    }\n    @media (width >= 96rem) {\n      max-width: 96rem;\n    }\n  }\n  .mx-4 {\n    margin-inline: calc(var(--spacing) * 4);\n  }\n  .my-2 {\n    margin-block: calc(var(--spacing) * 2);\n  }\n  .my-4 {\n    margin-block: calc(var(--spacing) * 4);\n  }\n  .mt-0\\.5 {\n    margin-top: calc(var(--spacing) * 0.5);\n  }\n  .mt-1 {\n    margin-top: calc(var(--spacing) * 1);\n  }\n  .mt-2 {\n    margin-top: calc(var(--spacing) * 2);\n  }\n  .mt-3 {\n    margin-top: calc(var(--spacing) * 3);\n  }\n  .mt-5 {\n    margin-top: calc(var(--spacing) * 5);\n  }\n  .mr-1 {\n    margin-right: calc(var(--spacing) * 1);\n  }\n  .mr-2 {\n    margin-right: calc(var(--spacing) * 2);\n  }\n  .mr-5 {\n    margin-right: calc(var(--spacing) * 5);\n  }\n  .mb-1 {\n    margin-bottom: calc(var(--spacing) * 1);\n  }\n  .mb-2 {\n    margin-bottom: calc(var(--spacing) * 2);\n  }\n  .mb-3 {\n    margin-bottom: calc(var(--spacing) * 3);\n  }\n  .mb-4 {\n    margin-bottom: calc(var(--spacing) * 4);\n  }\n  .mb-6 {\n    margin-bottom: calc(var(--spacing) * 6);\n  }\n  .block {\n    display: block;\n  }\n  .flex {\n    display: flex;\n  }\n  .hidden {\n    display: none;\n  }\n  .inline-flex {\n    display: inline-flex;\n  }\n  .h-1 {\n    height: calc(var(--spacing) * 1);\n  }\n  .h-1\\/2 {\n    height: calc(1/2 * 100%);\n  }\n  .h-2 {\n    height: calc(var(--spacing) * 2);\n  }\n  .h-3 {\n    height: calc(var(--spacing) * 3);\n  }\n  .h-3\\.5 {\n    height: calc(var(--spacing) * 3.5);\n  }\n  .h-4 {\n    height: calc(var(--spacing) * 4);\n  }\n  .h-5 {\n    height: calc(var(--spacing) * 5);\n  }\n  .h-6 {\n    height: calc(var(--spacing) * 6);\n  }\n  .h-7 {\n    height: calc(var(--spacing) * 7);\n  }\n  .h-8 {\n    height: calc(var(--spacing) * 8);\n  }\n  .h-12 {\n    height: calc(var(--spacing) * 12);\n  }\n  .h-18 {\n    height: calc(var(--spacing) * 18);\n  }\n  .h-\\[1px\\] {\n    height: 1px;\n  }\n  .h-\\[32px\\] {\n    height: 32px;\n  }\n  .h-full {\n    height: 100%;\n  }\n  .min-h-0 {\n    min-height: calc(var(--spacing) * 0);\n  }\n  .\\!w-full {\n    width: 100% !important;\n  }\n  .w-2 {\n    width: calc(var(--spacing) * 2);\n  }\n  .w-3 {\n    width: calc(var(--spacing) * 3);\n  }\n  .w-3\\.5 {\n    width: calc(var(--spacing) * 3.5);\n  }\n  .w-4 {\n    width: calc(var(--spacing) * 4);\n  }\n  .w-5 {\n    width: calc(var(--spacing) * 5);\n  }\n  .w-6 {\n    width: calc(var(--spacing) * 6);\n  }\n  .w-8 {\n    width: calc(var(--spacing) * 8);\n  }\n  .w-12 {\n    width: calc(var(--spacing) * 12);\n  }\n  .w-18 {\n    width: calc(var(--spacing) * 18);\n  }\n  .w-\\[1px\\] {\n    width: 1px;\n  }\n  .w-auto {\n    width: auto;\n  }\n  .w-full {\n    width: 100%;\n  }\n  .max-w-\\[150px\\] {\n    max-width: 150px;\n  }\n  .min-w-0 {\n    min-width: calc(var(--spacing) * 0);\n  }\n  .min-w-\\[8rem\\] {\n    min-width: 8rem;\n  }\n  .min-w-\\[32px\\] {\n    min-width: 32px;\n  }\n  .flex-1 {\n    flex: 1;\n  }\n  .flex-none {\n    flex: none;\n  }\n  .flex-shrink-0 {\n    flex-shrink: 0;\n  }\n  .shrink-0 {\n    flex-shrink: 0;\n  }\n  .-translate-x-1\\/2 {\n    --tw-translate-x: calc(calc(1/2 * 100%) * -1);\n    translate: var(--tw-translate-x) var(--tw-translate-y);\n  }\n  .translate-x-\\[1px\\] {\n    --tw-translate-x: 1px;\n    translate: var(--tw-translate-x) var(--tw-translate-y);\n  }\n  .translate-y-\\[1px\\] {\n    --tw-translate-y: 1px;\n    translate: var(--tw-translate-x) var(--tw-translate-y);\n  }\n  .rotate-45 {\n    rotate: 45deg;\n  }\n  .transform {\n    transform: var(--tw-rotate-x) var(--tw-rotate-y) var(--tw-rotate-z) var(--tw-skew-x) var(--tw-skew-y);\n  }\n  .animate-pulse {\n    animation: var(--animate-pulse);\n  }\n  .animate-spin {\n    animation: var(--animate-spin);\n  }\n  .cursor-grab {\n    cursor: grab;\n  }\n  .cursor-not-allowed {\n    cursor: not-allowed;\n  }\n  .cursor-pointer {\n    cursor: pointer;\n  }\n  .touch-pan-y {\n    --tw-pan-y: pan-y;\n    touch-action: var(--tw-pan-x,) var(--tw-pan-y,) var(--tw-pinch-zoom,);\n  }\n  .appearance-none {\n    -webkit-appearance: none;\n       -moz-appearance: none;\n            appearance: none;\n  }\n  .flex-col {\n    flex-direction: column;\n  }\n  .flex-row {\n    flex-direction: row;\n  }\n  .items-center {\n    align-items: center;\n  }\n  .items-start {\n    align-items: flex-start;\n  }\n  .justify-between {\n    justify-content: space-between;\n  }\n  .justify-center {\n    justify-content: center;\n  }\n  .justify-end {\n    justify-content: flex-end;\n  }\n  .gap-1 {\n    gap: calc(var(--spacing) * 1);\n  }\n  .gap-2 {\n    gap: calc(var(--spacing) * 2);\n  }\n  .gap-3 {\n    gap: calc(var(--spacing) * 3);\n  }\n  .gap-4 {\n    gap: calc(var(--spacing) * 4);\n  }\n  .space-y-2 {\n    :where(& > :not(:last-child)) {\n      --tw-space-y-reverse: 0;\n      margin-block-start: calc(calc(var(--spacing) * 2) * var(--tw-space-y-reverse));\n      margin-block-end: calc(calc(var(--spacing) * 2) * calc(1 - var(--tw-space-y-reverse)));\n    }\n  }\n  .space-y-6 {\n    :where(& > :not(:last-child)) {\n      --tw-space-y-reverse: 0;\n      margin-block-start: calc(calc(var(--spacing) * 6) * var(--tw-space-y-reverse));\n      margin-block-end: calc(calc(var(--spacing) * 6) * calc(1 - var(--tw-space-y-reverse)));\n    }\n  }\n  .space-x-3 {\n    :where(& > :not(:last-child)) {\n      --tw-space-x-reverse: 0;\n      margin-inline-start: calc(calc(var(--spacing) * 3) * var(--tw-space-x-reverse));\n      margin-inline-end: calc(calc(var(--spacing) * 3) * calc(1 - var(--tw-space-x-reverse)));\n    }\n  }\n  .divide-y {\n    :where(& > :not(:last-child)) {\n      --tw-divide-y-reverse: 0;\n      border-bottom-style: var(--tw-border-style);\n      border-top-style: var(--tw-border-style);\n      border-top-width: calc(1px * var(--tw-divide-y-reverse));\n      border-bottom-width: calc(1px * calc(1 - var(--tw-divide-y-reverse)));\n    }\n  }\n  .divide-gray-100 {\n    :where(& > :not(:last-child)) {\n      border-color: var(--color-gray-100);\n    }\n  }\n  .self-center {\n    align-self: center;\n  }\n  .truncate {\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n  .overflow-hidden {\n    overflow: hidden;\n  }\n  .overflow-y-auto {\n    overflow-y: auto;\n  }\n  .rounded {\n    border-radius: 0.25rem;\n  }\n  .rounded-\\[3px\\] {\n    border-radius: 3px;\n  }\n  .rounded-full {\n    border-radius: calc(infinity * 1px);\n  }\n  .rounded-lg {\n    border-radius: var(--radius-lg);\n  }\n  .rounded-md {\n    border-radius: var(--radius-md);\n  }\n  .rounded-none {\n    border-radius: 0;\n  }\n  .rounded-l-md {\n    border-top-left-radius: var(--radius-md);\n    border-bottom-left-radius: var(--radius-md);\n  }\n  .rounded-r-md {\n    border-top-right-radius: var(--radius-md);\n    border-bottom-right-radius: var(--radius-md);\n  }\n  .border {\n    border-style: var(--tw-border-style);\n    border-width: 1px;\n  }\n  .border-0 {\n    border-style: var(--tw-border-style);\n    border-width: 0px;\n  }\n  .border-1 {\n    border-style: var(--tw-border-style);\n    border-width: 1px;\n  }\n  .border-2 {\n    border-style: var(--tw-border-style);\n    border-width: 2px;\n  }\n  .border-3 {\n    border-style: var(--tw-border-style);\n    border-width: 3px;\n  }\n  .border-4 {\n    border-style: var(--tw-border-style);\n    border-width: 4px;\n  }\n  .border-t {\n    border-top-style: var(--tw-border-style);\n    border-top-width: 1px;\n  }\n  .border-r-0 {\n    border-right-style: var(--tw-border-style);\n    border-right-width: 0px;\n  }\n  .border-b {\n    border-bottom-style: var(--tw-border-style);\n    border-bottom-width: 1px;\n  }\n  .border-b-2 {\n    border-bottom-style: var(--tw-border-style);\n    border-bottom-width: 2px;\n  }\n  .border-none {\n    --tw-border-style: none;\n    border-style: none;\n  }\n  .border-\\[\\#cfd4da\\] {\n    border-color: #cfd4da;\n  }\n  .border-blue-200 {\n    border-color: var(--color-blue-200);\n  }\n  .border-blue-500 {\n    border-color: var(--color-blue-500);\n  }\n  .border-blue-600 {\n    border-color: var(--color-blue-600);\n  }\n  .border-gray-200 {\n    border-color: var(--color-gray-200);\n  }\n  .border-gray-300 {\n    border-color: var(--color-gray-300);\n  }\n  .border-gray-400 {\n    border-color: var(--color-gray-400);\n  }\n  .border-gray-600 {\n    border-color: var(--color-gray-600);\n  }\n  .border-red-500 {\n    border-color: var(--color-red-500);\n  }\n  .border-transparent {\n    border-color: transparent;\n  }\n  .border-t-blue-500 {\n    border-top-color: var(--color-blue-500);\n  }\n  .border-r-blue-500 {\n    border-right-color: var(--color-blue-500);\n  }\n  .border-b-blue-500 {\n    border-bottom-color: var(--color-blue-500);\n  }\n  .border-b-transparent {\n    border-bottom-color: transparent;\n  }\n  .bg-\\[\\#f1f3f5\\] {\n    background-color: #f1f3f5;\n  }\n  .bg-\\[\\#f8f9fa\\] {\n    background-color: #f8f9fa;\n  }\n  .bg-black\\/50 {\n    background-color: color-mix(in oklab, var(--color-black) 50%, transparent);\n  }\n  .bg-blue-50 {\n    background-color: var(--color-blue-50);\n  }\n  .bg-blue-200 {\n    background-color: var(--color-blue-200);\n  }\n  .bg-blue-500 {\n    background-color: var(--color-blue-500);\n  }\n  .bg-blue-600 {\n    background-color: var(--color-blue-600);\n  }\n  .bg-gray-100 {\n    background-color: var(--color-gray-100);\n  }\n  .bg-gray-200 {\n    background-color: var(--color-gray-200);\n  }\n  .bg-gray-300 {\n    background-color: var(--color-gray-300);\n  }\n  .bg-gray-900 {\n    background-color: var(--color-gray-900);\n  }\n  .bg-inherit {\n    background-color: inherit;\n  }\n  .bg-transparent {\n    background-color: transparent;\n  }\n  .bg-white {\n    background-color: var(--color-white);\n  }\n  .bg-white\\/80 {\n    background-color: color-mix(in oklab, var(--color-white) 80%, transparent);\n  }\n  .object-contain {\n    -o-object-fit: contain;\n       object-fit: contain;\n  }\n  .p-0 {\n    padding: calc(var(--spacing) * 0);\n  }\n  .p-1 {\n    padding: calc(var(--spacing) * 1);\n  }\n  .p-3 {\n    padding: calc(var(--spacing) * 3);\n  }\n  .p-4 {\n    padding: calc(var(--spacing) * 4);\n  }\n  .p-6 {\n    padding: calc(var(--spacing) * 6);\n  }\n  .p-\\[5px\\] {\n    padding: 5px;\n  }\n  .px-2 {\n    padding-inline: calc(var(--spacing) * 2);\n  }\n  .px-3 {\n    padding-inline: calc(var(--spacing) * 3);\n  }\n  .px-4 {\n    padding-inline: calc(var(--spacing) * 4);\n  }\n  .px-6 {\n    padding-inline: calc(var(--spacing) * 6);\n  }\n  .py-1 {\n    padding-block: calc(var(--spacing) * 1);\n  }\n  .py-1\\.5 {\n    padding-block: calc(var(--spacing) * 1.5);\n  }\n  .py-2 {\n    padding-block: calc(var(--spacing) * 2);\n  }\n  .py-3 {\n    padding-block: calc(var(--spacing) * 3);\n  }\n  .py-4 {\n    padding-block: calc(var(--spacing) * 4);\n  }\n  .pt-4 {\n    padding-top: calc(var(--spacing) * 4);\n  }\n  .pr-2 {\n    padding-right: calc(var(--spacing) * 2);\n  }\n  .pr-3 {\n    padding-right: calc(var(--spacing) * 3);\n  }\n  .pr-4 {\n    padding-right: calc(var(--spacing) * 4);\n  }\n  .pr-8 {\n    padding-right: calc(var(--spacing) * 8);\n  }\n  .pr-9 {\n    padding-right: calc(var(--spacing) * 9);\n  }\n  .pb-2 {\n    padding-bottom: calc(var(--spacing) * 2);\n  }\n  .pl-2 {\n    padding-left: calc(var(--spacing) * 2);\n  }\n  .pl-3 {\n    padding-left: calc(var(--spacing) * 3);\n  }\n  .pl-8 {\n    padding-left: calc(var(--spacing) * 8);\n  }\n  .text-center {\n    text-align: center;\n  }\n  .text-left {\n    text-align: left;\n  }\n  .text-right {\n    text-align: right;\n  }\n  .text-base {\n    font-size: var(--text-base);\n    line-height: var(--tw-leading, var(--text-base--line-height));\n  }\n  .text-lg {\n    font-size: var(--text-lg);\n    line-height: var(--tw-leading, var(--text-lg--line-height));\n  }\n  .text-sm {\n    font-size: var(--text-sm);\n    line-height: var(--tw-leading, var(--text-sm--line-height));\n  }\n  .text-xs {\n    font-size: var(--text-xs);\n    line-height: var(--tw-leading, var(--text-xs--line-height));\n  }\n  .text-\\[13px\\] {\n    font-size: 13px;\n  }\n  .leading-tight {\n    --tw-leading: var(--leading-tight);\n    line-height: var(--leading-tight);\n  }\n  .font-bold {\n    --tw-font-weight: var(--font-weight-bold);\n    font-weight: var(--font-weight-bold);\n  }\n  .font-medium {\n    --tw-font-weight: var(--font-weight-medium);\n    font-weight: var(--font-weight-medium);\n  }\n  .font-semibold {\n    --tw-font-weight: var(--font-weight-semibold);\n    font-weight: var(--font-weight-semibold);\n  }\n  .whitespace-nowrap {\n    white-space: nowrap;\n  }\n  .text-blue-500 {\n    color: var(--color-blue-500);\n  }\n  .text-blue-700 {\n    color: var(--color-blue-700);\n  }\n  .text-blue-900 {\n    color: var(--color-blue-900);\n  }\n  .text-gray-400 {\n    color: var(--color-gray-400);\n  }\n  .text-gray-500 {\n    color: var(--color-gray-500);\n  }\n  .text-gray-600 {\n    color: var(--color-gray-600);\n  }\n  .text-gray-700 {\n    color: var(--color-gray-700);\n  }\n  .text-gray-900 {\n    color: var(--color-gray-900);\n  }\n  .text-red-500 {\n    color: var(--color-red-500);\n  }\n  .text-white {\n    color: var(--color-white);\n  }\n  .uppercase {\n    text-transform: uppercase;\n  }\n  .underline {\n    text-decoration-line: underline;\n  }\n  .opacity-0 {\n    opacity: 0%;\n  }\n  .opacity-50 {\n    opacity: 50%;\n  }\n  .opacity-100 {\n    opacity: 100%;\n  }\n  .ring {\n    --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentColor);\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n  .shadow {\n    --tw-shadow: 0 1px 3px 0 var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 1px 2px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1));\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n  .shadow-md {\n    --tw-shadow: 0 4px 6px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 2px 4px -2px var(--tw-shadow-color, rgb(0 0 0 / 0.1));\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n  .shadow-sm {\n    --tw-shadow: 0 1px 3px 0 var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 1px 2px -1px var(--tw-shadow-color, rgb(0 0 0 / 0.1));\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n  .shadow-xs {\n    --tw-shadow: 0 1px 2px 0 var(--tw-shadow-color, rgb(0 0 0 / 0.05));\n    box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n  }\n  .ring-blue-500 {\n    --tw-ring-color: var(--color-blue-500);\n  }\n  .outline {\n    outline-style: var(--tw-outline-style);\n    outline-width: 1px;\n  }\n  .outline-1 {\n    outline-style: var(--tw-outline-style);\n    outline-width: 1px;\n  }\n  .outline-2 {\n    outline-style: var(--tw-outline-style);\n    outline-width: 2px;\n  }\n  .-outline-offset-1 {\n    outline-offset: calc(1px * -1);\n  }\n  .-outline-offset-2 {\n    outline-offset: calc(2px * -1);\n  }\n  .outline-offset-2 {\n    outline-offset: 2px;\n  }\n  .outline-blue-500 {\n    outline-color: var(--color-blue-500);\n  }\n  .outline-gray-300 {\n    outline-color: var(--color-gray-300);\n  }\n  .filter {\n    filter: var(--tw-blur,) var(--tw-brightness,) var(--tw-contrast,) var(--tw-grayscale,) var(--tw-hue-rotate,) var(--tw-invert,) var(--tw-saturate,) var(--tw-sepia,) var(--tw-drop-shadow,);\n  }\n  .backdrop-blur {\n    --tw-backdrop-blur: blur(8px);\n    -webkit-backdrop-filter: var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,);\n    backdrop-filter: var(--tw-backdrop-blur,) var(--tw-backdrop-brightness,) var(--tw-backdrop-contrast,) var(--tw-backdrop-grayscale,) var(--tw-backdrop-hue-rotate,) var(--tw-backdrop-invert,) var(--tw-backdrop-opacity,) var(--tw-backdrop-saturate,) var(--tw-backdrop-sepia,);\n  }\n  .transition-all {\n    transition-property: all;\n    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));\n    transition-duration: var(--tw-duration, var(--default-transition-duration));\n  }\n  .transition-colors {\n    transition-property: color, background-color, border-color, outline-color, text-decoration-color, fill, stroke, --tw-gradient-from, --tw-gradient-via, --tw-gradient-to;\n    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));\n    transition-duration: var(--tw-duration, var(--default-transition-duration));\n  }\n  .transition-opacity {\n    transition-property: opacity;\n    transition-timing-function: var(--tw-ease, var(--default-transition-timing-function));\n    transition-duration: var(--tw-duration, var(--default-transition-duration));\n  }\n  .duration-150 {\n    --tw-duration: 150ms;\n    transition-duration: 150ms;\n  }\n  .duration-200 {\n    --tw-duration: 200ms;\n    transition-duration: 200ms;\n  }\n  .duration-300 {\n    --tw-duration: 300ms;\n    transition-duration: 300ms;\n  }\n  .ease-in-out {\n    --tw-ease: var(--ease-in-out);\n    transition-timing-function: var(--ease-in-out);\n  }\n  .outline-none {\n    --tw-outline-style: none;\n    outline-style: none;\n  }\n  .select-none {\n    -webkit-user-select: none;\n    -moz-user-select: none;\n         user-select: none;\n  }\n  .peer-checked\\:opacity-100 {\n    &:is(:where(.peer):checked ~ *) {\n      opacity: 100%;\n    }\n  }\n  .first\\:mt-0 {\n    &:first-child {\n      margin-top: calc(var(--spacing) * 0);\n    }\n  }\n  .checked\\:border-blue-600 {\n    &:checked {\n      border-color: var(--color-blue-600);\n    }\n  }\n  .checked\\:bg-blue-600 {\n    &:checked {\n      background-color: var(--color-blue-600);\n    }\n  }\n  .hover\\:border-\\[\\#1a466b\\] {\n    &:hover {\n      @media (hover: hover) {\n        border-color: #1a466b;\n      }\n    }\n  }\n  .hover\\:border-b-gray-500 {\n    &:hover {\n      @media (hover: hover) {\n        border-bottom-color: var(--color-gray-500);\n      }\n    }\n  }\n  .hover\\:\\!bg-blue-700 {\n    &:hover {\n      @media (hover: hover) {\n        background-color: var(--color-blue-700) !important;\n      }\n    }\n  }\n  .hover\\:bg-blue-900 {\n    &:hover {\n      @media (hover: hover) {\n        background-color: var(--color-blue-900);\n      }\n    }\n  }\n  .hover\\:bg-gray-50 {\n    &:hover {\n      @media (hover: hover) {\n        background-color: var(--color-gray-50);\n      }\n    }\n  }\n  .hover\\:bg-gray-100 {\n    &:hover {\n      @media (hover: hover) {\n        background-color: var(--color-gray-100);\n      }\n    }\n  }\n  .hover\\:bg-gray-200 {\n    &:hover {\n      @media (hover: hover) {\n        background-color: var(--color-gray-200);\n      }\n    }\n  }\n  .hover\\:bg-transparent {\n    &:hover {\n      @media (hover: hover) {\n        background-color: transparent;\n      }\n    }\n  }\n  .hover\\:text-gray-700 {\n    &:hover {\n      @media (hover: hover) {\n        color: var(--color-gray-700);\n      }\n    }\n  }\n  .hover\\:text-white {\n    &:hover {\n      @media (hover: hover) {\n        color: var(--color-white);\n      }\n    }\n  }\n  .hover\\:ring {\n    &:hover {\n      @media (hover: hover) {\n        --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentColor);\n        box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n      }\n    }\n  }\n  .hover\\:ring-0 {\n    &:hover {\n      @media (hover: hover) {\n        --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(0px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentColor);\n        box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n      }\n    }\n  }\n  .hover\\:ring-\\[\\#1a466b\\] {\n    &:hover {\n      @media (hover: hover) {\n        --tw-ring-color: #1a466b;\n      }\n    }\n  }\n  .hover\\:ring-transparent {\n    &:hover {\n      @media (hover: hover) {\n        --tw-ring-color: transparent;\n      }\n    }\n  }\n  .focus\\:border-blue-500 {\n    &:focus {\n      border-color: var(--color-blue-500);\n    }\n  }\n  .focus\\:border-red-500 {\n    &:focus {\n      border-color: var(--color-red-500);\n    }\n  }\n  .focus\\:ring-1 {\n    &:focus {\n      --tw-ring-shadow: var(--tw-ring-inset,) 0 0 0 calc(1px + var(--tw-ring-offset-width)) var(--tw-ring-color, currentColor);\n      box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n    }\n  }\n  .focus\\:ring-blue-500 {\n    &:focus {\n      --tw-ring-color: var(--color-blue-500);\n    }\n  }\n  .focus\\:ring-red-500 {\n    &:focus {\n      --tw-ring-color: var(--color-red-500);\n    }\n  }\n  .focus\\:outline-none {\n    &:focus {\n      --tw-outline-style: none;\n      outline-style: none;\n    }\n  }\n  .active\\:cursor-grabbing {\n    &:active {\n      cursor: grabbing;\n    }\n  }\n  .disabled\\:cursor-not-allowed {\n    &:disabled {\n      cursor: not-allowed;\n    }\n  }\n  .disabled\\:opacity-50 {\n    &:disabled {\n      opacity: 50%;\n    }\n  }\n  .md\\:static {\n    @media (width >= 48rem) {\n      position: static;\n    }\n  }\n  .md\\:flex {\n    @media (width >= 48rem) {\n      display: flex;\n    }\n  }\n  .md\\:hidden {\n    @media (width >= 48rem) {\n      display: none;\n    }\n  }\n  .md\\:h-auto {\n    @media (width >= 48rem) {\n      height: auto;\n    }\n  }\n  .md\\:h-full {\n    @media (width >= 48rem) {\n      height: 100%;\n    }\n  }\n  .md\\:max-h-\\[80vh\\] {\n    @media (width >= 48rem) {\n      max-height: 80vh;\n    }\n  }\n  .md\\:w-\\[28rem\\] {\n    @media (width >= 48rem) {\n      width: 28rem;\n    }\n  }\n  .md\\:w-\\[275px\\] {\n    @media (width >= 48rem) {\n      width: 275px;\n    }\n  }\n  .md\\:max-w-\\[90vw\\] {\n    @media (width >= 48rem) {\n      max-width: 90vw;\n    }\n  }\n  .md\\:min-w-\\[275px\\] {\n    @media (width >= 48rem) {\n      min-width: 275px;\n    }\n  }\n  .md\\:flex-none {\n    @media (width >= 48rem) {\n      flex: none;\n    }\n  }\n  .md\\:flex-row {\n    @media (width >= 48rem) {\n      flex-direction: row;\n    }\n  }\n  .md\\:items-center {\n    @media (width >= 48rem) {\n      align-items: center;\n    }\n  }\n  .md\\:justify-center {\n    @media (width >= 48rem) {\n      justify-content: center;\n    }\n  }\n  .md\\:rounded-lg {\n    @media (width >= 48rem) {\n      border-radius: var(--radius-lg);\n    }\n  }\n  .md\\:border {\n    @media (width >= 48rem) {\n      border-style: var(--tw-border-style);\n      border-width: 1px;\n    }\n  }\n  .md\\:border-t-0 {\n    @media (width >= 48rem) {\n      border-top-style: var(--tw-border-style);\n      border-top-width: 0px;\n    }\n  }\n  .md\\:border-r {\n    @media (width >= 48rem) {\n      border-right-style: var(--tw-border-style);\n      border-right-width: 1px;\n    }\n  }\n  .md\\:border-l {\n    @media (width >= 48rem) {\n      border-left-style: var(--tw-border-style);\n      border-left-width: 1px;\n    }\n  }\n  .md\\:border-gray-200 {\n    @media (width >= 48rem) {\n      border-color: var(--color-gray-200);\n    }\n  }\n  .md\\:shadow-lg {\n    @media (width >= 48rem) {\n      --tw-shadow: 0 10px 15px -3px var(--tw-shadow-color, rgb(0 0 0 / 0.1)), 0 4px 6px -4px var(--tw-shadow-color, rgb(0 0 0 / 0.1));\n      box-shadow: var(--tw-inset-shadow), var(--tw-inset-ring-shadow), var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow);\n    }\n  }\n  .\\@max-\\[600px\\]\\:\\!top-auto {\n    @container (width < 600px) {\n      top: auto !important;\n    }\n  }\n  .\\@max-\\[600px\\]\\:\\!right-0 {\n    @container (width < 600px) {\n      right: calc(var(--spacing) * 0) !important;\n    }\n  }\n  .\\@max-\\[600px\\]\\:\\!bottom-0 {\n    @container (width < 600px) {\n      bottom: calc(var(--spacing) * 0) !important;\n    }\n  }\n  .\\@max-\\[600px\\]\\:\\!left-0 {\n    @container (width < 600px) {\n      left: calc(var(--spacing) * 0) !important;\n    }\n  }\n  .\\@min-\\[400px\\]\\:block {\n    @container (width >= 400px) {\n      display: block;\n    }\n  }\n  .\\@min-\\[400px\\]\\:flex {\n    @container (width >= 400px) {\n      display: flex;\n    }\n  }\n  .\\@min-\\[400px\\]\\:hidden {\n    @container (width >= 400px) {\n      display: none;\n    }\n  }\n  .\\@min-\\[500px\\]\\:block {\n    @container (width >= 500px) {\n      display: block;\n    }\n  }\n  .\\@min-\\[500px\\]\\:hidden {\n    @container (width >= 500px) {\n      display: none;\n    }\n  }\n  .\\@min-\\[600px\\]\\:block {\n    @container (width >= 600px) {\n      display: block;\n    }\n  }\n  .\\@min-\\[600px\\]\\:flex {\n    @container (width >= 600px) {\n      display: flex;\n    }\n  }\n  .\\@min-\\[600px\\]\\:hidden {\n    @container (width >= 600px) {\n      display: none;\n    }\n  }\n  .dark\\:border-gray-600 {\n    @media (prefers-color-scheme: dark) {\n      border-color: var(--color-gray-600);\n    }\n  }\n  .dark\\:bg-gray-700 {\n    @media (prefers-color-scheme: dark) {\n      background-color: var(--color-gray-700);\n    }\n  }\n  .dark\\:bg-gray-800 {\n    @media (prefers-color-scheme: dark) {\n      background-color: var(--color-gray-800);\n    }\n  }\n  .dark\\:text-gray-100 {\n    @media (prefers-color-scheme: dark) {\n      color: var(--color-gray-100);\n    }\n  }\n  .dark\\:text-white {\n    @media (prefers-color-scheme: dark) {\n      color: var(--color-white);\n    }\n  }\n}\n@import url(\'https://fonts.googleapis.com/css2?family=Open Sans:wght@400;600&amp;display=swap\');\n:host {\n  --tw-translate-x: 0;\n  --tw-translate-y: 0;\n  --tw-translate-z: 0;\n  --tw-rotate-x: rotateX(0);\n  --tw-rotate-y: rotateY(0);\n  --tw-rotate-z: rotateZ(0);\n  --tw-skew-x: skewX(0);\n  --tw-skew-y: skewY(0);\n  --tw-border-style: solid;\n  --tw-gradient-from: #0000;\n  --tw-gradient-via: #0000;\n  --tw-gradient-to: #0000;\n  --tw-gradient-from-position: 0%;\n  --tw-gradient-via-position: 50%;\n  --tw-gradient-to-position: 100%;\n  --tw-shadow: 0 0 #0000;\n  --tw-inset-shadow: 0 0 #0000;\n  --tw-ring-shadow: 0 0 #0000;\n  --tw-inset-ring-shadow: 0 0 #0000;\n  --tw-ring-offset-width: 0px;\n  --tw-ring-offset-color: #fff;\n  --tw-ring-offset-shadow: 0 0 #0000;\n  --tw-outline-style: solid;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n}\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n@keyframes ping {\n  75%, 100% {\n    transform: scale(2);\n    opacity: 0;\n  }\n}\n@keyframes pulse {\n  50% {\n    opacity: 0.5;\n  }\n}\n@keyframes bounce {\n  0%, 100% {\n    transform: translateY(-25%);\n    animation-timing-function: cubic-bezier(0.8, 0, 1, 1);\n  }\n  50% {\n    transform: none;\n    animation-timing-function: cubic-bezier(0, 0, 0.2, 1);\n  }\n}\n@property --tw-translate-x {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0;\n}\n@property --tw-translate-y {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0;\n}\n@property --tw-translate-z {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0;\n}\n@property --tw-rotate-x {\n  syntax: "*";\n  inherits: false;\n  initial-value: rotateX(0);\n}\n@property --tw-rotate-y {\n  syntax: "*";\n  inherits: false;\n  initial-value: rotateY(0);\n}\n@property --tw-rotate-z {\n  syntax: "*";\n  inherits: false;\n  initial-value: rotateZ(0);\n}\n@property --tw-skew-x {\n  syntax: "*";\n  inherits: false;\n  initial-value: skewX(0);\n}\n@property --tw-skew-y {\n  syntax: "*";\n  inherits: false;\n  initial-value: skewY(0);\n}\n@property --tw-pan-x {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-pan-y {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-pinch-zoom {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-space-y-reverse {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0;\n}\n@property --tw-space-x-reverse {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0;\n}\n@property --tw-divide-y-reverse {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0;\n}\n@property --tw-border-style {\n  syntax: "*";\n  inherits: false;\n  initial-value: solid;\n}\n@property --tw-leading {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-font-weight {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-shadow {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-shadow-color {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-inset-shadow {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-inset-shadow-color {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-ring-color {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-ring-shadow {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-inset-ring-color {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-inset-ring-shadow {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-ring-inset {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-ring-offset-width {\n  syntax: "<length>";\n  inherits: false;\n  initial-value: 0px;\n}\n@property --tw-ring-offset-color {\n  syntax: "*";\n  inherits: false;\n  initial-value: #fff;\n}\n@property --tw-ring-offset-shadow {\n  syntax: "*";\n  inherits: false;\n  initial-value: 0 0 #0000;\n}\n@property --tw-outline-style {\n  syntax: "*";\n  inherits: false;\n  initial-value: solid;\n}\n@property --tw-blur {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-brightness {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-contrast {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-grayscale {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-hue-rotate {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-invert {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-opacity {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-saturate {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-sepia {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-backdrop-blur {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-backdrop-brightness {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-backdrop-contrast {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-backdrop-grayscale {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-backdrop-hue-rotate {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-backdrop-invert {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-backdrop-opacity {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-backdrop-saturate {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-backdrop-sepia {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-duration {\n  syntax: "*";\n  inherits: false;\n}\n@property --tw-ease {\n  syntax: "*";\n  inherits: false;\n}\n';!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}(z);var U=0;function V(e,t,r,o,i,a){t||(t={});var s,l,u=t;if("ref"in u)for(l in u={},t)"ref"==l?s=t[l]:u[l]=t[l];var d={type:e,props:u,key:r,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--U,__i:-1,__u:0,__source:i,__self:a};if("function"==typeof e&&(s=e.defaultProps))for(l in s)void 0===u[l]&&(u[l]=s[l]);return n.vnode&&n.vnode(d),d}var H,W,$,q,X=0,Y=[],Z=n,K=Z.__b,J=Z.__r,Q=Z.diffed,ee=Z.__c,te=Z.unmount,ne=Z.__;function re(e,t){Z.__h&&Z.__h(W,e,X||t),X=0;var n=W.__H||(W.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function oe(e){return X=1,function(e,t,n){var r=re(H++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):_e(void 0,t),function(e){var t=r.__N?r.__N[0]:r.__[0],n=r.t(t,e);t!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=W,!W.__f)){var o=function(e,t,n){if(!r.__c.__H)return!0;var o=r.__c.__H.__.filter((function(e){return!!e.__c}));if(o.every((function(e){return!e.__N})))return!i||i.call(this,e,t,n);var a=r.__c.props!==e;return o.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(a=!0)}})),i&&i.call(this,e,t,n)||a};W.__f=!0;var i=W.shouldComponentUpdate,a=W.componentWillUpdate;W.componentWillUpdate=function(e,t,n){if(this.__e){var r=i;i=void 0,o(e,t,n),i=r}a&&a.call(this,e,t,n)},W.shouldComponentUpdate=o}return r.__N||r.__}(_e,e)}function ie(e,t){var n=re(H++,3);!Z.__s&&pe(n.__H,t)&&(n.__=e,n.u=t,W.__H.__h.push(n))}function ae(e,t){var n=re(H++,4);!Z.__s&&pe(n.__H,t)&&(n.__=e,n.u=t,W.__h.push(n))}function se(e){return X=5,le((function(){return{current:e}}),[])}function le(e,t){var n=re(H++,7);return pe(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function ue(e,t){return X=8,le((function(){return e}),t)}function de(e){var t=W.context[e.__c],n=re(H++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(W)),t.props.value):e.__}function ce(){for(var e;e=Y.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(ge),e.__H.__h.forEach(Fe),e.__H.__h=[]}catch(t){e.__H.__h=[],Z.__e(t,e.__v)}}Z.__b=function(e){W=null,K&&K(e)},Z.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),ne&&ne(e,t)},Z.__r=function(e){J&&J(e),H=0;var t=(W=e.__c).__H;t&&($===W?(t.__h=[],W.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.u=e.__N=void 0}))):(t.__h.forEach(ge),t.__h.forEach(Fe),t.__h=[],H=0)),$=W},Z.diffed=function(e){Q&&Q(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==Y.push(t)&&q===Z.requestAnimationFrame||((q=Z.requestAnimationFrame)||he)(ce)),t.__H.__.forEach((function(e){e.u&&(e.__H=e.u),e.u=void 0}))),$=W=null},Z.__c=function(e,t){t.some((function(e){try{e.__h.forEach(ge),e.__h=e.__h.filter((function(e){return!e.__||Fe(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],Z.__e(n,e.__v)}})),ee&&ee(e,t)},Z.unmount=function(e){te&&te(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{ge(e)}catch(e){t=e}})),n.__H=void 0,t&&Z.__e(t,n.__v))};var me="function"==typeof requestAnimationFrame;function he(e){var t,n=function(){clearTimeout(r),me&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);me&&(t=requestAnimationFrame(n))}function ge(e){var t=W,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),W=t}function Fe(e){var t=W;e.__c=e.__(),W=t}function pe(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function _e(e,t){return"function"==typeof t?t(e):t}var be=(e=>(e[e.Degree0=0]="Degree0",e[e.Degree90=1]="Degree90",e[e.Degree180=2]="Degree180",e[e.Degree270=3]="Degree270",e))(be||{});function fe(e){return{x:Math.floor(e.x),y:Math.floor(e.y)}}function Pe(e){return{width:Math.ceil(e.width),height:Math.ceil(e.height)}}function De(e){return{origin:fe(e.origin),size:Pe(e.size)}}function ve(e){const{width:t,height:n}=e;return{width:n,height:t}}function ye(e,t,n){return{width:(e=t%2==0?e:ve(e)).width*n,height:e.height*n}}function we(e){const t=[e.p1.x,e.p2.x,e.p3.x,e.p4.x],n=[e.p1.y,e.p2.y,e.p3.y,e.p4.y];return{origin:{x:Math.min(...t),y:Math.min(...n)},size:{width:Math.max(...t)-Math.min(...t),height:Math.max(...n)-Math.min(...n)}}}function xe(e,t,n){let r=t.x,o=t.y;switch(n){case 0:r=t.x,o=t.y;break;case 1:r=e.height-t.y,o=t.x;break;case 2:r=e.width-t.x,o=e.height-t.y;break;case 3:r=t.y,o=e.width-t.x}return{x:r,y:o}}function Ae(e,t){return{x:e.x*t,y:e.y*t}}function Se(e,t,n){let r=t.origin.x,o=t.origin.y,i=t.size;switch(n){case 0:break;case 1:r=e.height-t.origin.y-t.size.height,o=t.origin.x,i=ve(t.size);break;case 2:r=e.width-t.origin.x-t.size.width,o=e.height-t.origin.y-t.size.height;break;case 3:r=t.origin.y,o=e.width-t.origin.x-t.size.width,i=ve(t.size)}return{origin:{x:r,y:o},size:{width:i.width,height:i.height}}}function Ee(e,t){return{origin:{x:e.origin.x*t,y:e.origin.y*t},size:{width:e.size.width*t,height:e.size.height*t}}}function Ce(e,t,n,r){return Ee(Se(e,t,n),r)}function Me(e){if(0===e.length)return null;let t=e[0].origin.x,n=e[0].origin.y,r=e[0].origin.x+e[0].size.width,o=e[0].origin.y+e[0].size.height;for(const i of e)t=Math.min(t,i.origin.x),n=Math.min(n,i.origin.y),r=Math.max(r,i.origin.x+i.size.width),o=Math.max(o,i.origin.y+i.size.height);return{origin:{x:t,y:n},size:{width:r-t,height:o-n}}}var Te=class{debug(){}info(){}warn(){}error(){}perf(){}},Ge=class extends Error{constructor(e){super(`Task aborted: ${JSON.stringify(e)}`),this.name="TaskAbortedError"}},ke=class extends Error{constructor(e){super(`Task rejected: ${JSON.stringify(e)}`),this.name="TaskRejectedError"}},Ie=class e{constructor(){this.state={stage:0},this.resolvedCallbacks=[],this.rejectedCallbacks=[],this._promise=null}toPromise(){return this._promise||(this._promise=new Promise(((e,t)=>{this.wait((t=>e(t)),(e=>{"abort"===e.type?t(new Ge(e.reason)):t(new ke(e.reason))}))}))),this._promise}wait(e,t){switch(this.state.stage){case 0:this.resolvedCallbacks.push(e),this.rejectedCallbacks.push(t);break;case 1:e(this.state.result);break;case 2:t({type:"reject",reason:this.state.reason});break;case 3:t({type:"abort",reason:this.state.reason})}}resolve(e){if(0===this.state.stage){this.state={stage:1,result:e};for(const t of this.resolvedCallbacks)try{t(e)}catch(e){}this.resolvedCallbacks=[],this.rejectedCallbacks=[]}}reject(e){if(0===this.state.stage){this.state={stage:2,reason:e};for(const t of this.rejectedCallbacks)try{t({type:"reject",reason:e})}catch(e){}this.resolvedCallbacks=[],this.rejectedCallbacks=[]}}abort(e){if(0===this.state.stage){this.state={stage:3,reason:e};for(const t of this.rejectedCallbacks)try{t({type:"abort",reason:e})}catch(e){}this.resolvedCallbacks=[],this.rejectedCallbacks=[]}}fail(e){"abort"===e.type?this.abort(e.reason):this.reject(e.reason)}static all(t){const n=new e;if(0===t.length)return n.resolve([]),n;const r=new Array(t.length);let o=0,i=!1;return t.forEach(((e,a)=>{e.wait((e=>{i||(r[a]=e,o++,o===t.length&&(i=!0,n.resolve(r)))}),(e=>{i||(i=!0,"abort"===e.type?n.abort(e.reason):n.reject(e.reason))}))})),n}static allSettled(t){const n=new e;if(0===t.length)return n.resolve([]),n;const r=new Array(t.length);let o=0;return t.forEach(((e,i)=>{e.wait((e=>{r[i]={status:"resolved",value:e},o++,o===t.length&&n.resolve(r)}),(e=>{r[i]={status:"abort"===e.type?"aborted":"rejected",reason:e.reason},o++,o===t.length&&n.resolve(r)}))})),n}static race(t){const n=new e;if(0===t.length)return n.reject("No tasks provided"),n;let r=!1;return t.forEach((e=>{e.wait((e=>{r||(r=!0,n.resolve(e))}),(e=>{r||(r=!0,"abort"===e.type?n.abort(e.reason):n.reject(e.reason))}))})),n}static withProgress(t,n){const r=e.all(t);if(n){let e=0;t.forEach((r=>{r.wait((()=>{e++,n(e,t.length)}),(()=>{e++,n(e,t.length)}))}))}return r}},Oe=Object.freeze(["­","​","⁠","\ufeff","￾","￿"]),Re=new RegExp(`[${Oe.join("")}]`,"g");var Le=(e=>(e[e.Unknown=0]="Unknown",e[e.XYZ=1]="XYZ",e[e.FitPage=2]="FitPage",e[e.FitHorizontal=3]="FitHorizontal",e[e.FitVertical=4]="FitVertical",e[e.FitRectangle=5]="FitRectangle",e))(Le||{}),je=(e=>(e[e.Normal=0]="Normal",e[e.Multiply=1]="Multiply",e[e.Screen=2]="Screen",e[e.Overlay=3]="Overlay",e[e.Darken=4]="Darken",e[e.Lighten=5]="Lighten",e[e.ColorDodge=6]="ColorDodge",e[e.ColorBurn=7]="ColorBurn",e[e.HardLight=8]="HardLight",e[e.SoftLight=9]="SoftLight",e[e.Difference=10]="Difference",e[e.Exclusion=11]="Exclusion",e[e.Hue=12]="Hue",e[e.Saturation=13]="Saturation",e[e.Color=14]="Color",e[e.Luminosity=15]="Luminosity",e))(je||{}),Ne=Object.freeze([{id:0,label:"Normal",css:"normal"},{id:1,label:"Multiply",css:"multiply"},{id:2,label:"Screen",css:"screen"},{id:3,label:"Overlay",css:"overlay"},{id:4,label:"Darken",css:"darken"},{id:5,label:"Lighten",css:"lighten"},{id:6,label:"Color Dodge",css:"color-dodge"},{id:7,label:"Color Burn",css:"color-burn"},{id:8,label:"Hard Light",css:"hard-light"},{id:9,label:"Soft Light",css:"soft-light"},{id:10,label:"Difference",css:"difference"},{id:11,label:"Exclusion",css:"exclusion"},{id:12,label:"Hue",css:"hue"},{id:13,label:"Saturation",css:"saturation"},{id:14,label:"Color",css:"color"},{id:15,label:"Luminosity",css:"luminosity"}]),Be=Ne.reduce(((e,t)=>(e[t.id]=t,e)),{});function ze(e){return function(e){return Be[e]??Be[0]}(e).css}Ne.reduce(((e,t)=>(e[t.css]=t.id,e)),{});var Ue=Ne.map((e=>({value:e.id,label:e.label}))),Ve=(e=>(e[e.Unsupported=0]="Unsupported",e[e.Goto=1]="Goto",e[e.RemoteGoto=2]="RemoteGoto",e[e.URI=3]="URI",e[e.LaunchAppOrOpenFile=4]="LaunchAppOrOpenFile",e))(Ve||{}),He=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.TEXT=1]="TEXT",e[e.LINK=2]="LINK",e[e.FREETEXT=3]="FREETEXT",e[e.LINE=4]="LINE",e[e.SQUARE=5]="SQUARE",e[e.CIRCLE=6]="CIRCLE",e[e.POLYGON=7]="POLYGON",e[e.POLYLINE=8]="POLYLINE",e[e.HIGHLIGHT=9]="HIGHLIGHT",e[e.UNDERLINE=10]="UNDERLINE",e[e.SQUIGGLY=11]="SQUIGGLY",e[e.STRIKEOUT=12]="STRIKEOUT",e[e.STAMP=13]="STAMP",e[e.CARET=14]="CARET",e[e.INK=15]="INK",e[e.POPUP=16]="POPUP",e[e.FILEATTACHMENT=17]="FILEATTACHMENT",e[e.SOUND=18]="SOUND",e[e.MOVIE=19]="MOVIE",e[e.WIDGET=20]="WIDGET",e[e.SCREEN=21]="SCREEN",e[e.PRINTERMARK=22]="PRINTERMARK",e[e.TRAPNET=23]="TRAPNET",e[e.WATERMARK=24]="WATERMARK",e[e.THREED=25]="THREED",e[e.RICHMEDIA=26]="RICHMEDIA",e[e.XFAWIDGET=27]="XFAWIDGET",e[e.REDACT=28]="REDACT",e))(He||{}),We=(e=>(e[e.Normal=0]="Normal",e[e.Rollover=1]="Rollover",e[e.Down=2]="Down",e))(We||{}),$e=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.PUSHBUTTON=1]="PUSHBUTTON",e[e.CHECKBOX=2]="CHECKBOX",e[e.RADIOBUTTON=3]="RADIOBUTTON",e[e.COMBOBOX=4]="COMBOBOX",e[e.LISTBOX=5]="LISTBOX",e[e.TEXTFIELD=6]="TEXTFIELD",e[e.SIGNATURE=7]="SIGNATURE",e[e.XFA=8]="XFA",e[e.XFA_CHECKBOX=9]="XFA_CHECKBOX",e[e.XFA_COMBOBOX=10]="XFA_COMBOBOX",e[e.XFA_IMAGEFIELD=11]="XFA_IMAGEFIELD",e[e.XFA_LISTBOX=12]="XFA_LISTBOX",e[e.XFA_PUSHBUTTON=13]="XFA_PUSHBUTTON",e[e.XFA_SIGNATURE=14]="XFA_SIGNATURE",e[e.XFA_TEXTFIELD=15]="XFA_TEXTFIELD",e))($e||{}),qe=(e=>(e[e.Color=0]="Color",e[e.InteriorColor=1]="InteriorColor",e))(qe||{}),Xe=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.SOLID=1]="SOLID",e[e.DASHED=2]="DASHED",e[e.BEVELED=3]="BEVELED",e[e.INSET=4]="INSET",e[e.UNDERLINE=5]="UNDERLINE",e[e.CLOUDY=6]="CLOUDY",e))(Xe||{}),Ye=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.TEXT=1]="TEXT",e[e.PATH=2]="PATH",e[e.IMAGE=3]="IMAGE",e[e.SHADING=4]="SHADING",e[e.FORM=5]="FORM",e))(Ye||{}),Ze=Object.freeze({1:"invisible",2:"hidden",4:"print",8:"noZoom",16:"noRotate",32:"noView",64:"readOnly",128:"locked",256:"toggleNoView"});Object.entries(Ze).reduce(((e,[t,n])=>(e[n]=Number(t),e)),{});var Ke=(e=>(e[e.None=0]="None",e[e.MatchCase=1]="MatchCase",e[e.MatchWholeWord=2]="MatchWholeWord",e[e.MatchConsecutive=4]="MatchConsecutive",e))(Ke||{}),Je=(e=>(e[e.Ok=0]="Ok",e[e.Unknown=1]="Unknown",e[e.NotFound=2]="NotFound",e[e.WrongFormat=3]="WrongFormat",e[e.Password=4]="Password",e[e.Security=5]="Security",e[e.PageError=6]="PageError",e[e.XFALoad=7]="XFALoad",e[e.XFALayout=8]="XFALayout",e[e.Cancelled=9]="Cancelled",e[e.Initialization=10]="Initialization",e[e.NotReady=11]="NotReady",e[e.NotSupport=12]="NotSupport",e[e.LoadDoc=13]="LoadDoc",e[e.DocNotOpen=14]="DocNotOpen",e[e.CantCloseDoc=15]="CantCloseDoc",e[e.CantCreateNewDoc=16]="CantCreateNewDoc",e[e.CantImportPages=17]="CantImportPages",e[e.CantCreateAnnot=18]="CantCreateAnnot",e[e.CantSetAnnotRect=19]="CantSetAnnotRect",e[e.CantSetAnnotContent=20]="CantSetAnnotContent",e[e.CantRemoveInkList=21]="CantRemoveInkList",e[e.CantAddInkStoke=22]="CantAddInkStoke",e[e.CantReadAttachmentSize=23]="CantReadAttachmentSize",e[e.CantReadAttachmentContent=24]="CantReadAttachmentContent",e[e.CantFocusAnnot=25]="CantFocusAnnot",e[e.CantSelectText=26]="CantSelectText",e[e.CantSelectOption=27]="CantSelectOption",e[e.CantCheckField=28]="CantCheckField",e))(Je||{}),Qe=class{static create(){return new Ie}static resolve(e){const t=new Ie;return t.resolve(e),t}static reject(e){const t=new Ie;return t.reject(e),t}static abort(e){const t=new Ie;return t.reject(e),t}};function et(e){if(!e?.startsWith("D:")||e.length<16)return;const t=+e.slice(2,6),n=+e.slice(6,8)-1,r=+e.slice(8,10),o=+e.slice(10,12),i=+e.slice(12,14),a=+e.slice(14,16);return new Date(Date.UTC(t,n,r,o,i,a))}function tt(e=new Date){const t=(e,t=2)=>e.toString().padStart(t,"0");return`D:${e.getUTCFullYear()}${t(e.getUTCMonth()+1)}${t(e.getUTCDate())}${t(e.getUTCHours())}${t(e.getUTCMinutes())}${t(e.getUTCSeconds())}`}function nt(){}let rt=class{constructor(){this.dependencyGraph=new Map}addNode(e,t=[]){this.dependencyGraph.set(e,new Set(t))}hasCircularDependencies(){const e=new Set,t=new Set,n=r=>{e.add(r),t.add(r);const o=this.dependencyGraph.get(r)||new Set;for(const r of o)if(e.has(r)){if(t.has(r))return!0}else if(n(r))return!0;return t.delete(r),!1};for(const t of this.dependencyGraph.keys())if(!e.has(t)&&n(t))return!0;return!1}resolveLoadOrder(){if(this.hasCircularDependencies())throw new Error("Circular dependencies detected");const e=[],t=new Set,n=new Set,r=o=>{if(n.has(o))throw new Error("Circular dependency");if(t.has(o))return;n.add(o);const i=this.dependencyGraph.get(o)||new Set;for(const e of i)r(e);n.delete(o),t.add(o),e.push(o)};for(const e of this.dependencyGraph.keys())t.has(e)||r(e);return e}},ot=class extends Error{constructor(e){super(e),this.name="PluginRegistrationError"}},it=class extends Error{constructor(e){super(e),this.name="PluginNotFoundError"}},at=class extends Error{constructor(e){super(e),this.name="CircularDependencyError"}},st=class extends Error{constructor(e){super(e),this.name="PluginConfigurationError"}},lt=class{constructor(e,t){this.store=e,this.pluginId=t}getState(){return this.store.getState().plugins[this.pluginId]}dispatch(e){return this.store.dispatchToPlugin(this.pluginId,e)}subscribeToState(e){return this.store.subscribeToPlugin(this.pluginId,((t,n,r)=>{e(t,n,r)}))}onAction(e,t){return this.store.onAction(e,((e,n,r)=>{t(e,n.plugins[this.pluginId],r.plugins[this.pluginId])}))}};const ut="LOAD_DOCUMENT",dt="SET_DOCUMENT",ct="SET_DOCUMENT_ERROR",mt="SET_SCALE",ht="SET_ROTATION",gt="SET_PAGES",Ft=[ut,dt,ct,mt,ht,gt],pt=e=>({type:gt,payload:e});let _t=class{constructor(e,t){this.initialCoreState=t,this.pluginReducers={},this.listeners=[],this.pluginListeners={},this.state={core:t,plugins:{}},this.coreReducer=e}addPluginReducer(e,t,n){this.state.plugins[e]=n,this.pluginReducers[e]=t}dispatchToCore(e){if(!this.coreReducer)return this.getState();const t=this.getState();this.state.core=this.coreReducer(this.state.core,e);const n=this.getState();return this.listeners.forEach((r=>r(e,n,t))),n}dispatchToPlugin(e,t,n=!0){const r=this.getState(),o=this.pluginReducers[e];if(!o)return r;const i=r.plugins[e],a=o(i,t);this.state.plugins[e]=a;const s=this.getState();return n&&this.listeners.forEach((e=>e(t,s,r))),this.pluginListeners[e]&&this.pluginListeners[e].forEach((e=>{e(t,a,i)})),a}dispatch(e){const t=this.getState();this.isCoreAction(e)&&(this.state.core=this.coreReducer(this.state.core,e));for(const n in this.pluginReducers){const r=this.pluginReducers[n],o=t.plugins[n];r&&(this.state.plugins[n]=r(o,e))}const n=this.getState();return this.listeners.forEach((r=>r(e,n,t))),n}getState(){return{core:{...this.state.core},plugins:{...this.state.plugins}}}subscribe(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter((t=>t!==e))}}subscribeToPlugin(e,t){if(!(e in this.state.plugins))throw new Error(`Plugin state not found for plugin "${e}". Did you forget to call addPluginReducer?`);return this.pluginListeners[e]||(this.pluginListeners[e]=[]),this.pluginListeners[e].push(t),()=>{this.pluginListeners[e]=this.pluginListeners[e].filter((e=>e!==t)),0===this.pluginListeners[e].length&&delete this.pluginListeners[e]}}onAction(e,t){return this.subscribe(((n,r,o)=>{n.type===e&&t(n,r,o)}))}getPluginStore(e){if(!(e in this.state.plugins))throw new Error(`Plugin state not found for plugin "${e}". Did you forget to call addPluginReducer?`);return new lt(this,e)}isCoreAction(e){return Ft.includes(e.type)}destroy(){var e,t;this.listeners.length=0;for(const n in this.pluginListeners)null==(t=null==(e=this.pluginListeners[n])?void 0:e.splice)||t.call(e,0);this.pluginListeners={},this.pluginReducers={},this.state.plugins={},this.state.core={...this.initialCoreState}}};const bt=e=>e.pages.map((t=>t.map((t=>({...t,rotatedSize:ye(t.size,e.rotation,1)}))))),ft=(e,t)=>{switch(t.type){case ut:return{...e,loading:!0,error:null};case dt:return{...e,document:t.payload,pages:t.payload.pages.map((e=>[e])),loading:!1,error:null};case ht:return{...e,rotation:t.payload};case gt:return{...e,pages:t.payload};case ct:return{...e,loading:!1,error:t.payload};case mt:return{...e,scale:t.payload};default:return e}};let Pt=class{constructor(e,t){this.plugins=new Map,this.manifests=new Map,this.capabilities=new Map,this.status=new Map,this.configurations=new Map,this.engineInitialized=!1,this.initPromise=null,this.pendingRegistrations=[],this.processingRegistrations=[],this.initialized=!1,this.isInitializing=!1,this.pluginsReadyPromise=null,this.destroyed=!1,this.resolver=new rt,this.engine=e,this.initialCoreState=(e=>({scale:(null==e?void 0:e.scale)??1,rotation:(null==e?void 0:e.rotation)??be.Degree0,document:null,pages:[],loading:!1,error:null}))(t),this.store=new _t(ft,this.initialCoreState)}async ensureEngineInitialized(){this.engineInitialized||(this.engine.initialize?(await this.engine.initialize().toPromise(),this.engineInitialized=!0):this.engineInitialized=!0)}registerPlugin(e,t){if(this.initialized&&!this.isInitializing)throw new ot("Cannot register plugins after initialization");this.validateManifest(e.manifest),this.store.addPluginReducer(e.manifest.id,e.reducer,"function"==typeof e.initialState?e.initialState(this.initialCoreState,{...e.manifest.defaultConfig,...t}):e.initialState),this.pendingRegistrations.push({package:e,config:t})}getStore(){return this.store}getEngine(){return this.engine}pluginsReady(){return this.pluginsReadyPromise||(this.pluginsReadyPromise=(async()=>{this.initialized||await this.initialize();const e=Array.from(this.plugins.values()).map((e=>"function"==typeof e.ready?e.ready():Promise.resolve()));await Promise.all(e)})()),this.pluginsReadyPromise}async initialize(){if(this.destroyed)throw new ot("Registry has been destroyed");return this.initPromise||(this.initPromise=(async()=>{var e;if(this.initialized)throw new ot("Registry is already initialized");this.isInitializing=!0;try{if(await this.ensureEngineInitialized(),this.destroyed)return;for(;this.pendingRegistrations.length>0;){if(this.destroyed)return;this.processingRegistrations=[...this.pendingRegistrations],this.pendingRegistrations=[];for(const e of this.processingRegistrations){const t=new Set,n=[...e.package.manifest.requires,...e.package.manifest.optional];for(const e of n){const n=this.processingRegistrations.find((t=>t.package.manifest.provides.includes(e)));n&&t.add(n.package.manifest.id)}this.resolver.addNode(e.package.manifest.id,[...t])}const e=this.resolver.resolveLoadOrder();for(const t of e){const e=this.processingRegistrations.find((e=>e.package.manifest.id===t));await this.initializePlugin(e.package.manifest,e.package.create,e.config)}this.processingRegistrations=[],this.resolver=new rt}for(const t of this.plugins.values())await(null==(e=t.postInitialize)?void 0:e.call(t).catch((e=>{console.error(`Error in postInitialize for plugin ${t.id}`,e),this.status.set(t.id,"error")})));this.initialized=!0}catch(e){throw e instanceof Error?new at(`Failed to resolve plugin dependencies: ${e.message}`):e}finally{this.isInitializing=!1}})()),this.initPromise}async initializePlugin(e,t,n){const r={...e.defaultConfig,...n};this.validateConfig(e.id,r,e.defaultConfig);const o=t(this,this.engine,r);this.validatePlugin(o);for(const t of e.requires)if(!this.capabilities.has(t))throw new ot(`Missing required capability: ${t} for plugin ${e.id}`);for(const t of e.optional)this.capabilities.has(t)&&console.debug(`Optional capability ${t} is available for plugin ${e.id}`);console.log("initializePlugin",e.id,e.provides);for(const t of e.provides){if(this.capabilities.has(t))throw new ot(`Capability ${t} is already provided by plugin ${this.capabilities.get(t)}`);this.capabilities.set(t,e.id)}this.plugins.set(e.id,o),this.manifests.set(e.id,e),this.status.set(e.id,"registered"),this.configurations.set(e.id,r);try{o.initialize&&await o.initialize(r),this.status.set(e.id,"active")}catch(t){throw this.plugins.delete(e.id),this.manifests.delete(e.id),console.log("initializePlugin failed",e.id,e.provides),e.provides.forEach((e=>this.capabilities.delete(e))),t}}getPluginConfig(e){const t=this.configurations.get(e);if(!t)throw new it(`Configuration for plugin ${e} not found`);return t}validateConfig(e,t,n){const r=Object.keys(n).filter((e=>!t.hasOwnProperty(e)));if(r.length>0)throw new st(`Missing required configuration keys for plugin ${e}: ${r.join(", ")}`)}async updatePluginConfig(e,t){const n=this.getPlugin(e);if(!n)throw new it(`Plugin ${e} not found`);const r=this.manifests.get(e),o=this.configurations.get(e);if(!r||!o)throw new it(`Plugin ${e} not found`);const i={...o,...t};this.validateConfig(e,i,r.defaultConfig),this.configurations.set(e,i),n.initialize&&await n.initialize(i)}registerPluginBatch(e){for(const t of e)this.registerPlugin(t.package,t.config)}async unregisterPlugin(e){const t=this.plugins.get(e);if(!t)throw new it(`Plugin ${e} is not registered`);const n=this.manifests.get(e);if(!n)throw new it(`Manifest for plugin ${e} not found`);for(const[t,r]of this.manifests.entries())if(t!==e&&[...r.requires,...r.optional].some((e=>n.provides.includes(e))))throw new ot(`Cannot unregister plugin ${e}: plugin ${t} depends on it`);try{t.destroy&&await t.destroy();for(const e of n.provides)this.capabilities.delete(e);this.plugins.delete(e),this.manifests.delete(e),this.status.delete(e)}catch(t){throw t instanceof Error?new Error(`Failed to unregister plugin ${e}: ${t.message}`):t}}getPlugin(e){return this.plugins.get(e)||null}getCapabilityProvider(e){const t=this.capabilities.get(e);return t?this.getPlugin(t):null}hasCapability(e){return this.capabilities.has(e)}getAllPlugins(){return Array.from(this.plugins.values())}getPluginStatus(e){const t=this.status.get(e);if(!t)throw new it(`Plugin ${e} not found`);return t}validatePlugin(e){if(!e.id)throw new ot("Plugin must have an id")}validateManifest(e){if(!e.id)throw new ot("Manifest must have an id");if(!e.name)throw new ot("Manifest must have a name");if(!e.version)throw new ot("Manifest must have a version");if(!Array.isArray(e.provides))throw new ot("Manifest must have a provides array");if(!Array.isArray(e.requires))throw new ot("Manifest must have a requires array");if(!Array.isArray(e.optional))throw new ot("Manifest must have an optional array")}isDestroyed(){return this.destroyed}async destroy(){var e;if(this.destroyed)throw new ot("Registry has already been destroyed");this.destroyed=!0;try{await this.initPromise}catch{}for(const t of Array.from(this.plugins.values()).reverse())await(null==(e=t.destroy)?void 0:e.call(t));this.store.destroy(),this.plugins.clear(),this.manifests.clear(),this.capabilities.clear(),this.status.clear(),this.pendingRegistrations.length=0,this.processingRegistrations.length=0}};function Dt(e,t){return{package:e,config:t}}let vt=class{constructor(e,t){if(this.id=e,this.registry=t,this.debouncedActions={},this.unsubscribeFromState=null,this.unsubscribeFromCoreStore=null,e!==this.constructor.id)throw new Error(`Plugin ID mismatch: ${e} !== ${this.constructor.id}`);this.coreStore=this.registry.getStore(),this.pluginStore=this.coreStore.getPluginStore(this.id),this.unsubscribeFromState=this.pluginStore.subscribeToState(((e,t,n)=>{this.onStoreUpdated(n,t)})),this.unsubscribeFromCoreStore=this.coreStore.subscribe(((e,t,n)=>{this.onCoreStoreUpdated(n,t)})),this.readyPromise=new Promise((e=>{this.readyResolve=e})),this.readyResolve()}provides(){if(!this._capability){const e=this.buildCapability();this._capability=Object.freeze(e)}return this._capability}get state(){return this.pluginStore.getState()}get coreState(){return this.coreStore.getState()}getState(){return this.pluginStore.getState()}getCoreState(){return this.coreStore.getState()}dispatchCoreAction(e){return this.coreStore.dispatchToCore(e)}dispatchToAllPlugins(e){return this.coreStore.dispatch(e)}dispatch(e){return this.pluginStore.dispatch(e)}debouncedDispatch(e,t=100){const n=Date.now();return n-(this.debouncedActions[e.type]||0)>=t&&(this.debouncedActions[e.type]=n,this.dispatch(e),!0)}subscribe(e){return this.pluginStore.subscribeToState(e)}subscribeToCoreStore(e){return this.coreStore.subscribe(e)}onStoreUpdated(e,t){}onCoreStoreUpdated(e,t){}destroy(){this.unsubscribeFromState&&(this.unsubscribeFromState(),this.unsubscribeFromState=null),this.unsubscribeFromCoreStore&&(this.unsubscribeFromCoreStore(),this.unsubscribeFromCoreStore=null)}ready(){return this.readyPromise}markReady(){this.readyResolve()}resetReady(){this.readyPromise=new Promise((e=>{this.readyResolve=e}))}},yt=class{constructor(e,t){this.handler=e,this.options=t,this.lastRun=0,this.handle=e=>{"debounce"===this.options.mode?this.debounce(e):this.throttle(e)}}debounce(e){this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout((()=>{this.handler(e),this.timeoutId=void 0}),this.options.wait)}throttle(e){if("debounce"===this.options.mode)return;const t=Date.now(),n=this.options.throttleMode||"leading-trailing";t-this.lastRun>=this.options.wait&&("leading-trailing"===n&&this.handler(e),this.lastRun=t),this.timeoutId&&window.clearTimeout(this.timeoutId),this.timeoutId=window.setTimeout((()=>{this.handler(e),this.lastRun=Date.now(),this.timeoutId=void 0}),this.options.wait-(t-this.lastRun))}destroy(){this.timeoutId&&window.clearTimeout(this.timeoutId)}};function wt(e,t,n){return e<t?t:e>n?n:e}function xt(e,t,n){if(e===t)return!0;if(null==e||null==t)return e===t;const r=typeof e;if(r!==typeof t)return!1;if("object"===r){n||(n=new Set);const r=function(e,t){return`${Et(e)}__${Et(t)}`}(e,t);if(n.has(r))return!0;n.add(r);const o=Array.isArray(e),i=Array.isArray(t);return o&&i?function(e,t,n){if(e.length!==t.length)return!1;const r=new Array(t.length).fill(!1);e:for(let o=0;o<e.length;o++){const i=e[o];for(let e=0;e<t.length;e++)if(!r[e]&&xt(i,t[e],n)){r[e]=!0;continue e}return!1}return!0}(e,t,n):!o&&!i&&function(e,t,n){const r=Object.keys(e).sort(),o=Object.keys(t).sort();if(r.length!==o.length)return!1;for(let e=0;e<r.length;e++)if(r[e]!==o[e])return!1;for(const o of r){if(!xt(e[o],t[o],n))return!1}return!0}(e,t,n)}return!1}let At=0;const St=new WeakMap;function Et(e){return St.has(e)||St.set(e,++At),St.get(e)}function Ct(){const e=new Set;return{emit:(t=void 0)=>e.forEach((e=>e(t))),on:t=>(e.add(t),()=>e.delete(t)),off:t=>e.delete(t),clear:()=>e.clear()}}function Mt(e,t=xt){const n=new Set,r=new Map;let o=e;const i=(e,t)=>{let i=e,a=()=>{};if(t){const n=new yt(e,t);i=n.handle,a=()=>n.destroy(),r.set(e,{wrapped:i,destroy:a})}return void 0!==o&&i(o),n.add(i),()=>{n.delete(i),a(),r.delete(e)}};return{get value(){return o},emit(e=void 0){(void 0===o||!t(o,e))&&(o=e,(e=>{n.forEach((t=>t(e)))})(e))},on:i,off(e){const t=r.get(e);t?(n.delete(t.wrapped),t.destroy(),r.delete(e)):n.delete(e)},clear(){n.clear(),r.forEach((e=>e.destroy())),r.clear()},select:(e,t=xt)=>(n,r)=>{let a;if(void 0!==o){const t=e(o);a=t,n(t)}return i((r=>{const o=e(r);(void 0===a||!t(a,o))&&(a=o,n(o))}),r)}}}const Tt=B({registry:null,isInitializing:!0,pluginsReady:!1});function Gt({engine:e,onInitialized:t,plugins:n,children:r}){const[o,i]=oe(null),[a,s]=oe(!0),[l,u]=oe(!1),d=se(t);return ie((()=>{d.current=t}),[t]),ie((()=>{const t=new Pt(e);return t.registerPluginBatch(n),(async()=>{var e;await t.initialize(),!t.isDestroyed()&&(await(null==(e=d.current)?void 0:e.call(d,t)),!t.isDestroyed()&&(t.pluginsReady().then((()=>{t.isDestroyed()||u(!0)})),i(t),s(!1)))})().catch(console.error),()=>{t.destroy(),i(null),s(!0),u(!1)}}),[e,n]),V(Tt.Provider,{value:{registry:o,isInitializing:a,pluginsReady:l},children:"function"==typeof r?r({registry:o,isInitializing:a,pluginsReady:l}):r})}function kt(){const e=de(Tt);if(void 0===e)throw new Error("useCapability must be used within a PDFContext.Provider");const{registry:t,isInitializing:n}=e;if(n)return e;if(null===t)throw new Error("PDF registry failed to initialize properly");return e}function It(e){const{registry:t}=kt();if(null===t)return{plugin:null,isLoading:!0,ready:new Promise((()=>{}))};const n=t.getPlugin(e);if(!n)throw new Error(`Plugin ${e} not found`);return{plugin:n,isLoading:!1,ready:n.ready()}}function Ot(e){const{plugin:t,isLoading:n,ready:r}=It(e);if(!t)return{provides:null,isLoading:n,ready:r};if(!t.provides)throw new Error(`Plugin ${e} does not provide a capability`);return{provides:t.provides(),isLoading:n,ready:r}}const Rt="https://cdn.jsdelivr.net/npm/@embedpdf/pdfium@1.0.11/dist/pdfium.wasm";const Lt="viewport",jt={id:Lt,name:"Viewport Plugin",version:"1.0.0",provides:["viewport"],requires:[],optional:[],defaultConfig:{enabled:!0,viewportGap:10,scrollEndDelay:300}},Nt="SET_VIEWPORT_METRICS",Bt="SET_VIEWPORT_SCROLL_METRICS",zt="SET_VIEWPORT_GAP",Ut="SET_SCROLL_ACTIVITY";const Vt={viewportGap:0,viewportMetrics:{width:0,height:0,scrollTop:0,scrollLeft:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0,relativePosition:{x:0,y:0}},isScrolling:!1},Ht=class extends vt{constructor(e,t,n){super(e,t),this.id=e,this.viewportResize$=Mt(),this.viewportMetrics$=Mt(),this.scrollMetrics$=Mt(),this.scrollReq$=Ct(),this.scrollActivity$=Mt(),this.rectProvider=null,n.viewportGap&&this.dispatch(function(e){return{type:zt,payload:e}}(n.viewportGap)),this.scrollEndDelay=n.scrollEndDelay||300}buildCapability(){return{getViewportGap:()=>this.state.viewportGap,getMetrics:()=>this.state.viewportMetrics,getBoundingRect:()=>{var e;return(null==(e=this.rectProvider)?void 0:e.call(this))??{origin:{x:0,y:0},size:{width:0,height:0}}},scrollTo:e=>this.scrollTo(e),isScrolling:()=>this.state.isScrolling,onScrollChange:this.scrollMetrics$.on,onViewportChange:this.viewportMetrics$.on,onViewportResize:this.viewportResize$.on,onScrollActivity:this.scrollActivity$.on}}setViewportResizeMetrics(e){this.dispatch(function(e){return{type:Nt,payload:e}}(e)),this.viewportResize$.emit(this.state.viewportMetrics)}setViewportScrollMetrics(e){(e.scrollTop!==this.state.viewportMetrics.scrollTop||e.scrollLeft!==this.state.viewportMetrics.scrollLeft)&&(this.dispatch(function(e){return{type:Bt,payload:e}}(e)),this.bumpScrollActivity(),this.scrollMetrics$.emit({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}))}onScrollRequest(e){return this.scrollReq$.on(e)}registerBoundingRectProvider(e){this.rectProvider=e}bumpScrollActivity(){this.debouncedDispatch(function(e){return{type:Ut,payload:e}}(!1),this.scrollEndDelay)}scrollTo(e){const{x:t,y:n,center:r,behavior:o="auto"}=e;if(r){const e=this.state.viewportMetrics,r=t-e.clientWidth/2,i=n-e.clientHeight/2;this.scrollReq$.emit({x:r,y:i,behavior:o})}else this.scrollReq$.emit({x:t,y:n,behavior:o})}onStoreUpdated(e,t){e!==t&&(this.viewportMetrics$.emit(t.viewportMetrics),e.isScrolling!==t.isScrolling&&this.scrollActivity$.emit(t.isScrolling))}async initialize(e){}async destroy(){super.destroy(),this.viewportMetrics$.clear(),this.viewportResize$.clear(),this.scrollMetrics$.clear(),this.scrollReq$.clear(),this.scrollActivity$.clear(),this.rectProvider=null,this.scrollEndTimer&&clearTimeout(this.scrollEndTimer)}};Ht.id="viewport";let Wt=Ht;const $t={manifest:jt,create:(e,t,n)=>new Wt(Lt,e,n),reducer:(e=Vt,t)=>{switch(t.type){case zt:return{...e,viewportGap:t.payload};case Nt:return{...e,viewportMetrics:{width:t.payload.width,height:t.payload.height,scrollTop:t.payload.scrollTop,scrollLeft:t.payload.scrollLeft,clientWidth:t.payload.clientWidth,clientHeight:t.payload.clientHeight,scrollWidth:t.payload.scrollWidth,scrollHeight:t.payload.scrollHeight,relativePosition:{x:t.payload.scrollWidth<=t.payload.clientWidth?0:t.payload.scrollLeft/(t.payload.scrollWidth-t.payload.clientWidth),y:t.payload.scrollHeight<=t.payload.clientHeight?0:t.payload.scrollTop/(t.payload.scrollHeight-t.payload.clientHeight)}}};case Bt:return{...e,viewportMetrics:{...e.viewportMetrics,scrollTop:t.payload.scrollTop,scrollLeft:t.payload.scrollLeft},isScrolling:!0};case Ut:return{...e,isScrolling:t.payload};default:return e}},initialState:Vt},qt=()=>Ot(Wt.id);function Xt(){const{plugin:e}=It(Wt.id),t=se(null);return ae((()=>{if(!e)return;const n=t.current;if(!n)return;e.registerBoundingRectProvider((()=>{const e=n.getBoundingClientRect();return{origin:{x:e.left,y:e.top},size:{width:e.width,height:e.height}}}));const r=()=>{e.setViewportScrollMetrics({scrollTop:n.scrollTop,scrollLeft:n.scrollLeft})};n.addEventListener("scroll",r);const o=new ResizeObserver((()=>{e.setViewportResizeMetrics({width:n.offsetWidth,height:n.offsetHeight,clientWidth:n.clientWidth,clientHeight:n.clientHeight,scrollTop:n.scrollTop,scrollLeft:n.scrollLeft,scrollWidth:n.scrollWidth,scrollHeight:n.scrollHeight})}));o.observe(n);const i=e.onScrollRequest((({x:e,y:t,behavior:r="auto"})=>{requestAnimationFrame((()=>{n.scrollTo({left:e,top:t,behavior:r})}))}));return()=>{e.registerBoundingRectProvider(null),n.removeEventListener("scroll",r),o.disconnect(),i()}}),[e]),t}function Yt({children:e,...t}){const[n,r]=oe(0),o=Xt(),{provides:i}=qt();ie((()=>{i&&r(i.getViewportGap())}),[i]);const{style:a,...s}=t;return V("div",{...s,ref:o,style:{..."object"==typeof a?a:{},padding:`${n}px`},children:e})}var Zt=(e=>(e.Vertical="vertical",e.Horizontal="horizontal",e))(Zt||{});class Kt{constructor(e){this.pageGap=e.pageGap??20,this.viewportGap=e.viewportGap??20,this.bufferSize=e.bufferSize??2}getVisibleRange(e,t,n){const r=this.getScrollOffset(e),o=r,i=r+this.getClientSize(e);let a=0;for(;a<t.length&&(t[a].offset+t[a].height)*n<=o;)a++;let s=a;for(;s<t.length&&t[s].offset*n<=i;)s++;return{start:Math.max(0,a-this.bufferSize),end:Math.min(t.length-1,s+this.bufferSize-1)}}handleScroll(e,t,n){const r=this.getVisibleRange(e,t,n),o=t.slice(r.start,r.end+1),i=this.calculatePageVisibility(o,e,n),a=i.map((e=>e.pageNumber)),s=t.slice(r.start,r.end+1).flatMap((e=>e.index)),l=this.determineCurrentPage(i),u=t[r.start],d=t[r.end],c=u?u.offset*n:0,m=d?(t[t.length-1].offset+t[t.length-1].height)*n-(d.offset+d.height)*n:0;return{currentPage:l,visiblePages:a,pageVisibilityMetrics:i,renderedPageIndexes:s,scrollOffset:{x:e.scrollLeft,y:e.scrollTop},startSpacing:c,endSpacing:m}}calculatePageVisibility(e,t,n){const r=[];return e.forEach((e=>{e.pageLayouts.forEach((o=>{const i=e.x*n,a=e.y*n,s=i+o.x*n,l=a+o.y*n,u=o.rotatedWidth*n,d=o.rotatedHeight*n,c=t.scrollLeft,m=t.scrollTop,h=c+t.clientWidth,g=m+t.clientHeight,F=Math.max(s,c),p=Math.max(l,m),_=Math.min(s+u,h),b=Math.min(l+d,g);if(F<_&&p<b){const e=_-F,t=b-p,i=u*d,a=e*t;r.push({pageNumber:o.pageNumber,viewportX:F-c,viewportY:p-m,visiblePercentage:a/i*100,original:{pageX:(F-s)/n,pageY:(p-l)/n,visibleWidth:e/n,visibleHeight:t/n,scale:1},scaled:{pageX:F-s,pageY:p-l,visibleWidth:e,visibleHeight:t,scale:n}})}}))})),r}determineCurrentPage(e){if(0===e.length)return 1;const t=Math.max(...e.map((e=>e.visiblePercentage))),n=e.filter((e=>e.visiblePercentage===t));return 1===n.length?n[0].pageNumber:n.sort(((e,t)=>e.pageNumber-t.pageNumber))[0].pageNumber}getRectLocationForPage(e,t){const n=t.find((t=>t.pageNumbers.includes(e)));if(!n)return null;const r=n.pageLayouts.find((t=>t.pageNumber===e));return r?{origin:{x:n.x+r.x,y:n.y+r.y},size:{width:r.width,height:r.height}}:null}getScrollPositionForPage(e,t,n,r,o){const i=this.getRectLocationForPage(e,t);if(!i)return null;const a=Ae(i.origin,n);if(o){const e=(s={width:i.size.width,height:i.size.height},l={x:o.x,y:o.y},u=n,Ae(xe(s,l,r),u));return{x:a.x+e.x+this.viewportGap,y:a.y+e.y+this.viewportGap}}var s,l,u;return{x:a.x+this.viewportGap,y:a.y+this.viewportGap}}getRectPositionForPage(e,t,n,r,o){const i=this.getRectLocationForPage(e,t);if(!i)return null;const a=Ae(i.origin,n),s=Ce({width:i.size.width,height:i.size.height},o,r,n);return{origin:{x:a.x+s.origin.x,y:a.y+s.origin.y},size:s.size}}}let Jt=class extends Kt{constructor(e){super(e)}createVirtualItems(e){let t=0;return e.map(((e,n)=>{let r=0;const o=e.map((e=>{const t={pageNumber:e.index+1,pageIndex:e.index,x:r,y:0,width:e.size.width,height:e.size.height,rotatedWidth:e.rotatedSize.width,rotatedHeight:e.rotatedSize.height};return r+=e.rotatedSize.width+this.pageGap,t})),i=e.reduce(((t,n,r)=>t+n.rotatedSize.width+(r<e.length-1?this.pageGap:0)),0),a=Math.max(...e.map((e=>e.rotatedSize.height))),s={id:`item-${n}`,x:0,y:t,offset:t,width:i,height:a,pageLayouts:o,pageNumbers:e.map((e=>e.index+1)),index:n};return t+=a+this.pageGap,s}))}getTotalContentSize(e){if(0===e.length)return{width:0,height:0};const t=Math.max(...e.map((e=>e.width)));return{width:t,height:e[e.length-1].y+e[e.length-1].height}}getScrollOffset(e){return e.scrollTop}getClientSize(e){return e.clientHeight}},Qt=class extends Kt{constructor(e){super(e)}createVirtualItems(e){let t=0;return e.map(((e,n)=>{let r=0;const o=e.map((e=>{const t={pageNumber:e.index+1,pageIndex:e.index,x:r,y:0,width:e.size.width,height:e.size.height,rotatedWidth:e.rotatedSize.width,rotatedHeight:e.rotatedSize.height};return r+=e.rotatedSize.width+this.pageGap,t})),i=e.reduce(((t,n,r)=>t+n.rotatedSize.width+(r<e.length-1?this.pageGap:0)),0),a=Math.max(...e.map((e=>e.rotatedSize.height))),s={id:`item-${n}`,x:t,y:0,offset:t,width:i,height:a,pageLayouts:o,pageNumbers:e.map((e=>e.index+1)),index:n};return t+=i+this.pageGap,s}))}getTotalContentSize(e){if(0===e.length)return{width:0,height:0};const t=e[e.length-1].x+e[e.length-1].width,n=Math.max(...e.map((e=>e.height)));return{width:t,height:n}}getScrollOffset(e){return e.scrollLeft}getClientSize(e){return e.clientWidth}};const en="UPDATE_SCROLL_STATE",tn="UPDATE_TOTAL_PAGES";function nn(e){return{type:en,payload:e}}const rn=class extends vt{constructor(e,t,n){var r,o,i,a;super(e,t),this.id=e,this.config=n,this.currentScale=1,this.currentRotation=be.Degree0,this.currentPage=1,this.layoutReady=!1,this.layout$=Mt(),this.scroll$=Mt(),this.state$=Mt(),this.scrollerLayout$=Mt(),this.pageChange$=Mt(),this.layoutReady$=Mt(),this.viewport=this.registry.getPlugin("viewport").provides(),this.strategyConfig={pageGap:(null==(r=this.config)?void 0:r.pageGap)??10,viewportGap:this.viewport.getViewportGap(),bufferSize:(null==(o=this.config)?void 0:o.bufferSize)??2},this.strategy=(null==(i=this.config)?void 0:i.strategy)===Zt.Horizontal?new Qt(this.strategyConfig):new Jt(this.strategyConfig),this.initialPage=null==(a=this.config)?void 0:a.initialPage,this.currentScale=this.coreState.core.scale,this.currentRotation=this.coreState.core.rotation,this.viewport.onViewportChange((e=>this.commitMetrics(this.computeMetrics(e))),{mode:"throttle",wait:250}),this.coreStore.onAction(dt,((e,t)=>{const n=t.core.pages.length;this.dispatch(function(e){return{type:tn,payload:e}}(n)),this.pageChange$.emit({pageNumber:this.currentPage,totalPages:n}),this.refreshAll(bt(t.core),this.viewport.getMetrics())})),this.coreStore.onAction(ht,((e,t)=>this.refreshAll(bt(t.core),this.viewport.getMetrics()))),this.coreStore.onAction(gt,((e,t)=>this.refreshAll(bt(t.core),this.viewport.getMetrics())))}computeLayout(e){const t=this.strategy.createVirtualItems(e);return{virtualItems:t,totalContentSize:this.strategy.getTotalContentSize(t)}}computeMetrics(e,t=this.state.virtualItems){return this.strategy.handleScroll(e,t,this.currentScale)}commit(e,t){this.dispatch(nn(e)),null!=t&&t.layout&&this.layout$.emit(t.layout),null!=t&&t.metrics&&(this.scroll$.emit(t.metrics),t.metrics.currentPage!==this.currentPage&&(this.currentPage=t.metrics.currentPage,this.pageChange$.emit({pageNumber:this.currentPage,totalPages:this.state.totalPages}))),this.scrollerLayout$.emit(this.getScrollerLayoutFromState())}commitMetrics(e){this.commit(e,{metrics:e})}refreshAll(e,t){const n=this.computeLayout(e),r=this.computeMetrics(t,n.virtualItems);this.commit({...n,...r},{layout:n,metrics:r})}getVirtualItemsFromState(){return this.state.virtualItems||[]}getScrollerLayoutFromState(){const e=this.coreState.core.scale;return((e,t)=>({startSpacing:e.startSpacing,endSpacing:e.endSpacing,totalWidth:e.totalContentSize.width*t,totalHeight:e.totalContentSize.height*t,pageGap:e.pageGap*t,strategy:e.strategy,items:e.renderedPageIndexes.map((n=>({...e.virtualItems[n],pageLayouts:e.virtualItems[n].pageLayouts.map((e=>({...e,rotatedWidth:e.rotatedWidth*t,rotatedHeight:e.rotatedHeight*t,width:e.width*t,height:e.height*t})))})))}))(this.state,e)}pushScrollLayout(){this.scrollerLayout$.emit(this.getScrollerLayoutFromState())}onStoreUpdated(e,t){this.pushScrollLayout()}onCoreStoreUpdated(e,t){e.core.scale!==t.core.scale&&(this.currentScale=t.core.scale,this.commitMetrics(this.computeMetrics(this.viewport.getMetrics()))),e.core.rotation!==t.core.rotation&&(this.currentRotation=t.core.rotation)}setScrollStrategy(e){if(e===Zt.Horizontal&&this.strategy instanceof Qt||e===Zt.Vertical&&this.strategy instanceof Jt)return;this.strategy=e===Zt.Horizontal?new Qt(this.strategyConfig):new Jt(this.strategyConfig),this.dispatch(nn({strategy:e}));const t=bt(this.coreState.core);this.refreshAll(t,this.viewport.getMetrics())}setLayoutReady(){this.layoutReady||(this.layoutReady=!0,this.layoutReady$.emit(!0))}buildCapability(){return{onStateChange:this.state$.on,onLayoutChange:this.layout$.on,onScroll:this.scroll$.on,onPageChange:this.pageChange$.on,onScrollerData:this.scrollerLayout$.on,onLayoutReady:this.layoutReady$.on,getCurrentPage:()=>this.currentPage,getTotalPages:()=>this.state.totalPages,scrollToPage:e=>{const{pageNumber:t,behavior:n="smooth",pageCoordinates:r,center:o=!1}=e,i=this.getVirtualItemsFromState(),a=this.strategy.getScrollPositionForPage(t,i,this.currentScale,this.currentRotation,r);a&&this.viewport.scrollTo({...a,behavior:n,center:o})},scrollToNextPage:(e="smooth")=>{const t=this.getVirtualItemsFromState(),n=t.findIndex((e=>e.pageNumbers.includes(this.currentPage)));if(n>=0&&n<t.length-1){const r=t[n+1],o=this.strategy.getScrollPositionForPage(r.pageNumbers[0],t,this.currentScale,this.currentRotation);o&&this.viewport.scrollTo({...o,behavior:e})}},scrollToPreviousPage:(e="smooth")=>{const t=this.getVirtualItemsFromState(),n=t.findIndex((e=>e.pageNumbers.includes(this.currentPage)));if(n>0){const r=t[n-1],o=this.strategy.getScrollPositionForPage(r.pageNumbers[0],t,this.currentScale,this.currentRotation);o&&this.viewport.scrollTo({...o,behavior:e})}},getMetrics:this.getMetrics.bind(this),getLayout:this.getLayout.bind(this),getRectPositionForPage:this.getRectPositionForPage.bind(this),getPageGap:()=>this.state.pageGap,getScrollerLayout:()=>this.getScrollerLayoutFromState(),setScrollStrategy:e=>this.setScrollStrategy(e)}}getMetrics(e){const t=e||this.viewport.getMetrics(),n=this.getVirtualItemsFromState();return this.strategy.handleScroll(t,n,this.currentScale)}getLayout(){return{virtualItems:this.state.virtualItems,totalContentSize:this.state.totalContentSize}}getRectPositionForPage(e,t,n,r){return this.strategy.getRectPositionForPage(e+1,this.state.virtualItems,n??this.currentScale,r??this.currentRotation,t)}async initialize(){}async destroy(){this.layout$.clear(),this.scroll$.clear(),this.pageChange$.clear(),this.state$.clear(),this.scrollerLayout$.clear(),this.layoutReady$.clear(),super.destroy()}};rn.id="scroll";let on=rn;const an="scroll",sn={currentPage:1,visiblePages:[],pageVisibilityMetrics:[],renderedPageIndexes:[],scrollOffset:{x:0,y:0},startSpacing:0,endSpacing:0},ln={manifest:{id:an,name:"Scroll Plugin",version:"1.0.0",provides:["scroll"],requires:["viewport"],optional:[],defaultConfig:{enabled:!0,pageGap:10}},create:(e,t,n)=>new on(an,e,n),reducer:(e,t)=>{switch(t.type){case tn:return{...e,totalPages:t.payload};case mt:return{...e,scale:t.payload};case en:return{...e,...t.payload};case"SET_DESIRED_SCROLL_POSITION":return{...e,desiredScrollPosition:t.payload};default:return e}},initialState:(e,t)=>((e,t)=>({virtualItems:[],totalPages:e.pages.length,totalContentSize:{width:0,height:0},desiredScrollPosition:{x:0,y:0},strategy:t.strategy??Zt.Vertical,pageGap:t.pageGap??10,scale:e.scale,...sn}))(e,t)},un=()=>Ot(on.id);function dn({renderPage:e,overlayElements:t,...n}){const{provides:r}=un(),{plugin:o}=It(on.id),{registry:i}=kt(),[a,s]=oe((()=>(null==r?void 0:r.getScrollerLayout())??null));if(ie((()=>{if(r)return r.onScrollerData(s)}),[r]),ie((()=>{o&&o.setLayoutReady()}),[o]),!a||!i)return null;const l=i.getStore().getState();return V("div",{...n,style:{width:`${a.totalWidth}px`,height:`${a.totalHeight}px`,position:"relative",boxSizing:"border-box",margin:"0 auto",...a.strategy===Zt.Horizontal&&{display:"flex",flexDirection:"row"}},children:[V("div",{style:{...a.strategy===Zt.Horizontal?{width:a.startSpacing,height:"100%",flexShrink:0}:{height:a.startSpacing,width:"100%"}}}),V("div",{style:{gap:a.pageGap,display:"flex",alignItems:"center",position:"relative",boxSizing:"border-box",...a.strategy===Zt.Horizontal?{flexDirection:"row",minHeight:"100%"}:{flexDirection:"column",minWidth:"fit-content"}},children:a.items.map((t=>V("div",{style:{display:"flex",justifyContent:"center",gap:a.pageGap},children:t.pageLayouts.map((t=>V("div",{style:{width:`${t.rotatedWidth}px`,height:`${t.rotatedHeight}px`},children:e({...t,rotation:l.core.rotation,scale:l.core.scale,document:l.core.document})},t.pageNumber)))},t.pageNumbers[0])))}),V("div",{style:{...a.strategy===Zt.Horizontal?{width:a.endSpacing,height:"100%",flexShrink:0}:{height:a.endSpacing,width:"100%"}}}),t]})}var cn=(e=>(e.None="none",e.Odd="odd",e.Even="even",e))(cn||{}),mn="SET_SPREAD_MODE";function hn(e){return{type:mn,payload:e}}var gn=class extends vt{constructor(e,t,n){super(e,t),this.spreadEmitter$=Ct(),this.resetReady(),this.dispatch(hn(n.defaultSpreadMode??"none"));t.getPlugin("loader").provides().onDocumentLoaded((e=>this.documentLoaded(e)))}async initialize(e){e.defaultSpreadMode&&this.dispatch(hn(e.defaultSpreadMode))}documentLoaded(e){this.dispatchCoreAction(pt(this.getSpreadPagesObjects(e.pages))),this.markReady()}getSpreadPagesObjects(e){if(!e.length)return[];switch(this.state.spreadMode){case"none":default:return e.map((e=>[e]));case"odd":return Array.from({length:Math.ceil(e.length/2)},((t,n)=>e.slice(2*n,2*n+2)));case"even":return[[e[0]],...Array.from({length:Math.ceil((e.length-1)/2)},((t,n)=>e.slice(1+2*n,1+2*n+2)))]}}setSpreadMode(e){const t=this.state.spreadMode,n=this.coreState.core.document;if(!n)throw new Error("Document not loaded");t!==e&&(this.dispatch(hn(e)),this.dispatchCoreAction(pt(this.getSpreadPagesObjects(n.pages))),this.notifySpreadChange(e))}notifySpreadChange(e){this.spreadEmitter$.emit(e)}buildCapability(){return{onSpreadChange:this.spreadEmitter$.on,setSpreadMode:e=>this.setSpreadMode(e),getSpreadMode:()=>this.state.spreadMode,getSpreadPagesObjects:e=>this.getSpreadPagesObjects(e)}}async destroy(){this.spreadEmitter$.clear()}};gn.id="spread";var Fn="spread",pn={spreadMode:"none"},_n={manifest:{id:Fn,name:"Spread Plugin",version:"1.0.0",provides:["spread"],requires:["loader"],optional:[],defaultConfig:{enabled:!0}},create:(e,t,n)=>new gn(Fn,e,n),reducer:(e=pn,t)=>t.type===mn?{...e,spreadMode:t.payload}:e,initialState:pn};let bn=class{async load(e){const{pdfFile:t,options:n,engine:r}=e,o=r.openDocumentUrl(t,n);return new Promise(((e,t)=>{o.wait((t=>e(t)),(e=>{"abort"===e.type?t(new Error(`PDF loading aborted: ${e.reason}`)):t(new Error(`PDF loading failed: ${e.reason}`))}))}))}},fn=class{async load(e){const{pdfFile:t,options:n,engine:r}=e,o=r.openDocumentFromBuffer(t,(null==n?void 0:n.password)||"");return new Promise(((e,t)=>{o.wait((t=>e(t)),(e=>{"abort"===e.type?t(new Error(`PDF loading aborted: ${e.reason}`)):t(new Error(`PDF loading failed: ${e.reason}`))}))}))}},Pn=class{constructor(){this.strategies=new Map,this.strategyResolvers=[];const e=new fn;this.registerStrategy("url",new bn),this.registerStrategy("buffer",e),this.addStrategyResolver((e=>function(e){return"url"===e.type}(e)?this.strategies.get("url"):this.strategies.get("buffer")))}registerStrategy(e,t){this.strategies.set(e,t)}getStrategy(e){return this.strategies.get(e)}addStrategyResolver(e){this.strategyResolvers.push(e)}async loadDocument(e){try{const t=this.resolveStrategy(e);if(!t)throw new Error("No suitable strategy found for the given options");return await t.load(e)}catch(e){throw console.error("Error loading document:",e),e}}resolveStrategy(e){for(const t of this.strategyResolvers){const n=t(e);if(n)return n}}};const Dn=class extends vt{constructor(e,t,n){super(e,t),this.id=e,this.engine=n,this.loaderHandlers$=Mt(),this.documentLoadedHandlers$=Mt(),this.openFileRequest$=Ct(),this.documentLoader=new Pn}buildCapability(){return{onLoaderEvent:this.loaderHandlers$.on,onDocumentLoaded:this.documentLoadedHandlers$.on,onOpenFileRequest:this.openFileRequest$.on,openFileDialog:()=>this.openFileRequest$.emit("open"),loadDocument:e=>this.loadDocument(e),registerStrategy:(e,t)=>this.documentLoader.registerStrategy(e,t),getDocument:()=>this.loadedDocument,addStrategyResolver:e=>this.documentLoader.addStrategyResolver(e)}}async initialize(e){e.defaultStrategies&&Object.entries(e.defaultStrategies).forEach((([e,t])=>{this.documentLoader.registerStrategy(e,t)})),e.loadingOptions&&(this.loadingOptions=e.loadingOptions)}async postInitialize(){this.loadingOptions&&await this.loadDocument(this.loadingOptions)}async loadDocument(e){try{this.loaderHandlers$.emit({type:"start",documentId:e.pdfFile.id}),this.dispatchCoreAction({type:ut});const t=await this.documentLoader.loadDocument({...e,engine:this.engine});return this.dispatchCoreAction((e=>({type:dt,payload:e}))(t)),this.loadedDocument=t,this.loaderHandlers$.emit({type:"complete",documentId:e.pdfFile.id}),this.documentLoadedHandlers$.emit(t),t}catch(t){const n={type:"error",documentId:e.pdfFile.id,error:t instanceof Error?t:new Error(String(t))};throw this.loaderHandlers$.emit(n),t}}async destroy(){this.loaderHandlers$.clear(),this.documentLoadedHandlers$.clear(),this.openFileRequest$.clear(),super.destroy()}};Dn.id="loader";let vn=Dn;const yn="loader",wn={manifest:{id:yn,name:"Loader Plugin",version:"1.0.0",provides:["loader"],requires:[],optional:[],metadata:{name:"Loader Plugin",description:"A plugin for loading PDF documents",version:"1.0.0",author:"EmbedPDF",license:"MIT"},defaultConfig:{enabled:!0}},create:(e,t)=>new vn(yn,e,t),reducer:()=>{},initialState:{}};function xn(){const{provides:e}=Ot(vn.id),t=se(null);return ie((()=>e?e.onOpenFileRequest((e=>{"open"===e&&t.current&&t.current.click()})):void 0),[e]),V(D,{children:V("input",{ref:t,type:"file",accept:"application/pdf",style:{display:"none"},onChange:async t=>{var n;const r=null==(n=t.currentTarget.files)?void 0:n[0];r&&e&&await e.loadDocument({type:"buffer",pdfFile:{id:Math.random().toString(36).substring(2,15),content:await r.arrayBuffer()}})}})})}var An=class{constructor(e,t){this.children=[],this.updateCallbacks=[],this.hadUpdateBeforeListeners=!1,this.componentConfig=e;const n=e.props||{};if("function"==typeof n){const t=n(e.initialState);this.props={...t,id:e.id}}else this.props={...n,id:e.id};this.type=e.type,this.registry=t}addChild(e,t,n=0,r){this.children.push({id:e,component:t,priority:n,className:r}),this.sortChildren()}sortChildren(){this.children.sort(((e,t)=>e.priority-t.priority))}removeChild(e){this.children=this.children.filter((t=>t.component!==e))}clearChildren(){this.children=[]}get getRenderType(){return this.componentConfig.render||this.type}getRenderer(){return this.registry[this.getRenderType]}getChildren(){return this.children}getChildContext(e){const t=this.componentConfig.getChildContext;return"function"==typeof t?{...e,...t(this.props)}:t&&"object"==typeof t?{...e,...t}:e}update(e){const{id:t,...n}=e;this.props={...this.props,...n},0===this.updateCallbacks.length&&(this.hadUpdateBeforeListeners=!0),this.notifyUpdate()}onUpdate(e){return this.updateCallbacks.push(e),this.hadUpdateBeforeListeners}offUpdate(e){this.updateCallbacks=this.updateCallbacks.filter((t=>t!==e))}notifyUpdate(){this.updateCallbacks.forEach((e=>e()))}},Sn="UI_INIT_COMPONENTS",En="UI_SET_HEADER_VISIBLE",Cn="UI_TOGGLE_PANEL",Mn="UI_SHOW_COMMAND_MENU",Tn="UI_HIDE_COMMAND_MENU",Gn="UI_UPDATE_COMPONENT_STATE",kn=e=>({type:Tn,payload:e}),In={panel:{},header:{},groupedItems:{},divider:{},iconButton:{},tabButton:{},selectButton:{},custom:{},floating:{},commandMenu:{}};function On(e,t){const n=e=>"function"==typeof e?e(t):e;return"group"===e.type?{...e,label:n(e.label)??""}:{...e,icon:n(e.icon)??"",label:n(e.label)??"",visible:n(e.visible)??!0,active:n(e.active)??!1,disabled:n(e.disabled)??!1}}function Rn(e,t){const n=On(e,t);return"group"!==n.type&&!!n.active}function Ln(e,t){const n=On(e,t);return"group"!==n.type&&!!n.disabled}var jn=class e{constructor(e={},t){this.registry={},this.shortcutMap={},this.eventController=function(){const e=new Map;return{emit(t,n){const r=e.get(t);r&&r.forEach((e=>e(n)))},on(t,n){return e.has(t)||e.set(t,new Set),e.get(t).add(n),()=>this.off(t,n)},off(t,n){const r=e.get(t);r&&(r.delete(n),0===r.size&&e.delete(t))}}}(),this.pluginRegistry=t,this.registerItems(e),this.setupKeyboardListeners()}get state(){return this.pluginRegistry.getStore().getState()}registerItem(e){this.registry[e.id]&&console.warn(`Menu item with ID ${e.id} already exists and will be overwritten`),this.registry[e.id]=e,"shortcut"in e&&e.shortcut&&(this.shortcutMap[this.normalizeShortcut(e.shortcut)]=e.id)}registerItems(e){Object.values(e).forEach((e=>{this.registerItem(e)}))}resolve(e){return On(this.registry[e],this.state)}getMenuItem(e){const t=this.resolve(e);if(t)return{item:t,isGroup:"group"===t.type,isMenu:"menu"===t.type,isAction:"action"===t.type}}getAction(e){const t=this.getMenuItem(e);if(t&&t.isAction)return t.item}getMenuOrAction(e){const t=this.getMenuItem(e);if(t)return t.item}getAllItems(){return{...this.registry}}getItemsByIds(e){return e.map((e=>this.resolve(e))).filter((e=>void 0!==e))}getChildItems(e,t={}){const n=this.resolve(e);if(!n||!("children"in n)||!n.children?.length)return[];const r=this.getItemsByIds(n.children);if(!t.flatten)return r;const o=[];for(const e of r)if("group"===e.type)o.push(e);else if("menu"===e.type){const t=this.getChildItems(e.id,{flatten:!0});o.push(...t)}else o.push(e);return o}executeCommand(t,n={}){const r=this.getMenuItem(t);if(!r)return void console.warn(`Menu item '${t}' not found`);if("group"===r.item.type)return void console.warn(`Cannot execute group '${t}'`);const{item:o}=r;o.disabled?console.warn(`Menu item '${t}' is disabled`):r.isAction?(o.action(this.pluginRegistry,this.state),this.eventController.emit(e.EVENTS.COMMAND_EXECUTED,{command:o,source:n.source||"api"})):"children"in o&&o.children?.length&&this.handleSubmenu(o,n)}executeShortcut(t){const n=this.normalizeShortcut(t),r=this.shortcutMap[n];return!!r&&(this.executeCommand(r,{source:"shortcut"}),this.eventController.emit(e.EVENTS.SHORTCUT_EXECUTED,{shortcut:n,itemId:r}),!0)}on(e,t){return this.eventController.on(e,t)}off(e,t){this.eventController.off(e,t)}handleSubmenu(t,n){this.eventController.emit(e.EVENTS.MENU_REQUESTED,{menuId:t.id,triggerElement:n.triggerElement,position:n.position,flatten:n.flatten||!1})}setupKeyboardListeners(){if("undefined"==typeof window)return;document.addEventListener("keydown",(e=>{const t=e.target;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return;const n=this.buildShortcutString(e);n&&this.executeShortcut(n)&&e.preventDefault()}))}buildShortcutString(e){const t=[];e.ctrlKey&&t.push("Ctrl"),e.shiftKey&&t.push("Shift"),e.altKey&&t.push("Alt"),e.metaKey&&t.push("Meta");const n=e.key;if(!["Control","Shift","Alt","Meta"].includes(n)){const e=1===n.length?n.toUpperCase():n;return[...t,e].join("+")}return null}normalizeShortcut(e){return e.split("+").map((e=>e.trim())).join("+")}capabilities(){return{registerItem:this.registerItem.bind(this),registerItems:this.registerItems.bind(this),executeCommand:this.executeCommand.bind(this),getAction:this.getAction.bind(this),getMenuOrAction:this.getMenuOrAction.bind(this),getChildItems:this.getChildItems.bind(this),getItemsByIds:this.getItemsByIds.bind(this),getAllItems:this.getAllItems.bind(this)}}};jn.EVENTS={COMMAND_EXECUTED:"menu:command_executed",MENU_REQUESTED:"menu:requested",SHORTCUT_EXECUTED:"menu:shortcut_executed"};var Nn=jn,Bn=class{constructor(e){this.icons={},this.registerIcons(e)}registerIcon(e){this.icons[e.id]&&console.warn(`Icon with ID ${e.id} already exists and will be overwritten`),this.icons[e.id]=e}registerIcons(e){Array.isArray(e)?e.forEach((e=>this.registerIcon(e))):Object.entries(e).forEach((([e,t])=>this.registerIcon(t)))}getAllIcons(){return{...this.icons}}getIcon(e){return this.icons[e]}isSvgString(e){return e.trim().startsWith("<svg")&&e.includes("</svg>")}isSvgDataUri(e){return e.startsWith("data:image/svg+xml;base64,")}getSvgString(e){return this.isSvgString(e)?e:this.isSvgDataUri(e)?this.dataUriToSvgString(e):this.getIcon(e)?.svg}dataUriToSvgString(e){const t=e.substring(26);return atob(t)}svgStringToDataUri(e){return`data:image/svg+xml;base64,${btoa(e)}`}capabilities(){return{registerIcon:this.registerIcon.bind(this),registerIcons:this.registerIcons.bind(this),getIcon:this.getIcon.bind(this),getAllIcons:this.getAllIcons.bind(this),getSvgString:this.getSvgString.bind(this),isSvgString:this.isSvgString.bind(this),isSvgDataUri:this.isSvgDataUri.bind(this),dataUriToSvgString:this.dataUriToSvgString.bind(this),svgStringToDataUri:this.svgStringToDataUri.bind(this)}}},zn=class extends vt{constructor(e,t,n){super(e,t),this.componentRenderers={},this.components={},this.mapStateCallbacks={},this.globalStoreSubscription=()=>{},this.config=n,this.menuManager=new Nn(n.menuItems||{},this.registry),this.iconManager=new Bn(n.icons||[]),this.setupCommandEventHandlers(),this.globalStoreSubscription=this.registry.getStore().subscribe(((e,t)=>{this.onGlobalStoreChange(t)}))}async initialize(){this.buildComponents(),this.linkGroupedItems(),this.setInitialStateUIComponents()}setupCommandEventHandlers(){this.menuManager.on(Nn.EVENTS.MENU_REQUESTED,(e=>{const{menuId:t,triggerElement:n,position:r,flatten:o}=e;if(this.state.commandMenu.commandMenu?.activeCommand===t)return this.dispatch(kn({id:"commandMenu"}));this.dispatch({type:Mn,payload:{id:"commandMenu",commandId:t,triggerElement:n,position:r,flatten:o}})})),this.menuManager.on(Nn.EVENTS.COMMAND_EXECUTED,(e=>{console.log("Command executed:",e.command.id,"source:",e.source)}))}addComponent(e,t){this.components[e]&&console.warn(`Component with ID ${e} already exists and will be overwritten`);const n=new An(t,this.componentRenderers);return this.components[e]=n,"function"==typeof t.mapStateToProps&&(this.mapStateCallbacks[e]=t.mapStateToProps),n}buildComponents(){Object.entries(this.config.components).forEach((([e,t])=>{this.addComponent(e,t)}))}linkGroupedItems(){Object.values(this.components).forEach((e=>{if(Un(e)){const t=e.componentConfig;t.slots?.forEach((n=>{const r=this.components[n.componentId];r?e.addChild(n.componentId,r,n.priority,n.className):console.warn(`Child component ${n.componentId} not found for GroupedItems ${t.id}`)}))}}))}setInitialStateUIComponents(){const e=In;Object.entries(this.config.components).forEach((([t,n])=>{n.initialState?e[n.type][t]=n.initialState:e[n.type][t]={}})),this.dispatch({type:Sn,payload:e})}onGlobalStoreChange(e){for(const[t,n]of Object.entries(this.components)){const r=this.mapStateCallbacks[t];if(!r)continue;const{id:o,...i}=n.props,a=r(e,i);xt(i,{...i,...a})||n.update(a)}}addSlot(e,t,n,r){const o=this.components[e];if(!o)return void console.error(`Parent component ${e} not found`);if(!Un(o))return void console.error(`Parent component ${e} does not support slots`);const i=this.components[t];if(!i)return void console.error(`Child component ${t} not found`);const a=o.getChildren();let s=n;if(void 0===s){s=(a.length>0?Math.max(...a.map((e=>e.priority))):0)+10}o.addChild(t,i,s,r)}buildCapability(){return{registerComponentRenderer:(e,t)=>{this.componentRenderers[e]=t},getComponent:e=>this.components[e],registerComponent:this.addComponent.bind(this),getCommandMenu:()=>Object.values(this.components).find((e=>function(e){return"commandMenu"===e.type}(e))),hideCommandMenu:()=>this.debouncedDispatch(kn({id:"commandMenu"}),100),getFloatingComponents:e=>Object.values(this.components).filter((e=>Wn(e))).filter((t=>!e||t.props.scrollerPosition===e)),getHeadersByPlacement:e=>Object.values(this.components).filter((e=>Vn(e))).filter((t=>t.props.placement===e)),getPanelsByLocation:e=>Object.values(this.components).filter((e=>Hn(e))).filter((t=>t.props.location===e)),addSlot:this.addSlot.bind(this),togglePanel:e=>{this.dispatch((e=>({type:Cn,payload:e}))(e))},setHeaderVisible:e=>{this.dispatch((e=>({type:En,payload:e}))(e))},updateComponentState:e=>{this.dispatch((e=>({type:Gn,payload:e}))(e))},...this.iconManager.capabilities(),...this.menuManager.capabilities()}}async destroy(){this.globalStoreSubscription(),this.components={},this.componentRenderers={},this.mapStateCallbacks={}}};function Un(e){return function(e){return"groupedItems"===e.type}(e)||Vn(e)||Hn(e)||Wn(e)||function(e){return"custom"===e.type}(e)}function Vn(e){return"header"===e.type}function Hn(e){return"panel"===e.type}function Wn(e){return"floating"===e.type}zn.id="ui";var $n="ui",qn={manifest:{id:$n,name:"UI Plugin",version:"1.0.0",provides:["ui"],requires:[],optional:[],defaultConfig:{enabled:!0,components:{}}},create:(e,t,n)=>new zn($n,e,n),reducer:(e=In,t)=>{switch(t.type){case Sn:return{...e,...t.payload};case Cn:{const n=e.panel[t.payload.id]||{},{open:r,visibleChild:o}=t.payload,i=n.visibleChild;let a=n.open,s=n.visibleChild;return o===i?a=void 0!==r?r:!n.open:(s=o,a=!0),{...e,panel:{...e.panel,[t.payload.id]:{...n,open:a,visibleChild:s}}}}case En:return{...e,header:{...e.header,[t.payload.id]:{...e.header[t.payload.id],visible:t.payload.visible,visibleChild:t.payload.visibleChild}}};case Mn:return{...e,commandMenu:{...e.commandMenu,[t.payload.id]:{activeCommand:t.payload.commandId,triggerElement:t.payload.triggerElement,position:t.payload.position,open:!0,flatten:t.payload.flatten}}};case Tn:return{...e,commandMenu:{...e.commandMenu,[t.payload.id]:{...e.commandMenu[t.payload.id],open:!1,activeCommand:null,triggerElement:void 0,position:void 0,flatten:!1}}};case Gn:{const{componentType:n,componentId:r,patch:o}=t.payload;if(!e[n]||!e[n][r])return e;const i=e[n][r],a=Object.fromEntries(Object.entries(o).filter((([e])=>e in i)));return 0===Object.keys(a).length?e:{...e,[n]:{...e[n],[r]:{...i,...a}}}}default:return e}},initialState:In};function Xn({id:e,children:t,onClick:n,active:r=!1,disabled:o=!1,className:i="",tooltip:a,ref:s,...l}){return f("button",{id:e,ref:s,onClick:n,className:`flex h-[32px] w-auto min-w-[32px] items-center justify-center rounded-md p-[5px] transition-colors ${r?"border-none bg-blue-50 text-blue-500 shadow ring ring-blue-500":"hover:bg-gray-100 hover:ring hover:ring-[#1a466b]"} ${o?"cursor-not-allowed opacity-50 hover:bg-transparent hover:ring-0":"cursor-pointer"} ${i} `,title:a,...l},t)}const Yn=Math.min,Zn=Math.max,Kn=Math.round,Jn=Math.floor,Qn=e=>({x:e,y:e}),er={left:"right",right:"left",bottom:"top",top:"bottom"},tr={start:"end",end:"start"};function nr(e,t,n){return Zn(e,Yn(t,n))}function rr(e,t){return"function"==typeof e?e(t):e}function or(e){return e.split("-")[0]}function ir(e){return e.split("-")[1]}function ar(e){return"x"===e?"y":"x"}function sr(e){return"y"===e?"height":"width"}function lr(e){return["top","bottom"].includes(or(e))?"y":"x"}function ur(e){return ar(lr(e))}function dr(e){return e.replace(/start|end/g,(e=>tr[e]))}function cr(e){return e.replace(/left|right|bottom|top/g,(e=>er[e]))}function mr(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function hr(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function gr(e,t,n){let{reference:r,floating:o}=e;const i=lr(t),a=ur(t),s=sr(a),l=or(t),u="y"===i,d=r.x+r.width/2-o.width/2,c=r.y+r.height/2-o.height/2,m=r[s]/2-o[s]/2;let h;switch(l){case"top":h={x:d,y:r.y-o.height};break;case"bottom":h={x:d,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:c};break;case"left":h={x:r.x-o.width,y:c};break;default:h={x:r.x,y:r.y}}switch(ir(t)){case"start":h[a]-=m*(n&&u?-1:1);break;case"end":h[a]+=m*(n&&u?-1:1)}return h}async function Fr(e,t){var n;void 0===t&&(t={});const{x:r,y:o,platform:i,rects:a,elements:s,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:c="floating",altBoundary:m=!1,padding:h=0}=rr(t,e),g=mr(h),F=s[m?"floating"===c?"reference":"floating":c],p=hr(await i.getClippingRect({element:null==(n=await(null==i.isElement?void 0:i.isElement(F)))||n?F:F.contextElement||await(null==i.getDocumentElement?void 0:i.getDocumentElement(s.floating)),boundary:u,rootBoundary:d,strategy:l})),_="floating"===c?{x:r,y:o,width:a.floating.width,height:a.floating.height}:a.reference,b=await(null==i.getOffsetParent?void 0:i.getOffsetParent(s.floating)),f=await(null==i.isElement?void 0:i.isElement(b))&&await(null==i.getScale?void 0:i.getScale(b))||{x:1,y:1},P=hr(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:_,offsetParent:b,strategy:l}):_);return{top:(p.top-P.top+g.top)/f.y,bottom:(P.bottom-p.bottom+g.bottom)/f.y,left:(p.left-P.left+g.left)/f.x,right:(P.right-p.right+g.right)/f.x}}function pr(){return"undefined"!=typeof window}function _r(e){return Pr(e)?(e.nodeName||"").toLowerCase():"#document"}function br(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function fr(e){var t;return null==(t=(Pr(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function Pr(e){return!!pr()&&(e instanceof Node||e instanceof br(e).Node)}function Dr(e){return!!pr()&&(e instanceof Element||e instanceof br(e).Element)}function vr(e){return!!pr()&&(e instanceof HTMLElement||e instanceof br(e).HTMLElement)}function yr(e){return!(!pr()||"undefined"==typeof ShadowRoot)&&(e instanceof ShadowRoot||e instanceof br(e).ShadowRoot)}function wr(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=Mr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function xr(e){return["table","td","th"].includes(_r(e))}function Ar(e){return[":popover-open",":modal"].some((t=>{try{return e.matches(t)}catch(e){return!1}}))}function Sr(e){const t=Er(),n=Dr(e)?Mr(e):e;return["transform","translate","scale","rotate","perspective"].some((e=>!!n[e]&&"none"!==n[e]))||!!n.containerType&&"normal"!==n.containerType||!t&&!!n.backdropFilter&&"none"!==n.backdropFilter||!t&&!!n.filter&&"none"!==n.filter||["transform","translate","scale","rotate","perspective","filter"].some((e=>(n.willChange||"").includes(e)))||["paint","layout","strict","content"].some((e=>(n.contain||"").includes(e)))}function Er(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function Cr(e){return["html","body","#document"].includes(_r(e))}function Mr(e){return br(e).getComputedStyle(e)}function Tr(e){return Dr(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Gr(e){if("html"===_r(e))return e;const t=e.assignedSlot||e.parentNode||yr(e)&&e.host||fr(e);return yr(t)?t.host:t}function kr(e){const t=Gr(e);return Cr(t)?e.ownerDocument?e.ownerDocument.body:e.body:vr(t)&&wr(t)?t:kr(t)}function Ir(e,t,n){var r;void 0===t&&(t=[]),void 0===n&&(n=!0);const o=kr(e),i=o===(null==(r=e.ownerDocument)?void 0:r.body),a=br(o);if(i){const e=Or(a);return t.concat(a,a.visualViewport||[],wr(o)?o:[],e&&n?Ir(e):[])}return t.concat(o,Ir(o,[],n))}function Or(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Rr(e){const t=Mr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=vr(e),i=o?e.offsetWidth:n,a=o?e.offsetHeight:r,s=Kn(n)!==i||Kn(r)!==a;return s&&(n=i,r=a),{width:n,height:r,$:s}}function Lr(e){return Dr(e)?e:e.contextElement}function jr(e){const t=Lr(e);if(!vr(t))return Qn(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:i}=Rr(t);let a=(i?Kn(n.width):n.width)/r,s=(i?Kn(n.height):n.height)/o;return a&&Number.isFinite(a)||(a=1),s&&Number.isFinite(s)||(s=1),{x:a,y:s}}const Nr=Qn(0);function Br(e){const t=br(e);return Er()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:Nr}function zr(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);const o=e.getBoundingClientRect(),i=Lr(e);let a=Qn(1);t&&(r?Dr(r)&&(a=jr(r)):a=jr(e));const s=function(e,t,n){return void 0===t&&(t=!1),!(!n||t&&n!==br(e))&&t}(i,n,r)?Br(i):Qn(0);let l=(o.left+s.x)/a.x,u=(o.top+s.y)/a.y,d=o.width/a.x,c=o.height/a.y;if(i){const e=br(i),t=r&&Dr(r)?br(r):r;let n=e,o=Or(n);for(;o&&r&&t!==n;){const e=jr(o),t=o.getBoundingClientRect(),r=Mr(o),i=t.left+(o.clientLeft+parseFloat(r.paddingLeft))*e.x,a=t.top+(o.clientTop+parseFloat(r.paddingTop))*e.y;l*=e.x,u*=e.y,d*=e.x,c*=e.y,l+=i,u+=a,n=br(o),o=Or(n)}}return hr({width:d,height:c,x:l,y:u})}function Ur(e,t){const n=Tr(e).scrollLeft;return t?t.left+n:zr(fr(e)).left+n}function Vr(e,t,n){void 0===n&&(n=!1);const r=e.getBoundingClientRect();return{x:r.left+t.scrollLeft-(n?0:Ur(e,r)),y:r.top+t.scrollTop}}function Hr(e,t,n){let r;if("viewport"===t)r=function(e,t){const n=br(e),r=fr(e),o=n.visualViewport;let i=r.clientWidth,a=r.clientHeight,s=0,l=0;if(o){i=o.width,a=o.height;const e=Er();(!e||e&&"fixed"===t)&&(s=o.offsetLeft,l=o.offsetTop)}return{width:i,height:a,x:s,y:l}}(e,n);else if("document"===t)r=function(e){const t=fr(e),n=Tr(e),r=e.ownerDocument.body,o=Zn(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),i=Zn(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+Ur(e);const s=-n.scrollTop;return"rtl"===Mr(r).direction&&(a+=Zn(t.clientWidth,r.clientWidth)-o),{width:o,height:i,x:a,y:s}}(fr(e));else if(Dr(t))r=function(e,t){const n=zr(e,!0,"fixed"===t),r=n.top+e.clientTop,o=n.left+e.clientLeft,i=vr(e)?jr(e):Qn(1);return{width:e.clientWidth*i.x,height:e.clientHeight*i.y,x:o*i.x,y:r*i.y}}(t,n);else{const n=Br(e);r={x:t.x-n.x,y:t.y-n.y,width:t.width,height:t.height}}return hr(r)}function Wr(e,t){const n=Gr(e);return!(n===t||!Dr(n)||Cr(n))&&("fixed"===Mr(n).position||Wr(n,t))}function $r(e,t,n){const r=vr(t),o=fr(t),i="fixed"===n,a=zr(e,!0,i,t);let s={scrollLeft:0,scrollTop:0};const l=Qn(0);if(r||!r&&!i)if(("body"!==_r(t)||wr(o))&&(s=Tr(t)),r){const e=zr(t,!0,i,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else o&&(l.x=Ur(o));const u=!o||r||i?Qn(0):Vr(o,s);return{x:a.left+s.scrollLeft-l.x-u.x,y:a.top+s.scrollTop-l.y-u.y,width:a.width,height:a.height}}function qr(e){return"static"===Mr(e).position}function Xr(e,t){if(!vr(e)||"fixed"===Mr(e).position)return null;if(t)return t(e);let n=e.offsetParent;return fr(e)===n&&(n=n.ownerDocument.body),n}function Yr(e,t){const n=br(e);if(Ar(e))return n;if(!vr(e)){let t=Gr(e);for(;t&&!Cr(t);){if(Dr(t)&&!qr(t))return t;t=Gr(t)}return n}let r=Xr(e,t);for(;r&&xr(r)&&qr(r);)r=Xr(r,t);return r&&Cr(r)&&qr(r)&&!Sr(r)?n:r||function(e){let t=Gr(e);for(;vr(t)&&!Cr(t);){if(Sr(t))return t;if(Ar(t))return null;t=Gr(t)}return null}(e)||n}const Zr={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const i="fixed"===o,a=fr(r),s=!!t&&Ar(t.floating);if(r===a||s&&i)return n;let l={scrollLeft:0,scrollTop:0},u=Qn(1);const d=Qn(0),c=vr(r);if((c||!c&&!i)&&(("body"!==_r(r)||wr(a))&&(l=Tr(r)),vr(r))){const e=zr(r);u=jr(r),d.x=e.x+r.clientLeft,d.y=e.y+r.clientTop}const m=!a||c||i?Qn(0):Vr(a,l,!0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+d.x+m.x,y:n.y*u.y-l.scrollTop*u.y+d.y+m.y}},getDocumentElement:fr,getClippingRect:function(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const i=[..."clippingAncestors"===n?Ar(t)?[]:function(e,t){const n=t.get(e);if(n)return n;let r=Ir(e,[],!1).filter((e=>Dr(e)&&"body"!==_r(e))),o=null;const i="fixed"===Mr(e).position;let a=i?Gr(e):e;for(;Dr(a)&&!Cr(a);){const t=Mr(a),n=Sr(a);n||"fixed"!==t.position||(o=null),(i?!n&&!o:!n&&"static"===t.position&&o&&["absolute","fixed"].includes(o.position)||wr(a)&&!n&&Wr(e,a))?r=r.filter((e=>e!==a)):o=t,a=Gr(a)}return t.set(e,r),r}(t,this._c):[].concat(n),r],a=i[0],s=i.reduce(((e,n)=>{const r=Hr(t,n,o);return e.top=Zn(r.top,e.top),e.right=Yn(r.right,e.right),e.bottom=Yn(r.bottom,e.bottom),e.left=Zn(r.left,e.left),e}),Hr(t,a,o));return{width:s.right-s.left,height:s.bottom-s.top,x:s.left,y:s.top}},getOffsetParent:Yr,getElementRects:async function(e){const t=this.getOffsetParent||Yr,n=this.getDimensions,r=await n(e.floating);return{reference:$r(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:n}=Rr(e);return{width:t,height:n}},getScale:jr,isElement:Dr,isRTL:function(e){return"rtl"===Mr(e).direction}};function Kr(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Jr(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:a="function"==typeof ResizeObserver,layoutShift:s="function"==typeof IntersectionObserver,animationFrame:l=!1}=r,u=Lr(e),d=o||i?[...u?Ir(u):[],...Ir(t)]:[];d.forEach((e=>{o&&e.addEventListener("scroll",n,{passive:!0}),i&&e.addEventListener("resize",n)}));const c=u&&s?function(e,t){let n,r=null;const o=fr(e);function i(){var e;clearTimeout(n),null==(e=r)||e.disconnect(),r=null}return function a(s,l){void 0===s&&(s=!1),void 0===l&&(l=1),i();const u=e.getBoundingClientRect(),{left:d,top:c,width:m,height:h}=u;if(s||t(),!m||!h)return;const g={rootMargin:-Jn(c)+"px "+-Jn(o.clientWidth-(d+m))+"px "+-Jn(o.clientHeight-(c+h))+"px "+-Jn(d)+"px",threshold:Zn(0,Yn(1,l))||1};let F=!0;function p(t){const r=t[0].intersectionRatio;if(r!==l){if(!F)return a();r?a(!1,r):n=setTimeout((()=>{a(!1,1e-7)}),1e3)}1!==r||Kr(u,e.getBoundingClientRect())||a(),F=!1}try{r=new IntersectionObserver(p,{...g,root:o.ownerDocument})}catch(e){r=new IntersectionObserver(p,g)}r.observe(e)}(!0),i}(u,n):null;let m,h=-1,g=null;a&&(g=new ResizeObserver((e=>{let[r]=e;r&&r.target===u&&g&&(g.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame((()=>{var e;null==(e=g)||e.observe(t)}))),n()})),u&&!l&&g.observe(u),g.observe(t));let F=l?zr(e):null;return l&&function t(){const r=zr(e);F&&!Kr(F,r)&&n();F=r,m=requestAnimationFrame(t)}(),n(),()=>{var e;d.forEach((e=>{o&&e.removeEventListener("scroll",n),i&&e.removeEventListener("resize",n)})),null==c||c(),null==(e=g)||e.disconnect(),g=null,l&&cancelAnimationFrame(m)}}const Qr=function(e){return void 0===e&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:i,placement:a,middlewareData:s}=t,l=await async function(e,t){const{placement:n,platform:r,elements:o}=e,i=await(null==r.isRTL?void 0:r.isRTL(o.floating)),a=or(n),s=ir(n),l="y"===lr(n),u=["left","top"].includes(a)?-1:1,d=i&&l?-1:1,c=rr(t,e);let{mainAxis:m,crossAxis:h,alignmentAxis:g}="number"==typeof c?{mainAxis:c,crossAxis:0,alignmentAxis:null}:{mainAxis:c.mainAxis||0,crossAxis:c.crossAxis||0,alignmentAxis:c.alignmentAxis};return s&&"number"==typeof g&&(h="end"===s?-1*g:g),l?{x:h*d,y:m*u}:{x:m*u,y:h*d}}(t,e);return a===(null==(n=s.offset)?void 0:n.placement)&&null!=(r=s.arrow)&&r.alignmentOffset?{}:{x:o+l.x,y:i+l.y,data:{...l,placement:a}}}}},eo=function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:i=!0,crossAxis:a=!1,limiter:s={fn:e=>{let{x:t,y:n}=e;return{x:t,y:n}}},...l}=rr(e,t),u={x:n,y:r},d=await Fr(t,l),c=lr(or(o)),m=ar(c);let h=u[m],g=u[c];if(i){const e="y"===m?"bottom":"right";h=nr(h+d["y"===m?"top":"left"],h,h-d[e])}if(a){const e="y"===c?"bottom":"right";g=nr(g+d["y"===c?"top":"left"],g,g-d[e])}const F=s.fn({...t,[m]:h,[c]:g});return{...F,data:{x:F.x-n,y:F.y-r,enabled:{[m]:i,[c]:a}}}}}},to=function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:i,rects:a,initialPlacement:s,platform:l,elements:u}=t,{mainAxis:d=!0,crossAxis:c=!0,fallbackPlacements:m,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:F=!0,...p}=rr(e,t);if(null!=(n=i.arrow)&&n.alignmentOffset)return{};const _=or(o),b=lr(s),f=or(s)===s,P=await(null==l.isRTL?void 0:l.isRTL(u.floating)),D=m||(f||!F?[cr(s)]:function(e){const t=cr(e);return[dr(e),t,dr(t)]}(s)),v="none"!==g;!m&&v&&D.push(...function(e,t,n,r){const o=ir(e);let i=function(e,t,n){const r=["left","right"],o=["right","left"],i=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:r:t?r:o;case"left":case"right":return t?i:a;default:return[]}}(or(e),"start"===n,r);return o&&(i=i.map((e=>e+"-"+o)),t&&(i=i.concat(i.map(dr)))),i}(s,F,g,P));const y=[s,...D],w=await Fr(t,p),x=[];let A=(null==(r=i.flip)?void 0:r.overflows)||[];if(d&&x.push(w[_]),c){const e=function(e,t,n){void 0===n&&(n=!1);const r=ir(e),o=ur(e),i=sr(o);let a="x"===o?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return t.reference[i]>t.floating[i]&&(a=cr(a)),[a,cr(a)]}(o,a,P);x.push(w[e[0]],w[e[1]])}if(A=[...A,{placement:o,overflows:x}],!x.every((e=>e<=0))){var S,E;const e=((null==(S=i.flip)?void 0:S.index)||0)+1,t=y[e];if(t)return{data:{index:e,overflows:A},reset:{placement:t}};let n=null==(E=A.filter((e=>e.overflows[0]<=0)).sort(((e,t)=>e.overflows[1]-t.overflows[1]))[0])?void 0:E.placement;if(!n)switch(h){case"bestFit":{var C;const e=null==(C=A.filter((e=>{if(v){const t=lr(e.placement);return t===b||"y"===t}return!0})).map((e=>[e.placement,e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)])).sort(((e,t)=>e[1]-t[1]))[0])?void 0:C[0];e&&(n=e);break}case"initialPlacement":n=s}if(o!==n)return{reset:{placement:n}}}return{}}}},no=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:i,platform:a,elements:s,middlewareData:l}=t,{element:u,padding:d=0}=rr(e,t)||{};if(null==u)return{};const c=mr(d),m={x:n,y:r},h=ur(o),g=sr(h),F=await a.getDimensions(u),p="y"===h,_=p?"top":"left",b=p?"bottom":"right",f=p?"clientHeight":"clientWidth",P=i.reference[g]+i.reference[h]-m[h]-i.floating[g],D=m[h]-i.reference[h],v=await(null==a.getOffsetParent?void 0:a.getOffsetParent(u));let y=v?v[f]:0;y&&await(null==a.isElement?void 0:a.isElement(v))||(y=s.floating[f]||i.floating[g]);const w=P/2-D/2,x=y/2-F[g]/2-1,A=Yn(c[_],x),S=Yn(c[b],x),E=A,C=y-F[g]-S,M=y/2-F[g]/2+w,T=nr(E,M,C),G=!l.arrow&&null!=ir(o)&&M!==T&&i.reference[g]/2-(M<E?A:S)-F[g]/2<0,k=G?M<E?M-E:M-C:0;return{[h]:m[h]+k,data:{[h]:T,centerOffset:M-T-k,...G&&{alignmentOffset:k}},reset:G}}}),ro=(e,t,n)=>{const r=new Map,o={platform:Zr,...n},i={...o.platform,_c:r};return(async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:i=[],platform:a}=n,s=i.filter(Boolean),l=await(null==a.isRTL?void 0:a.isRTL(t));let u=await a.getElementRects({reference:e,floating:t,strategy:o}),{x:d,y:c}=gr(u,r,l),m=r,h={},g=0;for(let n=0;n<s.length;n++){const{name:i,fn:F}=s[n],{x:p,y:_,data:b,reset:f}=await F({x:d,y:c,initialPlacement:r,placement:m,strategy:o,middlewareData:h,rects:u,platform:a,elements:{reference:e,floating:t}});d=null!=p?p:d,c=null!=_?_:c,h={...h,[i]:{...h[i],...b}},f&&g<=50&&(g++,"object"==typeof f&&(f.placement&&(m=f.placement),f.rects&&(u=!0===f.rects?await a.getElementRects({reference:e,floating:t,strategy:o}):f.rects),({x:d,y:c}=gr(u,m,l))),n=-1)}return{x:d,y:c,placement:m,strategy:o,middlewareData:h}})(e,t,{...o,platform:i})};class oo extends v{render(){return this.props.children}}function io({children:e,content:t,position:n="top",className:r="",delay:o=200,style:i="dark",trigger:a="hover"}){const s=se(null),l=se(null),u=se(null),[d,c]=oe(!1),m=se(null);return ie((()=>{if(s.current?.base&&l.current)return Jr(s.current.base,l.current,(()=>{ro(s.current.base,l.current,{placement:n,middleware:[Qr(8),to(),eo({padding:8}),no({element:u.current,padding:6})]}).then((({x:e,y:t,placement:n,middlewareData:r})=>{Object.assign(l.current.style,{left:`${e}px`,top:`${t}px`});const{x:o,y:i}=r.arrow??{},a={top:"bottom",bottom:"top",left:"right",right:"left"}[n.split("-")[0]];Object.assign(u.current.style,{left:null!=o?`${o}px`:"",top:null!=i?`${i}px`:"",right:"",bottom:"",[a]:"-4px"})}))}))}),[n,d]),ie((()=>{const e=s.current?.base,t=l.current;if(!e||!t)return;const n=()=>{m.current&&clearTimeout(m.current)},r=()=>{n(),m.current=setTimeout((()=>c(!0)),o)},i=()=>{n(),c(!1)},u=()=>c((e=>!e));return"hover"===a?(e.addEventListener("mouseenter",r),e.addEventListener("mouseleave",i),t.addEventListener("mouseenter",r),t.addEventListener("mouseleave",i),e.addEventListener("pointerdown",i)):"click"===a&&e.addEventListener("click",u),"none"===a&&(m.current&&clearTimeout(m.current),c(!1)),()=>{n(),"hover"===a?(e.removeEventListener("mouseenter",r),e.removeEventListener("mouseleave",i),t.removeEventListener("mouseenter",r),t.removeEventListener("mouseleave",i),e.removeEventListener("pointerdown",i)):"click"===a&&e.removeEventListener("click",u)}}),[a,o]),f(D,null,f("div",{ref:l,role:"tooltip",className:`z-100 pointer-events-none absolute select-none whitespace-nowrap rounded-lg px-3 py-2 text-sm shadow-md transition-opacity duration-150 ${"dark"===i?"bg-gray-900 text-white":"border border-gray-200 bg-white text-gray-900"} ${d?"opacity-100":"opacity-0"} ${r} `,style:{visibility:d?"visible":"hidden"}},t,f("div",{ref:u,className:`absolute h-2 w-2 rotate-45 bg-inherit ${"light"===i?"border border-gray-200":""} `})),f(oo,{ref:s},e))}var ao=()=>Ot(zn.id);function so({component:t,parentContext:n={}}){const[r,o]=oe({});ie((()=>{const e=()=>o({});return t.onUpdate(e)&&o({}),()=>t.offUpdate(e)}),[t]);const i=t.getChildContext(n),a=t.getRenderer();if(!a)throw new Error(`No renderer for type: ${t.getRenderType}`);return a(t.props,(function(n){const r=n?.context?{...i,...n.context}:i;return t.getChildren().filter((({id:e})=>!n?.filter||n.filter(e))).map((({component:t,id:n,className:o})=>o?e("div",{className:o,children:e(so,{component:t,parentContext:r},n)}):e(so,{component:t,parentContext:r},n)))}),i)}function lo({children:e}){const{provides:t}=ao(),n=e=>e.map((e=>V(so,{component:e},e.props.id)));return e({headers:{top:n(t?.getHeadersByPlacement("top")||[]),bottom:n(t?.getHeadersByPlacement("bottom")||[]),left:n(t?.getHeadersByPlacement("left")||[]),right:n(t?.getHeadersByPlacement("right")||[])},panels:{left:n(t?.getPanelsByLocation("left")||[]),right:n(t?.getPanelsByLocation("right")||[])},floating:{insideScroller:n(t?.getFloatingComponents("inside")||[]),outsideScroller:n(t?.getFloatingComponents("outside")||[])},commandMenu:t?.getCommandMenu()?V(so,{component:t.getCommandMenu()}):null})}function uo({open:e,trigger:t,children:n,placement:r="bottom-start",offsetSkidding:o=-2,offsetDistance:i=5,delay:a=0,onShow:s,onHide:l,className:u}){const d=se(null),[c,m]=oe({x:0,y:0}),h=function(e){return e&&{top:"top-start",bottom:"bottom-start",left:"left-start",right:"right-start"}[e]||e||"bottom-start"}(r);return ie((()=>{const n=t,r=d.current;if(!r)return;if(e?(r.style.display="block",s?.()):(a?setTimeout((()=>r.style.display="none"),a):r.style.display="none",l?.()),!n)return;if(!e)return;const u=Jr(n,r,(()=>{ro(n,r,{placement:h,strategy:"absolute",middleware:[Qr({mainAxis:i,crossAxis:o}),to(),eo({padding:8})]}).then((({x:e,y:t})=>{m({x:e,y:t})}))}));return()=>u()}),[e,t,r,o,i,a]),ie((()=>{if(!e)return;const n=d.current;if(!n)return;const r=e=>{const r=e.composedPath?.()??[e.target];t&&r.includes(t)||r.includes(n)||l?.()};return window.addEventListener("pointerdown",r,!0),()=>window.removeEventListener("pointerdown",r,!0)}),[e,t,l]),f("div",{ref:d,style:{...t&&{display:"none",left:`${c.x}px`,top:`${c.y}px`}},className:`absolute z-50 min-w-[8rem] divide-y divide-gray-100 rounded-lg border border-[#cfd4da] bg-white shadow-sm transition-opacity duration-150 focus:outline-none ${e?"opacity-100":"opacity-0"} ${!t&&"bottom-0 left-0 right-0"} ${u} `},f("div",{className:"flex flex-col py-2"},n))}var co=(e=>(e.Automatic="automatic",e.FitPage="fit-page",e.FitWidth="fit-width",e))(co||{}),mo="zoom",ho={id:mo,name:"Zoom Plugin",version:"1.0.0",provides:["zoom"],requires:["viewport","scroll"],optional:["interaction-manager"],defaultConfig:{enabled:!0,defaultZoomLevel:"automatic",minZoom:.2,maxZoom:60,zoomStep:.1,zoomRanges:[{min:.2,max:.5,step:.05},{min:.5,max:1,step:.1},{min:1,max:2,step:.2},{min:2,max:4,step:.4},{min:4,max:10,step:.8},{min:10,max:20,step:1.6},{min:20,max:40,step:3.2},{min:40,max:60,step:6.4}],presets:[{name:"Fit Page",value:"fit-page"},{name:"Fit Width",value:"fit-width"},{name:"Automatic",value:"automatic"},{name:"25%",value:.25},{name:"50%",value:.5},{name:"100%",value:1},{name:"125%",value:1.25},{name:"150%",value:1.5},{name:"200%",value:2},{name:"400%",value:4},{name:"800%",value:8},{name:"1600%",value:16}]}},go="SET_ZOOM_LEVEL",Fo="SET_INITIAL_ZOOM_LEVEL";var po={zoomLevel:"automatic",currentZoomLevel:1},_o=class extends vt{constructor(e,t,n){super(e,t),this.zoom$=Ct(),this.state$=Mt(),this.viewportPlugin=t.getPlugin("viewport"),this.viewport=this.viewportPlugin.provides(),this.scroll=t.getPlugin("scroll").provides();const r=t.getPlugin("interaction-manager");var o;this.interactionManager=r?.provides()??null,this.minZoom=n.minZoom??.25,this.maxZoom=n.maxZoom??10,this.zoomStep=n.zoomStep??.1,this.presets=n.presets??[],this.zoomRanges=this.normalizeRanges(n.zoomRanges??[]),this.dispatch((o=n.defaultZoomLevel,{type:Fo,payload:{zoomLevel:o}})),this.viewport.onViewportResize((()=>this.recalcAuto(1)),{mode:"debounce",wait:150}),this.coreStore.onAction(ht,(()=>this.recalcAuto(1))),this.coreStore.onAction(gt,(()=>this.recalcAuto(1))),this.coreStore.onAction(dt,(()=>this.recalcAuto(1))),this.interactionManager?.registerMode({id:"marqueeZoom",scope:"page",exclusive:!0,cursor:"zoom-in"}),this.resetReady()}buildCapability(){return{onZoomChange:this.zoom$.on,onStateChange:this.state$.on,zoomIn:()=>{const e=this.state.currentZoomLevel;return this.handleRequest({level:e,delta:this.stepFor(e)})},zoomOut:()=>{const e=this.state.currentZoomLevel;return this.handleRequest({level:e,delta:-this.stepFor(e)})},zoomToArea:(e,t)=>this.handleZoomToArea(e,t),requestZoom:(e,t)=>this.handleRequest({level:e,center:t}),requestZoomBy:(e,t)=>{const n=this.state.currentZoomLevel,r=this.toZoom(n+e);return this.handleRequest({level:r,center:t})},enableMarqueeZoom:()=>{this.interactionManager?.activate("marqueeZoom")},disableMarqueeZoom:()=>{this.interactionManager?.activate("default")},toggleMarqueeZoom:()=>{"marqueeZoom"===this.interactionManager?.getActiveMode()?this.interactionManager?.activate("default"):this.interactionManager?.activate("marqueeZoom")},isMarqueeZoomActive:()=>"marqueeZoom"===this.interactionManager?.getActiveMode(),getState:()=>this.state,getPresets:()=>this.presets}}async initialize(){}async destroy(){this.zoom$.clear()}normalizeRanges(e){return[...e].filter((e=>e.step>0&&e.max>e.min)).sort(((e,t)=>e.min-t.min))}stepFor(e){const t=this.zoomRanges.find((t=>e>=t.min&&e<t.max));return t?t.step:this.zoomStep}toZoom(e){return parseFloat(wt(e,this.minZoom,this.maxZoom).toFixed(2))}handleRequest({level:e,delta:t=0,center:n,focus:r=0,align:o="keep"}){const i=this.viewport.getMetrics(),a=this.state.currentZoomLevel;if(0===i.clientWidth||0===i.clientHeight)return;const s="number"==typeof e?e:this.computeZoomForMode(e,i);if(!1===s)return;const l=wt(s+t,this.minZoom,this.maxZoom),u=Math.floor(100*l)/100,d=n??{vx:i.clientWidth/2,vy:1===r?0:i.clientHeight/2},{desiredScrollLeft:c,desiredScrollTop:m}=this.computeScrollForZoomChange(i,a,u,d,o);isNaN(c)||isNaN(m)||this.viewportPlugin.setViewportScrollMetrics({scrollLeft:c,scrollTop:m}),this.dispatch({type:go,payload:{zoomLevel:"number"==typeof e?u:e,currentZoomLevel:u}}),this.dispatchCoreAction((e=>({type:mt,payload:e}))(u)),this.markReady(),this.viewport.scrollTo({x:c,y:m,behavior:"instant"});const h={oldZoom:a,newZoom:u,level:e,center:d,desiredScrollLeft:c,desiredScrollTop:m,viewport:i};this.zoom$.emit(h)}computeZoomForMode(e,t){const n=bt(this.coreState.core);if(!n.length)return!1;const r=this.scroll.getPageGap(),o=this.viewport.getViewportGap();if(0===t.clientWidth||0===t.clientHeight)return!1;const i=t.clientWidth-2*o,a=t.clientHeight-2*o;if(i<=0||a<=0)return!1;let s=0,l=0;switch(n.forEach((e=>{const t=e.reduce(((e,t,n)=>e+t.rotatedSize.width+(n?r:0)),0),n=Math.max(...e.map((e=>e.rotatedSize.height)));s=Math.max(s,t),l=Math.max(l,n)})),e){case"fit-width":return i/s;case"fit-page":return Math.min(i/s,a/l);case"automatic":return Math.min(i/s,1);default:return 1}}computeScrollForZoomChange(e,t,n,r,o="keep"){const i=this.scroll.getLayout(),a=this.viewport.getViewportGap(),s=i.totalContentSize.width,l=i.totalContentSize.height,u=e.clientWidth-2*a,d=e.clientHeight-2*a,c=(e,t,n)=>t*n<e?(e-t*n)/2:0,m=c(u,s,t),h=c(d,l,t),g=c(u,s,n),F=c(d,l,n),p=(e.scrollLeft+r.vx-a-m)/t*n+a+g,_=(e.scrollTop+r.vy-a-h)/t*n+a+F,b="center"===o?p-e.clientWidth/2:p-r.vx,f="center"===o?_-e.clientHeight/2:_-r.vy;return{desiredScrollLeft:Math.max(0,b),desiredScrollTop:Math.max(0,f)}}handleZoomToArea(e,t){const n=this.coreState.core.rotation,r=this.viewport.getMetrics(),o=this.viewport.getViewportGap(),i=this.state.currentZoomLevel,a=r.clientWidth-2*o,s=r.clientHeight-2*o,l=this.scroll.getLayout(),u=l.virtualItems.find((t=>t.pageLayouts.some((t=>t.pageIndex===e))));if(!u)return;const d=u.pageLayouts.find((t=>t.pageIndex===e)),c=Se({width:d.width,height:d.height},t,n),m=this.toZoom(Math.min(a/c.size.width,s/c.size.height)),h=u.x+d.x,g=u.y+d.y,F=h+c.origin.x+c.size.width/2,p=g+c.origin.y+c.size.height/2,_=(e,t,n)=>t*n<e?(e-t*n)/2:0,b=_(a,l.totalContentSize.width,i),f=_(s,l.totalContentSize.height,i),P=o+b+F*i-r.scrollLeft,D=o+f+p*i-r.scrollTop;this.handleRequest({level:m,center:{vx:P,vy:D},align:"center"})}recalcAuto(e){const t=this.state;"automatic"!==t.zoomLevel&&"fit-page"!==t.zoomLevel&&"fit-width"!==t.zoomLevel||this.handleRequest({level:t.zoomLevel,focus:e})}onStoreUpdated(e,t){this.state$.emit(t)}};_o.id="zoom";var bo={manifest:ho,create:(e,t,n)=>new _o(mo,e,n),reducer:(e=po,t)=>{switch(t.type){case go:return{...e,zoomLevel:t.payload.zoomLevel,currentZoomLevel:t.payload.currentZoomLevel};case Fo:return{...e,zoomLevel:t.payload.zoomLevel};default:return e}},initialState:po};function fo(e,t,n,r){let o=e.getHandlersForScope(t);const i=e.onModeChange((()=>{if("global"===t.type){const t=e.getActiveInteractionMode();n.style.cursor="global"===(null==t?void 0:t.scope)?t.cursor??"auto":"auto"}o=e.getHandlersForScope(t)})),a=e.onHandlerChange((()=>{o=e.getHandlersForScope(t)})),s=e.getActiveInteractionMode(),l=e.getCurrentCursor();"global"===t.type?n.style.cursor="global"===(null==s?void 0:s.scope)?l:"auto":n.style.cursor=l;const u=e.onCursorChange((r=>{var o;"global"===t.type&&"global"!==(null==(o=e.getActiveInteractionMode())?void 0:o.scope)||(n.style.cursor=r)})),d={onPointerDown:"pointerdown",onPointerUp:"pointerup",onPointerMove:"pointermove",onPointerEnter:"pointerenter",onPointerLeave:"pointerleave",onPointerCancel:"pointercancel"},c={};return Object.keys(d).forEach((t=>{c[t]=i=>{var a;if(e.isPaused())return;const s=i,l=e.getActiveMode();null==(a=null==o?void 0:o[t])||a.call(o,((e,t)=>{if(r)return r(e,t);const n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}})(s,n),s,l)},n.addEventListener(d[t],c[t])})),()=>{Object.keys(d).forEach((e=>n.removeEventListener(d[e],c[e]))),i(),u(),a()}}const Po="INTERACTION/ACTIVATE_MODE",Do="INTERACTION/PAUSE",vo="INTERACTION/RESUME",yo="INTERACTION/SET_CURSOR";const wo=class extends vt{constructor(e,t){super(e,t),this.modes=new Map,this.cursorClaims=new Map,this.buckets=new Map,this.alwaysGlobal=new Set,this.alwaysPage=new Map,this.onModeChange$=Ct(),this.onHandlerChange$=Ct(),this.onCursorChange$=Ct(),this.onStateChange$=Mt(),this.registerMode({id:"default",scope:"page",exclusive:!1,cursor:"auto"})}async initialize(e){}buildCapability(){return{activate:e=>this.activate(e),onModeChange:this.onModeChange$.on,onCursorChange:this.onCursorChange$.on,onHandlerChange:this.onHandlerChange$.on,onStateChange:this.onStateChange$.on,getActiveMode:()=>this.state.activeMode,getActiveInteractionMode:()=>this.getActiveInteractionMode(),finish:()=>this.activate("default"),registerMode:e=>this.registerMode(e),registerHandlers:e=>this.registerHandlers(e),registerAlways:e=>this.registerAlways(e),setCursor:(e,t,n=0)=>this.setCursor(e,t,n),removeCursor:e=>this.removeCursor(e),getCurrentCursor:()=>this.state.cursor,getHandlersForScope:e=>this.getHandlersForScope(e),activeModeIsExclusive:()=>this.activeModeIsExclusive(),pause:()=>this.dispatch({type:Do}),resume:()=>this.dispatch({type:vo}),isPaused:()=>this.state.paused}}activate(e){if(!this.modes.has(e))throw new Error(`[interaction] unknown mode '${e}'`);if(e===this.state.activeMode)return;const t=this.state.activeMode;this.cursorClaims.clear(),this.notifyHandlersInactive(t),this.dispatch((e=>({type:Po,payload:{mode:e}}))(e)),this.emitCursor(),this.notifyHandlersActive(e),this.onModeChange$.emit({...this.state,activeMode:e})}notifyHandlersActive(e){this.alwaysGlobal.forEach((t=>{var n;null==(n=t.onHandlerActiveStart)||n.call(t,e)})),this.alwaysPage.forEach((t=>{t.forEach((t=>{var n;null==(n=t.onHandlerActiveStart)||n.call(t,e)}))}));const t=this.modes.get(e);if(!t)return;const n=this.buckets.get(e);n&&("global"===t.scope&&n.global.forEach((t=>{var n;null==(n=t.onHandlerActiveStart)||n.call(t,e)})),"page"===t.scope&&n.page.forEach(((t,n)=>{t.forEach((t=>{var n;null==(n=t.onHandlerActiveStart)||n.call(t,e)}))})))}notifyHandlersInactive(e){this.alwaysGlobal.forEach((t=>{var n;null==(n=t.onHandlerActiveEnd)||n.call(t,e)})),this.alwaysPage.forEach((t=>{t.forEach((t=>{var n;null==(n=t.onHandlerActiveEnd)||n.call(t,e)}))}));const t=this.modes.get(e);if(!t)return;const n=this.buckets.get(e);n&&("global"===t.scope&&n.global.forEach((t=>{var n;null==(n=t.onHandlerActiveEnd)||n.call(t,e)})),"page"===t.scope&&n.page.forEach(((t,n)=>{t.forEach((t=>{var n;null==(n=t.onHandlerActiveEnd)||n.call(t,e)}))})))}registerMode(e){this.modes.set(e.id,e),this.buckets.has(e.id)||this.buckets.set(e.id,{global:new Set,page:new Map})}registerHandlers({modeId:e,handlers:t,pageIndex:n}){const r=Array.isArray(e)?e:[e],o=[];for(const e of r){const r=this.buckets.get(e);if(!r)throw new Error(`unknown mode '${e}'`);if(null==n)r.global.add(t);else{const e=r.page.get(n)??new Set;e.add(t),r.page.set(n,e)}o.push((()=>{if(null==n)r.global.delete(t);else{const e=r.page.get(n);e&&(e.delete(t),0===e.size&&r.page.delete(n))}}))}return this.onHandlerChange$.emit({...this.state}),()=>{o.forEach((e=>e())),this.onHandlerChange$.emit({...this.state})}}registerAlways({scope:e,handlers:t}){if("global"===e.type)return this.alwaysGlobal.add(t),this.onHandlerChange$.emit({...this.state}),()=>this.alwaysGlobal.delete(t);const n=this.alwaysPage.get(e.pageIndex)??new Set;return n.add(t),this.alwaysPage.set(e.pageIndex,n),this.onHandlerChange$.emit({...this.state}),()=>{n.delete(t),this.onHandlerChange$.emit({...this.state})}}getHandlersForScope(e){if(!this.state)return null;const t=this.modes.get(this.state.activeMode);if(!t)return null;const n=this.buckets.get(t.id);if(!n)return null;const r=(e,t)=>e.size||t.size?function(e){const t=["onPointerDown","onPointerUp","onPointerMove","onPointerEnter","onPointerLeave","onPointerCancel"],n={};for(const r of t)n[r]=(t,n,o)=>{var i;for(const a of e)null==(i=a[r])||i.call(a,t,n,o)};return n}([...e,...t]):null;if("global"===e.type){const e="global"===t.scope?n.global:new Set;return r(this.alwaysGlobal,e)}return r(this.alwaysPage.get(e.pageIndex)??new Set,"page"===t.scope?n.page.get(e.pageIndex)??new Set:new Set)}setCursor(e,t,n=0){this.cursorClaims.set(e,{cursor:t,priority:n}),this.emitCursor()}removeCursor(e){this.cursorClaims.delete(e),this.emitCursor()}emitCursor(){var e;const t=[...this.cursorClaims.values()].sort(((e,t)=>t.priority-e.priority))[0]??{cursor:(null==(e=this.modes.get(this.state.activeMode))?void 0:e.cursor)??"auto"};t.cursor!==this.state.cursor&&(this.dispatch((e=>({type:yo,payload:{cursor:e}}))(t.cursor)),this.onCursorChange$.emit(t.cursor))}onStoreUpdated(e,t){this.onStateChange$.emit(t)}activeModeIsExclusive(){const e=this.modes.get(this.state.activeMode);return!(null==e||!e.exclusive)}getActiveInteractionMode(){return this.modes.get(this.state.activeMode)??null}async destroy(){this.onModeChange$.clear(),this.onCursorChange$.clear(),await super.destroy()}};wo.id="interaction-manager";let xo=wo;const Ao="interaction-manager",So={activeMode:"default",cursor:"auto",paused:!1},Eo={manifest:{id:Ao,name:"Interaction Manager Plugin",version:"1.0.0",provides:["interaction-manager"],requires:[],optional:[],defaultConfig:{enabled:!0}},create:e=>new xo(Ao,e),reducer:(e,t)=>{switch(t.type){case Po:return{...e,activeMode:t.payload.mode};case yo:return{...e,cursor:t.payload.cursor};case Do:return{...e,paused:!0};case vo:return{...e,paused:!1};default:return e}},initialState:So},Co=()=>Ot(xo.id);function Mo(){const{provides:e}=Co();return{setCursor:(t,n,r=0)=>{null==e||e.setCursor(t,n,r)},removeCursor:t=>{null==e||e.removeCursor(t)}}}function To({modeId:e,pageIndex:t}){const{provides:n}=Co();return{register:(r,o)=>{const i=(null==o?void 0:o.modeId)??e,a=(null==o?void 0:o.pageIndex)??t;return i?null==n?void 0:n.registerHandlers({modeId:i,handlers:r,pageIndex:a}):null==n?void 0:n.registerAlways({scope:void 0!==a?{type:"page",pageIndex:a}:{type:"global"},handlers:r})}}}const Go=({children:e,style:t,...n})=>{const r=se(null),{provides:o}=Co();return ie((()=>{if(o&&r.current)return fo(o,{type:"global"},r.current)}),[o]),V("div",{ref:r,style:{width:"100%",height:"100%",...t},...n,children:e})},ko=({pageIndex:e,children:t,pageWidth:n,pageHeight:r,rotation:o,scale:i,convertEventToPoint:a,style:s,...l})=>{const u=se(null),{provides:d}=Co(),c=function(){const{provides:e}=Co(),[t,n]=oe((()=>{const t=null==e?void 0:e.getActiveInteractionMode();return"page"===(null==t?void 0:t.scope)&&!!t.exclusive}));return ie((()=>{if(e)return e.onModeChange((()=>{const t=e.getActiveInteractionMode();n("page"===(null==t?void 0:t.scope)&&!(null==t||!t.exclusive))}))}),[e]),t}(),m=ue(((e,t)=>{const a=t.getBoundingClientRect(),s={x:e.clientX-a.left,y:e.clientY-a.top};return l=i,Ae(xe({width:n,height:r},s,(4-o)%4),1/l);var l}),[n,r,o,i]);return ie((()=>{if(d&&u.current)return fo(d,{type:"page",pageIndex:e},u.current,a||m)}),[d,e,a,m]),V("div",{ref:u,style:{...s},...l,children:[t,c&&V("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:10}})]})};var Io=()=>Ot(_o.id);function Oo(){const{provides:e}=Ot("viewport"),{provides:t}=Io(),n=se(null);return ie((()=>{const r=n.current;if(!r||!e||!t)return;if("undefined"==typeof window)return;let o,i=0,a={x:0,y:0};const s=()=>{r.style.transform="none",r.style.transformOrigin="0 0"},l=n=>{i=t.getState().currentZoomLevel;const o=e.getBoundingRect();a={x:n.center.x-o.origin.x,y:n.center.y-o.origin.y};const s=r.getBoundingClientRect();r.style.transformOrigin=`${n.center.x-s.left}px ${n.center.y-s.top}px`,n.srcEvent?.cancelable&&(n.srcEvent.preventDefault(),n.srcEvent.stopPropagation())},u=e=>{var t;t=e.scale,r.style.transform=`scale(${t})`,e.srcEvent?.cancelable&&(e.srcEvent.preventDefault(),e.srcEvent.stopPropagation())},d=e=>{const n=(e.scale-1)*i;t.requestZoomBy(n,{vx:a.x,vy:a.y}),s(),i=0};return(async()=>{try{const e=(await Promise.resolve().then((function(){return ou}))).default,t=(()=>{const t="ontouchstart"in window||navigator.maxTouchPoints>0;return t&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent)?e.TouchInput:t?e.TouchMouseInput:e.MouseInput})();o=new e(r,{touchAction:"pan-x pan-y",inputClass:t}),o.get("pinch").set({enable:!0,pointers:2,threshold:.1}),o.on("pinchstart",l),o.on("pinchmove",u),o.on("pinchend",d)}catch(e){console.warn("Failed to load HammerJS:",e)}})(),()=>{o?.destroy(),s()}}),[e,t]),{elementRef:n}}function Ro({children:e,style:t,...n}){const{elementRef:r}=Oo();return V("div",{ref:r,...n,style:{...t,display:"block",width:"fit-content",overflow:"visible",boxSizing:"border-box",margin:"0px auto"},children:e})}var Lo=({pageIndex:e,scale:t,pageWidth:n,pageHeight:r,className:o,stroke:i="rgba(33,150,243,0.8)",fill:a="rgba(33,150,243,0.15)"})=>{const{provides:s}=Io(),{register:l}=To({modeId:"marqueeZoom",pageIndex:e}),u=(e,t,n)=>Math.max(t,Math.min(n,e)),d=se(null),[c,m]=oe(null),h=n/t,g=r/t,F=le((()=>({onPointerDown:(e,t)=>{d.current=e,m({origin:{x:e.x,y:e.y},size:{width:0,height:0}}),t.target?.setPointerCapture?.(t.pointerId)},onPointerMove:e=>{if(!d.current)return;const t=u(e.x,0,h),n=u(e.y,0,g),{x:r,y:o}=d.current,i=Math.min(r,t),a=Math.min(o,n),s=Math.abs(t-r),l=Math.abs(n-o);m({origin:{x:i,y:a},size:{width:s,height:l}})},onPointerUp:(n,r)=>{if(c&&s){Math.max(c.size.width,c.size.height)*t>5?s.zoomToArea(e,c):s.zoomIn()}d.current=null,m(null),r.target?.releasePointerCapture?.(r.pointerId)},onPointerCancel:(e,t)=>{d.current=null,m(null),t.target?.releasePointerCapture?.(t.pointerId)}})),[h,h,s,t,c,e]);return ie((()=>{if(l)return l(F)}),[l,F]),c?V("div",{style:{position:"absolute",pointerEvents:"none",left:c.origin.x*t,top:c.origin.y*t,width:c.size.width*t,height:c.size.height*t,border:`1px solid ${i}`,background:a,boxSizing:"border-box"},className:o}):null};function jo({icon:e,title:t,...n}){const r=function(){const{provides:e}=ao();if(!e)throw new Error("useIcon must be used within a UI context");const{registerIcon:t,registerIcons:n,getIcon:r,getAllIcons:o,getSvgString:i,isSvgString:a,isSvgDataUri:s,dataUriToSvgString:l,svgStringToDataUri:u}=e;return{registerIcon:t,registerIcons:n,getIcon:r,getAllIcons:o,getSvgString:i,isSvgString:a,isSvgDataUri:s,dataUriToSvgString:l,svgStringToDataUri:u}}();let o;if(o=r.isSvgDataUri(e)?r.dataUriToSvgString(e):r.getSvgString(e),!o)return console.warn(`Icon not found: ${e}`),null;const i=f("span",{...n,dangerouslySetInnerHTML:{__html:o}});return t?f("span",{title:t,...n},i):i}var No="START_SEARCH_SESSION",Bo="STOP_SEARCH_SESSION",zo="SET_SEARCH_FLAGS",Uo="SET_SHOW_ALL_RESULTS",Vo="START_SEARCH",Ho="SET_SEARCH_RESULTS",Wo="SET_ACTIVE_RESULT_INDEX";function $o(e){return{type:zo,payload:e}}function qo(e){return{type:Uo,payload:e}}function Xo(e,t,n){return{type:Ho,payload:{results:e,total:t,activeResultIndex:n}}}var Yo=class extends vt{constructor(e,t,n){super(e,t),this.searchStop$=Mt(),this.searchStart$=Mt(),this.searchResult$=Mt(),this.searchActiveResultChange$=Mt(),this.searchResultState$=Mt(),this.searchState$=Mt(),this.engine=n,this.loader=this.registry.getPlugin("loader").provides(),this.loader.onDocumentLoaded(this.handleDocumentLoaded.bind(this)),this.loader.onLoaderEvent(this.handleLoaderEvent.bind(this))}handleDocumentLoaded(e){this.currentDocument=e,this.state.active&&this.startSearchSession()}handleLoaderEvent(e){("error"===e.type||"start"===e.type&&this.currentDocument)&&(this.state.active&&this.stopSearchSession(),this.currentDocument=void 0)}async initialize(e){this.dispatch($o(e.flags||[])),this.dispatch(qo(void 0===e.showAllResults||e.showAllResults))}onStoreUpdated(e,t){this.searchResultState$.emit({results:t.results,activeResultIndex:t.activeResultIndex,showAllResults:t.showAllResults,active:t.active}),this.searchState$.emit(t)}buildCapability(){return{startSearch:this.startSearchSession.bind(this),stopSearch:this.stopSearchSession.bind(this),searchAllPages:this.searchAllPages.bind(this),nextResult:this.nextResult.bind(this),previousResult:this.previousResult.bind(this),goToResult:this.goToResult.bind(this),setShowAllResults:e=>this.dispatch(qo(e)),getShowAllResults:()=>this.state.showAllResults,onSearchResult:this.searchResult$.on,onSearchStart:this.searchStart$.on,onSearchStop:this.searchStop$.on,onActiveResultChange:this.searchActiveResultChange$.on,onSearchResultStateChange:this.searchResultState$.on,onStateChange:this.searchState$.on,getFlags:()=>this.state.flags,setFlags:e=>this.setFlags(e),getState:()=>this.state}}setFlags(e){this.dispatch($o(e)),this.state.active&&this.searchAllPages(this.state.query,!0)}notifySearchStart(){this.searchStart$.emit()}notifySearchStop(){this.searchStop$.emit()}notifyActiveResultChange(e){this.searchActiveResultChange$.emit(e)}startSearchSession(){this.currentDocument&&(this.dispatch({type:No}),this.notifySearchStart())}stopSearchSession(){this.currentDocument&&this.getState().active&&(this.dispatch({type:Bo}),this.notifySearchStop())}async searchAllPages(e,t=!1){const n=e.trim();return this.state.query!==n||t?(this.dispatch({type:Vo,payload:n}),n&&this.currentDocument?(this.state.active||this.startSearchSession(),new Promise((e=>{this.engine.searchAllPages(this.currentDocument,n,this.state.flags).wait((t=>{const n=t.total>0?0:-1;this.dispatch(Xo(t.results,t.total,n)),this.searchResult$.emit(t),t.total>0&&this.notifyActiveResultChange(0),e(t)}),(t=>{console.error("Error during search:",t),this.dispatch(Xo([],0,-1)),e({results:[],total:0})}))}))):(this.dispatch(Xo([],0,-1)),{results:[],total:0})):{results:this.state.results,total:this.state.total}}nextResult(){if(0===this.state.results.length)return-1;const e=this.state.activeResultIndex>=this.state.results.length-1?0:this.state.activeResultIndex+1;return this.goToResult(e)}previousResult(){if(0===this.state.results.length)return-1;const e=this.state.activeResultIndex<=0?this.state.results.length-1:this.state.activeResultIndex-1;return this.goToResult(e)}goToResult(e){return 0===this.state.results.length||e<0||e>=this.state.results.length?-1:(this.dispatch(function(e){return{type:Wo,payload:e}}(e)),this.notifyActiveResultChange(e),e)}async destroy(){this.state.active&&this.currentDocument&&this.stopSearchSession(),this.searchResult$.clear(),this.searchStart$.clear(),this.searchStop$.clear(),this.searchActiveResultChange$.clear(),this.searchResultState$.clear(),this.searchState$.clear()}};Yo.id="search";var Zo="search",Ko={flags:[],results:[],total:0,activeResultIndex:-1,showAllResults:!0,query:"",loading:!1,active:!1},Jo={manifest:{id:Zo,name:"Search Plugin",version:"1.0.0",provides:["search"],requires:["loader"],optional:[],defaultConfig:{enabled:!0,flags:[]}},create:(e,t)=>new Yo(Zo,e,t),reducer:(e=Ko,t)=>{switch(t.type){case No:return{...e,active:!0};case Bo:return{...e,results:[],total:0,activeResultIndex:-1,query:"",loading:!1,active:!1};case zo:return{...e,flags:t.payload};case Uo:return{...e,showAllResults:t.payload};case Vo:return{...e,loading:!0,query:t.payload};case Ho:return{...e,results:t.payload.results,total:t.payload.total,activeResultIndex:t.payload.activeResultIndex,loading:!1};case Wo:return{...e,activeResultIndex:t.payload};default:return e}},initialState:Ko},Qo=()=>Ot(Yo.id);function ei({pageIndex:e,scale:t,style:n,highlightColor:r="#FFFF00",activeHighlightColor:o="#FFBF00",...i}){const{provides:a}=Qo(),[s,l]=oe(null);if(ie((()=>a?.onSearchResultStateChange((e=>{l(e)}))),[a]),!s)return null;return V("div",{style:{...n},...i,children:s.results.map(((e,t)=>({result:e,originalIndex:t}))).filter((({result:t})=>t.pageIndex===e)).map((({result:e,originalIndex:n})=>e.rects.map((e=>V("div",{style:{position:"absolute",top:e.origin.y*t,left:e.origin.x*t,width:e.size.width*t,height:e.size.height*t,backgroundColor:n===s.activeResultIndex?o:r,mixBlendMode:"multiply",transform:"scale(1.02)",transformOrigin:"center",transition:"opacity .3s ease-in-out",opacity:1}})))))})}var ti="thumbnail",ni={id:ti,name:"Thumbnail Plugin",version:"1.0.0",provides:["thumbnail"],requires:["render"],optional:[],defaultConfig:{enabled:!0,width:150,gap:10,buffer:3,labelHeight:16}},ri=class extends vt{constructor(e,t,n){super(e,t),this.cfg=n,this.thumbs=[],this.window=null,this.emitWindow=Mt(),this.taskCache=new Map,this.renderCapability=this.registry.getPlugin("render").provides(),this.coreStore.onAction(dt,((e,t)=>{this.taskCache.clear(),this.setWindowState(t)}))}async initialize(){}setWindowState(e){const t=e.core;if(!t.document)return;const n=this.cfg.width??120,r=this.cfg.labelHeight??16,o=this.cfg.gap??8;let i=0;this.thumbs=t.document.pages.map((e=>{const t=e.size.height/e.size.width,a=Math.round(n*t),s=a+r,l={pageIndex:e.index,width:n,height:a,wrapperHeight:s,top:i,labelHeight:r};return i+=s+o,l})),this.window={start:-1,end:-1,items:[],totalHeight:i-o},this.emitWindow.emit(this.window)}buildCapability(){return{onWindow:this.emitWindow.on,setViewport:(e,t)=>this.updateWindow(e,t),renderThumb:(e,t)=>this.renderThumb(e,t)}}updateWindow(e,t){const n=this.cfg.buffer??3;let r=0,o=this.thumbs.length-1,i=0;for(;r<=o;){const t=r+o>>1,n=this.thumbs[t];n.top+n.wrapperHeight<e?r=t+1:(i=t,o=t-1)}let a=i;const s=e+t;for(;a+1<this.thumbs.length&&this.thumbs[a].top<s;)a++;a=Math.min(this.thumbs.length-1,a+n);const l=Math.max(0,i-n);this.window&&l===this.window.start&&a===this.window.end||(this.window={start:l,end:a,items:this.thumbs.slice(l,a+1),totalHeight:this.window.totalHeight},this.emitWindow.emit(this.window))}renderThumb(e,t){if(this.taskCache.has(e))return this.taskCache.get(e);const n=this.coreState.core.document.pages[e],r=(this.cfg.width??120)/n.size.width,o=this.renderCapability.renderPageRect({pageIndex:e,rect:{origin:{x:0,y:0},size:n.size},scaleFactor:r,dpr:t});return this.taskCache.set(e,o),o.wait(nt,(()=>{this.taskCache.delete(e)})),o}};ri.id="thumbnail";var oi={manifest:ni,create:(e,t,n)=>new ri(ti,e,n),reducer:()=>{},initialState:{}},ii=()=>Ot(ri.id);function ai({style:e,selectedPage:t,scrollOptions:n={behavior:"smooth",block:"nearest",inline:"nearest"},...r}){const{provides:o}=ii(),i=se(null),[a,s]=oe(null);return ie((()=>o?.onWindow(s)),[o]),ie((()=>{const e=i.current;if(!e)return;const t=()=>o?.setViewport(e.scrollTop,e.clientHeight);return e.addEventListener("scroll",t),()=>e.removeEventListener("scroll",t)}),[o]),ie((()=>{const e=i.current;e&&o&&0===a?.items.length&&o.setViewport(e.scrollTop,e.clientHeight)}),[a,o]),ie((()=>{if(!t||!a)return;const e=a.items.find((e=>e.pageIndex+1===t));if(!e)return;const r=i.current;if(!r)return;e.top<r.scrollTop+8?r.scrollTo({top:e.top,...n}):e.top+e.wrapperHeight+e.labelHeight>r.scrollTop+r.clientHeight-8&&r.scrollTo({top:e.top+e.wrapperHeight+e.labelHeight-r.clientHeight,...n})}),[t,a,n]),V("div",{ref:i,style:{overflowY:"auto",position:"relative",...e},...r,children:V("div",{style:{height:a?.totalHeight??0,position:"relative"},children:a?.items.map((e=>r.children(e)))})})}function si({meta:e,style:t,...n}){const{provides:r}=ii(),[o,i]=oe(),a=se(null);ie((()=>{const t=r?.renderThumb(e.pageIndex,window.devicePixelRatio);return t?.wait((e=>{const t=URL.createObjectURL(e);a.current=t,i(t)}),nt),()=>{a.current?(URL.revokeObjectURL(a.current),a.current=null):t?.abort({code:Je.Cancelled,message:"canceled render task"})}}),[e.pageIndex]);return o?V("img",{src:o,onLoad:()=>{a.current&&(URL.revokeObjectURL(a.current),a.current=null)},style:t,...n}):null}function li(e,t=300){const[n,r]=oe(e);return ie((()=>{const n=window.setTimeout((()=>r(e)),t);return()=>clearTimeout(n)}),[e,t]),n}const ui=({label:e,checked:t,onChange:n})=>f("label",{className:"inline-flex cursor-pointer select-none items-center gap-2 text-xs font-medium text-gray-700"},f("input",{type:"checkbox",checked:t,onChange:e=>n(e.target.checked),className:"peer h-4 w-4 shrink-0 appearance-none rounded-[3px] border border-gray-300 bg-white transition-all checked:border-blue-600 checked:bg-blue-600"}),f("svg",{viewBox:"0 0 24 24",className:"/* fine-tune centering */ pointer-events-none absolute h-3.5 w-3.5 translate-x-[1px] translate-y-[1px] text-white opacity-0 peer-checked:opacity-100",fill:"none",stroke:"currentColor",strokeWidth:3,strokeLinecap:"round",strokeLinejoin:"round"},f("polyline",{points:"20 6 9 17 4 12"})),e),di="selection",ci={id:di,name:"Selection Plugin",version:"1.0.0",provides:["selection"],requires:["interaction-manager"],optional:[],defaultConfig:{enabled:!0}},mi="CACHE_PAGE_GEOMETRY",hi="SET_SELECTION",gi="START_SELECTION",Fi="END_SELECTION",pi="CLEAR_SELECTION",_i="SET_RECTS",bi="SET_SLICES",fi="RESET";function Pi(e,t){return e.rects[t]??[]}function Di(e,t){return Me(Pi(e,t))}function vi(e,t){for(const n of e.runs){if(!(t.y>=n.rect.y&&t.y<=n.rect.y+n.rect.height&&t.x>=n.rect.x&&t.x<=n.rect.x+n.rect.width))continue;const e=n.glyphs.findIndex((e=>t.x>=e.x&&t.x<=e.x+e.width&&t.y>=e.y&&t.y<=e.y+e.height));if(-1!==e)return n.charStart+e}return-1}function yi(e,t,n){if(!e||!t||n<e.start.page||n>e.end.page)return null;const r=n===e.start.page?e.start.index:0,o=t.runs[t.runs.length-1],i=o.charStart+o.glyphs.length-1;return{from:r,to:n===e.end.page?e.end.index:i}}function wi(e,t,n,r=!0){const o=[];for(const r of e.runs){const e=r.charStart,i=e+r.glyphs.length-1;if(i<t||e>n)continue;const a=Math.max(t,e)-e,s=Math.min(n,i)-e;let l=1/0,u=-1/0,d=1/0,c=-1/0,m=0;for(let e=a;e<=s;e++){const t=r.glyphs[e];2!==t.flags&&(l=Math.min(l,t.x),u=Math.max(u,t.x+t.width),d=Math.min(d,t.y),c=Math.max(c,t.y+t.height),m++)}l!==1/0&&m>0&&o.push({rect:{origin:{x:l,y:d},size:{width:u-l,height:c-d}},charCount:m})}return r?function(e){const t=[];let n=null,r=null;for(const o of e)n&&r?Ei(n,o)?r=xi(r,o.rect):(t.push(r),r=o.rect):r=o.rect,n=o;return r&&!Ai(r)&&t.push(r),t}(o):o.map((e=>e.rect))}function xi(e,t){const n=Math.min(e.origin.x,t.origin.x),r=Math.min(e.origin.y,t.origin.y);return{origin:{x:n,y:r},size:{width:Math.max(e.origin.x+e.size.width,t.origin.x+t.size.width)-n,height:Math.max(e.origin.y+e.size.height,t.origin.y+t.size.height)-r}}}function Ai(e){return e.size.width<=0||e.size.height<=0}function Si(e,t){if(Ai(e)||Ai(t))return 0;const n=xi(e,t);return n.size.height===e.size.height||n.size.height===t.size.height?1:function(e,t){const n=Math.max(e.origin.x,t.origin.x),r=Math.max(e.origin.y,t.origin.y),o=Math.min(e.origin.x+e.size.width,t.origin.x+t.size.width),i=Math.min(e.origin.y+e.size.height,t.origin.y+t.size.height);return{origin:{x:n,y:r},size:{width:Math.max(0,o-n),height:Math.max(0,i-r)}}}(e,t).size.height/n.size.height}function Ei(e,t){const n=e.rect,r=t.rect;if(Si(n,r)<.8)return!1;const o=1*n.size.width/e.charCount,i=1*r.size.width/t.charCount,a=n.origin.x-o,s=n.origin.x+n.size.width+o,l=r.origin.x-i;return a<r.origin.x+r.size.width+i&&s>l}const Ci=class extends vt{constructor(e,t,n){super(e,t),this.engine=n,this.enabledModes=new Set(["default"]),this.selecting=!1,this.selChange$=Mt(),this.textRetrieved$=Mt(),this.copyToClipboard$=Ct(),this.beginSelection$=Ct(),this.endSelection$=Ct(),this.coreStore.onAction(dt,(e=>{this.dispatch({type:fi})}))}async initialize(){}async destroy(){this.selChange$.clear()}buildCapability(){return{getGeometry:e=>this.getOrLoadGeometry(e),getFormattedSelection:()=>function(e){const t=[],n=Object.keys(e.rects).map(Number);for(const r of n){const n=e.rects[r]||[];if(0===n.length)continue;const o=Di(e,r);o&&t.push({pageIndex:r,rect:o,segmentRects:n})}return t}(this.state),getFormattedSelectionForPage:e=>function(e,t){const n=e.rects[t]||[];if(0===n.length)return null;const r=Di(e,t);return r?{pageIndex:t,rect:r,segmentRects:n}:null}(this.state,e),getHighlightRectsForPage:e=>Pi(this.state,e),getHighlightRects:()=>this.state.rects,getBoundingRectForPage:e=>Di(this.state,e),getBoundingRects:()=>function(e){const t=[],n=e.rects;for(const e in n){const r=Number(e),o=Me(n[r]);o&&t.push({page:r,rect:o})}return t}(this.state),begin:(e,t)=>this.beginSelection(e,t),update:(e,t)=>this.updateSelection(e,t),end:()=>this.endSelection(),clear:()=>this.clearSelection(),onCopyToClipboard:this.copyToClipboard$.on,onSelectionChange:this.selChange$.on,onTextRetrieved:this.textRetrieved$.on,onBeginSelection:this.beginSelection$.on,onEndSelection:this.endSelection$.on,getSelectedText:()=>this.getSelectedText(),copyToClipboard:()=>this.copyToClipboard(),enableForMode:e=>this.enabledModes.add(e),isEnabledForMode:e=>this.enabledModes.has(e),getState:()=>this.state}}getOrLoadGeometry(e){const t=this.state.geometry[e];if(t)return Qe.resolve(t);if(!this.coreState.core.document)return Qe.reject({code:Je.NotFound,message:"Doc Not Found"});const n=this.coreState.core.document.pages.find((t=>t.index===e)),r=this.engine.getPageGeometry(this.coreState.core.document,n);return r.wait((t=>{this.dispatch(((e,t)=>({type:mi,payload:{page:e,geo:t}}))(e,t))}),nt),r}beginSelection(e,t){this.selecting=!0,this.anchor={page:e,index:t},this.dispatch({type:gi}),this.beginSelection$.emit({page:e,index:t})}endSelection(){this.selecting=!1,this.anchor=void 0,this.dispatch({type:Fi}),this.endSelection$.emit()}clearSelection(){this.selecting=!1,this.anchor=void 0,this.dispatch({type:pi}),this.selChange$.emit(null)}updateSelection(e,t){if(!this.selecting||!this.anchor)return;const n=this.anchor,r=e>n.page||e===n.page&&t>=n.index,o={start:r?n:{page:e,index:t},end:r?{page:e,index:t}:n};this.dispatch((e=>({type:hi,payload:e}))(o)),this.updateRectsAndSlices(o),this.selChange$.emit(o)}updateRectsAndSlices(e){const t={},n={};for(let r=e.start.page;r<=e.end.page;r++){const o=this.state.geometry[r],i=yi(e,o,r);i&&(t[r]=wi(o,i.from,i.to),n[r]={start:i.from,count:i.to-i.from+1})}this.dispatch((e=>({type:_i,payload:e}))(t)),this.dispatch((e=>({type:bi,payload:e}))(n))}getSelectedText(){if(!this.coreState.core.document||!this.state.selection)return Qe.reject({code:Je.NotFound,message:"Doc Not Found or No Selection"});const e=this.state.selection,t=[];for(let n=e.start.page;n<=e.end.page;n++){const e=this.state.slices[n];e&&t.push({pageIndex:n,charIndex:e.start,charCount:e.count})}if(0===t.length)return Qe.resolve([]);const n=this.engine.getTextSlices(this.coreState.core.document,t);return n.wait((e=>{this.textRetrieved$.emit(e)}),nt),n}copyToClipboard(){this.getSelectedText().wait((e=>{this.copyToClipboard$.emit(e.join("\n"))}),nt)}};Ci.id="selection";let Mi=Ci;const Ti={geometry:{},rects:{},slices:{},selection:null,active:!1,selecting:!1},Gi={manifest:ci,create:(e,t)=>new Mi(di,e,t),reducer:(e=Ti,t)=>{switch(t.type){case mi:{const{page:n,geo:r}=t.payload;return{...e,geometry:{...e.geometry,[n]:r}}}case hi:return{...e,selection:t.payload,active:!0};case gi:return{...e,selecting:!0,selection:null,rects:{}};case Fi:return{...e,selecting:!1};case pi:return{...e,selecting:!1,selection:null,rects:{},active:!1};case _i:return{...e,rects:t.payload};case bi:return{...e,slices:t.payload};case fi:return Ti;default:return e}},initialState:Ti},ki=()=>Ot(Mi.id);function Ii({pageIndex:e,scale:t,background:n="rgba(33,150,243)"}){const{provides:r}=ki(),{provides:o}=Co(),{register:i}=To({pageIndex:e}),[a,s]=oe([]),[l,u]=oe(null),{setCursor:d,removeCursor:c}=Mo(),m=se(null);ie((()=>{if(r)return r.onSelectionChange((()=>{"default"===(null==o?void 0:o.getActiveMode())?(s(r.getHighlightRectsForPage(e)),u(r.getBoundingRectForPage(e))):(s([]),u(null))}))}),[r,e]);const h=ue((e=>{const t=m.current;return t?vi(t,e):-1}),[]);ie((()=>{if(!r)return;const t=r.getGeometry(e);return t.wait((e=>m.current=e),nt),()=>{t.abort({code:Je.Cancelled,message:"Cancelled"}),m.current=null}}),[r,e]);const g=le((()=>({onPointerDown:(t,n,o)=>{r&&r.isEnabledForMode(o)&&(r.clear(),r.getGeometry(e).wait((n=>{const o=vi(n,t);-1!==o&&r.begin(e,o)}),nt))},onPointerMove:(t,n,o)=>{if(!r||!r.isEnabledForMode(o))return;const i=h(t);-1!==i?d("selection-text","text",10):c("selection-text"),-1!==i&&r.update(e,i)},onPointerUp:(e,t,n)=>{r&&r.isEnabledForMode(n)&&r.end()},onHandlerActiveEnd(e){r&&r.isEnabledForMode(e)&&r.clear()}})),[r,e,h]);return ie((()=>{if(i)return i(g)}),[i,g]),l?V("div",{style:{position:"absolute",left:l.origin.x*t,top:l.origin.y*t,width:l.size.width*t,height:l.size.height*t,mixBlendMode:"multiply",isolation:"isolate"},children:a.map(((e,r)=>V("div",{style:{position:"absolute",left:(e.origin.x-l.origin.x)*t,top:(e.origin.y-l.origin.y)*t,width:e.size.width*t,height:e.size.height*t,background:n,pointerEvents:"none"}},r)))}):null}function Oi(){const{provides:e}=ki();return ie((()=>{if(e)return e.onCopyToClipboard((e=>{navigator.clipboard.writeText(e)}))}),[e]),null}function Ri(e,t,n,r,o,i){return i?e.origin.y+o>=n+r:e.origin.y+o+e.size.height+n+r<=t.scrollTop+t.clientHeight}function Li(e,t,n,r=8,o=40){if(!e.length)return null;const i=n.getMetrics(),a=n.getViewportGap(),s=1===e.length?{first:e[0],last:e[0]}:{first:e[0],last:e[e.length-1]},l=t.getRectPositionForPage(s.first.page,s.first.rect),u=t.getRectPositionForPage(s.last.page,s.last.rect);if(!l||!u)return null;const d=Ri(u,i,o,r,a,!1),c=Ri(l,i,o,r,a,!0);return d?{left:u.origin.x+u.size.width/2,top:u.origin.y+u.size.height+r}:c?{left:l.origin.x+l.size.width/2,top:l.origin.y-r-o}:null}function ji({open:e,title:t,children:n,onClose:r,className:o,showCloseButton:i=!0,maxWidth:a="32rem"}){const s=se(null);ie((()=>{if(!e)return;const t=e=>{"Escape"===e.key&&r?.()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)}),[e,r]);return ie((()=>(document.body.style.overflow=e?"hidden":"",()=>{document.body.style.overflow=""})),[e]),e?V("div",{ref:s,className:"fixed inset-0 z-50 bg-black/50 md:flex md:items-center md:justify-center",onClick:e=>{e.target===s.current&&r?.()},children:V("div",{className:`relative flex h-full w-full flex-col bg-white md:h-auto md:w-[28rem] md:max-w-[90vw] md:rounded-lg md:border md:border-gray-200 md:shadow-lg ${o}`,onClick:e=>e.stopPropagation(),children:[(t||i)&&V("div",{className:"flex flex-shrink-0 items-center justify-between border-b border-gray-200 px-6 py-4",children:[t&&V("h2",{className:"text-lg font-semibold text-gray-900",children:t}),i&&V(Xn,{onClick:r,className:"p-1 hover:bg-gray-100",children:V(jo,{icon:"x",className:"h-5 w-5"})})]}),V("div",{className:"flex-1 overflow-y-auto px-6 py-4 md:max-h-[80vh] md:flex-none",children:n})]})}):null}var Ni="print",Bi={id:Ni,name:"Print Plugin",version:"1.0.0",provides:["print"],requires:["render"],optional:[],defaultConfig:{enabled:!0}},zi=(e=>(e[e.Degree0=0]="Degree0",e[e.Degree90=1]="Degree90",e[e.Degree180=2]="Degree180",e[e.Degree270=3]="Degree270",e))(zi||{}),Ui=Object.freeze(["­","​","⁠","\ufeff","￾","￿"]);new RegExp(`[${Ui.join("")}]`,"g");var Vi=Object.freeze([{id:0,label:"Normal",css:"normal"},{id:1,label:"Multiply",css:"multiply"},{id:2,label:"Screen",css:"screen"},{id:3,label:"Overlay",css:"overlay"},{id:4,label:"Darken",css:"darken"},{id:5,label:"Lighten",css:"lighten"},{id:6,label:"Color Dodge",css:"color-dodge"},{id:7,label:"Color Burn",css:"color-burn"},{id:8,label:"Hard Light",css:"hard-light"},{id:9,label:"Soft Light",css:"soft-light"},{id:10,label:"Difference",css:"difference"},{id:11,label:"Exclusion",css:"exclusion"},{id:12,label:"Hue",css:"hue"},{id:13,label:"Saturation",css:"saturation"},{id:14,label:"Color",css:"color"},{id:15,label:"Luminosity",css:"luminosity"}]);Vi.reduce(((e,t)=>(e[t.id]=t,e)),{}),Vi.reduce(((e,t)=>(e[t.css]=t.id,e)),{}),Vi.map((e=>({value:e.id,label:e.label})));var Hi=Object.freeze({1:"invisible",2:"hidden",4:"print",8:"noZoom",16:"noRotate",32:"noView",64:"readOnly",128:"locked",256:"toggleNoView"});Object.entries(Hi).reduce(((e,[t,n])=>(e[n]=Number(t),e)),{});var Wi=class extends vt{constructor(e,t,n){super(e,t),this.engine=n}async initialize(e){}buildCapability(){return{renderPage:this.renderPage.bind(this),renderPageRect:this.renderPageRect.bind(this)}}renderPage({pageIndex:e,scaleFactor:t=1,dpr:n=1,rotation:r=zi.Degree0,options:o={withAnnotations:!1},imageType:i="image/webp"}){const a=this.coreState.core;if(!a.document)throw new Error("document does not open");const s=a.document.pages.find((t=>t.index===e));if(!s)throw new Error("page does not exist");return this.engine.renderPage(a.document,s,t,r,n,o,i)}renderPageRect({pageIndex:e,scaleFactor:t=1,dpr:n=1,rect:r,rotation:o=zi.Degree0,options:i={withAnnotations:!1},imageType:a="image/webp"}){const s=this.coreState.core;if(!s.document)throw new Error("document does not open");const l=s.document.pages.find((t=>t.index===e));if(!l)throw new Error("page does not exist");return this.engine.renderPageRect(s.document,l,t,o,n,r,i,a)}};Wi.id="render";var $i=Wi,qi=(e=>(e.Normal="normal",e.High="high",e))(qi||{}),Xi=(e=>(e.Current="current",e.All="all",e.Custom="custom",e))(Xi||{}),Yi=class extends vt{constructor(e,t,n){super(e,t),this.config=n,this.renderCapability=this.registry.getPlugin($i.id)?.provides()}async initialize(e){}buildCapability(){return{preparePrint:this.preparePrint.bind(this),parsePageRange:this.parsePageRange.bind(this)}}async preparePrint(e,t,n){const r=this.coreState.core;if(!r.document)throw new Error("No document loaded");const o=this.getPagesToPrint(e,r.document.pages.length),i=o.length,a=this.config?.batchSize||3;t?.({current:0,total:i,status:"preparing",message:`Preparing to render ${i} page${1!==i?"s":""}...`});const s=this.getScaleFactor(e.quality);for(let r=0;r<o.length;r+=a){const l=Math.min(r+a,o.length),u=o.slice(r,l).map((async(o,a)=>{const l=r+a;t?.({current:l,total:i,status:"rendering",message:`Rendering page ${o+1}...`});const u=await this.renderPage(o,s,1,e.includeAnnotations);n?.({pageIndex:o,blob:u})}));await Promise.all(u)}t?.({current:i,total:i,status:"complete",message:"All pages rendered successfully"})}async renderPage(e,t,n,r){return new Promise(((o,i)=>{this.renderCapability.renderPage({pageIndex:e,scaleFactor:t,dpr:n,rotation:zi.Degree0,options:{withAnnotations:r}}).wait((e=>o(e)),(t=>i(new Error(`Failed to render page ${e+1}: ${t.reason.message||"Unknown error"}`))))}))}getScaleFactor(e){return"high"===e?1.5:1}getPagesToPrint(e,t){const{pageRange:n}=e;switch(n.type){case"current":return void 0!==n.currentPage?[n.currentPage]:[0];case"all":return Array.from({length:t},((e,t)=>t));case"custom":return n.pages?n.pages.filter((e=>e>=0&&e<t)).sort(((e,t)=>e-t)):[0];default:return[0]}}parsePageRange(e){try{const t=this.coreState.core.document?.pages.length||0,n=[],r=e.split(",").map((e=>e.trim()));for(const e of r)if(e.includes("-")){const[r,o]=e.split("-").map((e=>parseInt(e.trim())));if(isNaN(r)||isNaN(o))return{pages:[],isValid:!1,error:`Invalid range: ${e}`};if(r>o)return{pages:[],isValid:!1,error:`Invalid range: ${e} (start > end)`};for(let e=r;e<=o;e++)e>=1&&e<=t&&n.push(e-1)}else{const r=parseInt(e);if(isNaN(r))return{pages:[],isValid:!1,error:`Invalid page number: ${e}`};r>=1&&r<=t&&n.push(r-1)}const o=[...new Set(n)].sort(((e,t)=>e-t));return{pages:o,isValid:!0}}catch(e){return{pages:[],isValid:!1,error:`Parsing error: ${e instanceof Error?e.message:"Unknown error"}`}}}};Yi.id="print";var Zi={manifest:Bi,create:(e,t,n)=>new Yi(Ni,e,n),reducer:()=>{},initialState:{}},Ki=B(null),Ji=({pageResult:e})=>{const[t,n]=oe("");ie((()=>{const t=URL.createObjectURL(e.blob);return n(t),()=>{URL.revokeObjectURL(t)}}),[e.blob]);return V("div",{style:{pageBreakAfter:"always",width:"210mm",minHeight:"297mm",margin:"0 auto",background:"white",position:"relative"},children:V("img",{src:t,onLoad:()=>{t&&URL.revokeObjectURL(t)},alt:`Page ${e.pageIndex+1}`,style:{width:"100%",height:"auto",display:"block",objectFit:"contain"}})})},Qi=({pages:e})=>V("div",{style:{fontFamily:"Arial, sans-serif",fontSize:"12px",lineHeight:"1.4",color:"#000",backgroundColor:"#fff"},children:[V("style",{children:"\n        @media print {\n          body { margin: 0; padding: 0; }\n        }\n      "}),e.map((e=>V("div",{children:V(Ji,{pageResult:e})},e.pageIndex)))]});function ea({children:e}){const{provides:t}=Ot(Yi.id),n=se(null),[r,o]=oe(null),[i,a]=oe(!1),[s,l]=oe(!1),[u,d]=oe([]);ie((()=>{const e=n.current,t=e?.contentWindow?.document?.body;if(t&&u.length>0)return N(V(Qi,{pages:u}),t),a(!0),()=>{t&&N(null,t)}}),[u]);const c={parsePageRange:t?.parsePageRange||(()=>({pages:[],isValid:!1})),executePrint:async e=>{if(!t)throw new Error("Print capability not available");if(!n.current?.contentWindow)throw new Error("Print iframe not ready");l(!0),o(null),d([]),a(!1);try{const i=[];await t.preparePrint(e,(e=>{o(e)}),(e=>{i.push(e),d([...i])})),await new Promise((e=>setTimeout(e,500)));const a=n.current.contentWindow;a.focus(),a.print(),o({current:r?.total||0,total:r?.total||0,status:"complete",message:"Print dialog opened"})}catch(e){throw o({current:0,total:0,status:"error",message:`Print failed: ${e instanceof Error?e.message:"Unknown error"}`}),e}finally{l(!1)}},progress:r,isReady:i,isPrinting:s};return V(Ki.Provider,{value:c,children:[e,V("iframe",{ref:n,style:{display:"none",width:"210mm",height:"297mm"},title:"Print Preview"})]})}var ta=()=>{const{executePrint:e,progress:t,isReady:n,isPrinting:r,parsePageRange:o}=function(){const e=de(Ki);if(!e)throw new Error("usePrintContext must be used within a PrintProvider");return e}();return{executePrint:e,progress:t,isReady:n,isPrinting:r,parsePageRange:o}},na="bookmark",ra={id:na,name:"Bookmark Plugin",version:"1.0.0",provides:["bookmark"],requires:[],optional:[],defaultConfig:{enabled:!0}},oa=class extends vt{constructor(e,t,n){super(e,t),this.engine=n}async initialize(e){}buildCapability(){return{getBookmarks:this.getBookmarks.bind(this)}}getBookmarks(){const e=this.coreState.core.document;if(!e)throw new Error("Document not open");return this.engine.getBookmarks(e)}};oa.id="bookmark";var ia={manifest:ra,create:(e,t)=>new oa(na,e,t),reducer:()=>{},initialState:{}},aa="annotation",sa={id:aa,name:"Annotation Plugin",version:"1.0.0",provides:["annotation"],requires:["interaction-manager","selection"],optional:["history"],defaultConfig:{enabled:!0,autoCommit:!0}},la="ANNOTATION/SET_ANNOTATIONS",ua="ANNOTATION/REINDEX_PAGE",da="ANNOTATION/SELECT_ANNOTATION",ca="ANNOTATION/DESELECT_ANNOTATION",ma="ANNOTATION/UPDATE_TOOL_DEFAULTS",ha="ANNOTATION/ADD_COLOR_PRESET",ga="ANNOTATION/CREATE_ANNOTATION",Fa="ANNOTATION/PATCH_ANNOTATION",pa="ANNOTATION/DELETE_ANNOTATION",_a="ANNOTATION/COMMIT",ba="ANNOTATION/STORE_PDF_ID",fa="ANNOTATION/PURGE_ANNOTATION",Pa="ANNOTATION/SET_ACTIVE_VARIANT",Da=e=>({type:ua,payload:{pageIndex:e}}),va=()=>({type:ca}),ya=(e,t,n)=>({type:ga,payload:{pageIndex:e,localId:t,annotation:n}}),wa=(e,t,n)=>({type:Fa,payload:{pageIndex:e,localId:t,patch:n}}),xa=(e,t)=>({type:pa,payload:{pageIndex:e,localId:t}}),Aa=(e,t)=>({type:ba,payload:{uid:e,pdfId:t}}),Sa=e=>({type:fa,payload:{uid:e}}),Ea=(e,t)=>`p${e}#${t}`,Ca=e=>{const[t,n]=e.slice(1).split("#");return{pageIndex:Number(t),localId:Number(n)}},Ma=e=>{if(!e.selectedUid)return null;const{pageIndex:t,localId:n}=Ca(e.selectedUid);return{pageIndex:t,localId:n,annotation:e.byUid[e.selectedUid].object}},Ta=(e,t)=>t?`${e}#${t}`:`${e}`,Ga=class extends vt{constructor(e,t,n,r){super(e,t),this.ANNOTATION_HISTORY_TOPIC="annotations",this.state$=Mt(),this.modeByVariant=new Map,this.variantByMode=new Map,this.activeVariantChange$=Mt(),this.activeTool$=Mt({variantKey:null,defaults:null}),this.engine=n,this.config=r;const o=t.getPlugin("selection");this.selection=o?.provides()??null;const i=t.getPlugin("history");this.history=i?.provides()??null;const a=t.getPlugin("interaction-manager");this.interactionManager=a?.provides()??null,this.coreStore.onAction(dt,((e,t)=>{const n=t.core.document;n&&this.getAllAnnotations(n)}))}async initialize(){for(const[e,t]of Object.entries(this.state.toolDefaults))this.registerTool(e,t);this.history?.onHistoryChange((e=>{e===this.ANNOTATION_HISTORY_TOPIC&&!1!==this.config.autoCommit&&this.commit()})),this.interactionManager?.onModeChange((e=>{const t=this.variantByMode.get(e.activeMode)??null;console.log(t,this.state.activeVariant),t!==this.state.activeVariant&&(this.dispatch((e=>({type:Pa,payload:e}))(t)),this.activeVariantChange$.emit(t))})),this.selection?.onEndSelection((()=>{if(!this.state.activeVariant)return;if(this.state.activeVariant!==Ta(He.HIGHLIGHT)&&this.state.activeVariant!==Ta(He.UNDERLINE)&&this.state.activeVariant!==Ta(He.STRIKEOUT)&&this.state.activeVariant!==Ta(He.SQUIGGLY))return;const e=this.selection?.getFormattedSelection();if(e){for(const t of e){const e=t.rect,n=t.segmentRects,r=this.state.activeVariant,o=this.state.toolDefaults[r].subtype,i=this.state.toolDefaults[r].color,a=this.state.toolDefaults[r].opacity,s=this.state.toolDefaults[r].blendMode??je.Normal;this.createAnnotation(t.pageIndex,{type:o,rect:e,segmentRects:n,color:i,opacity:a,blendMode:s,pageIndex:t.pageIndex,id:Date.now()+Math.random()})}this.selection?.clear()}}))}registerTool(e,t){const n=t.interaction.mode,r={id:n,scope:"page",exclusive:t.interaction.exclusive,cursor:t.interaction.cursor};this.interactionManager?.registerMode(r),t.textSelection&&this.selection?.enableForMode(n),this.modeByVariant.set(e,n),this.variantByMode.set(n,e)}buildCapability(){return{getPageAnnotations:e=>this.getPageAnnotations(e),getSelectedAnnotation:()=>(e=>e.selectedUid?e.byUid[e.selectedUid]:null)(this.state),selectAnnotation:(e,t)=>{this.selectAnnotation(e,t)},deselectAnnotation:()=>{this.dispatch(va())},getActiveVariant:()=>this.state.activeVariant,setActiveVariant:e=>{if(e!==this.state.activeVariant)if(e){const t=this.modeByVariant.get(e);if(!t)throw new Error(`Mode missing for variant ${e}`);this.interactionManager?.activate(t)}else this.interactionManager?.activate("default")},getToolDefaults:e=>{const t=this.state.toolDefaults[e];if(!t)throw new Error(`No defaults found for variant: ${e}`);return t},getToolDefaultsBySubtypeAndIntent:(e,t)=>{const n=Ta(e,t),r=this.state.toolDefaults[n];if(!r)throw new Error(`No defaults found for variant: ${n}`);return r},getToolDefaultsBySubtype:e=>{const t=this.state.toolDefaults[e];if(!t)throw new Error(`No defaults found for subtype: ${e}`);return t},setToolDefaults:(e,t)=>{this.dispatch(((e,t)=>({type:ma,payload:{variantKey:e,patch:t}}))(e,t))},getColorPresets:()=>[...this.state.colorPresets],addColorPreset:e=>this.dispatch((e=>({type:ha,payload:e}))(e)),createAnnotation:(e,t)=>this.createAnnotation(e,t),updateAnnotation:(e,t,n)=>this.updateAnnotation(e,t,n),deleteAnnotation:(e,t)=>this.deleteAnnotation(e,t),renderAnnotation:e=>this.renderAnnotation(e),onStateChange:this.state$.on,onActiveVariantChange:this.activeVariantChange$.on,onActiveToolChange:this.activeTool$.on,commit:()=>this.commit()}}createActiveTool(e,t){return null===e?{variantKey:null,defaults:null}:{variantKey:e,defaults:t[e]}}emitActiveTool(e){const t=this.createActiveTool(e.activeVariant,e.toolDefaults);this.activeTool$.emit(t)}onStoreUpdated(e,t){this.state$.emit(t),e.activeVariant===t.activeVariant&&e.toolDefaults[e.activeVariant??He.HIGHLIGHT]===t.toolDefaults[t.activeVariant??He.HIGHLIGHT]||this.emitActiveTool(t)}getAllAnnotations(e){this.engine.getAllAnnotations(e).wait((e=>this.dispatch((e=>({type:la,payload:e}))(e))),nt)}getPageAnnotations(e){const{pageIndex:t}=e,n=this.coreState.core.document;if(!n)return Qe.reject({code:Je.NotFound,message:"Document not found"});const r=n.pages.find((e=>e.index===t));return r?this.engine.getPageAnnotations(n,r):Qe.reject({code:Je.NotFound,message:"Page not found"})}renderAnnotation({pageIndex:e,annotation:t,scaleFactor:n=1,rotation:r=be.Degree0,dpr:o=1,mode:i=We.Normal,imageType:a="image/webp"}){const s=this.coreState.core;if(!s.document)throw new Error("document does not open");const l=s.document.pages.find((t=>t.index===e));if(!l)throw new Error("page does not exist");return this.engine.renderAnnotation(s.document,l,t,n,r,o,i,a)}selectAnnotation(e,t){this.dispatch(((e,t)=>({type:da,payload:{pageIndex:e,localId:t}}))(e,t))}createAnnotation(e,t){const n=t.id,r=()=>this.dispatch(ya(e,n,t));if(!this.history)return r(),void(this.config.autoCommit&&this.commit());const o={execute:r,undo:()=>{this.dispatch(va()),this.dispatch(xa(e,n))}};this.history.register(o,this.ANNOTATION_HISTORY_TOPIC)}updateAnnotation(e,t,n){if(!this.history)return this.dispatch(wa(e,t,n)),void(!1!==this.config.autoCommit&&this.commit());const r=this.state.byUid[Ea(e,t)].object,o=Object.fromEntries(Object.keys(n).map((e=>[e,r[e]]))),i={execute:()=>this.dispatch(wa(e,t,n)),undo:()=>this.dispatch(wa(e,t,o))};this.history.register(i,this.ANNOTATION_HISTORY_TOPIC)}deleteAnnotation(e,t){if(!this.history)return this.dispatch(va()),this.dispatch(xa(e,t)),void(!1!==this.config.autoCommit&&this.commit());const n=this.state.byUid[Ea(e,t)].object,r={execute:()=>{this.dispatch(va()),this.dispatch(xa(e,t))},undo:()=>this.dispatch(ya(e,t,n))};this.history.register(r,this.ANNOTATION_HISTORY_TOPIC)}commit(){const e=new Ie;if(!this.state.hasPendingChanges)return Qe.resolve(!0);const t=this.coreState.core.document;if(!t)return Qe.reject({code:Je.NotFound,message:"Document not found"});const n=[],r=[],o=new Map,i=new Set;for(const[e,a]of Object.entries(this.state.byUid)){if("synced"===a.commitState)continue;const{pageIndex:s}=Ca(e),l=t.pages.find((e=>e.index===s));if(l)switch(i.add(s),a.commitState){case"new":const i=this.engine.createPageAnnotation(t,l,a.object);i.wait((t=>this.dispatch(Aa(e,t))),nt),n.push(i);break;case"dirty":r.push(this.engine.updatePageAnnotation(t,l,{...a.object,id:a.pdfId}));break;case"deleted":o.has(s)||o.set(s,[]),o.get(s).push({ta:a,uid:e})}}const a=[];for(const[e,n]of o.entries()){const r=t.pages.find((t=>t.index===e));n.sort(((e,t)=>(t.ta.pdfId??-1)-(e.ta.pdfId??-1)));for(const{ta:e,uid:o}of n)if(void 0!==e.pdfId){const n=new Ie;this.engine.removePageAnnotation(t,r,{...e.object,id:e.pdfId}).wait((()=>{this.dispatch(Sa(o)),n.resolve(!0)}),n.fail),a.push(n)}else this.dispatch(Sa(o))}const s=[...n,...r,...a];return Ie.allSettled(s).wait((()=>{for(const e of i)this.dispatch(Da(e));this.dispatch({type:_a}),e.resolve(!0)}),e.fail),e}};Ga.id="annotation";var ka=["#E44234","#FF8D00","#FFCD45","#5CC96E","#25D2D1","#597CE2","#C544CE","#7D2E25"],Ia={manifest:sa,create:(e,t,n)=>new Ga(aa,e,t,n),reducer:(e,t)=>{switch(t.type){case la:{const n={...e.pages},r={...e.byUid};for(const[o,i]of Object.entries(t.payload)){const t=Number(o),a=e.pages[t]||[];for(const e of a)delete r[e];const s=i.map(((e,n)=>{const o=Date.now()+Math.random()+n,i=Ea(t,o);return r[i]={localId:o,pdfId:e.id,commitState:"synced",object:e},i}));n[t]=s}return{...e,pages:n,byUid:r}}case Pa:return{...e,activeVariant:t.payload};case da:return{...e,selectedUid:Ea(t.payload.pageIndex,t.payload.localId)};case ca:return{...e,selectedUid:null};case ha:return e.colorPresets.includes(t.payload)?e:{...e,colorPresets:[...e.colorPresets,t.payload]};case ma:{const{variantKey:n,patch:r}=t.payload,o=e.toolDefaults[n];return o?{...e,toolDefaults:{...e.toolDefaults,[n]:{...o,...r}}}:e}case ga:{const{pageIndex:n,localId:r,annotation:o}=t.payload,i=Ea(n,r);return{...e,pages:{...e.pages,[n]:[...e.pages[n]??[],i]},byUid:{...e.byUid,[i]:{localId:r,pdfId:void 0,commitState:"new",object:o}},hasPendingChanges:!0}}case pa:{const{pageIndex:n,localId:r}=t.payload,o=Ea(n,r);return e.byUid[o]?{...e,pages:{...e.pages,[n]:(e.pages[n]??[]).filter((e=>e!==o))},byUid:{...e.byUid,[o]:{...e.byUid[o],commitState:"deleted"}},hasPendingChanges:!0}:e}case Fa:{const n=Ea(t.payload.pageIndex,t.payload.localId);return((e,t,n)=>{const r=e.byUid[t];return r?{...e,byUid:{...e.byUid,[t]:{...r,commitState:"synced"===r.commitState?"dirty":r.commitState,object:{...r.object,...n}}},hasPendingChanges:!0}:e})(e,n,t.payload.patch)}case _a:{const t={};for(const[n,r]of Object.entries(e.byUid))t[n]={...r,commitState:"dirty"===r.commitState||"new"===r.commitState?"synced":r.commitState};return{...e,byUid:t,hasPendingChanges:!1}}case ua:{const{pageIndex:n}=t.payload,r={...e.byUid},o=(e.pages[n]||[]).map((t=>e.byUid[t])).filter((e=>e&&"deleted"!==e.commitState));return o.sort(((e,t)=>(e.pdfId??1/0)-(t.pdfId??1/0))),o.forEach(((e,t)=>{const o=Ea(n,e.localId);r[o]={...r[o],pdfId:t}})),{...e,byUid:r}}case ba:{const{uid:n,pdfId:r}=t.payload,o=e.byUid[n];return o?{...e,byUid:{...e.byUid,[n]:{...o,pdfId:r,commitState:"synced"}}}:e}case fa:{const{uid:n}=t.payload,{[n]:r,...o}=e.byUid;return{...e,byUid:o}}default:return e}},initialState:(e,t)=>{return n=t,{pages:{},byUid:{},selectedUid:null,activeVariant:null,toolDefaults:{[Ta(He.HIGHLIGHT)]:{name:"Highlight",subtype:He.HIGHLIGHT,interaction:{mode:"highlight",exclusive:!1},textSelection:!0,color:"#FFCD45",opacity:1,blendMode:je.Multiply},[Ta(He.UNDERLINE)]:{name:"Underline",subtype:He.UNDERLINE,interaction:{mode:"underline",exclusive:!1},textSelection:!0,color:"#E44234",opacity:1,blendMode:je.Normal},[Ta(He.STRIKEOUT)]:{name:"Strikeout",subtype:He.STRIKEOUT,interaction:{mode:"strikeout",exclusive:!1},textSelection:!0,color:"#E44234",opacity:1,blendMode:je.Normal},[Ta(He.SQUIGGLY)]:{name:"Squiggly",subtype:He.SQUIGGLY,interaction:{mode:"squiggly",exclusive:!1},textSelection:!0,color:"#E44234",opacity:1,blendMode:je.Normal},[Ta(He.INK)]:{name:"Ink",subtype:He.INK,interaction:{mode:"ink",exclusive:!0,cursor:"crosshair"},color:"#E44234",opacity:1,strokeWidth:11,blendMode:je.Normal},[Ta(He.INK,"InkHighlight")]:{name:"Ink Highlight",subtype:He.INK,interaction:{mode:"inkHighlight",exclusive:!0,cursor:"crosshair"},color:"#E44234",opacity:1,strokeWidth:11,blendMode:je.Multiply},...n.toolDefaults},colorPresets:n.colorPresets??ka,hasPendingChanges:!1};var n}},Oa=()=>Ot(Ga.id);function Ra({scale:e,pageIndex:t,rotation:n,trackedAnnotation:r,children:o,style:i,outlineOffset:a=1,isSelected:s=!1,isDraggable:l=!0,isResizable:u=!0,computeResizePatch:d,...c}){const{provides:m}=Oa(),h=se(null),[g,F]=oe("idle"),[p,_]=oe(null),[b,f]=oe(null),[P,v]=oe(null),[y,w]=oe(r.object.rect),[x,A]=oe(null);ie((()=>{w(r.object.rect),A(null)}),[r]);const S=x?{...r.object,...x}:r.object;return V("div",{ref:h,onPointerDown:e=>{if(!s)return;e.stopPropagation(),e.preventDefault();const t=e.target;if(u&&t.classList.contains("resize-handle"))F("resizing"),_(t.dataset.direction);else{if(!l)return;F("dragging")}f({x:e.clientX,y:e.clientY}),v(y),h.current?.setPointerCapture(e.pointerId)},onPointerMove:t=>{if("idle"===g||!b||!P)return;const o={x:t.clientX-b.x,y:t.clientY-b.y},{x:i,y:a}=function(e,t,n){let r=e.x,o=e.y;switch(t){case 0:r=e.x/n,o=e.y/n;break;case 1:r=e.y/n,o=-e.x/n;break;case 2:r=-e.x/n,o=-e.y/n;break;case 3:r=-e.y/n,o=e.x/n}return{x:r,y:o}}(o,n,e);let s=P.origin.x,l=P.origin.y,u=P.size.width,c=P.size.height;if("dragging"===g)s+=i,l+=a;else if("resizing"===g&&p&&(p.includes("right")?u+=i:p.includes("left")&&(s+=i,u-=i),p.includes("bottom")?c+=a:p.includes("top")&&(l+=a,c-=a),u<1||c<1))return;const m={origin:{x:s,y:l},size:{width:u,height:c}};let h={rect:m};if(d){const e="resizing"===g?p:"bottom-right";e&&(h=d(r.object,m,e))}w(h.rect||m),A(h)},onPointerUp:e=>{if("idle"===g)return;const n=p||"bottom-right";if(F("idle"),_(null),h.current?.releasePointerCapture(e.pointerId),m&&r){let e={rect:y};d&&n&&(e=d(r.object,y,n)),m.updateAnnotation(t,r.localId,e)}f(null),v(null),A(null)},style:{position:"absolute",outline:s?"1px solid #007ACC":"none",outlineOffset:s?`${a}px`:"0px",left:y.origin.x*e+"px",top:y.origin.y*e+"px",width:y.size.width*e+"px",height:y.size.height*e+"px",pointerEvents:s?"auto":"none",cursor:s&&l?"move":"default",...i},...c,children:["function"==typeof o?o(S):o,s&&u&&V(D,{children:[V("div",{className:"resize-handle","data-direction":"top-left",style:{position:"absolute",top:-7-a,left:-7-a,width:13,height:13,background:"blue",borderRadius:"50%",cursor:n%2?"nesw-resize":"nwse-resize"}}),V("div",{className:"resize-handle","data-direction":"top-right",style:{position:"absolute",top:-7-a,right:-7-a,width:13,height:13,background:"blue",borderRadius:"50%",cursor:n%2?"nwse-resize":"nesw-resize"}}),V("div",{className:"resize-handle","data-direction":"bottom-left",style:{position:"absolute",bottom:-7-a,left:-7-a,width:13,height:13,background:"blue",borderRadius:"50%",cursor:n%2?"nwse-resize":"nesw-resize"}}),V("div",{className:"resize-handle","data-direction":"bottom-right",style:{position:"absolute",bottom:-7-a,right:-7-a,width:13,height:13,background:"blue",borderRadius:"50%",cursor:n%2?"nesw-resize":"nwse-resize"}})]})]})}function La({color:e="#FFFF00",opacity:t=.5,rects:n,rect:r,scale:o,onClick:i,style:a,...s}){return V(D,{children:n.map(((n,l)=>V("div",{onMouseDown:i,style:{position:"absolute",left:(r?n.origin.x-r.origin.x:n.origin.x)*o,top:(r?n.origin.y-r.origin.y:n.origin.y)*o,width:n.size.width*o,height:n.size.height*o,background:e,opacity:t,pointerEvents:i?"auto":"none",cursor:i?"pointer":"default",zIndex:i?1:null,...a},...s},l)))})}function ja({color:e="#FFFF00",opacity:t=.5,rects:n,rect:r,scale:o,onClick:i,style:a,...s}){const l=2*o;return V(D,{children:n.map(((n,u)=>V("div",{onMouseDown:i,style:{position:"absolute",left:(r?n.origin.x-r.origin.x:n.origin.x)*o,top:(r?n.origin.y-r.origin.y:n.origin.y)*o,width:n.size.width*o,height:n.size.height*o,background:"transparent",pointerEvents:i?"auto":"none",cursor:i?"pointer":"default",zIndex:i?1:0,...a},...s,children:V("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",height:l,background:e,opacity:t,pointerEvents:"none"}})},u)))})}function Na({color:e="#FFFF00",opacity:t=.5,rects:n,rect:r,scale:o,onClick:i,style:a,...s}){const l=2*o;return V(D,{children:n.map(((n,u)=>V("div",{onMouseDown:i,style:{position:"absolute",left:(r?n.origin.x-r.origin.x:n.origin.x)*o,top:(r?n.origin.y-r.origin.y:n.origin.y)*o,width:n.size.width*o,height:n.size.height*o,background:"transparent",pointerEvents:i?"auto":"none",cursor:i?"pointer":"default",zIndex:i?1:0,...a},...s,children:V("div",{style:{position:"absolute",left:0,top:"50%",width:"100%",height:l,background:e,opacity:t,transform:"translateY(-50%)",pointerEvents:"none"}})},u)))})}function Ba({color:e="#FFFF00",opacity:t=.5,rects:n,rect:r,scale:o,onClick:i,style:a,...s}){const l=2*o,u=6*o,d=`url("data:image/svg+xml;utf8,${encodeURIComponent(`<svg xmlns="http://www.w3.org/2000/svg" width="${u}" height="${2*l}" viewBox="0 0 ${u} ${2*l}">\n      <path d="M0 ${l} Q ${u/4} 0 ${u/2} ${l} T ${u} ${l}"\n            fill="none" stroke="${e}" stroke-width="${l}" stroke-linecap="round"/>\n    </svg>`)}")`;return V(D,{children:n.map(((e,n)=>V("div",{onMouseDown:i,style:{position:"absolute",left:(r?e.origin.x-r.origin.x:e.origin.x)*o,top:(r?e.origin.y-r.origin.y:e.origin.y)*o,width:e.size.width*o,height:e.size.height*o,background:"transparent",pointerEvents:i?"auto":"none",cursor:i?"pointer":"default",zIndex:i?1:0,...a},...s,children:V("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",height:2*l,backgroundImage:d,backgroundRepeat:"repeat-x",backgroundSize:`${u}px ${2*l}px`,opacity:t,pointerEvents:"none"}})},n)))})}function za({color:e="#000000",opacity:t=1,strokeWidth:n,inkList:r,rect:o,scale:i,onClick:a}){const s=le((()=>r.map((({points:e})=>{let t="";return e.forEach((({x:e,y:n},r)=>{const i=e-o.origin.x,a=n-o.origin.y;t+=(0===r?"M":"L")+i+" "+a+" "})),t.trim()}))),[r,o]),l=o.size.width*i,u=o.size.height*i;return V("svg",{style:{position:"absolute",width:l,height:u,pointerEvents:"none",zIndex:2},width:l,height:u,viewBox:`0 0 ${o.size.width} ${o.size.height}`,children:s.map(((r,o)=>V("path",{d:r,fill:"none",stroke:e,strokeWidth:n,strokeLinecap:"round",strokeLinejoin:"round",opacity:t,pointerEvents:"visibleStroke",onMouseDown:a,style:{cursor:"pointer"}},o)))})}function Ua(e,t,n,r=!1){if(e.type!==He.INK)throw new Error("resizeInkAnnotation: original is not an ink annotation");const o=e.rect;let i=t.size.width/o.size.width,a=t.size.height/o.size.height;if((t.size.width<10||t.size.height<10)&&(i=Math.max(i,10/o.size.width),a=Math.max(a,10/o.size.height),t={origin:t.origin,size:{width:o.size.width*i,height:o.size.height*a}}),r){const e=Math.min(i,a);i=e,a=e,t.size={width:o.size.width*e,height:o.size.height*e}}const s=e.inkList.map((e=>({points:e.points.map((e=>({x:t.origin.x+(e.x-o.origin.x)*i,y:t.origin.y+(e.y-o.origin.y)*a})))}))),l=(i+a)/2,u=e.strokeWidth*l;return{rect:t,inkList:s,strokeWidth:u}}function Va(e){const{pageIndex:t,scale:n}=e,{provides:r}=Oa(),{provides:o}=ki(),[i,a]=oe([]),{register:s}=To({pageIndex:t}),[l,u]=oe(null);ie((()=>{r&&r.onStateChange((e=>{a(((e,t)=>(e.pages[t]??[]).map((t=>e.byUid[t])))(e,t)),u(((e,t)=>e.selectedUid&&(e.pages[t]??[]).includes(e.selectedUid)?e.byUid[e.selectedUid]:null)(e,t))}))}),[r]);const d=le((()=>({onPointerDown:(e,t)=>{t.target===t.currentTarget&&r&&r.deselectAnnotation()}})),[r]),c=ue(((e,n)=>{e.stopPropagation(),r&&o&&(r.selectAnnotation(t,n.localId),o.clear())}),[r,o,t]);return ie((()=>s(d)),[s,d]),V(D,{children:i.map((t=>{const r=l?.localId===t.localId;switch(t.object.type){case He.UNDERLINE:return V(Ra,{trackedAnnotation:t,isSelected:r,isDraggable:!1,isResizable:!1,style:{mixBlendMode:ze(t.object.blendMode??je.Normal)},...e,children:V(ja,{rect:t.object.rect,color:t.object.color,opacity:t.object.opacity,rects:t.object.segmentRects,scale:n,onClick:e=>c(e,t)})},t.localId);case He.STRIKEOUT:return V(Ra,{trackedAnnotation:t,isSelected:r,isDraggable:!1,isResizable:!1,style:{mixBlendMode:ze(t.object.blendMode??je.Normal)},...e,children:V(Na,{rect:t.object.rect,color:t.object.color,opacity:t.object.opacity,rects:t.object.segmentRects,scale:n,onClick:e=>c(e,t)})},t.localId);case He.SQUIGGLY:return V(Ra,{trackedAnnotation:t,isSelected:r,isDraggable:!1,isResizable:!1,style:{mixBlendMode:ze(t.object.blendMode??je.Normal)},...e,children:V(Ba,{color:t.object.color,opacity:t.object.opacity,rects:t.object.segmentRects,rect:t.object.rect,scale:n,onClick:e=>c(e,t)})},t.localId);case He.HIGHLIGHT:return V(Ra,{trackedAnnotation:t,isSelected:r,isDraggable:!1,isResizable:!1,style:{mixBlendMode:ze(t.object.blendMode??je.Multiply)},...e,children:V(La,{color:t.object.color,opacity:t.object.opacity,rects:t.object.segmentRects,scale:n,rect:t.object.rect,onClick:e=>c(e,t)})},t.localId);case He.INK:return V(Ra,{isSelected:r,trackedAnnotation:t,outlineOffset:6,computeResizePatch:Ua,style:{mixBlendMode:ze(t.object.blendMode??je.Normal)},...e,children:e=>V(za,{color:e.color,opacity:e.opacity,strokeWidth:e.strokeWidth,inkList:e.inkList,rect:e.rect,scale:n,onClick:e=>c(e,t)})},t.localId);default:return null}}))})}function Ha({pageIndex:e,scale:t}){const{provides:n}=ki(),{provides:r}=Oa(),[o,i]=oe([]),[a,s]=oe(null),[l,u]=oe({variantKey:null,defaults:null});if(ie((()=>{if(!n)return;return n.onSelectionChange((()=>{i(n.getHighlightRectsForPage(e)),s(n.getBoundingRectForPage(e))}))}),[n,e]),ie((()=>{if(!r)return;return r.onActiveToolChange(u)}),[r]),!a)return null;switch(l.variantKey){case Ta(He.UNDERLINE):return V("div",{style:{mixBlendMode:ze(l.defaults?.blendMode??je.Normal),pointerEvents:"none",position:"absolute",inset:0},children:V(ja,{color:l.defaults?.color,opacity:l.defaults?.opacity,rects:o,scale:t})});case Ta(He.HIGHLIGHT):return V("div",{style:{mixBlendMode:ze(l.defaults?.blendMode??je.Multiply),pointerEvents:"none",position:"absolute",inset:0},children:V(La,{color:l.defaults?.color,opacity:l.defaults?.opacity,rects:o,scale:t})});case Ta(He.STRIKEOUT):return V("div",{style:{mixBlendMode:ze(l.defaults?.blendMode??je.Normal),pointerEvents:"none",position:"absolute",inset:0},children:V(Na,{color:l.defaults?.color,opacity:l.defaults?.opacity,rects:o,scale:t})});case Ta(He.SQUIGGLY):return V("div",{style:{mixBlendMode:ze(l.defaults?.blendMode??je.Normal),pointerEvents:"none",position:"absolute",inset:0},children:V(Ba,{color:l.defaults?.color,opacity:l.defaults?.opacity,rects:o,scale:t})});default:return null}}var Wa=({pageIndex:e,scale:t,pageWidth:n,pageHeight:r})=>{const{provides:o}=Oa(),[i,a]=oe({variantKey:null,defaults:null});if(ie((()=>{if(!o)return;return o.onActiveToolChange(a)}),[o]),!i.defaults)return null;if(i.defaults.subtype!==He.INK)return null;const s=i.defaults?.color??"#000000",l=i.defaults?.opacity??1,u=i.defaults?.strokeWidth??2,{register:d}=To({modeId:"ink",pageIndex:e}),c=(e,t,n)=>Math.max(t,Math.min(n,e)),[m,h]=oe([]),[g,F]=oe(!1),p=se(null),_=n/t,b=r/t,f=le((()=>({onPointerDown:(e,t)=>{const n=c(e.x,0,_),r=c(e.y,0,b);F(!0),p.current?(clearTimeout(p.current),p.current=null,h((e=>[...e,{points:[{x:n,y:r}]}]))):h([{points:[{x:n,y:r}]}]),t.target?.setPointerCapture?.(t.pointerId)},onPointerMove:e=>{if(!g)return;const t=c(e.x,0,_),n=c(e.y,0,b);h((e=>{if(!e.length)return e;const r={points:[...e[e.length-1].points,{x:t,y:n}]};return[...e.slice(0,-1),r]}))},onPointerUp:(t,n)=>{F(!1),n.target?.releasePointerCapture?.(n.pointerId),p.current&&clearTimeout(p.current),p.current=setTimeout((()=>{if(m.length&&o){const t=m.flatMap((e=>e.points));if(!t.length)return;const n=Math.min(...t.map((e=>e.x))),r=Math.min(...t.map((e=>e.y))),i=Math.max(...t.map((e=>e.x))),a=Math.max(...t.map((e=>e.y))),d=15,c=n-d,h=r-d,g=i+d,F=a+d;if(g-c<1||F-h<1)return;const p={origin:{x:c,y:h},size:{width:g-c,height:F-h}},_={type:He.INK,rect:p,inkList:m,color:s,opacity:l,strokeWidth:u,pageIndex:e,id:Date.now()+Math.random()};o.createAnnotation(e,_),o.setActiveVariant(null),o.selectAnnotation(e,_.id)}h([]),p.current=null}),3e3)},onPointerCancel:(e,t)=>{F(!1),t.target?.releasePointerCapture?.(t.pointerId),h([]),p.current&&(clearTimeout(p.current),p.current=null)}})),[_,b,m,o,e,s,l,u,g]);if(ie((()=>{if(d)return d(f)}),[d,f]),ie((()=>()=>{p.current&&clearTimeout(p.current)}),[]),!m.length)return null;const P=m.flatMap((e=>e.points));if(!P.length)return null;const D=Math.min(...P.map((e=>e.x))),v=Math.min(...P.map((e=>e.y))),y=Math.max(...P.map((e=>e.x))),w=Math.max(...P.map((e=>e.y))),x=D-15,A=v-15,S=y+15-x,E=w+15-A,C=m.map((({points:e})=>{let t="";return e.forEach((({x:e,y:n},r)=>{t+=(0===r?"M":"L")+(e-x)+" "+(n-A)+" "})),t.trim()}));return V("svg",{style:{position:"absolute",left:x*t,top:A*t,width:S*t,height:E*t,pointerEvents:"none",zIndex:2},width:S*t,height:E*t,viewBox:`0 0 ${S} ${E}`,children:C.map(((e,t)=>V("path",{d:e,fill:"none",stroke:s,strokeWidth:u,strokeLinecap:"round",strokeLinejoin:"round",opacity:l},t)))})};function $a({pageIndex:e,scale:t,pageWidth:n,pageHeight:r,rotation:o,style:i,...a}){return V("div",{style:{...i},...a,children:[V(Va,{pageIndex:e,scale:t,rotation:o}),V(Ha,{pageIndex:e,scale:t}),V(Wa,{pageIndex:e,scale:t,pageWidth:n,pageHeight:r})]})}const qa=({commandId:e,onClick:t,active:n,color:r,disabled:o=!1,...i},a,s)=>{const{provides:l}=ao(),u=e?l?.getMenuOrAction(e):null,d=ue((n=>{if(n.preventDefault(),n.stopPropagation(),t)return void t();if(!e||!l||!u)return;const r=n.currentTarget;l.executeCommand(e,{source:"click",triggerElement:r,position:"horizontal"===s?.direction?"bottom":"right"})}),[u,e,l,t]);return f(io,{position:"horizontal"===s?.direction?"bottom":"right",content:i.label||u?.label||"",trigger:n?"none":"hover",delay:500},f(Xn,{active:n,onClick:d,disabled:o,className:` ${"flyout"===s?.variant?"w-full rounded-none px-2":""} `},!u?.icon&&i.img&&f("img",{src:i.img,alt:i.label,className:"h-5 w-5"}),u?.icon&&f(jo,{icon:u.icon,className:"h-5 w-5",style:{color:r}})))},Xa=({commandId:e,onClick:t,active:n,...r},o)=>{const{provides:i}=ao(),a=e?i?.getMenuOrAction(e):null,s=ue((n=>{n.preventDefault(),n.stopPropagation(),t?t():e&&i&&a&&i.executeCommand(e,{source:"click"})}),[a,e,i,t]);return f(Xn,{key:r.id,className:`rounded-none px-2 py-1 text-sm hover:bg-transparent ${n?"border-b-2 border-b-blue-500 text-blue-500":"border-b-2 border-b-transparent hover:border-b-gray-500"} hover:ring-transparent`,onClick:s},r.label)},Ya=(e,t,n)=>f("div",{className:"horizontal"===n?.direction?"h-6 w-[1px] bg-gray-300 self-center":"h-[1px] w-6 bg-gray-300 self-center"}),Za=(e,t,n)=>f("div",{style:{display:"flex",flexDirection:"horizontal"===n?.direction?"row":"column",justifyContent:e.justifyContent||"start",gap:`${e.gap||0}px`}},t()),Ka=(e,t)=>{const n={..."top"===e.placement?{borderBottom:"1px solid #cfd4da"}:"bottom"===e.placement?{borderTop:"1px solid #cfd4da"}:"left"===e.placement?{borderRight:"1px solid #cfd4da"}:{borderLeft:"1px solid #cfd4da"},width:"top"===e.placement||"bottom"===e.placement?"100%":"auto",height:"left"===e.placement||"right"===e.placement?"100%":"auto",zIndex:10,justifyContent:"space-between",display:"flex",flexDirection:"top"===e.placement||"bottom"===e.placement?"row":"column",..."top"===e.placement||"bottom"===e.placement?{paddingTop:"8px",paddingBottom:"8px",paddingLeft:"16px",paddingRight:"16px"}:{paddingLeft:"8px",paddingRight:"8px",paddingTop:"16px",paddingBottom:"16px"},...e.style};return void 0===e.visible||e.visible?f("div",{style:n,className:"header"},t({...e.visibleChild&&{filter:t=>t===e.visibleChild}})):null},Ja=(e,t)=>{const{provides:n}=ao(),r=e.tabsCommandId?n?.getMenuOrAction(e.tabsCommandId):null,o=r&&"menu"===r.type?n?.getItemsByIds(r.children):null;return f(D,null,r&&o&&f("div",{role:"tablist",className:"mx-4 my-4 flex flex-shrink-0 overflow-hidden bg-white"},o.filter((e=>"action"===e.type)).map(((e,t,r)=>{const o=!!e.active,i=0===t,a=t===r.length-1;return f(io,{key:e.id,content:e.label,trigger:"hover",position:"bottom"},f("button",{role:"tab","aria-selected":o,tabIndex:o?0:-1,onClick:t=>n?.executeCommand(e.id,{source:"click",triggerElement:t.currentTarget,position:"bottom"}),className:`relative flex h-7 flex-1 cursor-pointer items-center justify-center border outline-none transition-colors ${i?"rounded-l-md":""} ${a?"rounded-r-md":""} ${a?"":"border-r-0"} ${o?"border-blue-600 bg-blue-600 text-white":"border-gray-300 text-gray-600 hover:bg-gray-50"} `},e.icon&&f(jo,{icon:e.icon,className:"pointer-events-none block h-5 w-5"})))}))),t({...e.visibleChild&&{filter:t=>t===e.visibleChild}}))},Qa=(e,t)=>{const{elementRef:n,isFullscreen:r}=(e=>{const[t,n]=oe(!1),r=se(0),o=se(0),i=se(null),a=se(!1);return ie((()=>{e||(n(!1),a.current=!1)}),[e]),ie((()=>{if(!e)return;const s=i.current;if(!s)return;const l=e=>{a.current=!0,r.current="touches"in e?e.touches[0].clientY:e.clientY,o.current=r.current},u=e=>{if(!a.current)return;o.current="touches"in e?e.touches[0].clientY:e.clientY;const i=o.current-r.current;i<-2&&!t?(n(!0),a.current=!1):i>2&&t&&(n(!1),a.current=!1)},d=()=>{a.current=!1};return s.addEventListener("touchstart",l),s.addEventListener("touchmove",u),s.addEventListener("touchend",d),s.addEventListener("touchcancel",d),s.addEventListener("mousedown",l),s.addEventListener("mousemove",u),s.addEventListener("mouseup",d),s.addEventListener("mouseleave",d),()=>{s.removeEventListener("touchstart",l),s.removeEventListener("touchmove",u),s.removeEventListener("touchend",d),s.removeEventListener("touchcancel",d),s.removeEventListener("mousedown",l),s.removeEventListener("mousemove",u),s.removeEventListener("mouseup",d),s.removeEventListener("mouseleave",d)}}),[e,t]),{elementRef:i,isFullscreen:t}})(e.open),{provides:o}=ao();if(!e.open)return null;return f("div",{className:`flex w-full flex-none shrink-0 flex-col border-t bg-white md:w-[275px] md:min-w-[275px] md:border-t-0 ${"left"===e.location?"md:border-r":"md:border-l"} absolute bottom-0 left-0 right-0 z-10 touch-pan-y border-[#cfd4da] transition-all duration-300 ease-in-out md:static md:h-full ${r?"h-full":"h-1/2"}`},f("div",{className:"flex h-6 w-full cursor-grab items-center justify-center active:cursor-grabbing md:hidden",ref:n},f("div",{className:"h-1 w-12 rounded-full bg-gray-300"})),f("div",{className:"flex flex-row justify-end md:hidden"},f(jo,{icon:"x",className:"mr-5 h-5 w-5 cursor-pointer",onClick:()=>{o?.togglePanel({id:e.id,visibleChild:e.visibleChild||"leftPanelMain",open:!e.open})}})),f("div",{className:"flex min-h-0 flex-1 flex-col"},t({...e.visibleChild&&{filter:t=>t===e.visibleChild}})))};function es({hit:e,onClick:t,active:n}){const{before:r,match:o,after:i,truncatedLeft:a,truncatedRight:s}=e.context,l=se(null);return ie((()=>{n&&l.current&&l.current.scrollIntoView({behavior:"smooth",block:"nearest"})}),[n]),f("button",{ref:l,onClick:()=>t(e),className:"shadow-xs w-full cursor-pointer rounded border border-[#cfd4da] p-3 text-left text-xs leading-tight text-gray-600 "+(n?"border-blue-500 bg-blue-50":"hover:border-[#1a466b] hover:bg-gray-100")},a&&"… ",r,f("span",{className:"font-bold text-blue-500"},o),i,s&&" …")}const ts=e=>{const t=se(null),[n,r]=oe(e.query||""),{provides:o}=Qo(),{provides:i}=un(),a=li(n,400);ie((()=>{t.current&&t.current.focus()}),[o]),ie((()=>{""===a?o?.stopSearch():o?.searchAllPages(a)}),[a,o]),ie((()=>{void 0===e.activeResultIndex||e.loading||l(e.activeResultIndex)}),[e.activeResultIndex,e.loading,e.query,e.flags]);const s=(t,n)=>{o?.setFlags(n?[...e.flags,t]:e.flags.filter((e=>e!==t)))},l=t=>{const n=e.results[t];if(!n)return;const r=n.rects.reduce(((e,t)=>({x:Math.min(e.x,t.origin.x),y:Math.min(e.y,t.origin.y)})),{x:1/0,y:1/0});i?.scrollToPage({pageNumber:n.pageIndex+1,pageCoordinates:r,center:!0})},u=e.results.reduce(((e,t,n)=>((e[t.pageIndex]??=[]).push({hit:t,index:n}),e)),{});return f("div",{className:"flex h-full flex-col bg-white"},f("div",{className:"p-4"},f("div",{className:"relative"},f("div",{className:"pointer-events-none absolute inset-y-0 left-0 flex items-center pl-2"},f("svg",{className:"h-4 w-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},f("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"}))),f("input",{ref:t,type:"text",placeholder:"Search",autoFocus:!0,value:n,onInput:e=>{const t=e.target;r(t.value)},className:"w-full rounded-md border border-gray-300 py-1 pl-8 pr-9 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"}),n&&f("div",{className:"absolute inset-y-0 right-0 flex cursor-pointer items-center pr-3",onClick:()=>{r(""),t.current&&t.current.focus()}},f("svg",{className:"h-4 w-4 text-gray-500 hover:text-gray-700",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},f("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})))),f("div",{className:"mt-3 flex flex-row gap-4"},f(ui,{label:"Case sensitive",checked:e.flags.includes(Ke.MatchCase),onChange:e=>s(Ke.MatchCase,e)}),f(ui,{label:"Whole word",checked:e.flags.includes(Ke.MatchWholeWord),onChange:e=>s(Ke.MatchWholeWord,e)})),f("hr",{className:"mb-2 mt-5 border-gray-200"}),e.active&&!e.loading&&f("div",{className:"flex h-[32px] flex-row items-center justify-between"},f("div",{className:"text-xs text-gray-500"},e.total," results found"),e.total>1&&f("div",{className:"flex flex-row"},f(Xn,{onClick:()=>{o?.previousResult()}},f(jo,{icon:"chevronLeft",className:"h-4 w-4"})),f(Xn,{onClick:()=>{o?.nextResult()}},f(jo,{icon:"chevronRight",className:"h-4 w-4"}))))),f("div",{className:"flex min-h-0 flex-1 flex-col gap-2 overflow-y-auto px-4"},e.loading&&f("div",{className:"flex h-full flex-row items-center justify-center"},f("div",{className:"text-xs text-gray-500"},"Loading...")),!e.loading&&Object.entries(u).map((([t,n])=>f("div",{key:t,className:"mt-2 first:mt-0"},f("div",{className:"bg-white/80 py-2 text-xs text-gray-500 backdrop-blur"},"Page ",Number(t)+1),f("div",{className:"flex flex-col gap-2"},n.map((({hit:t,index:n})=>f(es,{key:n,hit:t,active:n===e.activeResultIndex,onClick:()=>{o?.goToResult(n)}}))))))),f("div",null)))},ns=(e,t,n)=>{const{provides:r}=Io(),{provides:o}=ao();if(!o)return null;const i=e.commandZoomMenu?o.getMenuOrAction(e.commandZoomMenu):null,a=e.commandZoomIn?o.getMenuOrAction(e.commandZoomIn):null,s=e.commandZoomOut?o.getMenuOrAction(e.commandZoomOut):null;oe(!1);const l=se(null),u=Math.round(100*e.zoomLevel),d=(e,t)=>{t&&o.executeCommand(t.id,{source:"click",triggerElement:e.currentTarget,position:"horizontal"===n?.direction?"bottom":"right",flatten:!0})};return ie((()=>{l.current&&console.log(l.current)}),[l.current]),f("div",{className:"flex flex-row items-center rounded-md bg-[#f1f3f5]"},f("form",{onSubmit:e=>{e.preventDefault();const t=e.target,n=new FormData(t).get("zoom");r?.requestZoom(parseFloat(n)/100)},className:"block"},f("input",{name:"zoom",type:"text",inputMode:"numeric",pattern:"\\d*",className:"h-6 w-8 border-0 bg-transparent p-0 text-right text-sm","aria-label":"Set zoom",autoFocus:!1,value:u,onInput:e=>{const t=e.target;t.value=t.value.replace(/[^0-9]/g,"")}}),f("span",{className:"text-sm"},"%")),f(io,{position:"horizontal"===n?.direction?"bottom":"right",content:"Zoom Options",trigger:e.zoomMenuActive?"none":"hover"},f(Xn,{className:"p-1",onClick:e=>d(e,i),active:e.zoomMenuActive},f("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",class:"icon icon-tabler icons-tabler-outline icon-tabler-chevron-down"},f("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),f("path",{d:"M6 9l6 6l6 -6"})))),f(io,{position:"horizontal"===n?.direction?"bottom":"right",content:"Zoom Out",trigger:"hover"},f(Xn,{className:"p-1",onClick:e=>d(e,s)},s?.icon&&f(jo,{icon:s.icon,className:"h-5 w-5"}))),f(io,{position:"horizontal"===n?.direction?"bottom":"right",content:"Zoom In",trigger:"hover"},f(Xn,{className:"p-1",onClick:e=>d(e,a)},a?.icon&&f(jo,{icon:a.icon,className:"h-5 w-5"}))))},rs=(e,t)=>{const{provides:n}=Oa(),{provides:r}=un(),{provides:o}=qt();if(!(e.open&&n&&r&&o))return null;const i=n.getSelectedAnnotation();if(!i)return null;const a=Li([{page:i.object.pageIndex,rect:i.object.rect}],r,o,10,42);return a?f("div",{style:{left:`${a.left}px`,top:`${a.top}px`,transform:"translate(-50%, 0%)",zIndex:2e3},className:"absolute rounded-md border border-[#cfd4da] bg-[#f8f9fa] p-1"},t()):null},os=(e,t)=>{const{provides:n}=ki(),{provides:r}=un(),{provides:o}=qt();if(!(e.open&&n&&r&&o))return null;const i=Li(n.getBoundingRects(),r,o,10,42);return i?f("div",{style:{left:`${i.left}px`,top:`${i.top}px`,transform:"translate(-50%, 0%)",zIndex:2e3},className:"absolute rounded-md border border-[#cfd4da] bg-[#f8f9fa] p-1"},t()):null},is=(e,t)=>{const{provides:n}=qt(),[r,o]=oe(!1),[i,a]=oe(!1),s=se(),l=ue((()=>{s.current&&clearTimeout(s.current),s.current=setTimeout((()=>{i||o(!1)}),4e3)}),[i]);ie((()=>{if(n)return n.onScrollChange((e=>{(e.scrollTop>0||e.scrollLeft>0)&&(o(!0),l())}))}),[n,l]),ie((()=>()=>{s.current&&clearTimeout(s.current)}),[]);return f("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2",onMouseEnter:()=>{a(!0),o(!0)},onMouseLeave:()=>{a(!1),l()}},f("div",{className:"rounded-md border border-[#cfd4da] bg-[#f8f9fa] p-1 transition-opacity duration-200 "+(r?"opacity-100":"opacity-0")},t()))},as=e=>{const{provides:t}=un(),{provides:n}=ao(),r=1===e.currentPage,o=e.currentPage===e.pageCount,i=e.nextPageCommandId?n?.getMenuOrAction(e.nextPageCommandId):null,a=e.previousPageCommandId?n?.getMenuOrAction(e.previousPageCommandId):null,s=(e,t)=>{t&&n&&n.executeCommand(t.id,{source:"click",triggerElement:e.currentTarget})};return f("div",{className:"flex flex-row items-center justify-between gap-3 rounded-md"},f(io,{position:"top",content:"Previous Page",trigger:r?"none":"hover"},f(Xn,{className:"p-1 "+(r?"cursor-not-allowed opacity-50 hover:ring-0":""),onClick:e=>s(e,a),disabled:r},a?.icon&&f(jo,{icon:a.icon,className:"h-5 w-5"}))),f("form",{className:"flex flex-row items-center gap-3",onSubmit:e=>{e.preventDefault();const n=e.target,r=new FormData(n).get("page"),o=parseInt(r);!isNaN(o)&&o>=1&&t?.scrollToPage({pageNumber:o})}},f("input",{name:"page",type:"text",inputMode:"numeric",pattern:"\\d*",className:"border-1 h-8 w-8 rounded-md border-gray-600 bg-white p-0 text-center text-sm","aria-label":"Set page",value:e.currentPage,onInput:e=>{const t=e.target;t.value=t.value.replace(/[^0-9]/g,"")}}),f("span",{className:"text-sm"},e.pageCount)),f(io,{position:"top",content:"Next Page",trigger:o?"none":"hover"},f(Xn,{className:"p-1 "+(o?"cursor-not-allowed opacity-50 hover:ring-0":""),onClick:e=>s(e,i),disabled:o},i?.icon&&f(jo,{icon:i.icon,className:"h-5 w-5"}))))},ss=({activeCommand:e,open:t,position:n,triggerElement:r,flatten:o})=>{const{provides:i}=ao(),[a,s]=oe([]),l=se(null);if(ie((()=>{t||s([])}),[t]),ie((()=>{e&&(l.current!==e?s([]):l.current=null)}),[e]),!i)return null;const u=e?i?.getChildItems(e,{flatten:o}):null,d=a.length>0&&e?i.getMenuOrAction(e):void 0,c=t=>{e&&s((t=>[...t,e])),l.current=t,i.executeCommand(t,{triggerElement:r,position:n})},m=(e,t)=>{if("group"===e.type){const t=e,n=i.getItemsByIds(t.children);return f(D,{key:e.id},f("div",{className:"px-4 py-3 text-xs font-medium uppercase text-gray-600"},t.label),n.map(((e,t)=>f(D,{key:e.id},m(e,t)))),f("hr",{className:"my-2 border-gray-200"}))}const n=e.dividerBefore&&0!==t?f("hr",{className:"my-2 border-gray-200"}):null;return f(D,{key:e.id},n,f("button",{disabled:!!e.disabled,onClick:()=>(e=>{"action"===e.type?(i.hideCommandMenu(),i.executeCommand(e.id)):"menu"===e.type&&c(e.id)})(e),className:`flex cursor-pointer flex-row items-center justify-between gap-2 px-4 py-1 ${"menu"===e.type?"menu-item":""} ${e.active&&!e.disabled?"bg-blue-500 text-white":"text-gray-500 hover:bg-blue-900 hover:text-white"} ${e.disabled?"pointer-events-none cursor-not-allowed opacity-50":""} `},f("div",{className:"flex flex-row items-center gap-2"},f("div",{className:"flex h-6 w-6 items-center justify-center"},e.icon&&f(jo,{icon:e.icon,className:"h-6 w-6"})),f("div",{className:"text-sm"},e.label)),f("div",{className:"flex items-center"},e.shortcutLabel&&f("div",{className:"mr-2 text-sm"},"(",e.shortcutLabel,")"),"menu"===e.type&&f(jo,{icon:"chevronRight",className:"h-6 w-6"}))))},h=f(D,null,a.length>0&&f("div",{onClick:()=>{if(0===a.length)return;const e=a[a.length-1];s((e=>e.slice(0,-1))),l.current=e,i.executeCommand(e,{triggerElement:r,position:n})},className:"flex cursor-pointer flex-row items-center gap-2 px-4 py-1 pb-2 text-sm font-medium text-gray-500 hover:bg-gray-100"},f(jo,{icon:"chevronLeft",className:"h-6 w-6 text-gray-500"})," ",d?.label),u?.map(((e,t)=>m(e,t))));return t?f(uo,{trigger:r,open:t,placement:n||"bottom",className:"@max-[600px]:!bottom-0 @max-[600px]:!top-auto @max-[600px]:!left-0 @max-[600px]:!right-0",onShow:()=>{},onHide:()=>{i.hideCommandMenu()}},h):null},ls=(e,t)=>f("div",null,"Comments"),us=(e,t)=>{const{provides:n}=un();return f(ai,{className:"flex-1",selectedPage:e.currentPage},(t=>f("div",{key:t.pageIndex,className:"absolute flex w-full cursor-pointer flex-col items-center",style:{height:t.wrapperHeight,top:t.top},onClick:()=>{n?.scrollToPage({pageNumber:t.pageIndex+1})}},f("div",{style:{width:t.width,height:t.height},className:"outline outline-2 -outline-offset-2 "+(e.currentPage===t.pageIndex+1?"outline-blue-500":"outline-gray-300")},f(si,{meta:t,className:"h-full w-full object-contain"})),f("div",{className:"flex items-center justify-center text-xs text-gray-500",style:{height:t.labelHeight}},t.pageIndex+1))))},ds=(e,t)=>{const{provides:n}=Ot(oa.id),{provides:r}=un(),[o,i]=oe([]),[a,s]=oe(new Set);ie((()=>{if(!n)return;const e=n.getBookmarks();return e.wait((({bookmarks:e})=>{i(e);const t=e.map(((e,t)=>`bookmark-${t}`));s(new Set(t))}),nt),()=>{e.abort({code:Je.Cancelled,message:"Bookmark task cancelled"})}}),[n,e.document]);const l=(t,n,o=0)=>{const i=`bookmark-${n}`,u=t.children&&t.children.length>0,d=a.has(i);return f("div",{key:i,className:"outline-item"},f("div",{className:"flex cursor-pointer items-center py-1 pr-4 text-sm text-gray-700 hover:bg-gray-100",style:{paddingLeft:`${16*o+8}px`},onClick:()=>(t=>{if(!r||!t.target||"action"!==t.target.type)return;const n=t.target.action;if(1===n.type&&n.destination){const t=n.destination;if(t.zoom.mode===Le.XYZ){const n=e.document?.pages.find((e=>e.index===t.pageIndex));if(!n)return;r.scrollToPage({pageNumber:t.pageIndex+1,pageCoordinates:t.zoom.params?{x:t.zoom.params.x,y:n.size.height-t.zoom.params.y}:void 0,behavior:"smooth"})}else t.zoom.mode===Le.FitPage&&r.scrollToPage({pageNumber:t.pageIndex+1,behavior:"smooth"})}})(t)},u&&f("button",{className:"mr-1 flex h-4 w-4 items-center justify-center rounded hover:bg-gray-200",onClick:e=>{e.stopPropagation(),(e=>{s((t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n}))})(i)}},f(jo,{icon:d?"chevronDown":"chevronRight",className:"h-3 w-3 text-gray-500"})),!u&&f("div",{className:"mr-1 w-4"}),f("span",{className:"flex-1 truncate",title:t.title},t.title)),u&&d&&f("div",{className:"outline-children"},t.children?.map(((e,t)=>l(e,`${n}-${t}`,o+1)))))};return 0===o.length?f("div",{className:"flex h-full items-center justify-center p-6"},f("div",{className:"text-center text-gray-500"},f("div",{className:"text-sm"},"No outline available"),f("div",{className:"mt-1 text-xs"},"This document doesn't contain bookmarks"))):f("div",{className:"flex h-full flex-col bg-white"},f("div",{className:"flex-1 overflow-y-auto"},f("div",{className:"outline-tree"},o.map(((e,t)=>l(e,t))))))},cs=(e,t)=>f("div",null,"Attachments"),ms=({activeCommandId:e,menuCommandId:t,active:n},r)=>{const{provides:o}=ao();if(!o)return null;const i=o.getMenuOrAction(e),a=ue((e=>{if(e.preventDefault(),e.stopPropagation(),!o||!t)return;const n=e.currentTarget;o.executeCommand(t,{source:"click",triggerElement:n})}),[t,o]);return f("div",{style:{maxWidth:"100px",width:"100px"}},f(Xn,{className:`col-start-1 row-start-1 !w-full appearance-none rounded-md bg-white py-1.5 pl-3 pr-2 text-[13px] text-gray-900 ${n?"text-blue-500 outline outline-2 -outline-offset-2 outline-blue-500":"outline outline-1 -outline-offset-1 outline-gray-300"} flex flex-row items-center justify-between gap-2 hover:ring-transparent`,onClick:a},f("span",{className:"min-w-0 flex-1 truncate text-left"},i?.label),f(jo,{icon:"chevronDown",className:"h-4 w-4 text-gray-500"})))},hs=(e,t)=>{const{provides:n}=ao(),{provides:r}=un(),{executePrint:o,parsePageRange:i,progress:a,isReady:s,isPrinting:l}=ta(),[u,d]=oe(Xi.All),[c,m]=oe(""),[h,g]=oe(!0),[F,p]=oe(qi.Normal),[_,b]=oe("");if(!n)return null;if(!e.open)return null;const P=r?.getMetrics(),D=P?.currentPage||1,v=P?.pageVisibilityMetrics?.length||0,y=()=>{n.updateComponentState({componentType:"floating",componentId:"printModal",patch:{open:!1}})},w=e=>{d(e),b("")},x=u!==Xi.Custom||c.trim()&&!_;return f(ji,{open:e.open,title:"Print Settings",onClose:y,maxWidth:"28rem"},f("div",{className:"space-y-6"},f("div",null,f("label",{className:"mb-3 block text-sm font-medium text-gray-700"},"Pages to print"),f("div",{className:"space-y-2"},f("label",{className:"flex items-center"},f("input",{type:"radio",name:"pageRange",value:"all",checked:u===Xi.All,onChange:()=>w(Xi.All),className:"mr-2"}),f("span",{className:"text-sm"},"All pages")),f("label",{className:"flex items-center"},f("input",{type:"radio",name:"pageRange",value:"current",checked:u===Xi.Current,onChange:()=>w(Xi.Current),className:"mr-2"}),f("span",{className:"text-sm"},"Current page (",D,")")),f("label",{className:"flex items-start"},f("input",{type:"radio",name:"pageRange",value:"custom",checked:u===Xi.Custom,onChange:()=>w(Xi.Custom),className:"mr-2 mt-0.5"}),f("div",{className:"flex-1"},f("span",{className:"mb-1 block text-sm"},"Specify pages"),f("input",{type:"text",placeholder:"e.g., 1-3, 5, 8-10",value:c,onInput:e=>{const t=e.target.value;if(m(t),t.trim()){const e=i(t);e.isValid?b(""):b(e.error||"Invalid page range")}else b("")},disabled:u!==Xi.Custom,className:`w-full rounded-md border px-3 py-1 text-sm ${u!==Xi.Custom?"bg-gray-100 text-gray-500":_?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-blue-500 focus:ring-blue-500"} focus:outline-none focus:ring-1`}),_&&f("p",{className:"mt-1 text-xs text-red-500"},_),u===Xi.Custom&&!_&&c.trim()&&f("p",{className:"mt-1 text-xs text-gray-500"},"Total pages: ",v))))),f("div",null,f("label",{className:"flex items-center"},f("input",{type:"checkbox",checked:h,onChange:e=>g(e.target.checked),className:"mr-2"}),f("span",{className:"text-sm font-medium text-gray-700"},"Include annotations"))),f("div",null,f("label",{className:"mb-2 block text-sm font-medium text-gray-700"},"Print Quality"),f("div",{className:"relative"},f("select",{value:F,onChange:e=>p(e.target.value),className:"w-full appearance-none rounded-md border border-gray-300 bg-white px-3 py-2 pr-8 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"},f("option",{value:qi.Normal},"Normal"),f("option",{value:qi.High},"High")),f("div",{className:"pointer-events-none absolute inset-y-0 right-3 flex items-center"},f("svg",{className:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},f("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"}))))),l&&a&&f("div",{className:"rounded-md border border-blue-200 bg-blue-50 p-3"},f("div",{className:"mb-2 flex items-center justify-between"},f("span",{className:"text-sm font-medium text-blue-900"},"preparing"===a.status&&"Preparing...","rendering"===a.status&&"Rendering pages...","complete"===a.status&&"Complete!","error"===a.status&&"Error"),f("span",{className:"text-sm text-blue-700"},a.current,"/",a.total)),f("div",{className:"h-2 w-full rounded-full bg-blue-200"},f("div",{className:"h-2 rounded-full bg-blue-600 transition-all duration-300",style:{width:a.current/a.total*100+"%"}})),a.message&&f("p",{className:"mt-2 text-sm text-blue-700"},a.message)),f("div",{className:"flex justify-end space-x-3 border-t border-gray-200 pt-4"},f(Xn,{onClick:y,className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",disabled:l},"Cancel"),f(Xn,{onClick:async()=>{let e;switch(u){case Xi.Current:e={type:Xi.Current,currentPage:D-1};break;case Xi.All:e={type:Xi.All};break;case Xi.Custom:if(!c.trim())return void b("Please enter page numbers");const t=i(c);if(!t.isValid)return void b(t.error||"Invalid page range");e={type:Xi.Custom,pages:t.pages};break;default:return}const t={pageRange:e,includeAnnotations:h,quality:F};try{await o(t),y()}catch(e){console.error("Print failed:",e)}},disabled:l||!x,className:"rounded-md border border-transparent bg-blue-600 px-4 py-2 text-sm text-white hover:!bg-blue-700 disabled:cursor-not-allowed disabled:opacity-50"},l?"Printing...":"Print"))))},gs={[Ta(He.HIGHLIGHT)]:[{id:"color",label:"Color"},{id:"opacity",label:"Opacity",min:.1,max:1,step:.05},{id:"blendMode",label:"Blend Mode"}],[Ta(He.UNDERLINE)]:[{id:"color",label:"Color"},{id:"opacity",label:"Opacity",min:.1,max:1,step:.05},{id:"blendMode",label:"Blend Mode"}],[Ta(He.STRIKEOUT)]:[{id:"color",label:"Color"},{id:"opacity",label:"Opacity",min:.1,max:1,step:.05},{id:"blendMode",label:"Blend Mode"}],[Ta(He.SQUIGGLY)]:[{id:"color",label:"Color"},{id:"opacity",label:"Opacity",min:.1,max:1,step:.05},{id:"blendMode",label:"Blend Mode"}],[Ta(He.INK)]:[{id:"color",label:"Color"},{id:"opacity",label:"Opacity",min:.1,max:1,step:.05},{id:"strokeWidth",label:"Stroke width",min:1,max:30,step:1}],[Ta(He.INK,"InkHighlight")]:[{id:"color",label:"Color"},{id:"opacity",label:"Opacity",min:.1,max:1,step:.05},{id:"strokeWidth",label:"Stroke width",min:1,max:30,step:1}]},Fs=({value:e,min:t=0,max:n=1,step:r=.1,onChange:o})=>V("input",{type:"range",class:"range-sm mb-2 h-1 w-full cursor-pointer appearance-none rounded-lg bg-gray-200 dark:bg-gray-700",value:e,min:t,max:n,step:r,onInput:e=>o(parseFloat(e.target.value))}),ps=({color:e,active:t,onSelect:n})=>V("button",{title:e,class:"h-5 w-5 rounded-full border border-gray-400 "+(t?"outline outline-2 outline-offset-2 outline-blue-500":""),style:{backgroundColor:e},onClick:()=>n(e)}),_s=({selectedAnnotation:e,activeVariant:t,colorPresets:n})=>{const{provides:r}=Oa();if(!r)return null;if(!e&&!t)return V("div",{class:"flex flex-col items-center gap-2 p-4 text-gray-500",children:[V(jo,{icon:"palette",className:"h-18 w-18 text-gray-500"}),V("div",{className:"max-w-[150px] text-center text-sm text-gray-500",children:"Select an annotation to see styles"})]});const o=e?Ta(e.annotation.type,e.annotation.intent):t,i=r?.getToolDefaults(o),a=i?.subtype??null,s=gs[o]??[],l=e?(e=>{switch(e.type){case He.HIGHLIGHT:case He.UNDERLINE:case He.STRIKEOUT:case He.SQUIGGLY:case He.INK:return{color:e.color,opacity:e.opacity};default:return{color:"#FFFF00",opacity:1}}})(e.annotation):{color:i.color,opacity:i.opacity},[u,d]=oe(l.color);ie((()=>d(l.color)),[l.color]);const c=e=>{d(e),v({color:e})},[m,h]=oe(l.opacity);ie((()=>h(l.opacity)),[l.opacity]);const g=li(m,300);ie((()=>v({opacity:g})),[g]);const F=a!==He.INK?1:e?.annotation.type===He.INK?e.annotation.strokeWidth:i.strokeWidth,[p,_]=oe(F);ie((()=>_(F)),[F]);const b=li(p,300);ie((()=>{a===He.INK&&v({strokeWidth:b})}),[b]);const f=e?.annotation?.blendMode??(a!==He.INK&&"blendMode"in i?i.blendMode:void 0)??je.Normal,[P,D]=oe(f);ie((()=>D(f)),[f]);function v(n){e?r?.updateAnnotation(e.pageIndex,e.localId,n):t&&r?.setToolDefaults(t,n)}return V("div",{class:"p-4",children:[V("h2",{class:"text-md mb-4 font-medium",children:e?`${i.name} styles`:`${i.name} defaults`}),s.map((e=>{switch(e.id){case"color":return V("section",{class:"mb-6",children:[V("label",{class:"mb-2 block text-sm font-medium text-gray-900 dark:text-white",children:e.label}),V("div",{class:"flex justify-between gap-1",children:n.map((e=>V(ps,{color:e,active:e===u,onSelect:c},e)))})]},"color");case"opacity":return V("section",{class:"mb-6",children:[V("label",{class:"mb-1 block text-sm font-medium text-gray-900 dark:text-white",children:e.label}),V(Fs,{value:m,min:e.min,max:e.max,step:e.step,onChange:h}),V("span",{class:"text-xs text-gray-500",children:[Math.round(100*m),"%"]})]},"opacity");case"strokeWidth":return V("section",{class:"mb-6",children:[V("label",{class:"mb-1 block text-sm font-medium text-gray-900 dark:text-white",children:e.label}),V(Fs,{value:p,min:e.min,max:e.max,step:e.step,onChange:_}),V("span",{class:"text-xs text-gray-500",children:[p,"px"]})]},"strokeWidth");case"blendMode":return V("section",{class:"mb-6",children:[V("label",{class:"mb-1 block text-sm font-medium text-gray-900 dark:text-white",children:e.label}),V("select",{name:"blendMode",class:"w-full rounded border border-gray-300 bg-white px-2 py-1 text-sm dark:border-gray-600 dark:bg-gray-800 dark:text-gray-100",value:P,onChange:e=>(e=>{const t=e;D(t),v({blendMode:t})})(parseInt(e.target.value,10)),children:Ue.map((e=>V("option",{value:e.value,children:e.label},e.value)))})]},"blendMode");default:return null}}))]})},bs=class extends vt{constructor(e,t,n){super(e,t),this.engine=n}async initialize(e){}buildCapability(){return{renderPage:this.renderPage.bind(this),renderPageRect:this.renderPageRect.bind(this)}}renderPage({pageIndex:e,scaleFactor:t=1,dpr:n=1,rotation:r=be.Degree0,options:o={withAnnotations:!1},imageType:i="image/webp"}){const a=this.coreState.core;if(!a.document)throw new Error("document does not open");const s=a.document.pages.find((t=>t.index===e));if(!s)throw new Error("page does not exist");return this.engine.renderPage(a.document,s,t,r,n,o,i)}renderPageRect({pageIndex:e,scaleFactor:t=1,dpr:n=1,rect:r,rotation:o=be.Degree0,options:i={withAnnotations:!1},imageType:a="image/webp"}){const s=this.coreState.core;if(!s.document)throw new Error("document does not open");const l=s.document.pages.find((t=>t.index===e));if(!l)throw new Error("page does not exist");return this.engine.renderPageRect(s.document,l,t,o,n,r,i,a)}};bs.id="render";let fs=bs;const Ps="render",Ds={manifest:{id:Ps,name:"Render Plugin",version:"1.0.0",provides:["render"],requires:[],optional:[],defaultConfig:{enabled:!0}},create:(e,t)=>new fs(Ps,e,t),reducer:()=>{},initialState:{}};function vs({pageIndex:e,scaleFactor:t=1,dpr:n=1,style:r,...o}){const{provides:i}=Ot(fs.id),[a,s]=oe(null),l=se(null);return ie((()=>{if(i){const r=i.renderPage({pageIndex:e,scaleFactor:t,dpr:n});return r.wait((e=>{const t=URL.createObjectURL(e);s(t),l.current=t}),nt),()=>{l.current?(URL.revokeObjectURL(l.current),l.current=null):r.abort({code:Je.Cancelled,message:"canceled render task"})}}}),[e,t,n,i]),V(D,{children:a&&V("img",{src:a,onLoad:()=>{l.current&&(URL.revokeObjectURL(l.current),l.current=null)},...o,style:{width:"100%",height:"100%",...r||{}}})})}const ys="rotate",ws={id:ys,name:"Rotate Plugin",version:"1.0.0",provides:["rotate"],requires:["loader"],optional:["spread"],defaultConfig:{enabled:!0}};const xs=class extends vt{constructor(e,t,n){super(e,t),this.rotate$=Mt(),this.resetReady();const r=n.defaultRotation??this.coreState.core.rotation;this.setRotation(r),this.markReady()}async initialize(e){}setRotation(e){if(!this.coreState.core.pages)throw new Error("Pages not loaded");this.dispatchCoreAction((e=>({type:ht,payload:e}))(e))}rotateForward(){const e=function(e){return(e+1)%4}(this.coreState.core.rotation);this.setRotation(e)}rotateBackward(){const e=function(e){return(e+3)%4}(this.coreState.core.rotation);this.setRotation(e)}buildCapability(){return{onRotateChange:this.rotate$.on,setRotation:e=>this.setRotation(e),getRotation:()=>this.coreState.core.rotation,rotateForward:()=>this.rotateForward(),rotateBackward:()=>this.rotateBackward(),getMatrix:({w:e=0,h:t=0,asString:n=!0}={})=>function(e,t,n,r=!0){let o=1,i=0,a=0,s=1,l=0,u=0;switch(e){case 1:o=0,i=1,a=-1,s=0,l=n;break;case 2:o=-1,i=0,a=0,s=-1,l=t,u=n;break;case 3:o=0,i=-1,a=1,s=0,u=t}return r?`matrix(${o},${i},${a},${s},${l},${u})`:[o,i,a,s,l,u]}(this.coreState.core.rotation,e,t,n)}}async destroy(){this.rotate$.clear(),super.destroy()}};xs.id="rotate";let As=xs;const Ss={manifest:ws,create:(e,t,n)=>new As(ys,e,n),reducer:()=>{},initialState:{}};function Es({children:e,pageSize:t,...n}){const{provides:r}=Ot(As.id);return V("div",{...n,style:{position:"absolute",transformOrigin:"0 0",transform:(null==r?void 0:r.getMatrix({w:t.width,h:t.height}))||"matrix(1, 0, 0, 1, 0, 0)"},children:e})}const Cs="tiling",Ms={id:Cs,name:"Tiling Plugin",version:"1.0.0",provides:["tiling"],requires:["render","scroll","viewport"],optional:[],defaultConfig:{enabled:!0,tileSize:768,overlapPx:2.5,extraRings:0}},Ts="UPDATE_VISIBLE_TILES",Gs="MARK_TILE_STATUS",ks=e=>({type:Ts,payload:e}),Is=(e,t,n)=>({type:Gs,payload:{pageIndex:e,tileId:t,status:n}});function Os({tileSize:e=768,overlapPx:t=2.5,extraRings:n=0,scale:r,rotation:o,page:i,metric:a}){const s=i.size.width*r,l=i.size.height*r,u=e-t,d=ye(i.size,o,r),c={origin:{x:a.scaled.pageX,y:a.scaled.pageY},size:{width:a.scaled.visibleWidth,height:a.scaled.visibleHeight}},m=(w=1,Ee(Se(d,c,(4-o)%4),1/w)),h=m.origin.x,g=m.origin.y,F=h+m.size.width,p=g+m.size.height,_=Math.floor((s-1)/u),b=Math.floor((l-1)/u),f=Math.max(0,Math.floor(h/u)-n),P=Math.min(_,Math.floor((F-1)/u)+n),D=Math.max(0,Math.floor(g/u)-n),v=Math.min(b,Math.floor((p-1)/u)+n),y=[];var w;for(let t=f;t<=P;t++){const n=t*u,o=Math.min(e,s-n),a=n/r,d=o/r;for(let s=D;s<=v;s++){const c=s*u,m=Math.min(e,l-c),h=c/r,g=m/r;y.push({id:`p${i.index}-${r}-x${n}-y${c}-w${o}-h${m}`,col:t,row:s,pageRect:{origin:{x:a,y:h},size:{width:d,height:g}},screenRect:{origin:{x:n,y:c},size:{width:o,height:m}},status:"queued",srcScale:r,isFallback:!1})}}return y}const Rs=class extends vt{constructor(e,t,n){super(e,t),this.tileRendering$=Mt(),this.config=n,this.renderCapability=this.registry.getPlugin("render").provides(),this.scrollCapability=this.registry.getPlugin("scroll").provides(),this.viewportCapability=this.registry.getPlugin("viewport").provides(),this.scrollCapability.onScroll((e=>this.calculateVisibleTiles(e)),{mode:"throttle",wait:500,throttleMode:"trailing"})}async initialize(){}onCoreStoreUpdated(e,t){e.core.scale!==t.core.scale&&this.calculateVisibleTiles(this.scrollCapability.getMetrics(this.viewportCapability.getMetrics()))}calculateVisibleTiles(e){var t;if(!this.config.enabled)return void this.dispatch(ks([]));const n=this.coreState.core.scale,r=this.coreState.core.rotation,o={};for(const i of e.pageVisibilityMetrics){const e=i.pageNumber-1,a=null==(t=this.coreState.core.document)?void 0:t.pages[e];if(!a)continue;const s=Os({page:a,metric:i,scale:n,rotation:r,tileSize:this.config.tileSize,overlapPx:this.config.overlapPx,extraRings:this.config.extraRings});o[e]=s}this.dispatch(ks(o))}onStoreUpdated(e,t){this.tileRendering$.emit(t.visibleTiles)}buildCapability(){return{renderTile:this.renderTile.bind(this),onTileRendering:this.tileRendering$.on}}renderTile(e){if(!this.renderCapability)throw new Error("Render capability not available.");this.dispatch(Is(e.pageIndex,e.tile.id,"rendering"));const t=this.renderCapability.renderPageRect({pageIndex:e.pageIndex,rect:e.tile.pageRect,scaleFactor:e.tile.srcScale,dpr:e.dpr});return t.wait((()=>{this.dispatch(Is(e.pageIndex,e.tile.id,"ready"))}),nt),t}};Rs.id="tiling";let Ls=Rs;const js={manifest:Ms,create:(e,t,n)=>new Ls(Cs,e,n),reducer:(e,t)=>((e,t)=>{var n,r;switch(t.type){case Ts:{const r=t.payload,o={...e.visibleTiles};for(const e in r){const t=Number(e),i=r[t],a=o[t]??[],s=null==(n=a.find((e=>!e.isFallback)))?void 0:n.srcScale,l=i[0].srcScale;if(void 0!==s&&s!==l){const e=a.filter((e=>!e.isFallback&&"ready"===e.status)).map((e=>({...e,isFallback:!0}))),n=e.length>0?[]:a.filter((e=>e.isFallback));o[t]=[...n,...e,...i]}else{const e=new Set(i.map((e=>e.id))),n=[],r=new Set;for(const t of a)(t.isFallback||e.has(t.id))&&(n.push(t),r.add(t.id));for(const e of i)r.has(e.id)||n.push(e);o[t]=n}}return{...e,visibleTiles:o}}case Gs:{const{pageIndex:n,tileId:o,status:i}=t.payload,a=(null==(r=e.visibleTiles[n])?void 0:r.map((e=>e.id===o?{...e,status:i}:e)))??[],s=a.filter((e=>!e.isFallback)),l=s.every((e=>"ready"===e.status))?s:a;return{...e,visibleTiles:{...e.visibleTiles,[n]:l}}}default:return e}})(e,t),initialState:{visibleTiles:{}}},Ns=()=>Ot(Ls.id);function Bs({pageIndex:e,tile:t,dpr:n,scale:r}){const{provides:o}=Ns(),[i,a]=oe(),s=se(null),l=r/t.srcScale;ie((()=>{if("ready"===t.status&&s.current||!o)return;const r=o.renderTile({pageIndex:e,tile:t,dpr:n});return r.wait((e=>{const t=URL.createObjectURL(e);s.current=t,a(t)}),nt),()=>{s.current?(URL.revokeObjectURL(s.current),s.current=null):r.abort({code:Je.Cancelled,message:"canceled render task"})}}),[e,t.id]);return i?V("img",{src:i,onLoad:()=>{s.current&&(URL.revokeObjectURL(s.current),s.current=null)},style:{position:"absolute",left:t.screenRect.origin.x*l,top:t.screenRect.origin.y*l,width:t.screenRect.size.width*l,height:t.screenRect.size.height*l,display:"block"}}):null}function zs({pageIndex:e,scale:t,style:n,...r}){const{provides:o}=Ns(),[i,a]=oe([]);return ie((()=>{if(o)return o.onTileRendering((t=>a(t[e])))}),[o]),V("div",{style:{...n},...r,children:null==i?void 0:i.map((n=>V(Bs,{pageIndex:e,tile:n,dpr:window.devicePixelRatio,scale:t},n.id)))})}function Us({size:e="md",className:t="",text:n="Loading..."}){const r={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"};return f("div",{className:`flex flex-col items-center justify-center gap-3 ${t}`},f("div",{className:"relative"},f("div",{className:`${r[e]} animate-spin rounded-full border-4 border-gray-200`}),f("div",{className:`${r[e]} absolute left-0 top-0 animate-spin rounded-full border-4 border-transparent border-r-blue-500 border-t-blue-500`})),n&&f("p",{className:`${{sm:"text-sm",md:"text-base",lg:"text-lg"}[e]} animate-pulse font-medium text-gray-600`},n))}var Vs="fullscreen",Hs={id:Vs,name:"Fullscreen Plugin",version:"1.0.0",provides:["fullscreen"],requires:[],optional:[],defaultConfig:{enabled:!0}},Ws="SET_FULLSCREEN";var $s=class extends vt{constructor(e,t){super(e,t),this.onStateChange$=Mt(),this.fullscreenRequest$=Ct()}async initialize(e){}buildCapability(){return{isFullscreen:()=>this.state.isFullscreen,enableFullscreen:()=>this.enableFullscreen(),exitFullscreen:()=>this.exitFullscreen(),toggleFullscreen:()=>this.toggleFullscreen(),onRequest:this.fullscreenRequest$.on,onStateChange:this.onStateChange$.on}}toggleFullscreen(){this.state.isFullscreen?this.exitFullscreen():this.enableFullscreen()}enableFullscreen(){this.fullscreenRequest$.emit("enter")}exitFullscreen(){this.fullscreenRequest$.emit("exit")}onStoreUpdated(e,t){this.onStateChange$.emit(t)}setFullscreenState(e){this.dispatch({type:Ws,payload:e})}async destroy(){this.fullscreenRequest$.clear(),super.destroy()}};$s.id="fullscreen";var qs={manifest:Hs,create:e=>new $s(Vs,e),reducer:(e,t)=>t.type===Ws?{...e,isFullscreen:t.payload}:e,initialState:{isFullscreen:!1}};function Xs({children:e,...t}){const{provides:n}=Ot($s.id),{plugin:r}=It($s.id),o=se(null);return ie((()=>{if(!n)return;return n.onRequest((async e=>{if("enter"===e){const e=o.current;e&&!document.fullscreenElement&&await e.requestFullscreen()}else document.fullscreenElement&&await document.exitFullscreen()}))}),[n]),ie((()=>{if(!r)return;const e=()=>r.setFullscreenState(!!document.fullscreenElement);return document.addEventListener("fullscreenchange",e),()=>document.removeEventListener("fullscreenchange",e)}),[r]),V("div",{...t,style:{position:"relative",width:"100%",height:"100%",...t.style},ref:o,children:e})}var Ys=class extends vt{constructor(e,t,n){super(e,t),this.downloadRequest$=Ct(),this.engine=n}async initialize(e){}buildCapability(){return{saveAsCopy:this.saveAsCopy.bind(this),download:this.download.bind(this),onRequest:this.downloadRequest$.on}}download(){this.downloadRequest$.emit("download")}saveAsCopy(){const e=this.coreState.core.document;return e?this.engine.saveAsCopy(e):Qe.reject({code:Je.DocNotOpen,message:"Document not found"})}};Ys.id="export";var Zs="export",Ks={manifest:{id:Zs,name:"Export Plugin",version:"1.0.0",provides:["export"],requires:[],optional:[],defaultConfig:{enabled:!0}},create:(e,t)=>new Ys(Zs,e,t),reducer:()=>{},initialState:{}};function Js(){const{provides:e}=Ot(Ys.id),t=se(null);return ie((()=>{if(!e)return;return e.onRequest((async n=>{if("download"===n){const n=t.current;if(!n)return;e.saveAsCopy().wait((e=>{const t=URL.createObjectURL(new Blob([e]));n.href=t,n.download="document.pdf",n.click(),URL.revokeObjectURL(t)}),nt)}}))}),[e]),V("a",{style:{display:"none"},ref:t})}var Qs=class extends vt{constructor(e,t){super(e,t),this.interactionManager=t.getPlugin(xo.id)?.provides(),this.interactionManager.registerMode({id:"panMode",scope:"global",exclusive:!1,cursor:"grab"})}async initialize(e){}buildCapability(){return{enablePan:()=>this.interactionManager.activate("panMode"),disablePan:()=>this.interactionManager.activate("default"),togglePan:()=>{"panMode"===this.interactionManager.getActiveMode()?this.interactionManager.activate("default"):this.interactionManager.activate("panMode")}}}};Qs.id="pan";var el={manifest:{id:"pan",name:"Pan Plugin",version:"1.0.0",provides:["pan"],requires:["interaction-manager"],optional:[],defaultConfig:{enabled:!0}},create:e=>new Qs("pan",e),reducer:()=>{},initialState:{}},tl=()=>{const{register:e}=To({modeId:"panMode"}),{setCursor:t,removeCursor:n}=Mo(),{provides:r}=qt(),o=se(null),i=le((()=>({onPointerDown:(e,n)=>{if(!r)return;const i=r.getMetrics();o.current={startX:n.clientX,startY:n.clientY,startLeft:i.scrollLeft,startTop:i.scrollTop},t("panMode","grabbing",10)},onPointerMove:(e,t)=>{const n=o.current;if(!n||!r)return;const i=t.clientX-n.startX,a=t.clientY-n.startY;r.scrollTo({x:n.startLeft-i,y:n.startTop-a})},onPointerUp:()=>{o.current&&(o.current=null,n("panMode"))},onPointerLeave:()=>{o.current&&(o.current=null,n("panMode"))},onPointerCancel:()=>{o.current&&(o.current=null,n("panMode"))}})),[r,t,n]);return ie((()=>{if(e)return e(i)}),[e,i]),V(D,{})},nl="capture",rl={id:nl,name:"Capture Plugin",version:"1.0.0",provides:["capture"],requires:["render","interaction-manager"],optional:[],defaultConfig:{enabled:!0,scale:1,imageType:"image/png",withAnnotations:!1}},ol=class extends vt{constructor(e,t,n){super(e,t),this.captureArea$=Ct(),this.config=n,this.renderCapability=this.registry.getPlugin("render").provides(),this.interactionManagerCapability=this.registry.getPlugin("interaction-manager").provides(),this.interactionManagerCapability.registerMode({id:"marqueeCapture",scope:"page",exclusive:!0,cursor:"crosshair"})}async initialize(e){}buildCapability(){return{onCaptureArea:this.captureArea$.on,captureArea:this.captureArea.bind(this),enableMarqueeCapture:this.enableMarqueeCapture.bind(this),disableMarqueeCapture:this.disableMarqueeCapture.bind(this),toggleMarqueeCapture:this.toggleMarqueeCapture.bind(this),isMarqueeCaptureActive:()=>"marqueeCapture"===this.interactionManagerCapability?.getActiveMode()}}captureArea(e,t){this.disableMarqueeCapture();this.renderCapability.renderPageRect({pageIndex:e,rect:t,imageType:this.config.imageType,scaleFactor:this.config.scale,options:{withAnnotations:this.config.withAnnotations||!1}}).wait((n=>{this.captureArea$.emit({pageIndex:e,rect:t,blob:n,imageType:this.config.imageType||"image/png",scale:this.config.scale||1,withAnnotations:this.config.withAnnotations||!1})}),nt)}enableMarqueeCapture(){this.interactionManagerCapability?.activate("marqueeCapture")}disableMarqueeCapture(){this.interactionManagerCapability?.activate("default")}toggleMarqueeCapture(){"marqueeCapture"===this.interactionManagerCapability?.getActiveMode()?this.interactionManagerCapability?.activate("default"):this.interactionManagerCapability?.activate("marqueeCapture")}};ol.id="capture";var il={manifest:rl,create:(e,t,n)=>new ol(nl,e,n),reducer:()=>{},initialState:{}},al=()=>Ot(ol.id),sl=({pageIndex:e,scale:t,pageWidth:n,pageHeight:r,className:o,stroke:i="rgba(33,150,243,0.8)",fill:a="rgba(33,150,243,0.15)"})=>{const{provides:s}=al(),{register:l}=To({modeId:"marqueeCapture",pageIndex:e}),u=(e,t,n)=>Math.max(t,Math.min(n,e)),d=se(null),[c,m]=oe(null),h=n/t,g=r/t,F=le((()=>({onPointerDown:(e,t)=>{d.current=e,m({origin:{x:e.x,y:e.y},size:{width:0,height:0}}),t.target?.setPointerCapture?.(t.pointerId)},onPointerMove:e=>{if(!d.current)return;const t=u(e.x,0,h),n=u(e.y,0,g),{x:r,y:o}=d.current,i=Math.min(r,t),a=Math.min(o,n),s=Math.abs(t-r),l=Math.abs(n-o);m({origin:{x:i,y:a},size:{width:s,height:l}})},onPointerUp:(n,r)=>{if(c&&s){Math.max(c.size.width,c.size.height)*t>5&&s.captureArea(e,c)}d.current=null,m(null),r.target?.releasePointerCapture?.(r.pointerId)},onPointerCancel:(e,t)=>{d.current=null,m(null),t.target?.releasePointerCapture?.(t.pointerId)}})),[h,h,s,t,c,e]);return ie((()=>{if(l)return l(F)}),[l,F]),c?V("div",{style:{position:"absolute",pointerEvents:"none",left:c.origin.x*t,top:c.origin.y*t,width:c.size.width*t,height:c.size.height*t,border:`1px solid ${i}`,background:a,boxSizing:"border-box"},className:o}):null},ll="history",ul={id:ll,name:"History Plugin",version:"1.0.0",provides:["history"],requires:[],optional:[],defaultConfig:{enabled:!0}},dl="HISTORY/SET_STATE",cl=class extends vt{constructor(e,t){super(e,t),this.topicHistories=new Map,this.globalTimeline=[],this.globalIndex=-1,this.historyChange$=Ct()}async initialize(e){}getHistoryState(){const e={};return Array.from(this.topicHistories.entries()).forEach((([t,n])=>{e[t]={canUndo:n.currentIndex>-1,canRedo:n.currentIndex<n.commands.length-1}})),{global:{canUndo:this.globalIndex>-1,canRedo:this.globalIndex<this.globalTimeline.length-1},topics:e}}emitHistoryChange(e){var t;this.dispatch((t=this.getHistoryState(),{type:dl,payload:t})),this.historyChange$.emit(e)}buildCapability(){return{getHistoryState:()=>this.state,onHistoryChange:this.historyChange$.on,register:(e,t)=>{this.topicHistories.has(t)||this.topicHistories.set(t,{commands:[],currentIndex:-1});const n=this.topicHistories.get(t);n.commands.splice(n.currentIndex+1),n.commands.push(e),n.currentIndex++;const r={command:e,topic:t};this.globalTimeline.splice(this.globalIndex+1),this.globalTimeline.push(r),this.globalIndex++,e.execute(),this.emitHistoryChange(t)},undo:e=>{let t;if(e){const n=this.topicHistories.get(e);n&&n.currentIndex>-1&&(n.commands[n.currentIndex].undo(),n.currentIndex--,t=e)}else if(this.globalIndex>-1){const e=this.globalTimeline[this.globalIndex];e.command.undo(),this.topicHistories.get(e.topic).currentIndex--,this.globalIndex--,t=e.topic}t&&this.emitHistoryChange(t)},redo:e=>{let t;if(e){const n=this.topicHistories.get(e);n&&n.currentIndex<n.commands.length-1&&(n.currentIndex++,n.commands[n.currentIndex].execute(),t=e)}else if(this.globalIndex<this.globalTimeline.length-1){this.globalIndex++;const e=this.globalTimeline[this.globalIndex];e.command.execute(),this.topicHistories.get(e.topic).currentIndex++,t=e.topic}t&&this.emitHistoryChange(t)},canUndo:e=>{if(e){const t=this.topicHistories.get(e);return!!t&&t.currentIndex>-1}return this.globalIndex>-1},canRedo:e=>{if(e){const t=this.topicHistories.get(e);return!!t&&t.currentIndex<t.commands.length-1}return this.globalIndex<this.globalTimeline.length-1}}}};cl.id="history";var ml={global:{canUndo:!1,canRedo:!1},topics:{}},hl={manifest:ul,create:(e,t)=>new cl(ll,e),reducer:(e=ml,t)=>t.type===dl?{...e,...t.payload}:e,initialState:ml};function gl(){const{provides:e}=al(),[t,n]=oe(!1),[r,o]=oe(null),[i,a]=oe(null),[s,l]=oe(null),u=se(null),d=se(null),c=()=>{u.current&&(URL.revokeObjectURL(u.current),u.current=null),s&&(URL.revokeObjectURL(s),l(null)),n(!1),o(null),a(null)};ie((()=>{if(e)return e.onCaptureArea((({pageIndex:e,rect:t,blob:r})=>{o({pageIndex:e,rect:t,blob:r});const i=URL.createObjectURL(r);u.current=i,a(i),n(!0)}))}),[e]);return f(D,null,f(ji,{open:t,onClose:c,title:"Capture PDF Area"},f("div",{className:"space-y-6"},f("div",{className:"flex justify-center"},i&&f("img",{src:i,onLoad:()=>{u.current&&(URL.revokeObjectURL(u.current),u.current=null)},alt:"Captured PDF area",style:{maxWidth:"100%",maxHeight:"400px",border:"1px solid #e5e7eb",borderRadius:"4px",display:"block"}})),f("div",{className:"flex justify-end space-x-3 border-t border-gray-200 pt-4"},f(Xn,{onClick:c,className:"rounded-md border border-gray-300 bg-white px-4 py-2 text-sm text-gray-700 hover:bg-gray-50"},"Cancel"),f(Xn,{onClick:()=>{if(!r||!d.current)return;const e=URL.createObjectURL(r.blob);l(e),d.current.href=e,d.current.download=`pdf-capture-page-${r.pageIndex+1}.png`,d.current.click(),c()},disabled:!r,className:"rounded-md border border-transparent bg-blue-600 px-4 py-2 text-sm text-white hover:!bg-blue-700 disabled:cursor-not-allowed disabled:opacity-50"},"Download")))),f("a",{ref:d,style:{display:"none"},href:"",download:""}))}const Fl=()=>{const{provides:e}=function(){const{provides:e}=Co(),[t,n]=oe(So);return ie((()=>{if(e)return e.onStateChange((e=>{n(e)}))}),[e]),{provides:e,state:t}}(),[t,n]=oe({show:!1,mode:null,isAnimating:!1});ie((()=>{if(e)return e.onModeChange((({activeMode:e})=>{if("marqueeZoom"===e||"marqueeCapture"===e){n({show:!0,mode:e,isAnimating:!0});const t=setTimeout((()=>{n((e=>({...e,show:!1})))}),3e3);return()=>clearTimeout(t)}n({show:!1,mode:null,isAnimating:!1})}))}),[e]);if(!t.show&&!t.isAnimating)return null;const r="marqueeZoom"===t.mode?"Drag to select area to zoom":"Drag to select area to capture",o="marqueeZoom"===t.mode?"rgba(33,150,243,0.8)":"rgba(76,175,80,0.8)";return f("div",{className:"hint-overlay "+(t.show?"hint-show":"hint-hide"),onAnimationEnd:()=>{t.show||n((e=>({...e,isAnimating:!1,mode:null})))},style:{position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"20px"}},f("div",{className:"hint-text",style:{background:"rgba(0, 0, 0, 0.8)",color:"white",padding:"12px 20px",borderRadius:"8px",fontSize:"14px",fontWeight:"500",textAlign:"center",maxWidth:"250px"}},r),f("div",{className:"drag-demo",style:{position:"relative",width:"150px",height:"100px"}},f("div",{style:{position:"absolute",top:"20px",left:"20px",width:"110px",height:"60px",border:`2px dashed ${o}`,borderRadius:"4px",opacity:.6}}),f("div",{className:"animated-rect",style:{position:"absolute",top:"20px",left:"20px",border:`2px solid ${o}`,backgroundColor:`${o.replace("0.8","0.15")}`,borderRadius:"4px"}}),f("div",{className:"cursor-demo",style:{position:"absolute",width:"20px",height:"20px"}},f("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},f("path",{d:"M3.5 2.5L16.5 10L10 11.5L7.5 16.5L3.5 2.5Z",fill:"rgba(0,0,0,0.3)",transform:"translate(1,1)"}),f("path",{d:"M3 2L16 10L10 11.5L7.5 16L3 2Z",fill:"white",stroke:"black",strokeWidth:"1"}),f("path",{d:"M4 3.5L13.5 9.5L9.5 10.5L7.5 14L4 3.5Z",fill:"rgba(255,255,255,0.8)"})))),f("style",{jsx:!0},"\n        .hint-overlay {\n          animation-duration: 0.3s;\n          animation-fill-mode: both;\n        }\n\n        .hint-show {\n          animation-name: hintFadeIn;\n        }\n\n        .hint-hide {\n          animation-name: hintFadeOut;\n        }\n\n        @keyframes hintFadeIn {\n          from {\n            opacity: 0;\n            transform: translateY(10px);\n          }\n          to {\n            opacity: 1;\n            transform: translateY(0);\n          }\n        }\n\n        @keyframes hintFadeOut {\n          from {\n            opacity: 1;\n            transform: translateY(0);\n          }\n          to {\n            opacity: 0;\n            transform: translateY(-10px);\n          }\n        }\n\n        .animated-rect {\n          animation: rectGrow 2s ease-in-out infinite;\n        }\n\n        @keyframes rectGrow {\n          0% {\n            width: 0;\n            height: 0;\n          }\n          50% {\n            width: 110px;\n            height: 60px;\n          }\n          100% {\n            width: 110px;\n            height: 60px;\n            opacity: 0.7;\n          }\n        }\n\n        .cursor-demo {\n          animation: cursorMove 2s ease-in-out infinite;\n        }\n\n        @keyframes cursorMove {\n          0% {\n            top: 20px;\n            left: 20px;\n          }\n          50% {\n            top: 50px;\n            left: 80px;\n          }\n          100% {\n            top: 80px;\n            left: 130px;\n          }\n        }\n\n        .hint-text {\n          animation: textPulse 0.6s ease-in-out;\n        }\n\n        @keyframes textPulse {\n          0% {\n            transform: scale(0.9);\n          }\n          50% {\n            transform: scale(1.05);\n          }\n          100% {\n            transform: scale(1);\n          }\n        }\n      "))},pl={viewportGap:10},_l={strategy:Zt.Vertical},bl={defaultZoomLevel:co.FitPage},fl={defaultSpreadMode:cn.None},Pl={defaultRotation:be.Degree0},Dl={tileSize:768,overlapPx:2.5,extraRings:0},vl={width:150,gap:10,buffer:3,labelHeight:30},yl={batchSize:3};const wl={menuCtr:{id:"menuCtr",icon:"menu",label:"Menu",type:"menu",children:["openFile","download","enterFS","screenshot","print"],active:e=>"menuCtr"===e.plugins.ui.commandMenu.commandMenu.activeCommand},download:{id:"download",icon:"download",label:"Download",type:"action",action:e=>{const t=e.getPlugin(Zs)?.provides();t&&t.download()}},openFile:{id:"openFile",icon:"fileImport",label:"Open PDF",type:"action",action:e=>{const t=e.getPlugin(yn)?.provides();t&&t.openFileDialog()}},enterFS:{id:"enterFS",icon:e=>e.plugins.fullscreen.isFullscreen?"fullscreenExit":"fullscreen",label:e=>e.plugins.fullscreen.isFullscreen?"Exit full screen":"Enter full screen",type:"action",action:e=>{const t=e.getPlugin(Vs)?.provides();t&&(t.isFullscreen()?t.exitFullscreen():t.enableFullscreen())}},screenshot:{id:"screenshot",icon:"screenshot",label:"Screenshot",type:"action",action:e=>{const t=e.getPlugin(nl)?.provides();t&&(t.isMarqueeCaptureActive()?t.disableMarqueeCapture():t.enableMarqueeCapture())},active:e=>"marqueeCapture"===e.plugins[Ao].activeMode},save:{id:"save",icon:"save",label:"Save",type:"action",action:()=>{console.log("save")}},print:{id:"print",icon:"print",label:"Print",type:"action",action:(e,t)=>{const n=e.getPlugin($n)?.provides();n&&n.updateComponentState({componentType:"floating",componentId:"printModal",patch:{open:!0}})}},settings:{id:"settings",icon:"settings",label:"Settings",dividerBefore:!0,type:"action",action:()=>{console.log("settings")}},viewCtr:{id:"viewCtr",icon:"viewSettings",label:"View controls",type:"menu",children:["pageOrientation","scrollLayout","pageLayout","enterFS"],active:e=>"viewCtr"===e.plugins.ui.commandMenu.commandMenu.activeCommand},pageOrientation:{id:"pageOrientation",label:"Page orientation",type:"group",children:["rotateClockwise","rotateCounterClockwise"]},rotateClockwise:{id:"rotateClockwise",label:"Rotate clockwise",icon:"rotateClockwise",type:"action",action:e=>{const t=e.getPlugin(ys)?.provides();t&&t.rotateForward()}},rotateCounterClockwise:{id:"rotateCounterClockwise",label:"Rotate counter clockwise",icon:"rotateCounterClockwise",type:"action",action:e=>{const t=e.getPlugin(ys)?.provides();t&&t.rotateBackward()}},scrollLayout:{id:"scrollLayout",label:"Scroll layout",type:"group",children:["vertical","horizontal"]},vertical:{id:"vertical",label:"Vertical",icon:"vertical",type:"action",active:e=>e.plugins.scroll.strategy===Zt.Vertical,action:e=>{const t=e.getPlugin(an)?.provides();t&&t.setScrollStrategy(Zt.Vertical)}},horizontal:{id:"horizontal",label:"Horizontal",icon:"horizontal",type:"action",active:e=>e.plugins.scroll.strategy===Zt.Horizontal,action:e=>{const t=e.getPlugin(an)?.provides();t&&t.setScrollStrategy(Zt.Horizontal)}},pageLayout:{id:"pageLayout",label:"Page layout",type:"group",children:["singlePage","doublePage","coverFacingPage"]},singlePage:{id:"singlePage",label:"Single page",icon:"singlePage",type:"action",disabled:e=>e.plugins.scroll.strategy===Zt.Horizontal,active:e=>e.plugins.spread.spreadMode===cn.None,action:e=>{const t=e.getPlugin(Fn)?.provides();t&&t.setSpreadMode(cn.None)}},doublePage:{id:"doublePage",label:"Double page",icon:"book",type:"action",disabled:e=>e.plugins.scroll.strategy===Zt.Horizontal,active:e=>e.plugins.spread.spreadMode===cn.Odd,action:e=>{const t=e.getPlugin(Fn)?.provides();t&&t.setSpreadMode(cn.Odd)}},coverFacingPage:{id:"coverFacingPage",label:"Cover facing page",icon:"book2",type:"action",disabled:e=>e.plugins.scroll.strategy===Zt.Horizontal,active:e=>e.plugins.spread.spreadMode===cn.Even,action:e=>{const t=e.getPlugin(Fn)?.provides();t&&t.setSpreadMode(cn.Even)}},leftAction:{id:"leftAction",label:"Left action",type:"menu",icon:"dots",children:["viewCtr","zoom"],active:e=>"leftAction"===e.plugins.ui.commandMenu.commandMenu.activeCommand||"zoom"===e.plugins.ui.commandMenu.commandMenu.activeCommand||"changeZoomLevel"===e.plugins.ui.commandMenu.commandMenu.activeCommand||"viewCtr"===e.plugins.ui.commandMenu.commandMenu.activeCommand},zoom:{id:"zoom",icon:"zoomIn",label:"Zoom Controls",type:"menu",children:["changeZoomLevel","zoomIn","zoomOut","fitToWidth","fitToPage","zoomInArea"],active:e=>"zoom"===e.plugins.ui.commandMenu.commandMenu.activeCommand},zoomInArea:{id:"zoomInArea",label:"Zoom in area",icon:"zoomInArea",type:"action",dividerBefore:!0,action:e=>{const t=e.getPlugin(mo)?.provides();t&&(t.isMarqueeZoomActive()?t.disableMarqueeZoom():t.enableMarqueeZoom())},active:e=>"marqueeZoom"===e.plugins[Ao].activeMode},changeZoomLevel:{id:"changeZoomLevel",label:e=>`Zoom level (${(100*e.plugins.zoom.currentZoomLevel).toFixed(0)}%)`,type:"menu",children:["zoom25","zoom50","zoom100","zoom125","zoom150","zoom200","zoom400","zoom800","zoom1600"],active:e=>"changeZoomLevel"===e.plugins.ui.commandMenu.commandMenu.activeCommand},zoom25:{id:"zoom25",label:"25%",type:"action",active:e=>.25===e.plugins.zoom.currentZoomLevel,action:e=>{const t=e.getPlugin(mo)?.provides();t&&t.requestZoom(.25)}},zoom50:{id:"zoom50",label:"50%",type:"action",active:e=>.5===e.plugins.zoom.currentZoomLevel,action:e=>{const t=e.getPlugin(mo)?.provides();t&&t.requestZoom(.5)}},zoom100:{id:"zoom100",label:"100%",type:"action",active:e=>1===e.plugins.zoom.currentZoomLevel,action:e=>{const t=e.getPlugin(mo)?.provides();t&&t.requestZoom(1)}},zoom125:{id:"zoom125",label:"125%",type:"action",active:e=>1.25===e.plugins.zoom.currentZoomLevel,action:e=>{const t=e.getPlugin(mo)?.provides();t&&t.requestZoom(1.25)}},zoom150:{id:"zoom150",label:"150%",type:"action",active:e=>1.5===e.plugins.zoom.currentZoomLevel,action:e=>{const t=e.getPlugin(mo)?.provides();t&&t.requestZoom(1.5)}},zoom200:{id:"zoom200",label:"200%",type:"action",active:e=>2===e.plugins.zoom.currentZoomLevel,action:e=>{const t=e.getPlugin(mo)?.provides();t&&t.requestZoom(2)}},zoom400:{id:"zoom400",label:"400%",type:"action",active:e=>4===e.plugins.zoom.currentZoomLevel,action:e=>{const t=e.getPlugin(mo)?.provides();t&&t.requestZoom(4)}},zoom800:{id:"zoom800",label:"800%",type:"action",active:e=>8===e.plugins.zoom.currentZoomLevel,action:e=>{const t=e.getPlugin(mo)?.provides();t&&t.requestZoom(8)}},zoom1600:{id:"zoom1600",label:"1600%",type:"action",active:e=>16===e.plugins.zoom.currentZoomLevel,action:e=>{const t=e.getPlugin(mo)?.provides();t&&t.requestZoom(16)}},zoomIn:{id:"zoomIn",label:"Zoom in",icon:"zoomIn",type:"action",action:e=>{const t=e.getPlugin(mo)?.provides();t&&t.zoomIn()}},zoomOut:{id:"zoomOut",label:"Zoom out",icon:"zoomOut",type:"action",action:e=>{const t=e.getPlugin(mo)?.provides();t&&t.zoomOut()}},search:{id:"search",label:"Search",icon:"search",type:"action",action:e=>{const t=e.getPlugin($n)?.provides();t&&t.togglePanel({id:"rightPanel",visibleChild:"search"})},active:e=>!0===e.plugins.ui.panel.rightPanel.open&&"search"===e.plugins.ui.panel.rightPanel.visibleChild},comment:{id:"comment",label:"Comment",icon:"comment",type:"action",action:e=>{const t=e.getPlugin($n)?.provides();t&&t.togglePanel({id:"rightPanel",visibleChild:"comment"})},active:e=>!0===e.plugins.ui.panel.rightPanel.open&&"comment"===e.plugins.ui.panel.rightPanel.visibleChild},fitToWidth:{id:"fitToWidth",label:"Fit to width",icon:"fitToWidth",type:"action",active:e=>e.plugins.zoom.zoomLevel===co.FitWidth,action:e=>{const t=e.getPlugin(mo)?.provides();t&&t.requestZoom(co.FitWidth)}},fitToPage:{id:"fitToPage",label:"Fit to page",icon:"fitToPage",type:"action",active:e=>e.plugins.zoom.zoomLevel===co.FitPage,action:e=>{const t=e.getPlugin(mo)?.provides();t&&t.requestZoom(co.FitPage)}},sidebar:{id:"sidebar",label:"Sidebar",icon:"sidebar",type:"action",action:(e,t)=>{const n=e.getPlugin($n)?.provides();n&&n.togglePanel({id:"leftPanel",visibleChild:"leftPanelMain",open:!0!==t.plugins.ui.panel.leftPanel.open||"leftPanelMain"!==t.plugins.ui.panel.leftPanel.visibleChild})},active:e=>!0===e.plugins.ui.panel.leftPanel.open&&"leftPanelMain"===e.plugins.ui.panel.leftPanel.visibleChild},sidebarMenu:{id:"sidebarMenu",label:"Sidebar Menu",type:"menu",children:["thumbnails","outline"]},thumbnails:{id:"thumbnails",label:"Thumbnails",icon:"squares",type:"action",action:e=>{const t=e.getPlugin($n)?.provides();t&&(t.togglePanel({id:"leftPanel",visibleChild:"leftPanelMain",open:!0}),t.updateComponentState({componentType:"custom",componentId:"leftPanelMain",patch:{visibleChild:"thumbnails"}}))},active:e=>"thumbnails"===e.plugins.ui.custom.leftPanelMain.visibleChild},outline:{id:"outline",label:"Outline",icon:"listTree",type:"action",action:e=>{const t=e.getPlugin($n)?.provides();t&&(t.togglePanel({id:"leftPanel",visibleChild:"leftPanelMain",open:!0}),t.updateComponentState({componentType:"custom",componentId:"leftPanelMain",patch:{visibleChild:"outline"}}))},active:e=>"outline"===e.plugins.ui.custom.leftPanelMain.visibleChild},attachments:{id:"attachments",label:"Attachments",icon:"paperclip",type:"action",action:e=>{const t=e.getPlugin($n)?.provides();t&&(t.togglePanel({id:"leftPanel",visibleChild:"leftPanelMain",open:!0}),t.updateComponentState({componentType:"custom",componentId:"leftPanelMain",patch:{visibleChild:"attachments"}}))},active:e=>"attachments"===e.plugins.ui.custom.leftPanelMain.visibleChild},view:{id:"view",label:"View",type:"action",action:e=>{const t=e.getPlugin($n)?.provides(),n=e.getPlugin(aa)?.provides();t&&(t.setHeaderVisible({id:"toolsHeader",visible:!1}),n?.setActiveVariant(null))},active:e=>!1===e.plugins.ui.header.toolsHeader.visible},annotate:{id:"annotate",label:"Annotate",type:"action",action:e=>{const t=e.getPlugin($n)?.provides();t&&t.setHeaderVisible({id:"toolsHeader",visible:!0,visibleChild:"annotationTools"})},active:e=>!0===e.plugins.ui.header.toolsHeader.visible&&"annotationTools"===e.plugins.ui.header.toolsHeader.visibleChild},shapes:{id:"shapes",label:"Shapes",type:"action",action:e=>{const t=e.getPlugin($n)?.provides();t&&t.setHeaderVisible({id:"toolsHeader",visible:!0,visibleChild:"shapeTools"})},active:e=>!0===e.plugins.ui.header.toolsHeader.visible&&"shapeTools"===e.plugins.ui.header.toolsHeader.visibleChild},fillAndSign:{id:"fillAndSign",label:"Fill and Sign",type:"action",action:e=>{const t=e.getPlugin($n)?.provides();t&&t.setHeaderVisible({id:"toolsHeader",visible:!0,visibleChild:"fillAndSignTools"})},active:e=>!0===e.plugins.ui.header.toolsHeader.visible&&"fillAndSignTools"===e.plugins.ui.header.toolsHeader.visibleChild},form:{id:"form",label:"Form",type:"action",action:e=>{const t=e.getPlugin($n)?.provides();t&&t.setHeaderVisible({id:"toolsHeader",visible:!0,visibleChild:"formTools"})},active:e=>!0===e.plugins.ui.header.toolsHeader.visible&&"formTools"===e.plugins.ui.header.toolsHeader.visibleChild},tabOverflow:{id:"tabOverflow",label:"More",icon:"dots",type:"menu",children:["view","annotate"],active:e=>"tabOverflow"===e.plugins.ui.commandMenu.commandMenu.activeCommand},nextPage:{id:"nextPage",label:"Next page",icon:"chevronRight",shortcut:"ArrowRight",shortcutLabel:"Arrow Right",type:"action",action:e=>{const t=e.getPlugin(an)?.provides();t&&t.scrollToNextPage()}},previousPage:{id:"previousPage",label:"Previous page",icon:"chevronLeft",type:"action",shortcut:"ArrowLeft",shortcutLabel:"Arrow Left",action:e=>{const t=e.getPlugin(an)?.provides();t&&t.scrollToPreviousPage()}},copy:{id:"copy",label:"Copy",icon:"copy",type:"action",shortcut:"Meta+C",shortcutLabel:"Cmd+C",action:e=>{const t=e.getPlugin(di)?.provides();t&&(t.copyToClipboard(),t.clear())}},underline:{id:"underline",label:"Underline",type:"action",icon:"underline",action:(e,t)=>{const n=e.getPlugin(aa)?.provides();n&&(t.plugins.annotation.activeVariant===Ta(He.UNDERLINE)?n.setActiveVariant(null):n.setActiveVariant(Ta(He.UNDERLINE)))},active:e=>e.plugins.annotation.activeVariant===Ta(He.UNDERLINE)},squiggly:{id:"squiggly",label:"Squiggly",type:"action",icon:"squiggly",action:(e,t)=>{const n=e.getPlugin(aa)?.provides();n&&(t.plugins.annotation.activeVariant===Ta(He.SQUIGGLY)?n.setActiveVariant(null):n.setActiveVariant(Ta(He.SQUIGGLY)))},active:e=>e.plugins.annotation.activeVariant===Ta(He.SQUIGGLY)},strikethrough:{id:"strikethrough",label:"Strikethrough",type:"action",icon:"strikethrough",action:(e,t)=>{const n=e.getPlugin(aa)?.provides();n&&(t.plugins.annotation.activeVariant===Ta(He.STRIKEOUT)?n.setActiveVariant(null):n.setActiveVariant(Ta(He.STRIKEOUT)))},active:e=>e.plugins.annotation.activeVariant===Ta(He.STRIKEOUT)},highlight:{id:"highlight",label:"Highlight",type:"action",icon:"highlight",action:(e,t)=>{const n=e.getPlugin(aa)?.provides();n&&(t.plugins.annotation.activeVariant===Ta(He.HIGHLIGHT)?n.setActiveVariant(null):n.setActiveVariant(Ta(He.HIGHLIGHT)))},active:e=>e.plugins.annotation.activeVariant===Ta(He.HIGHLIGHT)},freehand:{id:"freehand",label:"Freehand",type:"action",icon:"pencilMarker",action:(e,t)=>{const n=e.getPlugin(aa)?.provides();n&&(console.log(t.plugins.annotation.activeVariant),t.plugins.annotation.activeVariant===Ta(He.INK)?n.setActiveVariant(null):(n.deselectAnnotation(),n.setActiveVariant(Ta(He.INK))))},active:e=>e.plugins.annotation.activeVariant===Ta(He.INK)},squigglySelection:{id:"squigglySelection",label:"Squiggly Selection",type:"action",icon:"squiggly",action:e=>{const t=e.getPlugin(aa)?.provides(),n=e.getPlugin(di)?.provides();if(!n||!t)return;const r=t.getToolDefaults(Ta(He.SQUIGGLY)),o=n.getFormattedSelection();for(const e of o)t.createAnnotation(e.pageIndex,{id:Date.now()+Math.random(),type:He.SQUIGGLY,color:r.color,opacity:r.opacity,pageIndex:e.pageIndex,rect:e.rect,segmentRects:e.segmentRects});n.clear()}},underlineSelection:{id:"underlineSelection",label:"Underline Selection",type:"action",icon:"underline",action:e=>{const t=e.getPlugin(aa)?.provides(),n=e.getPlugin(di)?.provides();if(!n||!t)return;const r=t.getToolDefaults(Ta(He.UNDERLINE)),o=n.getFormattedSelection();for(const e of o)t.createAnnotation(e.pageIndex,{id:Date.now()+Math.random(),type:He.UNDERLINE,color:r.color,opacity:r.opacity,pageIndex:e.pageIndex,rect:e.rect,segmentRects:e.segmentRects});n.clear()}},strikethroughSelection:{id:"strikethroughSelection",label:"Strikethrough Selection",type:"action",icon:"strikethrough",action:e=>{const t=e.getPlugin(aa)?.provides(),n=e.getPlugin(di)?.provides();if(!n||!t)return;const r=t.getToolDefaults(Ta(He.STRIKEOUT)),o=n.getFormattedSelection();for(const e of o)t.createAnnotation(e.pageIndex,{id:Date.now()+Math.random(),type:He.STRIKEOUT,color:r.color,opacity:r.opacity,pageIndex:e.pageIndex,rect:e.rect,segmentRects:e.segmentRects});n.clear()}},highlightSelection:{id:"highlightSelection",label:"Highlight Selection",type:"action",icon:"highlight",action:e=>{const t=e.getPlugin(aa)?.provides(),n=e.getPlugin(di)?.provides();if(!n||!t)return;const r=t.getToolDefaults(Ta(He.HIGHLIGHT)),o=n.getFormattedSelection();for(const e of o)t.createAnnotation(e.pageIndex,{id:Date.now()+Math.random(),type:He.HIGHLIGHT,color:r.color,opacity:r.opacity,pageIndex:e.pageIndex,rect:e.rect,segmentRects:e.segmentRects});n.clear()}},styleAnnotation:{id:"styleAnnotation",label:"Style",type:"action",icon:"palette",action:(e,t)=>{const n=e.getPlugin($n)?.provides();n&&n.togglePanel({id:"leftPanel",visibleChild:"leftPanelAnnotationStyle",open:!0!==t.plugins.ui.panel.leftPanel.open||"leftPanelAnnotationStyle"!==t.plugins.ui.panel.leftPanel.visibleChild})},active:e=>!0===e.plugins.ui.panel.leftPanel.open&&"leftPanelAnnotationStyle"===e.plugins.ui.panel.leftPanel.visibleChild},deleteAnnotation:{id:"deleteAnnotation",label:"Delete",type:"action",icon:"trash",action:e=>{const t=e.getPlugin(aa)?.provides();if(!t)return;const n=t.getSelectedAnnotation();n&&t.deleteAnnotation(n.object.pageIndex,n.localId)}},panMode:{id:"panMode",label:"Pan",type:"action",icon:"hand",action:e=>{const t=e.getPlugin(Ao)?.provides();t&&("panMode"===t.getActiveMode()?t.activate("default"):t.activate("panMode"))},active:e=>"panMode"===e.plugins[Ao].activeMode},undo:{id:"undo",label:"Undo",type:"action",icon:"arrowBackUp",action:e=>{const t=e.getPlugin(ll)?.provides();t&&t.undo()},disabled:e=>!e.plugins[ll].global.canUndo},redo:{id:"redo",label:"Redo",type:"action",icon:"arrowForwardUp",action:e=>{const t=e.getPlugin(ll)?.provides();t&&t.redo()},disabled:e=>!e.plugins[ll].global.canRedo},commitAnnotations:{id:"commitAnnotations",label:"Commit",type:"action",icon:"deviceFloppy",action:e=>{const t=e.getPlugin(aa)?.provides();t&&t.commit()}}},xl={menuButton:{type:"iconButton",id:"menuButton",props:{commandId:"menuCtr",active:!1,label:"Menu"},mapStateToProps:(e,t)=>({...t,active:Rn(wl.menuCtr,e)})},deleteAnnotationButton:{type:"iconButton",id:"deleteAnnotationButton",props:{commandId:"deleteAnnotation",active:!1,label:"Delete"}},styleButton:{type:"iconButton",id:"styleButton",props:{commandId:"styleAnnotation",active:!1,label:"Style"},mapStateToProps:(e,t)=>({...t,active:Rn(wl.styleAnnotation,e)})},undoButton:{type:"iconButton",id:"undoButton",props:{commandId:"undo",disabled:!1,label:"Undo"},mapStateToProps:(e,t)=>({...t,disabled:Ln(wl.undo,e)})},redoButton:{type:"iconButton",id:"redoButton",props:{commandId:"redo",disabled:!1,label:"Redo"},mapStateToProps:(e,t)=>({...t,disabled:Ln(wl.redo,e)})},commitAnnotationsButton:{type:"iconButton",id:"commitAnnotationsButton",props:{commandId:"commitAnnotations",active:!1,label:"Commit"}},copyButton:{type:"iconButton",id:"copyButton",props:{commandId:"copy",active:!1,label:"Copy"},mapStateToProps:(e,t)=>({...t,active:Rn(wl.copy,e)})},panModeButton:{type:"iconButton",id:"panModeButton",props:{commandId:"panMode",active:!1,label:"Pan"},mapStateToProps:(e,t)=>({...t,active:Rn(wl.panMode,e)})},underlineButton:{type:"iconButton",id:"underlineButton",props:{commandId:"underline",active:!1,label:"Underline",color:"#e44234"},mapStateToProps:(e,t)=>({...t,active:Rn(wl.underline,e),color:e.plugins.annotation.toolDefaults[Ta(He.UNDERLINE)].color})},squigglyButton:{type:"iconButton",id:"squigglyButton",props:{commandId:"squiggly",active:!1,label:"Squiggly",color:"#e44234"},mapStateToProps:(e,t)=>({...t,active:Rn(wl.squiggly,e),color:e.plugins.annotation.toolDefaults[Ta(He.SQUIGGLY)].color})},strikethroughButton:{type:"iconButton",id:"strikethroughButton",props:{commandId:"strikethrough",active:!1,label:"Strikethrough",color:"#e44234"},mapStateToProps:(e,t)=>({...t,active:Rn(wl.strikethrough,e),color:e.plugins.annotation.toolDefaults[Ta(He.STRIKEOUT)].color})},highlightButton:{type:"iconButton",id:"highlightButton",props:{commandId:"highlight",active:!1,label:"Highlight",color:"#ffcd45"},mapStateToProps:(e,t)=>({...t,active:Rn(wl.highlight,e),color:e.plugins.annotation.toolDefaults[Ta(He.HIGHLIGHT)].color})},freehandButton:{type:"iconButton",id:"freehandButton",props:{commandId:"freehand",active:!1,label:"Freehand",color:"#e44234"},mapStateToProps:(e,t)=>({...t,active:Rn(wl.freehand,e),color:e.plugins.annotation.toolDefaults[Ta(He.INK)].color})},highlightSelectionButton:{type:"iconButton",id:"highlightSelectionButton",props:{commandId:"highlightSelection",color:"#ffcd45"},mapStateToProps:(e,t)=>({...t,color:e.plugins.annotation.toolDefaults[Ta(He.HIGHLIGHT)].color})},underlineSelectionButton:{type:"iconButton",id:"underlineSelectionButton",props:{commandId:"underlineSelection",color:"#e44234"},mapStateToProps:(e,t)=>({...t,color:e.plugins.annotation.toolDefaults[Ta(He.UNDERLINE)].color})},strikethroughSelectionButton:{type:"iconButton",id:"strikethroughSelectionButton",props:{commandId:"strikethroughSelection",color:"#e44234"},mapStateToProps:(e,t)=>({...t,color:e.plugins.annotation.toolDefaults[Ta(He.STRIKEOUT)].color})},squigglySelectionButton:{type:"iconButton",id:"squigglySelectionButton",props:{commandId:"squigglySelection",color:"#e44234"},mapStateToProps:(e,t)=>({...t,color:e.plugins.annotation.toolDefaults[Ta(He.SQUIGGLY)].color})},viewCtrButton:{type:"iconButton",id:"viewCtrButton",props:{commandId:"viewCtr",active:!1,label:"View settings"},mapStateToProps:(e,t)=>({...t,active:Rn(wl.viewCtr,e)})},commentButton:{type:"iconButton",id:"commentButton",props:{active:!1,commandId:"comment",label:"Comment"},mapStateToProps:(e,t)=>({...t,active:Rn(wl.comment,e)})},searchButton:{type:"iconButton",id:"searchButton",props:{active:!1,commandId:"search",label:"Search"},mapStateToProps:(e,t)=>({...t,active:Rn(wl.search,e)})},filePickerButton:{type:"iconButton",id:"filePickerButton",props:{label:"Open File",img:"data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiAgd2lkdGg9IjI0IiAgaGVpZ2h0PSIyNCIgIHZpZXdCb3g9IjAgMCAyNCAyNCIgIGZpbGw9Im5vbmUiICBzdHJva2U9IiMzNDNhNDAiICBzdHJva2Utd2lkdGg9IjIiICBzdHJva2UtbGluZWNhcD0icm91bmQiICBzdHJva2UtbGluZWpvaW49InJvdW5kIiAgY2xhc3M9Imljb24gaWNvbi10YWJsZXIgaWNvbi10YWJsZXItb3V0bGluZSBpY29uLXRhYmxlci1maWxlLWltcG9ydCI+PHBhdGggc3Ryb2tlPSJub25lIiBkPSJNIDAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPjxwYXRoIGQ9Ik0xNCAzdjRhMSAxIDAgMCAwIDEgMWg0IiAvPjxwYXRoIGQ9Ik01IDEzdi04YTIgMiAwIDAgMSAyIC0yaDdsNSA1djExYTIgMiAwIDAgMSAtMiAyaC01LjVtLTkuNSAtMmg3bS0zIC0zbDMgM2wtMyAzIiAvPjwvc3ZnPg=="}},downloadButton:{type:"iconButton",id:"downloadButton",props:{label:"Download",img:"data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiAgd2lkdGg9IjI0IiAgaGVpZ2h0PSIyNCIgIHZpZXdCb3g9IjAgMCAyNCAyNCIgIGZpbGw9Im5vbmUiICBzdHJva2U9IiMzNDNhNDAiICBzdHJva2Utd2lkdGg9IjIiICBzdHJva2UtbGluZWNhcD0icm91bmQiICBzdHJva2UtbGluZWpvaW49InJvdW5kIiAgY2xhc3M9Imljb24gaWNvbi10YWJsZXIgaWNvbnMtdGFibGVyLW91dGxpbmUgaWNvbi10YWJsZXItZG93bmxvYWQiPjxwYXRoIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPjxwYXRoIGQ9Ik00IDE3djJhMiAyIDAgMCAwIDIgMmgxMmEyIDIgMCAwIDAgMiAtMnYtMiIgLz48cGF0aCBkPSJNNyAxMWw1IDVsNSAtNSIgLz48cGF0aCBkPSJNMTIgNGwwIDEyIiAvPjwvc3ZnPg=="}},zoomButton:{type:"iconButton",id:"zoomButton",props:{commandId:"zoom",label:"Zoom",img:"data:image/svg+xml;base64,PHN2ZyAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiAgd2lkdGg9IjI0IiAgaGVpZ2h0PSIyNCIgIHZpZXdCb3g9IjAgMCAyNCAyNCIgIGZpbGw9Im5vbmUiICBzdHJva2U9IiMzNDNhNDAiICBzdHJva2Utd2lkdGg9IjIiICBzdHJva2UtbGluZWNhcD0icm91bmQiICBzdHJva2UtbGluZWpvaW49InJvdW5kIiAgY2xhc3M9Imljb24gaWNvbi10YWJsZXIgaWNvbnMtdGFibGVyLW91dGxpbmUgaWNvbi10YWJsZXItY2lyY2xlLXBsdXMiPjxwYXRoIHN0cm9rZT0ibm9uZSIgZD0iTTAgMGgyNHYyNEgweiIgZmlsbD0ibm9uZSIvPjxwYXRoIGQ9Ik0zIDEyYTkgOSAwIDEgMCAxOCAwYTkgOSAwIDAgMCAtMTggMCIgLz48cGF0aCBkPSJNOSAxMmg2IiAvPjxwYXRoIGQ9Ik0xMiA5djYiIC8+PC9zdmc+"},mapStateToProps:(e,t)=>({...t,active:Rn(wl.zoom,e)||Rn(wl.changeZoomLevel,e)})},sidebarButton:{type:"iconButton",id:"sidebarButton",props:{commandId:"sidebar",label:"Sidebar",active:!1},mapStateToProps:(e,t)=>({...t,active:Rn(wl.sidebar,e)})},divider1:{type:"divider",id:"divider1"},expandLeftActionsButton:{type:"iconButton",id:"expandLeftActionsButton",props:{commandId:"leftAction",label:"Left Panel Actions"},mapStateToProps:(e,t)=>({...t,active:Rn(wl.leftAction,e)})},headerStart:{id:"headerStart",type:"groupedItems",slots:[{componentId:"menuButton",priority:0},{componentId:"divider1",priority:1,className:"flex"},{componentId:"sidebarButton",priority:2},{componentId:"expandLeftActionsButton",priority:3,className:"@min-[400px]:hidden"},{componentId:"viewCtrButton",priority:4,className:"hidden @min-[400px]:block"},{componentId:"divider1",priority:6,className:"hidden @min-[400px]:flex"},{componentId:"zoomButton",priority:7,className:"hidden @min-[400px]:block @min-[600px]:hidden"},{componentId:"zoom",priority:8,className:"hidden @min-[600px]:block"},{componentId:"divider1",priority:9,className:"hidden @min-[600px]:flex"},{componentId:"panModeButton",priority:10,className:"hidden @min-[600px]:block"}],props:{gap:10}},viewTab:{type:"tabButton",id:"viewTab",props:{label:"View",commandId:"view",active:!1},mapStateToProps:(e,t)=>({...t,active:Rn(wl.view,e)})},annotateTab:{type:"tabButton",id:"annotateTab",props:{label:"Annotate",commandId:"annotate",active:!1},mapStateToProps:(e,t)=>({...t,active:Rn(wl.annotate,e)})},shapesTab:{type:"tabButton",id:"shapesTab",props:{label:"Shapes",commandId:"shapes",active:!1},mapStateToProps:(e,t)=>({...t,active:Rn(wl.shapes,e)})},fillAndSignTab:{type:"tabButton",id:"fillAndSignTab",props:{label:"Fill and Sign",commandId:"fillAndSign",active:!1},mapStateToProps:(e,t)=>({...t,active:Rn(wl.fillAndSign,e)})},formTab:{type:"tabButton",id:"formTab",props:{label:"Form",commandId:"form",active:!1},mapStateToProps:(e,t)=>({...t,active:Rn(wl.form,e)})},tabOverflowButton:{type:"iconButton",id:"tabOverflowButton",props:{label:"More",commandId:"tabOverflow",active:!1},mapStateToProps:(e,t)=>({...t,active:Rn(wl.tabOverflow,e)})},selectButton:{type:"selectButton",id:"selectButton",props:{menuCommandId:"tabOverflow",commandIds:["view","annotate"],activeCommandId:"view",active:!1},mapStateToProps:(e,t)=>({...t,activeCommandId:t.commandIds.find((t=>Rn(wl[t],e)))??t.commandIds[0],active:Rn(wl.tabOverflow,e)})},headerCenter:{id:"headerCenter",type:"groupedItems",slots:[{componentId:"selectButton",priority:0,className:"block @min-[500px]:hidden"},{componentId:"viewTab",priority:1,className:"hidden @min-[500px]:block"},{componentId:"annotateTab",priority:2,className:"hidden @min-[500px]:block"}],props:{gap:10}},headerEnd:{id:"headerEnd",type:"groupedItems",slots:[{componentId:"searchButton",priority:1}],props:{gap:10}},pageControls:{id:"pageControls",type:"custom",render:"pageControls",initialState:{currentPage:1,pageCount:1},props:e=>({currentPage:e.currentPage,pageCount:e.pageCount,nextPageCommandId:"nextPage",previousPageCommandId:"previousPage"}),mapStateToProps:(e,t)=>({...t,currentPage:e.plugins.scroll.currentPage,pageCount:e.core.document?.pageCount??1})},pageControlsContainer:{id:"pageControlsContainer",type:"floating",props:{scrollerPosition:"outside"},render:"pageControlsContainer",slots:[{componentId:"pageControls",priority:0}]},textSelectionMenuButtons:{id:"textSelectionMenuButtons",type:"groupedItems",slots:[{componentId:"copyButton",priority:0},{componentId:"highlightSelectionButton",priority:1},{componentId:"underlineSelectionButton",priority:2},{componentId:"strikethroughSelectionButton",priority:3},{componentId:"squigglySelectionButton",priority:4}],props:{gap:10}},printModal:{id:"printModal",type:"floating",render:"printModal",initialState:{open:!1},props:e=>({open:e.open,scrollerPosition:"outside"}),mapStateToProps:(e,t)=>({...t,open:e.plugins.ui.floating.printModal.open})},textSelectionMenu:{id:"textSelectionMenu",type:"floating",render:"textSelectionMenu",props:{open:!1,scrollerPosition:"inside"},mapStateToProps:(e,t)=>({...t,isScolling:e.plugins.viewport.isScrolling,scale:e.core.scale,rotation:e.core.rotation,spread:e.plugins[Fn].spreadMode,open:e.plugins[di].active&&!e.plugins[di].selecting}),slots:[{componentId:"textSelectionMenuButtons",priority:0}],getChildContext:{direction:"horizontal"}},annotationSelectionMenuButtons:{id:"annotationSelectionMenuButtons",type:"groupedItems",slots:[{componentId:"deleteAnnotationButton",priority:0},{componentId:"styleButton",priority:1}],props:{gap:10}},annotationSelectionMenu:{id:"annotationSelectionMenu",type:"floating",render:"annotationSelectionMenu",props:{open:!1,scrollerPosition:"inside"},mapStateToProps:(e,t)=>({...t,isScolling:e.plugins.viewport.isScrolling,scale:e.core.scale,rotation:e.core.rotation,selectedUid:e.plugins[aa].selectedUid,open:null!==e.plugins[aa].selectedUid}),slots:[{componentId:"annotationSelectionMenuButtons",priority:0}],getChildContext:{direction:"horizontal"}},topHeader:{type:"header",id:"topHeader",slots:[{componentId:"headerStart",priority:0},{componentId:"headerCenter",priority:1},{componentId:"headerEnd",priority:2}],getChildContext:e=>({direction:"top"===e.placement||"bottom"===e.placement?"horizontal":"vertical"}),props:{placement:"top",style:{backgroundColor:"#ffffff",gap:"10px"}}},annotationTools:{id:"annotationTools",type:"groupedItems",slots:[{componentId:"highlightButton",priority:1},{componentId:"underlineButton",priority:2},{componentId:"strikethroughButton",priority:3},{componentId:"squigglyButton",priority:4},{componentId:"freehandButton",priority:5},{componentId:"divider1",priority:7},{componentId:"styleButton",priority:8},{componentId:"divider1",priority:9},{componentId:"undoButton",priority:10},{componentId:"redoButton",priority:11}],props:{gap:10}},toolsHeader:{type:"header",id:"toolsHeader",initialState:{visible:!1,visibleChild:null},props:e=>({placement:"top",visible:e.visible,visibleChild:e.visibleChild,style:{backgroundColor:"#f1f3f5",justifyContent:"center"}}),mapStateToProps:(e,t)=>({...t,visible:e.plugins.ui.header.toolsHeader.visible,visibleChild:e.plugins.ui.header.toolsHeader.visibleChild}),slots:[{componentId:"annotationTools",priority:0}],getChildContext:e=>({direction:"top"===e.placement||"bottom"===e.placement?"horizontal":"vertical"})},leftPanelAnnotationStyle:{id:"leftPanelAnnotationStyle",type:"custom",render:"leftPanelAnnotationStyle",mapStateToProps:(e,t)=>({...t,selectedAnnotation:Ma(e.plugins[aa]),activeVariant:e.plugins[aa].activeVariant,colorPresets:e.plugins[aa].colorPresets,toolDefaults:e.plugins[aa].toolDefaults})},leftPanelMain:{id:"leftPanelMain",type:"custom",render:"leftPanelMain",initialState:{visibleChild:"thumbnails"},props:e=>({visibleChild:e.visibleChild,tabsCommandId:"sidebarMenu"}),mapStateToProps:(e,t)=>({...t,visibleChild:e.plugins.ui.custom.leftPanelMain.visibleChild}),slots:[{componentId:"thumbnails",priority:0},{componentId:"outline",priority:1},{componentId:"attachments",priority:2}]},leftPanel:{id:"leftPanel",type:"panel",initialState:{open:!1,visibleChild:"leftPanelMain"},props:e=>({open:e.open,visibleChild:e.visibleChild,location:"left"}),mapStateToProps:(e,t)=>({...t,open:e.plugins.ui.panel.leftPanel.open,visibleChild:e.plugins.ui.panel.leftPanel.visibleChild}),slots:[{componentId:"leftPanelMain",priority:0},{componentId:"leftPanelAnnotationStyle",priority:1}]},thumbnails:{id:"thumbnails",type:"custom",render:"thumbnails",mapStateToProps:(e,t)=>({...t,currentPage:e.plugins.scroll.currentPage})},outline:{id:"outline",type:"custom",render:"outline",props:{document:null},mapStateToProps:(e,t)=>({...t,document:e.core.document})},attachments:{id:"attachments",type:"custom",render:"attachments"},search:{id:"search",type:"custom",render:"search",mapStateToProps:(e,t)=>({...t,flags:e.plugins.search.flags,results:e.plugins.search.results,total:e.plugins.search.total,activeResultIndex:e.plugins.search.activeResultIndex,active:e.plugins.search.active,query:e.plugins.search.query,loading:e.plugins.search.loading})},comment:{id:"comment",type:"custom",render:"comment"},commandMenu:{id:"commandMenu",type:"commandMenu",initialState:{open:!1,activeCommand:null,triggerElement:void 0,position:void 0,flatten:!1},props:e=>({open:e.open,activeCommand:e.activeCommand,triggerElement:e.triggerElement,position:e.position,flatten:e.flatten}),mapStateToProps:(e,t)=>({...t,open:e.plugins.ui.commandMenu.commandMenu.open,activeCommand:e.plugins.ui.commandMenu.commandMenu.activeCommand,triggerElement:e.plugins.ui.commandMenu.commandMenu.triggerElement,position:e.plugins.ui.commandMenu.commandMenu.position,flatten:e.plugins.ui.commandMenu.commandMenu.flatten})},zoom:{id:"zoom",type:"custom",render:"zoom",initialState:{zoomLevel:1},props:e=>({zoomLevel:e.zoomLevel,commandZoomIn:wl.zoomIn.id,commandZoomOut:wl.zoomOut.id,commandZoomMenu:wl.zoom.id,zoomMenuActive:!1}),mapStateToProps:(e,t)=>({...t,zoomLevel:e.plugins.zoom.currentZoomLevel,zoomMenuActive:Rn(wl.zoom,e)||Rn(wl.changeZoomLevel,e)})},rightPanel:{id:"rightPanel",type:"panel",initialState:{open:!1,visibleChild:null},props:e=>({open:e.open,visibleChild:e.visibleChild,location:"right"}),mapStateToProps:(e,t)=>({...t,open:e.plugins.ui.panel.rightPanel.open,visibleChild:e.plugins.ui.panel.rightPanel.visibleChild}),slots:[{componentId:"search",priority:0},{componentId:"comment",priority:1}]}},Al={enabled:!0,components:xl,menuItems:wl,icons:{menu:{id:"menu",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-menu"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 8l16 0" /><path d="M4 16l16 0" /></svg>'},download:{id:"download",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-download"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2" /><path d="M7 11l5 5l5 -5" /><path d="M12 4l0 12" /></svg>'},fullscreen:{id:"fullscreen",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-maximize"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 8v-2a2 2 0 0 1 2 -2h2" /><path d="M4 16v2a2 2 0 0 0 2 2h2" /><path d="M16 4h2a2 2 0 0 1 2 2v2" /><path d="M16 20h2a2 2 0 0 0 2 -2v-2" /></svg>'},fullscreenExit:{id:"fullscreenExit",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-maximize-off"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 8v-2c0 -.551 .223 -1.05 .584 -1.412" /><path d="M4 16v2a2 2 0 0 0 2 2h2" /><path d="M16 4h2a2 2 0 0 1 2 2v2" /><path d="M16 20h2c.545 0 1.04 -.218 1.4 -.572" /><path d="M3 3l18 18" /></svg>'},save:{id:"save",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-device-floppy"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2" /><path d="M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M14 4l0 4l-6 0l0 -4" /></svg>'},print:{id:"print",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-printer"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M17 17h2a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-14a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h2" /><path d="M17 9v-4a2 2 0 0 0 -2 -2h-6a2 2 0 0 0 -2 2v4" /><path d="M7 13m0 2a2 2 0 0 1 2 -2h6a2 2 0 0 1 2 2v4a2 2 0 0 1 -2 2h-6a2 2 0 0 1 -2 -2z" /></svg>'},settings:{id:"settings",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-settings"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z" /><path d="M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0" /></svg>'},viewSettings:{id:"viewSettings",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-file-settings"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M12 10.5v1.5" /><path d="M12 16v1.5" /><path d="M15.031 12.25l-1.299 .75" /><path d="M10.268 15l-1.3 .75" /><path d="M15 15.803l-1.285 -.773" /><path d="M10.285 12.97l-1.285 -.773" /><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" /></svg>'},rotateClockwise:{id:"rotateClockwise",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-rotate-clockwise"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4.05 11a8 8 0 1 1 .5 4m-.5 5v-5h5" /></svg>'},rotateCounterClockwise:{id:"rotateCounterClockwise",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-rotate"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19.95 11a8 8 0 1 0 -.5 4m.5 5v-5h-5" /></svg>'},singlePage:{id:"singlePage",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-columns-1"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 3m0 1a1 1 0 0 1 1 -1h12a1 1 0 0 1 1 1v16a1 1 0 0 1 -1 1h-12a1 1 0 0 1 -1 -1z" /></svg>'},doublePage:{id:"doublePage",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-columns-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 3m0 1a1 1 0 0 1 1 -1h16a1 1 0 0 1 1 1v16a1 1 0 0 1 -1 1h-16a1 1 0 0 1 -1 -1zm9 -1v18" /></svg>'},zoomIn:{id:"zoomIn",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-circle-plus"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0" /><path d="M9 12h6" /><path d="M12 9v6" /></svg>'},zoomOut:{id:"zoomOut",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-circle-minus"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" /><path d="M9 12l6 0" /></svg>'},fitToWidth:{id:"fitToWidth",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-autofit-width"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 12v-6a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v6" /><path d="M10 18h-7" /><path d="M21 18h-7" /><path d="M6 15l-3 3l3 3" /><path d="M18 15l3 3l-3 3" /></svg>'},fitToPage:{id:"fitToPage",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-autofit-height"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 20h-6a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h6" /><path d="M18 14v7" /><path d="M18 3v7" /><path d="M15 18l3 3l3 -3" /><path d="M15 6l3 -3l3 3" /></svg>'},chevronRight:{id:"chevronRight",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-right"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 6l6 6l-6 6" /></svg>'},chevronLeft:{id:"chevronLeft",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 6l-6 6l6 6" /></svg>'},chevronDown:{id:"chevronDown",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-chevron-down"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg>'},search:{id:"search",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-search"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" /><path d="M21 21l-6 -6" /></svg>'},comment:{id:"comment",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-message-dots"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 11v.01" /><path d="M8 11v.01" /><path d="M16 11v.01" /><path d="M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3z" /></svg>'},sidebar:{id:"sidebar",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-sidebar-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 18v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z" /><path d="M14 18v-12a2 2 0 0 0 -2 -2h-6a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h6a2 2 0 0 0 2 -2z" /></svg>'},dots:{id:"dots",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-dots"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>'},vertical:{id:"vertical",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-arrows-vertical"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 7l4 -4l4 4" /><path d="M8 17l4 4l4 -4" /><path d="M12 3l0 18" /></svg>'},horizontal:{id:"horizontal",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-arrows-horizontal"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 8l-4 4l4 4" /><path d="M17 8l4 4l-4 4" /><path d="M3 12l18 0" /></svg>'},book:{id:"book",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-book"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0" /><path d="M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0" /><path d="M3 6l0 13" /><path d="M12 6l0 13" /><path d="M21 6l0 13" /></svg>'},book2:{id:"book2",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-book-2"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M19 4v16h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12z" /><path d="M19 16h-12a2 2 0 0 0 -2 2" /><path d="M9 8h6" /></svg>'},squares:{id:"squares",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-squares"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z" /><path d="M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3" /></svg>'},listTree:{id:"listTree",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-list-tree"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 6h11" /><path d="M12 12h8" /><path d="M15 18h5" /><path d="M5 6v.01" /><path d="M8 12v.01" /><path d="M11 18v.01" /></svg>'},paperclip:{id:"paperclip",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-paperclip"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 7l-6.5 6.5a1.5 1.5 0 0 0 3 3l6.5 -6.5a3 3 0 0 0 -6 -6l-6.5 6.5a4.5 4.5 0 0 0 9 9l6.5 -6.5" /></svg>'},copy:{id:"copy",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-copy"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg>'},underline:{id:"underline",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="100%"  height="100%" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-baseline"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 20h16" stroke="currentColor" /><path d="M8 16v-8a4 4 0 1 1 8 0v8" stroke="#000000" /><path d="M8 10h8" stroke="#000000" /></svg>'},squiggly:{id:"squiggly",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="100%"  height="100%" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-baseline-wavy"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 16v-8a4 4 0 1 1 8 0v8" stroke="#000000" /><path d="M8 10h8" stroke="#000000" /><path d="M4 20c1.5 -1.5 3.5 -1.5 5 0s3.5 1.5 5 0 3.5 -1.5 5 0" stroke="currentColor" /></svg>'},strikethrough:{id:"strikethrough",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="100%"  height="100%" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-baseline"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 16v-8a4 4 0 1 1 8 0v8" stroke="#000000" /><path d="M4 10h16" stroke="currentColor" /></svg>'},highlight:{id:"highlight",svg:'<svg xmlns="http://www.w3.org/2000/svg" width="100%"  height="100%" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-baseline-highlight"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><rect x="2" y="6" width="20" height="16" rx="2" fill="currentColor" stroke="none" /><path d="M8 16v-8a4 4 0 1 1 8 0v8" stroke="#000000"/><path d="M8 10h8" stroke="#000000"/></svg>'},palette:{id:"palette",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-palette"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25" /><path d="M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /><path d="M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0" /></svg>'},x:{id:"x",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-x"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6l-12 12" /><path d="M6 6l12 12" /></svg>'},fileImport:{id:"fileImport",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-file-import"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 0 0 1 1h4" /><path d="M5 13v-8a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2h-5.5m-9.5 -2h7m-3 -3l3 3l-3 3" /></svg>'},hand:{id:"hand",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-hand-stop"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 13v-7.5a1.5 1.5 0 0 1 3 0v6.5" /><path d="M11 5.5v-2a1.5 1.5 0 1 1 3 0v8.5" /><path d="M14 5.5a1.5 1.5 0 0 1 3 0v6.5" /><path d="M17 7.5a1.5 1.5 0 0 1 3 0v8.5a6 6 0 0 1 -6 6h-2h.208a6 6 0 0 1 -5.012 -2.7a69.74 69.74 0 0 1 -.196 -.3c-.312 -.479 -1.407 -2.388 -3.286 -5.728a1.5 1.5 0 0 1 .536 -2.022a1.867 1.867 0 0 1 2.28 .28l1.47 1.47" /></svg>'},zoomInArea:{id:"zoomInArea",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-zoom-in-area"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 13v4" /><path d="M13 15h4" /><path d="M15 15m-5 0a5 5 0 1 0 10 0a5 5 0 1 0 -10 0" /><path d="M22 22l-3 -3" /><path d="M6 18h-1a2 2 0 0 1 -2 -2v-1" /><path d="M3 11v-1" /><path d="M3 6v-1a2 2 0 0 1 2 -2h1" /><path d="M10 3h1" /><path d="M15 3h1a2 2 0 0 1 2 2v1" /></svg>'},screenshot:{id:"screenshot",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-screenshot"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 19a2 2 0 0 1 -2 -2" /><path d="M5 13v-2" /><path d="M5 7a2 2 0 0 1 2 -2" /><path d="M11 5h2" /><path d="M17 5a2 2 0 0 1 2 2" /><path d="M19 11v2" /><path d="M19 17v4" /><path d="M21 19h-4" /><path d="M13 19h-2" /></svg>'},arrowBackUp:{id:"arrowBackUp",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-back-up"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 14l-4 -4l4 -4" /><path d="M5 10h11a4 4 0 1 1 0 8h-1" /></svg>'},arrowForwardUp:{id:"arrowForwardUp",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-forward-up"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M15 14l4 -4l-4 -4" /><path d="M19 10h-11a4 4 0 1 0 0 8h1" /></svg>'},trash:{id:"trash",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-trash"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 7l16 0" /><path d="M10 11l0 6" /><path d="M14 11l0 6" /><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12" /><path d="M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3" /></svg>'},deviceFloppy:{id:"deviceFloppy",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round"  class="icon icon-tabler icons-tabler-outline icon-tabler-device-floppy"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2" /><path d="M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0" /><path d="M14 4l0 4l-6 0l0 -4" /></svg>'},pencilMarker:{id:"pencilMarker",svg:'<svg  xmlns="http://www.w3.org/2000/svg"  width="100%"  height="100%"  viewBox="0 0 24 24" class="icon icon-tabler icons-tabler-outline icon-tabler-writing-draw" stroke-linejoin="round" stroke-linecap="round" stroke-width="2" fill="none"><g transform="rotate(47.565 12.1875 10.75)"><path stroke="#000000" d="m14.18752,16.75l0,-12c0,-1.1 -0.9,-2 -2,-2s-2,0.9 -2,2l0,12l2,2l2,-2z"/><path stroke="#000000" d="m10.18752,6.75l4,0"/></g><path stroke="currentColor" d="m19.37499,20.125c0.56874,0.0625 -4.04999,-0.5625 -6.41249,-0.4375c-2.3625,0.125 -4.75833,1.22916 -6.85624,1.625c-1.76458,0.6875 -3.40416,-0.9375 -1.98125,-2.49999"/></svg>'}}},Sl=new class{constructor(e){this.loggers=e}debug(e,t,...n){for(const r of this.loggers)r.debug(e,t,...n)}info(e,t,...n){for(const r of this.loggers)r.info(e,t,...n)}warn(e,t,...n){for(const r of this.loggers)r.warn(e,t,...n)}error(e,t,...n){for(const r of this.loggers)r.error(e,t,...n)}perf(e,t,n,r,...o){for(const i of this.loggers)i.perf(e,t,n,r,...o)}}([new class{debug(e,t,...n){console.debug(`${e}.${t}`,...n)}info(e,t,...n){console.info(`${e}.${t}`,...n)}warn(e,t,...n){console.warn(`${e}.${t}`,...n)}error(e,t,...n){console.error(`${e}.${t}`,...n)}perf(e,t,n,r,...o){console.info(`${e}.${t}.${n}.${r}`,...o)}},new class{constructor(){}debug(e,t,...n){}info(e,t,...n){}warn(e,t,...n){}error(e,t,...n){}perf(e,t,n,r,o,...i){switch(r){case"Begin":window.performance.mark(`${e}.${t}.${n}.${r}.${o}`,{detail:i});break;case"End":window.performance.mark(`${e}.${t}.${n}.${r}.${o}`,{detail:i}),window.performance.measure(`${e}.${t}.${n}.Measure.${o}`,`${e}.${t}.${n}.Begin.${o}`,`${e}.${t}.${n}.End.${o}`)}}}]);function El({config:e}){const{engine:t,isLoading:n}=function(e){const{wasmUrl:t=Rt,worker:n=!0,logger:r}=e??{},[o,i]=oe(null),[a,s]=oe(!0),[l,u]=oe(null),d=se(null);return ie((()=>{let e=!1;return(async()=>{try{const{createPdfiumEngine:e}=n?await Promise.resolve().then((function(){return Rl})):await Promise.resolve().then((function(){return Ql})),o=await e(t,r);d.current=o,i(o),s(!1)}catch(t){e||(u(t),s(!1))}})(),()=>{e=!0,d.current?.destroy(),d.current=null}}),[t,n,r]),{engine:o,isLoading:a,error:l}}({...e.wasmUrl&&{wasmUrl:e.wasmUrl},worker:e.worker,logger:e.log?Sl:void 0}),r=function(e={}){return{viewport:{...pl,...e.viewport},scroll:{..._l,...e.scroll},zoom:{...bl,...e.zoom},spread:{...fl,...e.spread},rotate:{...Pl,...e.rotate},tiling:{...Dl,...e.tiling},thumbnail:{...vl,...e.thumbnail},print:{...yl,...e.print}}}(e.plugins);return f(D,null,f("style",null,z),!t||n?f("div",{className:"flex h-full w-full items-center justify-center"},f(Us,{size:"lg",text:"Initializing PDF engine..."})):f(Gt,{engine:t,onInitialized:async e=>{const t=e.getPlugin("ui")?.provides();t&&(t.registerComponentRenderer("groupedItems",Za),t.registerComponentRenderer("iconButton",qa),t.registerComponentRenderer("tabButton",Xa),t.registerComponentRenderer("header",Ka),t.registerComponentRenderer("divider",Ya),t.registerComponentRenderer("panel",Qa),t.registerComponentRenderer("search",ts),t.registerComponentRenderer("zoom",ns),t.registerComponentRenderer("pageControlsContainer",is),t.registerComponentRenderer("pageControls",as),t.registerComponentRenderer("commandMenu",ss),t.registerComponentRenderer("comment",ls),t.registerComponentRenderer("thumbnails",us),t.registerComponentRenderer("outline",ds),t.registerComponentRenderer("attachments",cs),t.registerComponentRenderer("selectButton",ms),t.registerComponentRenderer("textSelectionMenu",os),t.registerComponentRenderer("annotationSelectionMenu",rs),t.registerComponentRenderer("leftPanelMain",Ja),t.registerComponentRenderer("printModal",hs),t.registerComponentRenderer("leftPanelAnnotationStyle",_s))},plugins:[Dt(qn,Al),Dt(wn,{loadingOptions:{type:"url",pdfFile:{id:"pdf",url:e.src},options:{mode:"full-fetch"}}}),Dt($t,r.viewport),Dt(ln,r.scroll),Dt(bo,r.zoom),Dt(_n,r.spread),Dt(Ds,{}),Dt(Ss,r.rotate),Dt(Jo,{}),Dt(Gi,{}),Dt(js,r.tiling),Dt(oi,r.thumbnail),Dt(Ia,{}),Dt(Zi,r.print),Dt(qs,{}),Dt(ia,{}),Dt(Ks,{}),Dt(Eo,{}),Dt(el,{}),Dt(il,{scale:2,imageType:"image/png"}),Dt(hl,{})]},(({pluginsReady:e})=>f(lo,null,(({headers:t,panels:n,floating:r,commandMenu:o})=>f(Xs,null,f(ea,null,f("div",{className:"@container relative flex h-full w-full select-none flex-col"},t.top.length>0&&f("div",null,t.top),f("div",{className:"flex flex-1 flex-row overflow-hidden"},f("div",{className:"flex flex-col"},t.left),f("div",{className:"flex flex-1 flex-col overflow-hidden md:flex-row"},n.left.length>0&&f(D,null,n.left),f("div",{className:"relative flex w-full flex-1 overflow-hidden"},f(Go,null,f(tl,null),f(Yt,{style:{width:"100%",height:"100%",flexGrow:1,backgroundColor:"#f1f3f5",overflow:"auto"}},!e&&f("div",{className:"flex h-full w-full items-center justify-center"},f(Us,{size:"lg",text:"Loading PDF document..."})),e&&f(Ro,null,f(dn,{renderPage:({pageIndex:e,scale:t,rotation:n,width:r,height:o,rotatedHeight:i,rotatedWidth:a,document:s})=>f(Es,{key:s?.id,pageSize:{width:r,height:o}},f(ko,{rotation:n,scale:t,pageWidth:a,pageHeight:i,pageIndex:e,style:{width:r,height:o}},f(vs,{pageIndex:e,className:"pointer-events-none"}),f(zs,{pageIndex:e,scale:t,className:"pointer-events-none"}),f(ei,{pageIndex:e,scale:t,className:"pointer-events-none"}),f(Fl,null),f($a,{pageIndex:e,scale:t,pageWidth:r,pageHeight:o,rotation:n}),f(Lo,{pageIndex:e,scale:t,pageWidth:r,pageHeight:o}),f(sl,{pageIndex:e,scale:t,pageWidth:r,pageHeight:o}),f(Ii,{pageIndex:e,scale:t}))),overlayElements:r.insideScroller})),r.outsideScroller))),n.right.length>0&&f(D,null,n.right)),f("div",{className:"flex flex-col"},t.right)),t.bottom.length>0&&f("div",null,t.bottom),o),f(xn,null),f(Js,null),f(gl,null),f(Oi,null))))))))}class Cl extends HTMLElement{root;_config;constructor(){super(),this.root=this.attachShadow({mode:"open"})}connectedCallback(){this._config||(this._config={src:this.getAttribute("src")||"/demo.pdf",worker:"false"!==this.getAttribute("worker")}),this.renderViewer()}set config(e){this._config=e,this.isConnected&&this.renderViewer()}get config(){return this._config}renderViewer(){this._config&&N(f(El,{config:this._config}),this.root)}}customElements.define("embedpdf-container",Cl);var Ml={init:e=>{if("container"===e.type)return function(e){const{type:t,target:n,...r}=e,o=document.createElement("embedpdf-container");return o.config=r,e.target.appendChild(o),o}(e)}};const Tl="WebWorkerEngine",Gl="Engine";class kl extends Ie{constructor(e,t){super(),this.worker=e,this.messageId=t}abort(e){super.abort(e),this.worker.postMessage({type:"AbortRequest",data:{messageId:this.messageId}})}}class Il{constructor(e,t=new Te){this.worker=e,this.logger=t,this.tasks=new Map,this.handle=e=>{this.logger.debug(Tl,Gl,"webworker engine start handling message: ",e.data);try{const t=e.data,n=this.tasks.get(t.id);if(!n)return;switch(t.type){case"ReadyResponse":this.readyTask.resolve(!0);break;case"ExecuteResponse":switch(t.data.type){case"result":n.resolve(t.data.value);break;case"error":n.reject(t.data.value.reason)}this.tasks.delete(t.id)}}catch(e){this.logger.error(Tl,Gl,"webworker met error when handling message: ",e)}},this.worker.addEventListener("message",this.handle),this.readyTask=new kl(this.worker,Il.readyTaskId),this.tasks.set(Il.readyTaskId,this.readyTask)}generateRequestId(e){return`${e}.${Date.now()}.${Math.random()}`}initialize(){this.logger.debug(Tl,Gl,"initialize");const e=this.generateRequestId("General"),t=new kl(this.worker,e),n={id:e,type:"ExecuteRequest",data:{name:"initialize",args:[]}};return this.proxy(t,n),t}destroy(){this.logger.debug(Tl,Gl,"destroy");const e=this.generateRequestId("General"),t=new kl(this.worker,e),n=()=>{this.worker.removeEventListener("message",this.handle),this.worker.terminate()};t.wait(n,n);const r={id:e,type:"ExecuteRequest",data:{name:"destroy",args:[]}};return this.proxy(t,r),t}openDocumentUrl(e,t){this.logger.debug(Tl,Gl,"openDocumentUrl",e.url,t);const n=this.generateRequestId(e.id),r=new kl(this.worker,n),o={id:n,type:"ExecuteRequest",data:{name:"openDocumentUrl",args:[e,t]}};return this.proxy(r,o),r}openDocumentFromBuffer(e,t){this.logger.debug(Tl,Gl,"openDocumentFromBuffer",e,t);const n=this.generateRequestId(e.id),r=new kl(this.worker,n),o={id:n,type:"ExecuteRequest",data:{name:"openDocumentFromBuffer",args:[e,t]}};return this.proxy(r,o),r}openDocumentFromLoader(e,t){this.logger.debug(Tl,Gl,"openDocumentFromLoader",e,t);const n=this.generateRequestId(e.id),r=new kl(this.worker,n),o={id:n,type:"ExecuteRequest",data:{name:"openDocumentFromLoader",args:[e,t]}};return this.proxy(r,o),r}getMetadata(e){this.logger.debug(Tl,Gl,"getMetadata",e);const t=this.generateRequestId(e.id),n=new kl(this.worker,t),r={id:t,type:"ExecuteRequest",data:{name:"getMetadata",args:[e]}};return this.proxy(n,r),n}updateAnnotationColor(e,t,n,r,o=0){this.logger.debug(Tl,Gl,"setAnnotationColor",e,t,n,r);const i=this.generateRequestId(e.id),a=new kl(this.worker,i),s={id:i,type:"ExecuteRequest",data:{name:"updateAnnotationColor",args:[e,t,n,r,o]}};return this.proxy(a,s),a}getDocPermissions(e){this.logger.debug(Tl,Gl,"getDocPermissions",e);const t=this.generateRequestId(e.id),n=new kl(this.worker,t),r={id:t,type:"ExecuteRequest",data:{name:"getDocPermissions",args:[e]}};return this.proxy(n,r),n}getDocUserPermissions(e){this.logger.debug(Tl,Gl,"getDocUserPermissions",e);const t=this.generateRequestId(e.id),n=new kl(this.worker,t),r={id:t,type:"ExecuteRequest",data:{name:"getDocUserPermissions",args:[e]}};return this.proxy(n,r),n}getBookmarks(e){this.logger.debug(Tl,Gl,"getBookmarks",e);const t=this.generateRequestId(e.id),n=new kl(this.worker,t),r={id:t,type:"ExecuteRequest",data:{name:"getBookmarks",args:[e]}};return this.proxy(n,r),n}getSignatures(e){this.logger.debug(Tl,Gl,"getSignatures",e);const t=this.generateRequestId(e.id),n=new kl(this.worker,t),r={id:t,type:"ExecuteRequest",data:{name:"getSignatures",args:[e]}};return this.proxy(n,r),n}renderPage(e,t,n,r,o,i,a="image/webp"){this.logger.debug(Tl,Gl,"renderPage",e,t,n,r,o,i);const s=this.generateRequestId(e.id),l=new kl(this.worker,s),u={id:s,type:"ExecuteRequest",data:{name:"renderPage",args:[e,t,n,r,o,i,a]}};return this.proxy(l,u),l}renderPageRect(e,t,n,r,o,i,a,s="image/webp"){this.logger.debug(Tl,Gl,"renderPageRect",e,t,n,r,o,i,a);const l=this.generateRequestId(e.id),u=new kl(this.worker,l),d={id:l,type:"ExecuteRequest",data:{name:"renderPageRect",args:[e,t,n,r,o,i,a,s]}};return this.proxy(u,d),u}renderAnnotation(e,t,n,r,o,i,a,s){this.logger.debug(Tl,Gl,"renderAnnotation",e,t,n,r,o,i,a,s);const l=this.generateRequestId(e.id),u=new kl(this.worker,l),d={id:l,type:"ExecuteRequest",data:{name:"renderAnnotation",args:[e,t,n,r,o,i,a,s]}};return this.proxy(u,d),u}getAllAnnotations(e){this.logger.debug(Tl,Gl,"getAllAnnotations",e);const t=this.generateRequestId(e.id),n=new kl(this.worker,t),r={id:t,type:"ExecuteRequest",data:{name:"getAllAnnotations",args:[e]}};return this.proxy(n,r),n}getPageAnnotations(e,t){this.logger.debug(Tl,Gl,"getPageAnnotations",e,t);const n=this.generateRequestId(e.id),r=new kl(this.worker,n),o={id:n,type:"ExecuteRequest",data:{name:"getPageAnnotations",args:[e,t]}};return this.proxy(r,o),r}createPageAnnotation(e,t,n){this.logger.debug(Tl,Gl,"createPageAnnotations",e,t,n);const r=this.generateRequestId(e.id),o=new kl(this.worker,r),i={id:r,type:"ExecuteRequest",data:{name:"createPageAnnotation",args:[e,t,n]}};return this.proxy(o,i),o}updatePageAnnotation(e,t,n){this.logger.debug(Tl,Gl,"updatePageAnnotation",e,t,n);const r=this.generateRequestId(e.id),o=new kl(this.worker,r),i={id:r,type:"ExecuteRequest",data:{name:"updatePageAnnotation",args:[e,t,n]}};return this.proxy(o,i),o}removePageAnnotation(e,t,n){this.logger.debug(Tl,Gl,"removePageAnnotations",e,t,n);const r=this.generateRequestId(e.id),o=new kl(this.worker,r),i={id:r,type:"ExecuteRequest",data:{name:"removePageAnnotation",args:[e,t,n]}};return this.proxy(o,i),o}getPageTextRects(e,t,n,r){this.logger.debug(Tl,Gl,"getPageTextRects",e,t,n,r);const o=this.generateRequestId(e.id),i=new kl(this.worker,o),a={id:o,type:"ExecuteRequest",data:{name:"getPageTextRects",args:[e,t,n,r]}};return this.proxy(i,a),i}renderThumbnail(e,t,n,r,o){this.logger.debug(Tl,Gl,"renderThumbnail",e,t,n,r,o);const i=this.generateRequestId(e.id),a=new kl(this.worker,i),s={id:i,type:"ExecuteRequest",data:{name:"renderThumbnail",args:[e,t,n,r,o]}};return this.proxy(a,s),a}searchAllPages(e,t,n=[]){this.logger.debug(Tl,Gl,"searchAllPages 123",e,t,n);const r=this.generateRequestId(e.id),o=new kl(this.worker,r),i={id:r,type:"ExecuteRequest",data:{name:"searchAllPages",args:[e,t,n]}};return this.proxy(o,i),o}saveAsCopy(e){this.logger.debug(Tl,Gl,"saveAsCopy",e);const t=this.generateRequestId(e.id),n=new kl(this.worker,t),r={id:t,type:"ExecuteRequest",data:{name:"saveAsCopy",args:[e]}};return this.proxy(n,r),n}getAttachments(e){this.logger.debug(Tl,Gl,"getAttachments",e);const t=this.generateRequestId(e.id),n=new kl(this.worker,t),r={id:t,type:"ExecuteRequest",data:{name:"getAttachments",args:[e]}};return this.proxy(n,r),n}readAttachmentContent(e,t){this.logger.debug(Tl,Gl,"readAttachmentContent",e,t);const n=this.generateRequestId(e.id),r=new kl(this.worker,n),o={id:n,type:"ExecuteRequest",data:{name:"readAttachmentContent",args:[e,t]}};return this.proxy(r,o),r}setFormFieldValue(e,t,n,r){this.logger.debug(Tl,Gl,"setFormFieldValue",e,n,r);const o=this.generateRequestId(e.id),i=new kl(this.worker,o),a={id:o,type:"ExecuteRequest",data:{name:"setFormFieldValue",args:[e,t,n,r]}};return this.proxy(i,a),i}flattenPage(e,t,n){this.logger.debug(Tl,Gl,"flattenPage",e,t,n);const r=this.generateRequestId(e.id),o=new kl(this.worker,r),i={id:r,type:"ExecuteRequest",data:{name:"flattenPage",args:[e,t,n]}};return this.proxy(o,i),o}extractPages(e,t){this.logger.debug(Tl,Gl,"extractPages",e);const n=this.generateRequestId(e.id),r=new kl(this.worker,n),o={id:n,type:"ExecuteRequest",data:{name:"extractPages",args:[e,t]}};return this.proxy(r,o),r}extractText(e,t){this.logger.debug(Tl,Gl,"extractText",e);const n=this.generateRequestId(e.id),r=new kl(this.worker,n),o={id:n,type:"ExecuteRequest",data:{name:"extractText",args:[e,t]}};return this.proxy(r,o),r}getTextSlices(e,t){this.logger.debug(Tl,Gl,"getTextSlices",e,t);const n=this.generateRequestId(e.id),r=new kl(this.worker,n),o={id:n,type:"ExecuteRequest",data:{name:"getTextSlices",args:[e,t]}};return this.proxy(r,o),r}getPageGlyphs(e,t){this.logger.debug(Tl,Gl,"getPageGlyphs",e,t);const n=this.generateRequestId(e.id),r=new kl(this.worker,n),o={id:n,type:"ExecuteRequest",data:{name:"getPageGlyphs",args:[e,t]}};return this.proxy(r,o),r}getPageGeometry(e,t){this.logger.debug(Tl,Gl,"getPageGeometry",e,t);const n=this.generateRequestId(e.id),r=new kl(this.worker,n),o={id:n,type:"ExecuteRequest",data:{name:"getPageGeometry",args:[e,t]}};return this.proxy(r,o),r}merge(e){this.logger.debug(Tl,Gl,"merge",e);const t=e.map((e=>e.id)).join("."),n=this.generateRequestId(t),r=new kl(this.worker,n),o={id:n,type:"ExecuteRequest",data:{name:"merge",args:[e]}};return this.proxy(r,o),r}mergePages(e){this.logger.debug(Tl,Gl,"mergePages",e);const t=this.generateRequestId(e.map((e=>e.docId)).join(".")),n=new kl(this.worker,t),r={id:t,type:"ExecuteRequest",data:{name:"mergePages",args:[e]}};return this.proxy(n,r),n}closeDocument(e){this.logger.debug(Tl,Gl,"closeDocument",e);const t=this.generateRequestId(e.id),n=new kl(this.worker,t),r={id:t,type:"ExecuteRequest",data:{name:"closeDocument",args:[e]}};return this.proxy(n,r),n}proxy(e,t,n=[]){this.logger.debug(Tl,Gl,"send request to worker",e,t,n),this.logger.perf(Tl,Gl,`${t.data.name}`,"Begin",t.id),this.readyTask.wait((()=>{this.worker.postMessage(t,n),e.wait((()=>{this.logger.perf(Tl,Gl,`${t.data.name}`,"End",t.id)}),(()=>{this.logger.perf(Tl,Gl,`${t.data.name}`,"End",t.id)})),this.tasks.set(t.id,e)}),(()=>{this.logger.perf(Tl,Gl,`${t.data.name}`,"End",t.id),e.reject({code:Je.Initialization,message:"worker initialization failed"})}))}}Il.readyTaskId="0";var Ol,Rl=Object.freeze({__proto__:null,createPdfiumEngine:function(e,t){const n=new Worker(URL.createObjectURL(new Blob(['var e,t=(e=import.meta.url,async function(t={}){var n,r,o,i=t,a=new Promise(((e,t)=>{r=e,o=t}));["_EPDF_RenderAnnotBitmap","_EPDFAnnot_GenerateAppearance","_EPDFAnnot_GenerateAppearanceWithBlend","_EPDFAnnot_GetBlendMode","_EPDFAnnot_GetBorderDashPattern","_EPDFAnnot_GetBorderDashPatternCount","_EPDFAnnot_GetBorderEffect","_EPDFAnnot_GetBorderStyle","_EPDFAnnot_GetColor","_EPDFAnnot_GetIntent","_EPDFAnnot_GetRectangleDifferences","_EPDFAnnot_GetRichContent","_EPDFAnnot_SetBorderStyle","_EPDFAnnot_SetColor","_EPDFAnnot_SetIntent","_FORM_CanRedo","_FORM_CanUndo","_FORM_DoDocumentAAction","_FORM_DoDocumentJSAction","_FORM_DoDocumentOpenAction","_FORM_DoPageAAction","_FORM_ForceToKillFocus","_FORM_GetFocusedAnnot","_FORM_GetFocusedText","_FORM_GetSelectedText","_FORM_IsIndexSelected","_FORM_OnAfterLoadPage","_FORM_OnBeforeClosePage","_FORM_OnChar","_FORM_OnFocus","_FORM_OnKeyDown","_FORM_OnKeyUp","_FORM_OnLButtonDoubleClick","_FORM_OnLButtonDown","_FORM_OnLButtonUp","_FORM_OnMouseMove","_FORM_OnMouseWheel","_FORM_OnRButtonDown","_FORM_OnRButtonUp","_FORM_Redo","_FORM_ReplaceAndKeepSelection","_FORM_ReplaceSelection","_FORM_SelectAllText","_FORM_SetFocusedAnnot","_FORM_SetIndexSelected","_FORM_Undo","_FPDF_AddInstalledFont","_FPDF_CloseDocument","_FPDF_ClosePage","_FPDF_CloseXObject","_FPDF_CopyViewerPreferences","_FPDF_CountNamedDests","_FPDF_CreateClipPath","_FPDF_CreateNewDocument","_FPDF_DestroyClipPath","_FPDF_DestroyLibrary","_FPDF_DeviceToPage","_FPDF_DocumentHasValidCrossReferenceTable","_FPDF_FFLDraw","_FPDF_FreeDefaultSystemFontInfo","_FPDF_GetDefaultSystemFontInfo","_FPDF_GetDefaultTTFMap","_FPDF_GetDefaultTTFMapCount","_FPDF_GetDefaultTTFMapEntry","_FPDF_GetDocPermissions","_FPDF_GetDocUserPermissions","_FPDF_GetFileIdentifier","_FPDF_GetFileVersion","_FPDF_GetFormType","_FPDF_GetLastError","_FPDF_GetMetaText","_FPDF_GetNamedDest","_FPDF_GetNamedDestByName","_FPDF_GetPageAAction","_FPDF_GetPageBoundingBox","_FPDF_GetPageCount","_FPDF_GetPageHeight","_FPDF_GetPageHeightF","_FPDF_GetPageLabel","_FPDF_GetPageSizeByIndex","_FPDF_GetPageSizeByIndexF","_FPDF_GetPageWidth","_FPDF_GetPageWidthF","_FPDF_GetSecurityHandlerRevision","_FPDF_GetSignatureCount","_FPDF_GetSignatureObject","_FPDF_GetTrailerEnds","_FPDF_GetXFAPacketContent","_FPDF_GetXFAPacketCount","_FPDF_GetXFAPacketName","_FPDF_ImportNPagesToOne","_FPDF_ImportPages","_FPDF_ImportPagesByIndex","_FPDF_InitLibrary","_FPDF_InitLibraryWithConfig","_FPDF_LoadCustomDocument","_FPDF_LoadDocument","_FPDF_LoadMemDocument","_FPDF_LoadMemDocument64","_FPDF_LoadPage","_FPDF_LoadXFA","_FPDF_MovePages","_FPDF_NewFormObjectFromXObject","_FPDF_NewXObjectFromPage","_FPDF_PageToDevice","_FPDF_RemoveFormFieldHighlight","_FPDF_RenderPage_Close","_FPDF_RenderPage_Continue","_FPDF_RenderPageBitmap","_FPDF_RenderPageBitmap_Start","_FPDF_RenderPageBitmapWithColorScheme_Start","_FPDF_RenderPageBitmapWithMatrix","_FPDF_SaveAsCopy","_FPDF_SaveWithVersion","_FPDF_SetFormFieldHighlightAlpha","_FPDF_SetFormFieldHighlightColor","_FPDF_SetSandBoxPolicy","_FPDF_SetSystemFontInfo","_FPDF_StructElement_Attr_CountChildren","_FPDF_StructElement_Attr_GetBlobValue","_FPDF_StructElement_Attr_GetBooleanValue","_FPDF_StructElement_Attr_GetChildAtIndex","_FPDF_StructElement_Attr_GetCount","_FPDF_StructElement_Attr_GetName","_FPDF_StructElement_Attr_GetNumberValue","_FPDF_StructElement_Attr_GetStringValue","_FPDF_StructElement_Attr_GetType","_FPDF_StructElement_Attr_GetValue","_FPDF_StructElement_CountChildren","_FPDF_StructElement_GetActualText","_FPDF_StructElement_GetAltText","_FPDF_StructElement_GetAttributeAtIndex","_FPDF_StructElement_GetAttributeCount","_FPDF_StructElement_GetChildAtIndex","_FPDF_StructElement_GetChildMarkedContentID","_FPDF_StructElement_GetID","_FPDF_StructElement_GetLang","_FPDF_StructElement_GetMarkedContentID","_FPDF_StructElement_GetMarkedContentIdAtIndex","_FPDF_StructElement_GetMarkedContentIdCount","_FPDF_StructElement_GetObjType","_FPDF_StructElement_GetParent","_FPDF_StructElement_GetStringAttribute","_FPDF_StructElement_GetTitle","_FPDF_StructElement_GetType","_FPDF_StructTree_Close","_FPDF_StructTree_CountChildren","_FPDF_StructTree_GetChildAtIndex","_FPDF_StructTree_GetForPage","_FPDF_VIEWERREF_GetDuplex","_FPDF_VIEWERREF_GetName","_FPDF_VIEWERREF_GetNumCopies","_FPDF_VIEWERREF_GetPrintPageRange","_FPDF_VIEWERREF_GetPrintPageRangeCount","_FPDF_VIEWERREF_GetPrintPageRangeElement","_FPDF_VIEWERREF_GetPrintScaling","_FPDFAction_GetDest","_FPDFAction_GetFilePath","_FPDFAction_GetType","_FPDFAction_GetURIPath","_FPDFAnnot_AddFileAttachment","_FPDFAnnot_AddInkStroke","_FPDFAnnot_AppendAttachmentPoints","_FPDFAnnot_AppendObject","_FPDFAnnot_CountAttachmentPoints","_FPDFAnnot_GetAP","_FPDFAnnot_GetAttachmentPoints","_FPDFAnnot_GetBorder","_FPDFAnnot_GetColor","_FPDFAnnot_GetFileAttachment","_FPDFAnnot_GetFlags","_FPDFAnnot_GetFocusableSubtypes","_FPDFAnnot_GetFocusableSubtypesCount","_FPDFAnnot_GetFontColor","_FPDFAnnot_GetFontSize","_FPDFAnnot_GetFormAdditionalActionJavaScript","_FPDFAnnot_GetFormControlCount","_FPDFAnnot_GetFormControlIndex","_FPDFAnnot_GetFormFieldAlternateName","_FPDFAnnot_GetFormFieldAtPoint","_FPDFAnnot_GetFormFieldExportValue","_FPDFAnnot_GetFormFieldFlags","_FPDFAnnot_GetFormFieldName","_FPDFAnnot_GetFormFieldType","_FPDFAnnot_GetFormFieldValue","_FPDFAnnot_GetInkListCount","_FPDFAnnot_GetInkListPath","_FPDFAnnot_GetLine","_FPDFAnnot_GetLink","_FPDFAnnot_GetLinkedAnnot","_FPDFAnnot_GetNumberValue","_FPDFAnnot_GetObject","_FPDFAnnot_GetObjectCount","_FPDFAnnot_GetOptionCount","_FPDFAnnot_GetOptionLabel","_FPDFAnnot_GetRect","_FPDFAnnot_GetStringValue","_FPDFAnnot_GetSubtype","_FPDFAnnot_GetValueType","_FPDFAnnot_GetVertices","_FPDFAnnot_HasAttachmentPoints","_FPDFAnnot_HasKey","_FPDFAnnot_IsChecked","_FPDFAnnot_IsObjectSupportedSubtype","_FPDFAnnot_IsOptionSelected","_FPDFAnnot_IsSupportedSubtype","_FPDFAnnot_RemoveInkList","_FPDFAnnot_RemoveObject","_FPDFAnnot_SetAP","_FPDFAnnot_SetAttachmentPoints","_FPDFAnnot_SetBorder","_FPDFAnnot_SetColor","_FPDFAnnot_SetFlags","_FPDFAnnot_SetFocusableSubtypes","_FPDFAnnot_SetFontColor","_FPDFAnnot_SetFormFieldFlags","_FPDFAnnot_SetRect","_FPDFAnnot_SetStringValue","_FPDFAnnot_SetURI","_FPDFAnnot_UpdateObject","_FPDFAttachment_GetFile","_FPDFAttachment_GetName","_FPDFAttachment_GetStringValue","_FPDFAttachment_GetSubtype","_FPDFAttachment_GetValueType","_FPDFAttachment_HasKey","_FPDFAttachment_SetFile","_FPDFAttachment_SetStringValue","_FPDFAvail_Create","_FPDFAvail_Destroy","_FPDFAvail_GetDocument","_FPDFAvail_GetFirstPageNum","_FPDFAvail_IsDocAvail","_FPDFAvail_IsFormAvail","_FPDFAvail_IsLinearized","_FPDFAvail_IsPageAvail","_FPDFBitmap_Create","_FPDFBitmap_CreateEx","_FPDFBitmap_Destroy","_FPDFBitmap_FillRect","_FPDFBitmap_GetBuffer","_FPDFBitmap_GetFormat","_FPDFBitmap_GetHeight","_FPDFBitmap_GetStride","_FPDFBitmap_GetWidth","_FPDFBookmark_Find","_FPDFBookmark_GetAction","_FPDFBookmark_GetCount","_FPDFBookmark_GetDest","_FPDFBookmark_GetFirstChild","_FPDFBookmark_GetNextSibling","_FPDFBookmark_GetTitle","_FPDFCatalog_IsTagged","_FPDFCatalog_SetLanguage","_FPDFClipPath_CountPaths","_FPDFClipPath_CountPathSegments","_FPDFClipPath_GetPathSegment","_FPDFDest_GetDestPageIndex","_FPDFDest_GetLocationInPage","_FPDFDest_GetView","_FPDFDoc_AddAttachment","_FPDFDoc_CloseJavaScriptAction","_FPDFDoc_DeleteAttachment","_FPDFDOC_ExitFormFillEnvironment","_FPDFDoc_GetAttachment","_FPDFDoc_GetAttachmentCount","_FPDFDoc_GetJavaScriptAction","_FPDFDoc_GetJavaScriptActionCount","_FPDFDoc_GetPageMode","_FPDFDOC_InitFormFillEnvironment","_FPDFFont_Close","_FPDFFont_GetAscent","_FPDFFont_GetBaseFontName","_FPDFFont_GetDescent","_FPDFFont_GetFamilyName","_FPDFFont_GetFlags","_FPDFFont_GetFontData","_FPDFFont_GetGlyphPath","_FPDFFont_GetGlyphWidth","_FPDFFont_GetIsEmbedded","_FPDFFont_GetItalicAngle","_FPDFFont_GetWeight","_FPDFFormObj_CountObjects","_FPDFFormObj_GetObject","_FPDFFormObj_RemoveObject","_FPDFGlyphPath_CountGlyphSegments","_FPDFGlyphPath_GetGlyphPathSegment","_FPDFImageObj_GetBitmap","_FPDFImageObj_GetIccProfileDataDecoded","_FPDFImageObj_GetImageDataDecoded","_FPDFImageObj_GetImageDataRaw","_FPDFImageObj_GetImageFilter","_FPDFImageObj_GetImageFilterCount","_FPDFImageObj_GetImageMetadata","_FPDFImageObj_GetImagePixelSize","_FPDFImageObj_GetRenderedBitmap","_FPDFImageObj_LoadJpegFile","_FPDFImageObj_LoadJpegFileInline","_FPDFImageObj_SetBitmap","_FPDFImageObj_SetMatrix","_FPDFJavaScriptAction_GetName","_FPDFJavaScriptAction_GetScript","_FPDFLink_CloseWebLinks","_FPDFLink_CountQuadPoints","_FPDFLink_CountRects","_FPDFLink_CountWebLinks","_FPDFLink_Enumerate","_FPDFLink_GetAction","_FPDFLink_GetAnnot","_FPDFLink_GetAnnotRect","_FPDFLink_GetDest","_FPDFLink_GetLinkAtPoint","_FPDFLink_GetLinkZOrderAtPoint","_FPDFLink_GetQuadPoints","_FPDFLink_GetRect","_FPDFLink_GetTextRange","_FPDFLink_GetURL","_FPDFLink_LoadWebLinks","_FPDFPage_CloseAnnot","_FPDFPage_CountObjects","_FPDFPage_CreateAnnot","_FPDFPage_Delete","_FPDFPage_Flatten","_FPDFPage_FormFieldZOrderAtPoint","_FPDFPage_GenerateContent","_FPDFPage_GetAnnot","_FPDFPage_GetAnnotCount","_FPDFPage_GetAnnotIndex","_FPDFPage_GetArtBox","_FPDFPage_GetBleedBox","_FPDFPage_GetCropBox","_FPDFPage_GetDecodedThumbnailData","_FPDFPage_GetMediaBox","_FPDFPage_GetObject","_FPDFPage_GetRawThumbnailData","_FPDFPage_GetRotation","_FPDFPage_GetThumbnailAsBitmap","_FPDFPage_GetTrimBox","_FPDFPage_HasFormFieldAtPoint","_FPDFPage_HasTransparency","_FPDFPage_InsertClipPath","_FPDFPage_InsertObject","_FPDFPage_InsertObjectAtIndex","_FPDFPage_New","_FPDFPage_RemoveAnnot","_FPDFPage_RemoveObject","_FPDFPage_SetArtBox","_FPDFPage_SetBleedBox","_FPDFPage_SetCropBox","_FPDFPage_SetMediaBox","_FPDFPage_SetRotation","_FPDFPage_SetTrimBox","_FPDFPage_TransformAnnots","_FPDFPage_TransFormWithClip","_FPDFPageObj_AddMark","_FPDFPageObj_CountMarks","_FPDFPageObj_CreateNewPath","_FPDFPageObj_CreateNewRect","_FPDFPageObj_CreateTextObj","_FPDFPageObj_Destroy","_FPDFPageObj_GetBounds","_FPDFPageObj_GetClipPath","_FPDFPageObj_GetDashArray","_FPDFPageObj_GetDashCount","_FPDFPageObj_GetDashPhase","_FPDFPageObj_GetFillColor","_FPDFPageObj_GetIsActive","_FPDFPageObj_GetLineCap","_FPDFPageObj_GetLineJoin","_FPDFPageObj_GetMark","_FPDFPageObj_GetMarkedContentID","_FPDFPageObj_GetMatrix","_FPDFPageObj_GetRotatedBounds","_FPDFPageObj_GetStrokeColor","_FPDFPageObj_GetStrokeWidth","_FPDFPageObj_GetType","_FPDFPageObj_HasTransparency","_FPDFPageObj_NewImageObj","_FPDFPageObj_NewTextObj","_FPDFPageObj_RemoveMark","_FPDFPageObj_SetBlendMode","_FPDFPageObj_SetDashArray","_FPDFPageObj_SetDashPhase","_FPDFPageObj_SetFillColor","_FPDFPageObj_SetIsActive","_FPDFPageObj_SetLineCap","_FPDFPageObj_SetLineJoin","_FPDFPageObj_SetMatrix","_FPDFPageObj_SetStrokeColor","_FPDFPageObj_SetStrokeWidth","_FPDFPageObj_Transform","_FPDFPageObj_TransformClipPath","_FPDFPageObj_TransformF","_FPDFPageObjMark_CountParams","_FPDFPageObjMark_GetName","_FPDFPageObjMark_GetParamBlobValue","_FPDFPageObjMark_GetParamIntValue","_FPDFPageObjMark_GetParamKey","_FPDFPageObjMark_GetParamStringValue","_FPDFPageObjMark_GetParamValueType","_FPDFPageObjMark_RemoveParam","_FPDFPageObjMark_SetBlobParam","_FPDFPageObjMark_SetIntParam","_FPDFPageObjMark_SetStringParam","_FPDFPath_BezierTo","_FPDFPath_Close","_FPDFPath_CountSegments","_FPDFPath_GetDrawMode","_FPDFPath_GetPathSegment","_FPDFPath_LineTo","_FPDFPath_MoveTo","_FPDFPath_SetDrawMode","_FPDFPathSegment_GetClose","_FPDFPathSegment_GetPoint","_FPDFPathSegment_GetType","_FPDFSignatureObj_GetByteRange","_FPDFSignatureObj_GetContents","_FPDFSignatureObj_GetDocMDPPermission","_FPDFSignatureObj_GetReason","_FPDFSignatureObj_GetSubFilter","_FPDFSignatureObj_GetTime","_FPDFText_ClosePage","_FPDFText_CountChars","_FPDFText_CountRects","_FPDFText_FindClose","_FPDFText_FindNext","_FPDFText_FindPrev","_FPDFText_FindStart","_FPDFText_GetBoundedText","_FPDFText_GetCharAngle","_FPDFText_GetCharBox","_FPDFText_GetCharIndexAtPos","_FPDFText_GetCharIndexFromTextIndex","_FPDFText_GetCharOrigin","_FPDFText_GetFillColor","_FPDFText_GetFontInfo","_FPDFText_GetFontSize","_FPDFText_GetFontWeight","_FPDFText_GetLooseCharBox","_FPDFText_GetMatrix","_FPDFText_GetRect","_FPDFText_GetSchCount","_FPDFText_GetSchResultIndex","_FPDFText_GetStrokeColor","_FPDFText_GetText","_FPDFText_GetTextIndexFromCharIndex","_FPDFText_GetTextObject","_FPDFText_GetUnicode","_FPDFText_HasUnicodeMapError","_FPDFText_IsGenerated","_FPDFText_IsHyphen","_FPDFText_LoadCidType2Font","_FPDFText_LoadFont","_FPDFText_LoadPage","_FPDFText_LoadStandardFont","_FPDFText_SetCharcodes","_FPDFText_SetText","_FPDFTextObj_GetFont","_FPDFTextObj_GetFontSize","_FPDFTextObj_GetRenderedBitmap","_FPDFTextObj_GetText","_FPDFTextObj_GetTextRenderMode","_FPDFTextObj_SetTextRenderMode","_PDFiumExt_CloseFileWriter","_PDFiumExt_CloseFormFillInfo","_PDFiumExt_ExitFormFillEnvironment","_PDFiumExt_GetFileWriterData","_PDFiumExt_GetFileWriterSize","_PDFiumExt_Init","_PDFiumExt_InitFormFillEnvironment","_PDFiumExt_OpenFileWriter","_PDFiumExt_OpenFormFillInfo","_PDFiumExt_SaveAsCopy","_malloc","_free","_memory","___indirect_function_table","onRuntimeInitialized"].forEach((e=>{Object.getOwnPropertyDescriptor(a,e)||Object.defineProperty(a,e,{get:()=>q("You are getting "+e+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js"),set:()=>q("You are setting "+e+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")})}));var s="object"==typeof window,u="function"==typeof importScripts,F="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node&&"renderer"!=process.type,l=!s&&!F&&!u;if(F){const{createRequire:e}=await import("module");let t=import.meta.url;t.startsWith("data:")&&(t="/");var m=e(t)}var d,_,P=Object.assign({},i),c="./this.program",h="";if(F){if("undefined"==typeof process||!process.release||"node"!==process.release.name)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");var g=process.versions.node,D=g.split(".").slice(0,3);if((D=1e4*D[0]+100*D[1]+1*D[2].split("-")[0])<16e4)throw new Error("This emscripten-generated code requires node v16.0.0 (detected v"+g+")");var b=m("fs"),p=m("path");import.meta.url.startsWith("data:")||(h=p.dirname(m("url").fileURLToPath(import.meta.url))+"/"),_=e=>{e=ne(e)?new URL(e):p.normalize(e);var t=b.readFileSync(e);return I(t.buffer),t},d=(e,t=!0)=>(e=ne(e)?new URL(e):p.normalize(e),new Promise(((n,r)=>{b.readFile(e,t?void 0:"utf8",((e,o)=>{e?r(e):n(t?o.buffer:o)}))}))),!i.thisProgram&&process.argv.length>1&&(c=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2)}else if(l){if("object"==typeof process&&"function"==typeof m||"object"==typeof window||"function"==typeof importScripts)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");_=e=>{if("function"==typeof readbuffer)return new Uint8Array(readbuffer(e));let t=read(e,"binary");return I("object"==typeof t),t},d=e=>new Promise(((t,n)=>{setTimeout((()=>t(_(e))))})),globalThis.clearTimeout??=e=>{},globalThis.setTimeout??=e=>"function"==typeof e?e():q(),"undefined"!=typeof print&&(globalThis.console??={},console.log=print,console.warn=console.error=globalThis.printErr??print)}else{if(!s&&!u)throw new Error("environment detection error");if(u?h=self.location.href:"undefined"!=typeof document&&document.currentScript&&(h=document.currentScript.src),e&&(h=e),h=h.startsWith("blob:")?"":h.substr(0,h.replace(/[?#].*/,"").lastIndexOf("/")+1),"object"!=typeof window&&"function"!=typeof importScripts)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");u&&(_=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),d=e=>(I(!ne(e),"readAsync does not work with file:// URLs"),fetch(e,{credentials:"same-origin"}).then((e=>e.ok?e.arrayBuffer():Promise.reject(new Error(e.status+" : "+e.url)))))}var f,A=i.print||console.log.bind(console),E=i.printErr||console.error.bind(console);Object.assign(i,P),P=null,f="fetchSettings",Object.getOwnPropertyDescriptor(i,f)&&q(`\\`Module.${f}\\` was supplied but \\`${f}\\` not included in INCOMING_MODULE_JS_API`),i.arguments&&i.arguments,se("arguments","arguments_"),i.thisProgram&&(c=i.thisProgram),se("thisProgram","thisProgram"),I(void 0===i.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),I(void 0===i.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),I(void 0===i.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),I(void 0===i.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),I(void 0===i.read,"Module.read option was removed"),I(void 0===i.readAsync,"Module.readAsync option was removed (modify readAsync in JS)"),I(void 0===i.readBinary,"Module.readBinary option was removed (modify readBinary in JS)"),I(void 0===i.setWindowTitle,"Module.setWindowTitle option was removed (modify emscripten_set_window_title in JS)"),I(void 0===i.TOTAL_MEMORY,"Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),se("asm","wasmExports"),se("readAsync","readAsync"),se("readBinary","readBinary"),se("setWindowTitle","setWindowTitle");var G,S=i.wasmBinary;se("wasmBinary","wasmBinary"),"object"!=typeof WebAssembly&&E("no native wasm support detected");var M,C,y,T,O,v,x,w,R=!1;function I(e,t){e||q("Assertion failed"+(t?": "+t:""))}function k(){var e=G.buffer;i.HEAP8=M=new Int8Array(e),i.HEAP16=y=new Int16Array(e),i.HEAPU8=C=new Uint8Array(e),i.HEAPU16=T=new Uint16Array(e),i.HEAP32=O=new Int32Array(e),i.HEAPU32=v=new Uint32Array(e),i.HEAPF32=x=new Float32Array(e),i.HEAPF64=w=new Float64Array(e)}function j(){if(!R){var e=dt();0==e&&(e+=4);var t=v[e>>2],n=v[e+4>>2];34821223==t&&2310721022==n||q(`Stack overflow! Stack cookie has been overwritten at ${_e(e)}, expected hex dwords 0x89BACDFE and 0x2135467, but received ${_e(n)} ${_e(t)}`),1668509029!=v[0]&&q("Runtime error: The application has corrupted its heap memory area (address zero)!")}}I(!i.STACK_SIZE,"STACK_SIZE can no longer be set at runtime.  Use -sSTACK_SIZE at link time"),I("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&null!=Int32Array.prototype.subarray&&null!=Int32Array.prototype.set,"JS engine does not provide full typed array support"),I(!i.wasmMemory,"Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally"),I(!i.INITIAL_MEMORY,"Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically");var L=[],B=[],N=[],U=!1;function V(e){L.unshift(e)}function W(e){N.unshift(e)}I(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),I(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),I(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),I(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var z=0,H=null,$=null,X={};function K(e){for(var t=e;;){if(!X[e])return e;e=t+Math.random()}}function Y(e){z++,i.monitorRunDependencies?.(z),e?(I(!X[e]),X[e]=1,null===H&&"undefined"!=typeof setInterval&&(H=setInterval((()=>{if(R)return clearInterval(H),void(H=null);var e=!1;for(var t in X)e||(e=!0,E("still waiting on run dependencies:")),E(`dependency: ${t}`);e&&E("(end of list)")}),1e4))):E("warning: run dependency added without ID")}function J(e){if(z--,i.monitorRunDependencies?.(z),e?(I(X[e]),delete X[e]):E("warning: run dependency removed without ID"),0==z&&(null!==H&&(clearInterval(H),H=null),$)){var t=$;$=null,t()}}function q(e){i.onAbort?.(e),E(e="Aborted("+e+")"),R=!0;var t=new WebAssembly.RuntimeError(e);throw o(t),t}var Q,Z,ee,te=e=>e.startsWith("data:application/octet-stream;base64,"),ne=e=>e.startsWith("file://");function re(e,t){return(...n)=>{I(U,`native function \\`${e}\\` called before runtime initialization`);var r=ot[e];return I(r,`exported native function \\`${e}\\` not found`),I(n.length<=t,`native function \\`${e}\\` called with ${n.length} args but expects ${t}`),r(...n)}}function oe(){if(i.locateFile){var e="pdfium.wasm";return te(e)?e:(t=e,i.locateFile?i.locateFile(t,h):h+t)}var t;return l?"pdfium.wasm":"pdfium.wasm"}function ie(e){if(e==Q&&S)return new Uint8Array(S);if(_)return _(e);throw"both async and sync fetching of the wasm failed"}function ae(e,t,n){return function(e){return S?Promise.resolve().then((()=>ie(e))):d(e).then((e=>new Uint8Array(e)),(()=>ie(e)))}(e).then((e=>WebAssembly.instantiate(e,t))).then(n,(e=>{E(`failed to asynchronously prepare wasm: ${e}`),ne(Q)&&E(`warning: Loading from a file URI (${Q}) is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing`),q(e)}))}if((()=>{var e=new Int16Array(1),t=new Int8Array(e.buffer);if(e[0]=25459,115!==t[0]||99!==t[1])throw"Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)"})(),i.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)");function se(e,t,n=!0){Object.getOwnPropertyDescriptor(i,e)||Object.defineProperty(i,e,{configurable:!0,get(){q(`\\`Module.${e}\\` has been replaced by \\`${t}\\``+(n?" (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)":""))}})}function ue(e){return"FS_createPath"===e||"FS_createDataFile"===e||"FS_createPreloadedFile"===e||"FS_unlink"===e||"addRunDependency"===e||"FS_createLazyFile"===e||"FS_createDevice"===e||"removeRunDependency"===e}function Fe(e,t){"undefined"==typeof globalThis||Object.getOwnPropertyDescriptor(globalThis,e)||Object.defineProperty(globalThis,e,{configurable:!0,get(){t()}})}function le(e,t){Fe(e,(()=>{he(`\\`${e}\\` is not longer defined by emscripten. ${t}`)}))}function me(e){Object.getOwnPropertyDescriptor(i,e)||Object.defineProperty(i,e,{configurable:!0,get(){var t=`\'${e}\' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the Emscripten FAQ)`;ue(e)&&(t+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),q(t)}})}le("buffer","Please use HEAP8.buffer or wasmMemory.buffer"),le("asm","Please use wasmExports instead");var de=e=>{e.forEach((e=>e(i)))};i.noExitRuntime;var _e=e=>(I("number"==typeof e),"0x"+(e>>>=0).toString(16).padStart(8,"0")),Pe=e=>_t(e),ce=()=>ct(),he=e=>{he.shown||={},he.shown[e]||(he.shown[e]=1,F&&(e="warning: "+e),E(e))},ge="undefined"!=typeof TextDecoder?new TextDecoder:void 0,De=(e,t=0,n=NaN)=>{for(var r=t+n,o=t;e[o]&&!(o>=r);)++o;if(o-t>16&&e.buffer&&ge)return ge.decode(e.subarray(t,o));for(var i="";t<o;){var a=e[t++];if(128&a){var s=63&e[t++];if(192!=(224&a)){var u=63&e[t++];if(224==(240&a)?a=(15&a)<<12|s<<6|u:(240!=(248&a)&&he("Invalid UTF-8 leading byte "+_e(a)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),a=(7&a)<<18|s<<12|u<<6|63&e[t++]),a<65536)i+=String.fromCharCode(a);else{var F=a-65536;i+=String.fromCharCode(55296|F>>10,56320|1023&F)}}else i+=String.fromCharCode((31&a)<<6|s)}else i+=String.fromCharCode(a)}return i},be=(e,t)=>(I("number"==typeof e,`UTF8ToString expects a number (got ${typeof e})`),e?De(C,e,t):"");function pe(){I(null!=Be.varargs);var e=O[+Be.varargs>>2];return Be.varargs+=4,e}var fe=pe,Ae={isAbs:e=>"/"===e.charAt(0),splitPath:e=>/^(\\/?|)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?|)(\\.[^.\\/]*|))(?:[\\/]*)$/.exec(e).slice(1),normalizeArray:(e,t)=>{for(var n=0,r=e.length-1;r>=0;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},normalize:e=>{var t=Ae.isAbs(e),n="/"===e.substr(-1);return(e=Ae.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/"))||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=Ae.splitPath(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},basename:e=>{if("/"===e)return"/";var t=(e=(e=Ae.normalize(e)).replace(/\\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},join:(...e)=>Ae.normalize(e.join("/")),join2:(e,t)=>Ae.normalize(e+"/"+t)},Ee=e=>(Ee=(()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return e=>crypto.getRandomValues(e);if(F)try{var e=m("crypto");if(e.randomFillSync)return t=>e.randomFillSync(t);var t=e.randomBytes;return e=>(e.set(t(e.byteLength)),e)}catch(e){}q("no cryptographic support found for randomDevice. consider polyfilling it if you want to use something insecure like Math.random(), e.g. put this in a --pre-js: var crypto = { getRandomValues: (array) => { for (var i = 0; i < array.length; i++) array[i] = (Math.random()*256)|0 } };")})())(e),Ge={resolve:(...e)=>{for(var t="",n=!1,r=e.length-1;r>=-1&&!n;r--){var o=r>=0?e[r]:Le.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");if(!o)return"";t=o+"/"+t,n=Ae.isAbs(o)}return(n?"/":"")+(t=Ae.normalizeArray(t.split("/").filter((e=>!!e)),!n).join("/"))||"."},relative:(e,t)=>{function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=Ge.resolve(e).substr(1),t=Ge.resolve(t).substr(1);for(var r=n(e.split("/")),o=n(t.split("/")),i=Math.min(r.length,o.length),a=i,s=0;s<i;s++)if(r[s]!==o[s]){a=s;break}var u=[];for(s=a;s<r.length;s++)u.push("..");return(u=u.concat(o.slice(a))).join("/")}},Se=[],Me=e=>{for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r<=127?t++:r<=2047?t+=2:r>=55296&&r<=57343?(t+=4,++n):t+=3}return t},Ce=(e,t,n,r)=>{if(I("string"==typeof e,`stringToUTF8Array expects a string (got ${typeof e})`),!(r>0))return 0;for(var o=n,i=n+r-1,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++a)),s<=127){if(n>=i)break;t[n++]=s}else if(s<=2047){if(n+1>=i)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=i)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=i)break;s>1114111&&he("Invalid Unicode code point "+_e(s)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-o};function ye(e,t,n){var r=n>0?n:Me(e)+1,o=new Array(r),i=Ce(e,o,0,o.length);return t&&(o.length=i),o}var Te,Oe,ve={ttys:[],init(){},shutdown(){},register(e,t){ve.ttys[e]={input:[],output:[],ops:t},Le.registerDevice(e,ve.stream_ops)},stream_ops:{open(e){var t=ve.ttys[e.node.rdev];if(!t)throw new Le.ErrnoError(43);e.tty=t,e.seekable=!1},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,t,n,r,o){if(!e.tty||!e.tty.ops.get_char)throw new Le.ErrnoError(60);for(var i=0,a=0;a<r;a++){var s;try{s=e.tty.ops.get_char(e.tty)}catch(e){throw new Le.ErrnoError(29)}if(void 0===s&&0===i)throw new Le.ErrnoError(6);if(null==s)break;i++,t[n+a]=s}return i&&(e.node.timestamp=Date.now()),i},write(e,t,n,r,o){if(!e.tty||!e.tty.ops.put_char)throw new Le.ErrnoError(60);try{for(var i=0;i<r;i++)e.tty.ops.put_char(e.tty,t[n+i])}catch(e){throw new Le.ErrnoError(29)}return r&&(e.node.timestamp=Date.now()),i}},default_tty_ops:{get_char:e=>(()=>{if(!Se.length){var e=null;if(F){var t=Buffer.alloc(256),n=0,r=process.stdin.fd;try{n=b.readSync(r,t,0,256)}catch(e){if(!e.toString().includes("EOF"))throw e;n=0}n>0&&(e=t.slice(0,n).toString("utf-8"))}else"undefined"!=typeof window&&"function"==typeof window.prompt?null!==(e=window.prompt("Input: "))&&(e+="\\n"):"function"==typeof readline&&(e=readline())&&(e+="\\n");if(!e)return null;Se=ye(e,!0)}return Se.shift()})(),put_char(e,t){null===t||10===t?(A(De(e.output)),e.output=[]):0!=t&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(A(De(e.output)),e.output=[])},ioctl_tcgets:e=>({c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}),ioctl_tcsets:(e,t,n)=>0,ioctl_tiocgwinsz:e=>[24,80]},default_tty1_ops:{put_char(e,t){null===t||10===t?(E(De(e.output)),e.output=[]):0!=t&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(E(De(e.output)),e.output=[])}}},xe=(e,t)=>(I(t,"alignment argument is required"),Math.ceil(e/t)*t),we=e=>{e=xe(e,65536);var t=ut(65536,e);return t&&((e,t)=>{C.fill(0,e,e+t)})(t,e),t},Re={ops_table:null,mount:e=>Re.createNode(null,"/",16895,0),createNode(e,t,n,r){if(Le.isBlkdev(n)||Le.isFIFO(n))throw new Le.ErrnoError(63);Re.ops_table||={dir:{node:{getattr:Re.node_ops.getattr,setattr:Re.node_ops.setattr,lookup:Re.node_ops.lookup,mknod:Re.node_ops.mknod,rename:Re.node_ops.rename,unlink:Re.node_ops.unlink,rmdir:Re.node_ops.rmdir,readdir:Re.node_ops.readdir,symlink:Re.node_ops.symlink},stream:{llseek:Re.stream_ops.llseek}},file:{node:{getattr:Re.node_ops.getattr,setattr:Re.node_ops.setattr},stream:{llseek:Re.stream_ops.llseek,read:Re.stream_ops.read,write:Re.stream_ops.write,allocate:Re.stream_ops.allocate,mmap:Re.stream_ops.mmap,msync:Re.stream_ops.msync}},link:{node:{getattr:Re.node_ops.getattr,setattr:Re.node_ops.setattr,readlink:Re.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Re.node_ops.getattr,setattr:Re.node_ops.setattr},stream:Le.chrdev_stream_ops}};var o=Le.createNode(e,t,n,r);return Le.isDir(o.mode)?(o.node_ops=Re.ops_table.dir.node,o.stream_ops=Re.ops_table.dir.stream,o.contents={}):Le.isFile(o.mode)?(o.node_ops=Re.ops_table.file.node,o.stream_ops=Re.ops_table.file.stream,o.usedBytes=0,o.contents=null):Le.isLink(o.mode)?(o.node_ops=Re.ops_table.link.node,o.stream_ops=Re.ops_table.link.stream):Le.isChrdev(o.mode)&&(o.node_ops=Re.ops_table.chrdev.node,o.stream_ops=Re.ops_table.chrdev.stream),o.timestamp=Date.now(),e&&(e.contents[t]=o,e.timestamp=o.timestamp),o},getFileDataAsTypedArray:e=>e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0),expandFileStorage(e,t){var n=e.contents?e.contents.length:0;if(!(n>=t)){t=Math.max(t,n*(n<1048576?2:1.125)>>>0),0!=n&&(t=Math.max(t,256));var r=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(r.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,t){if(e.usedBytes!=t)if(0==t)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr(e){var t={};return t.dev=Le.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,Le.isDir(e.mode)?t.size=4096:Le.isFile(e.mode)?t.size=e.usedBytes:Le.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&Re.resizeFileStorage(e,t.size)},lookup(e,t){throw Le.genericErrors[44]},mknod:(e,t,n,r)=>Re.createNode(e,t,n,r),rename(e,t,n){if(Le.isDir(e.mode)){var r;try{r=Le.lookupNode(t,n)}catch(e){}if(r)for(var o in r.contents)throw new Le.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=n,t.contents[n]=e,t.timestamp=e.parent.timestamp},unlink(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir(e,t){var n=Le.lookupNode(e,t);for(var r in n.contents)throw new Le.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir(e){var t=[".",".."];for(var n of Object.keys(e.contents))t.push(n);return t},symlink(e,t,n){var r=Re.createNode(e,t,41471,0);return r.link=n,r},readlink(e){if(!Le.isLink(e.mode))throw new Le.ErrnoError(28);return e.link}},stream_ops:{read(e,t,n,r,o){var i=e.node.contents;if(o>=e.node.usedBytes)return 0;var a=Math.min(e.node.usedBytes-o,r);if(I(a>=0),a>8&&i.subarray)t.set(i.subarray(o,o+a),n);else for(var s=0;s<a;s++)t[n+s]=i[o+s];return a},write(e,t,n,r,o,i){if(I(!(t instanceof ArrayBuffer)),t.buffer===M.buffer&&(i=!1),!r)return 0;var a=e.node;if(a.timestamp=Date.now(),t.subarray&&(!a.contents||a.contents.subarray)){if(i)return I(0===o,"canOwn must imply no weird position inside the file"),a.contents=t.subarray(n,n+r),a.usedBytes=r,r;if(0===a.usedBytes&&0===o)return a.contents=t.slice(n,n+r),a.usedBytes=r,r;if(o+r<=a.usedBytes)return a.contents.set(t.subarray(n,n+r),o),r}if(Re.expandFileStorage(a,o+r),a.contents.subarray&&t.subarray)a.contents.set(t.subarray(n,n+r),o);else for(var s=0;s<r;s++)a.contents[o+s]=t[n+s];return a.usedBytes=Math.max(a.usedBytes,o+r),r},llseek(e,t,n){var r=t;if(1===n?r+=e.position:2===n&&Le.isFile(e.node.mode)&&(r+=e.node.usedBytes),r<0)throw new Le.ErrnoError(28);return r},allocate(e,t,n){Re.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap(e,t,n,r,o){if(!Le.isFile(e.node.mode))throw new Le.ErrnoError(43);var i,a,s=e.node.contents;if(2&o||!s||s.buffer!==M.buffer){if(a=!0,!(i=we(t)))throw new Le.ErrnoError(48);s&&((n>0||n+t<s.length)&&(s=s.subarray?s.subarray(n,n+t):Array.prototype.slice.call(s,n,n+t)),M.set(s,i))}else a=!1,i=s.byteOffset;return{ptr:i,allocated:a}},msync:(e,t,n,r,o)=>(Re.stream_ops.write(e,t,0,r,n,!1),0)}},Ie=i.preloadPlugins||[],ke=(e,t)=>{var n=0;return e&&(n|=365),t&&(n|=146),n},je={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135},Le={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:class extends Error{constructor(e){for(var t in super(U?(e=>be(Ft(e)))(e):""),this.name="ErrnoError",this.errno=e,je)if(je[t]===e){this.code=t;break}}},genericErrors:{},filesystems:null,syncFSRequests:0,readFiles:{},FSStream:class{constructor(){this.shared={}}get object(){return this.node}set object(e){this.node=e}get isRead(){return 1!=(2097155&this.flags)}get isWrite(){return!!(2097155&this.flags)}get isAppend(){return 1024&this.flags}get flags(){return this.shared.flags}set flags(e){this.shared.flags=e}get position(){return this.shared.position}set position(e){this.shared.position=e}},FSNode:class{constructor(e,t,n,r){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=Le.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=r,this.readMode=365,this.writeMode=146}get read(){return(this.mode&this.readMode)===this.readMode}set read(e){e?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(e){e?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return Le.isDir(this.mode)}get isDevice(){return Le.isChrdev(this.mode)}},lookupPath(e,t={}){if(!(e=Ge.resolve(e)))return{path:"",node:null};if((t=Object.assign({follow_mount:!0,recurse_count:0},t)).recurse_count>8)throw new Le.ErrnoError(32);for(var n=e.split("/").filter((e=>!!e)),r=Le.root,o="/",i=0;i<n.length;i++){var a=i===n.length-1;if(a&&t.parent)break;if(r=Le.lookupNode(r,n[i]),o=Ae.join2(o,n[i]),Le.isMountpoint(r)&&(!a||a&&t.follow_mount)&&(r=r.mounted.root),!a||t.follow)for(var s=0;Le.isLink(r.mode);){var u=Le.readlink(o);if(o=Ge.resolve(Ae.dirname(o),u),r=Le.lookupPath(o,{recurse_count:t.recurse_count+1}).node,s++>40)throw new Le.ErrnoError(32)}}return{path:o,node:r}},getPath(e){for(var t;;){if(Le.isRoot(e)){var n=e.mount.mountpoint;return t?"/"!==n[n.length-1]?`${n}/${t}`:n+t:n}t=t?`${e.name}/${t}`:e.name,e=e.parent}},hashName(e,t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%Le.nameTable.length},hashAddNode(e){var t=Le.hashName(e.parent.id,e.name);e.name_next=Le.nameTable[t],Le.nameTable[t]=e},hashRemoveNode(e){var t=Le.hashName(e.parent.id,e.name);if(Le.nameTable[t]===e)Le.nameTable[t]=e.name_next;else for(var n=Le.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode(e,t){var n=Le.mayLookup(e);if(n)throw new Le.ErrnoError(n);for(var r=Le.hashName(e.id,t),o=Le.nameTable[r];o;o=o.name_next){var i=o.name;if(o.parent.id===e.id&&i===t)return o}return Le.lookup(e,t)},createNode(e,t,n,r){I("object"==typeof e);var o=new Le.FSNode(e,t,n,r);return Le.hashAddNode(o),o},destroyNode(e){Le.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>32768==(61440&e),isDir:e=>16384==(61440&e),isLink:e=>40960==(61440&e),isChrdev:e=>8192==(61440&e),isBlkdev:e=>24576==(61440&e),isFIFO:e=>4096==(61440&e),isSocket:e=>!(49152&~e),flagsToPermissionString(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:(e,t)=>Le.ignorePermissions||(!t.includes("r")||292&e.mode)&&(!t.includes("w")||146&e.mode)&&(!t.includes("x")||73&e.mode)?0:2,mayLookup(e){if(!Le.isDir(e.mode))return 54;var t=Le.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate(e,t){try{return Le.lookupNode(e,t),20}catch(e){}return Le.nodePermissions(e,"wx")},mayDelete(e,t,n){var r;try{r=Le.lookupNode(e,t)}catch(e){return e.errno}var o=Le.nodePermissions(e,"wx");if(o)return o;if(n){if(!Le.isDir(r.mode))return 54;if(Le.isRoot(r)||Le.getPath(r)===Le.cwd())return 10}else if(Le.isDir(r.mode))return 31;return 0},mayOpen:(e,t)=>e?Le.isLink(e.mode)?32:Le.isDir(e.mode)&&("r"!==Le.flagsToPermissionString(t)||512&t)?31:Le.nodePermissions(e,Le.flagsToPermissionString(t)):44,MAX_OPEN_FDS:4096,nextfd(){for(var e=0;e<=Le.MAX_OPEN_FDS;e++)if(!Le.streams[e])return e;throw new Le.ErrnoError(33)},getStreamChecked(e){var t=Le.getStream(e);if(!t)throw new Le.ErrnoError(8);return t},getStream:e=>Le.streams[e],createStream:(e,t=-1)=>(I(t>=-1),e=Object.assign(new Le.FSStream,e),-1==t&&(t=Le.nextfd()),e.fd=t,Le.streams[t]=e,e),closeStream(e){Le.streams[e]=null},dupStream(e,t=-1){var n=Le.createStream(e,t);return n.stream_ops?.dup?.(n),n},chrdev_stream_ops:{open(e){var t=Le.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open?.(e)},llseek(){throw new Le.ErrnoError(70)}},major:e=>e>>8,minor:e=>255&e,makedev:(e,t)=>e<<8|t,registerDevice(e,t){Le.devices[e]={stream_ops:t}},getDevice:e=>Le.devices[e],getMounts(e){for(var t=[],n=[e];n.length;){var r=n.pop();t.push(r),n.push(...r.mounts)}return t},syncfs(e,t){"function"==typeof e&&(t=e,e=!1),Le.syncFSRequests++,Le.syncFSRequests>1&&E(`warning: ${Le.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var n=Le.getMounts(Le.root.mount),r=0;function o(e){return I(Le.syncFSRequests>0),Le.syncFSRequests--,t(e)}function i(e){if(e)return i.errored?void 0:(i.errored=!0,o(e));++r>=n.length&&o(null)}n.forEach((t=>{if(!t.type.syncfs)return i(null);t.type.syncfs(t,e,i)}))},mount(e,t,n){if("string"==typeof e)throw e;var r,o="/"===n,i=!n;if(o&&Le.root)throw new Le.ErrnoError(10);if(!o&&!i){var a=Le.lookupPath(n,{follow_mount:!1});if(n=a.path,r=a.node,Le.isMountpoint(r))throw new Le.ErrnoError(10);if(!Le.isDir(r.mode))throw new Le.ErrnoError(54)}var s={type:e,opts:t,mountpoint:n,mounts:[]},u=e.mount(s);return u.mount=s,s.root=u,o?Le.root=u:r&&(r.mounted=s,r.mount&&r.mount.mounts.push(s)),u},unmount(e){var t=Le.lookupPath(e,{follow_mount:!1});if(!Le.isMountpoint(t.node))throw new Le.ErrnoError(28);var n=t.node,r=n.mounted,o=Le.getMounts(r);Object.keys(Le.nameTable).forEach((e=>{for(var t=Le.nameTable[e];t;){var n=t.name_next;o.includes(t.mount)&&Le.destroyNode(t),t=n}})),n.mounted=null;var i=n.mount.mounts.indexOf(r);I(-1!==i),n.mount.mounts.splice(i,1)},lookup:(e,t)=>e.node_ops.lookup(e,t),mknod(e,t,n){var r=Le.lookupPath(e,{parent:!0}).node,o=Ae.basename(e);if(!o||"."===o||".."===o)throw new Le.ErrnoError(28);var i=Le.mayCreate(r,o);if(i)throw new Le.ErrnoError(i);if(!r.node_ops.mknod)throw new Le.ErrnoError(63);return r.node_ops.mknod(r,o,t,n)},create:(e,t)=>(t=void 0!==t?t:438,t&=4095,t|=32768,Le.mknod(e,t,0)),mkdir:(e,t)=>(t=void 0!==t?t:511,t&=1023,t|=16384,Le.mknod(e,t,0)),mkdirTree(e,t){for(var n=e.split("/"),r="",o=0;o<n.length;++o)if(n[o]){r+="/"+n[o];try{Le.mkdir(r,t)}catch(e){if(20!=e.errno)throw e}}},mkdev:(e,t,n)=>(void 0===n&&(n=t,t=438),t|=8192,Le.mknod(e,t,n)),symlink(e,t){if(!Ge.resolve(e))throw new Le.ErrnoError(44);var n=Le.lookupPath(t,{parent:!0}).node;if(!n)throw new Le.ErrnoError(44);var r=Ae.basename(t),o=Le.mayCreate(n,r);if(o)throw new Le.ErrnoError(o);if(!n.node_ops.symlink)throw new Le.ErrnoError(63);return n.node_ops.symlink(n,r,e)},rename(e,t){var n,r,o=Ae.dirname(e),i=Ae.dirname(t),a=Ae.basename(e),s=Ae.basename(t);if(n=Le.lookupPath(e,{parent:!0}).node,r=Le.lookupPath(t,{parent:!0}).node,!n||!r)throw new Le.ErrnoError(44);if(n.mount!==r.mount)throw new Le.ErrnoError(75);var u,F=Le.lookupNode(n,a),l=Ge.relative(e,i);if("."!==l.charAt(0))throw new Le.ErrnoError(28);if("."!==(l=Ge.relative(t,o)).charAt(0))throw new Le.ErrnoError(55);try{u=Le.lookupNode(r,s)}catch(e){}if(F!==u){var m=Le.isDir(F.mode),d=Le.mayDelete(n,a,m);if(d)throw new Le.ErrnoError(d);if(d=u?Le.mayDelete(r,s,m):Le.mayCreate(r,s))throw new Le.ErrnoError(d);if(!n.node_ops.rename)throw new Le.ErrnoError(63);if(Le.isMountpoint(F)||u&&Le.isMountpoint(u))throw new Le.ErrnoError(10);if(r!==n&&(d=Le.nodePermissions(n,"w")))throw new Le.ErrnoError(d);Le.hashRemoveNode(F);try{n.node_ops.rename(F,r,s),F.parent=r}catch(e){throw e}finally{Le.hashAddNode(F)}}},rmdir(e){var t=Le.lookupPath(e,{parent:!0}).node,n=Ae.basename(e),r=Le.lookupNode(t,n),o=Le.mayDelete(t,n,!0);if(o)throw new Le.ErrnoError(o);if(!t.node_ops.rmdir)throw new Le.ErrnoError(63);if(Le.isMountpoint(r))throw new Le.ErrnoError(10);t.node_ops.rmdir(t,n),Le.destroyNode(r)},readdir(e){var t=Le.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new Le.ErrnoError(54);return t.node_ops.readdir(t)},unlink(e){var t=Le.lookupPath(e,{parent:!0}).node;if(!t)throw new Le.ErrnoError(44);var n=Ae.basename(e),r=Le.lookupNode(t,n),o=Le.mayDelete(t,n,!1);if(o)throw new Le.ErrnoError(o);if(!t.node_ops.unlink)throw new Le.ErrnoError(63);if(Le.isMountpoint(r))throw new Le.ErrnoError(10);t.node_ops.unlink(t,n),Le.destroyNode(r)},readlink(e){var t=Le.lookupPath(e).node;if(!t)throw new Le.ErrnoError(44);if(!t.node_ops.readlink)throw new Le.ErrnoError(28);return Ge.resolve(Le.getPath(t.parent),t.node_ops.readlink(t))},stat(e,t){var n=Le.lookupPath(e,{follow:!t}).node;if(!n)throw new Le.ErrnoError(44);if(!n.node_ops.getattr)throw new Le.ErrnoError(63);return n.node_ops.getattr(n)},lstat:e=>Le.stat(e,!0),chmod(e,t,n){var r;if(!(r="string"==typeof e?Le.lookupPath(e,{follow:!n}).node:e).node_ops.setattr)throw new Le.ErrnoError(63);r.node_ops.setattr(r,{mode:4095&t|-4096&r.mode,timestamp:Date.now()})},lchmod(e,t){Le.chmod(e,t,!0)},fchmod(e,t){var n=Le.getStreamChecked(e);Le.chmod(n.node,t)},chown(e,t,n,r){var o;if(!(o="string"==typeof e?Le.lookupPath(e,{follow:!r}).node:e).node_ops.setattr)throw new Le.ErrnoError(63);o.node_ops.setattr(o,{timestamp:Date.now()})},lchown(e,t,n){Le.chown(e,t,n,!0)},fchown(e,t,n){var r=Le.getStreamChecked(e);Le.chown(r.node,t,n)},truncate(e,t){if(t<0)throw new Le.ErrnoError(28);var n;if(!(n="string"==typeof e?Le.lookupPath(e,{follow:!0}).node:e).node_ops.setattr)throw new Le.ErrnoError(63);if(Le.isDir(n.mode))throw new Le.ErrnoError(31);if(!Le.isFile(n.mode))throw new Le.ErrnoError(28);var r=Le.nodePermissions(n,"w");if(r)throw new Le.ErrnoError(r);n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},ftruncate(e,t){var n=Le.getStreamChecked(e);if(!(2097155&n.flags))throw new Le.ErrnoError(28);Le.truncate(n.node,t)},utime(e,t,n){var r=Le.lookupPath(e,{follow:!0}).node;r.node_ops.setattr(r,{timestamp:Math.max(t,n)})},open(e,t,n){if(""===e)throw new Le.ErrnoError(44);var r;if(n=64&(t="string"==typeof t?(e=>{var t={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[e];if(void 0===t)throw new Error(`Unknown file open mode: ${e}`);return t})(t):t)?4095&(n=void 0===n?438:n)|32768:0,"object"==typeof e)r=e;else{e=Ae.normalize(e);try{r=Le.lookupPath(e,{follow:!(131072&t)}).node}catch(e){}}var o=!1;if(64&t)if(r){if(128&t)throw new Le.ErrnoError(20)}else r=Le.mknod(e,n,0),o=!0;if(!r)throw new Le.ErrnoError(44);if(Le.isChrdev(r.mode)&&(t&=-513),65536&t&&!Le.isDir(r.mode))throw new Le.ErrnoError(54);if(!o){var a=Le.mayOpen(r,t);if(a)throw new Le.ErrnoError(a)}512&t&&!o&&Le.truncate(r,0),t&=-131713;var s=Le.createStream({node:r,path:Le.getPath(r),flags:t,seekable:!0,position:0,stream_ops:r.stream_ops,ungotten:[],error:!1});return s.stream_ops.open&&s.stream_ops.open(s),!i.logReadFiles||1&t||e in Le.readFiles||(Le.readFiles[e]=1),s},close(e){if(Le.isClosed(e))throw new Le.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{Le.closeStream(e.fd)}e.fd=null},isClosed:e=>null===e.fd,llseek(e,t,n){if(Le.isClosed(e))throw new Le.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new Le.ErrnoError(70);if(0!=n&&1!=n&&2!=n)throw new Le.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read(e,t,n,r,o){if(I(n>=0),r<0||o<0)throw new Le.ErrnoError(28);if(Le.isClosed(e))throw new Le.ErrnoError(8);if(1==(2097155&e.flags))throw new Le.ErrnoError(8);if(Le.isDir(e.node.mode))throw new Le.ErrnoError(31);if(!e.stream_ops.read)throw new Le.ErrnoError(28);var i=void 0!==o;if(i){if(!e.seekable)throw new Le.ErrnoError(70)}else o=e.position;var a=e.stream_ops.read(e,t,n,r,o);return i||(e.position+=a),a},write(e,t,n,r,o,i){if(I(n>=0),r<0||o<0)throw new Le.ErrnoError(28);if(Le.isClosed(e))throw new Le.ErrnoError(8);if(!(2097155&e.flags))throw new Le.ErrnoError(8);if(Le.isDir(e.node.mode))throw new Le.ErrnoError(31);if(!e.stream_ops.write)throw new Le.ErrnoError(28);e.seekable&&1024&e.flags&&Le.llseek(e,0,2);var a=void 0!==o;if(a){if(!e.seekable)throw new Le.ErrnoError(70)}else o=e.position;var s=e.stream_ops.write(e,t,n,r,o,i);return a||(e.position+=s),s},allocate(e,t,n){if(Le.isClosed(e))throw new Le.ErrnoError(8);if(t<0||n<=0)throw new Le.ErrnoError(28);if(!(2097155&e.flags))throw new Le.ErrnoError(8);if(!Le.isFile(e.node.mode)&&!Le.isDir(e.node.mode))throw new Le.ErrnoError(43);if(!e.stream_ops.allocate)throw new Le.ErrnoError(138);e.stream_ops.allocate(e,t,n)},mmap(e,t,n,r,o){if(2&r&&!(2&o)&&2!=(2097155&e.flags))throw new Le.ErrnoError(2);if(1==(2097155&e.flags))throw new Le.ErrnoError(2);if(!e.stream_ops.mmap)throw new Le.ErrnoError(43);if(!t)throw new Le.ErrnoError(28);return e.stream_ops.mmap(e,t,n,r,o)},msync:(e,t,n,r,o)=>(I(n>=0),e.stream_ops.msync?e.stream_ops.msync(e,t,n,r,o):0),ioctl(e,t,n){if(!e.stream_ops.ioctl)throw new Le.ErrnoError(59);return e.stream_ops.ioctl(e,t,n)},readFile(e,t={}){if(t.flags=t.flags||0,t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error(`Invalid encoding type "${t.encoding}"`);var n,r=Le.open(e,t.flags),o=Le.stat(e).size,i=new Uint8Array(o);return Le.read(r,i,0,o,0),"utf8"===t.encoding?n=De(i):"binary"===t.encoding&&(n=i),Le.close(r),n},writeFile(e,t,n={}){n.flags=n.flags||577;var r=Le.open(e,n.flags,n.mode);if("string"==typeof t){var o=new Uint8Array(Me(t)+1),i=Ce(t,o,0,o.length);Le.write(r,o,0,i,void 0,n.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");Le.write(r,t,0,t.byteLength,void 0,n.canOwn)}Le.close(r)},cwd:()=>Le.currentPath,chdir(e){var t=Le.lookupPath(e,{follow:!0});if(null===t.node)throw new Le.ErrnoError(44);if(!Le.isDir(t.node.mode))throw new Le.ErrnoError(54);var n=Le.nodePermissions(t.node,"x");if(n)throw new Le.ErrnoError(n);Le.currentPath=t.path},createDefaultDirectories(){Le.mkdir("/tmp"),Le.mkdir("/home"),Le.mkdir("/home/web_user")},createDefaultDevices(){Le.mkdir("/dev"),Le.registerDevice(Le.makedev(1,3),{read:()=>0,write:(e,t,n,r,o)=>r}),Le.mkdev("/dev/null",Le.makedev(1,3)),ve.register(Le.makedev(5,0),ve.default_tty_ops),ve.register(Le.makedev(6,0),ve.default_tty1_ops),Le.mkdev("/dev/tty",Le.makedev(5,0)),Le.mkdev("/dev/tty1",Le.makedev(6,0));var e=new Uint8Array(1024),t=0,n=()=>(0===t&&(t=Ee(e).byteLength),e[--t]);Le.createDevice("/dev","random",n),Le.createDevice("/dev","urandom",n),Le.mkdir("/dev/shm"),Le.mkdir("/dev/shm/tmp")},createSpecialDirectories(){Le.mkdir("/proc");var e=Le.mkdir("/proc/self");Le.mkdir("/proc/self/fd"),Le.mount({mount(){var t=Le.createNode(e,"fd",16895,73);return t.node_ops={lookup(e,t){var n=+t,r=Le.getStreamChecked(n),o={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>r.path}};return o.parent=o,o}},t}},{},"/proc/self/fd")},createStandardStreams(e,t,n){e?Le.createDevice("/dev","stdin",e):Le.symlink("/dev/tty","/dev/stdin"),t?Le.createDevice("/dev","stdout",null,t):Le.symlink("/dev/tty","/dev/stdout"),n?Le.createDevice("/dev","stderr",null,n):Le.symlink("/dev/tty1","/dev/stderr");var r=Le.open("/dev/stdin",0),o=Le.open("/dev/stdout",1),i=Le.open("/dev/stderr",1);I(0===r.fd,`invalid handle for stdin (${r.fd})`),I(1===o.fd,`invalid handle for stdout (${o.fd})`),I(2===i.fd,`invalid handle for stderr (${i.fd})`)},staticInit(){[44].forEach((e=>{Le.genericErrors[e]=new Le.ErrnoError(e),Le.genericErrors[e].stack="<generic error, no stack>"})),Le.nameTable=new Array(4096),Le.mount(Re,{},"/"),Le.createDefaultDirectories(),Le.createDefaultDevices(),Le.createSpecialDirectories(),Le.filesystems={MEMFS:Re}},init(e,t,n){I(!Le.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),Le.initialized=!0,e??=i.stdin,t??=i.stdout,n??=i.stderr,Le.createStandardStreams(e,t,n)},quit(){Le.initialized=!1,st(0);for(var e=0;e<Le.streams.length;e++){var t=Le.streams[e];t&&Le.close(t)}},findObject(e,t){var n=Le.analyzePath(e,t);return n.exists?n.object:null},analyzePath(e,t){try{e=(r=Le.lookupPath(e,{follow:!t})).path}catch(e){}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var r=Le.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=r.path,n.parentObject=r.node,n.name=Ae.basename(e),r=Le.lookupPath(e,{follow:!t}),n.exists=!0,n.path=r.path,n.object=r.node,n.name=r.node.name,n.isRoot="/"===r.path}catch(e){n.error=e.errno}return n},createPath(e,t,n,r){e="string"==typeof e?e:Le.getPath(e);for(var o=t.split("/").reverse();o.length;){var i=o.pop();if(i){var a=Ae.join2(e,i);try{Le.mkdir(a)}catch(e){}e=a}}return a},createFile(e,t,n,r,o){var i=Ae.join2("string"==typeof e?e:Le.getPath(e),t),a=ke(r,o);return Le.create(i,a)},createDataFile(e,t,n,r,o,i){var a=t;e&&(e="string"==typeof e?e:Le.getPath(e),a=t?Ae.join2(e,t):e);var s=ke(r,o),u=Le.create(a,s);if(n){if("string"==typeof n){for(var F=new Array(n.length),l=0,m=n.length;l<m;++l)F[l]=n.charCodeAt(l);n=F}Le.chmod(u,146|s);var d=Le.open(u,577);Le.write(d,n,0,n.length,0,i),Le.close(d),Le.chmod(u,s)}},createDevice(e,t,n,r){var o=Ae.join2("string"==typeof e?e:Le.getPath(e),t),i=ke(!!n,!!r);Le.createDevice.major??=64;var a=Le.makedev(Le.createDevice.major++,0);return Le.registerDevice(a,{open(e){e.seekable=!1},close(e){r?.buffer?.length&&r(10)},read(e,t,r,o,i){for(var a=0,s=0;s<o;s++){var u;try{u=n()}catch(e){throw new Le.ErrnoError(29)}if(void 0===u&&0===a)throw new Le.ErrnoError(6);if(null==u)break;a++,t[r+s]=u}return a&&(e.node.timestamp=Date.now()),a},write(e,t,n,o,i){for(var a=0;a<o;a++)try{r(t[n+a])}catch(e){throw new Le.ErrnoError(29)}return o&&(e.node.timestamp=Date.now()),a}}),Le.mkdev(o,i,a)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{e.contents=_(e.url),e.usedBytes=e.contents.length}catch(e){throw new Le.ErrnoError(29)}},createLazyFile(e,t,n,r,o){class i{constructor(){this.lengthKnown=!1,this.chunks=[]}get(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,n=e/this.chunkSize|0;return this.getter(n)[t]}}setDataGetter(e){this.getter=e}cacheLength(){var e=new XMLHttpRequest;if(e.open("HEAD",n,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn\'t load "+n+". Status: "+e.status);var t,r=Number(e.getResponseHeader("Content-length")),o=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,i=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,a=1048576;o||(a=r);var s=this;s.setDataGetter((e=>{var t=e*a,o=(e+1)*a-1;if(o=Math.min(o,r-1),void 0===s.chunks[e]&&(s.chunks[e]=((e,t)=>{if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>r-1)throw new Error("only "+r+" bytes available! programmer error!");var o=new XMLHttpRequest;if(o.open("GET",n,!1),r!==a&&o.setRequestHeader("Range","bytes="+e+"-"+t),o.responseType="arraybuffer",o.overrideMimeType&&o.overrideMimeType("text/plain; charset=x-user-defined"),o.send(null),!(o.status>=200&&o.status<300||304===o.status))throw new Error("Couldn\'t load "+n+". Status: "+o.status);return void 0!==o.response?new Uint8Array(o.response||[]):ye(o.responseText||"",!0)})(t,o)),void 0===s.chunks[e])throw new Error("doXHR failed!");return s.chunks[e]})),!i&&r||(a=r=1,r=this.getter(0).length,a=r,A("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=r,this._chunkSize=a,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if("undefined"!=typeof XMLHttpRequest){if(!u)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var a={isDevice:!1,contents:new i}}else a={isDevice:!1,url:n};var s=Le.createFile(e,t,a,r,o);a.contents?s.contents=a.contents:a.url&&(s.contents=null,s.url=a.url),Object.defineProperties(s,{usedBytes:{get:function(){return this.contents.length}}});var F={};function l(e,t,n,r,o){var i=e.node.contents;if(o>=i.length)return 0;var a=Math.min(i.length-o,r);if(I(a>=0),i.slice)for(var s=0;s<a;s++)t[n+s]=i[o+s];else for(s=0;s<a;s++)t[n+s]=i.get(o+s);return a}return Object.keys(s.stream_ops).forEach((e=>{var t=s.stream_ops[e];F[e]=(...e)=>(Le.forceLoadFile(s),t(...e))})),F.read=(e,t,n,r,o)=>(Le.forceLoadFile(s),l(e,t,n,r,o)),F.mmap=(e,t,n,r,o)=>{Le.forceLoadFile(s);var i=we(t);if(!i)throw new Le.ErrnoError(48);return l(e,M,i,t,n),{ptr:i,allocated:!0}},s.stream_ops=F,s},absolutePath(){q("FS.absolutePath has been removed; use PATH_FS.resolve instead")},createFolder(){q("FS.createFolder has been removed; use FS.mkdir instead")},createLink(){q("FS.createLink has been removed; use FS.symlink instead")},joinPath(){q("FS.joinPath has been removed; use PATH.join instead")},mmapAlloc(){q("FS.mmapAlloc has been replaced by the top level function mmapAlloc")},standardizePath(){q("FS.standardizePath has been removed; use PATH.normalize instead")}},Be={DEFAULT_POLLMASK:5,calculateAt(e,t,n){if(Ae.isAbs(t))return t;var r;if(r=-100===e?Le.cwd():Be.getStreamFromFD(e).path,0==t.length){if(!n)throw new Le.ErrnoError(44);return r}return Ae.join2(r,t)},doStat(e,t,n){var r=e(t);O[n>>2]=r.dev,O[n+4>>2]=r.mode,v[n+8>>2]=r.nlink,O[n+12>>2]=r.uid,O[n+16>>2]=r.gid,O[n+20>>2]=r.rdev,ee=[r.size>>>0,(Z=r.size,+Math.abs(Z)>=1?Z>0?+Math.floor(Z/4294967296)>>>0:~~+Math.ceil((Z-+(~~Z>>>0))/4294967296)>>>0:0)],O[n+24>>2]=ee[0],O[n+28>>2]=ee[1],O[n+32>>2]=4096,O[n+36>>2]=r.blocks;var o=r.atime.getTime(),i=r.mtime.getTime(),a=r.ctime.getTime();return ee=[Math.floor(o/1e3)>>>0,(Z=Math.floor(o/1e3),+Math.abs(Z)>=1?Z>0?+Math.floor(Z/4294967296)>>>0:~~+Math.ceil((Z-+(~~Z>>>0))/4294967296)>>>0:0)],O[n+40>>2]=ee[0],O[n+44>>2]=ee[1],v[n+48>>2]=o%1e3*1e3*1e3,ee=[Math.floor(i/1e3)>>>0,(Z=Math.floor(i/1e3),+Math.abs(Z)>=1?Z>0?+Math.floor(Z/4294967296)>>>0:~~+Math.ceil((Z-+(~~Z>>>0))/4294967296)>>>0:0)],O[n+56>>2]=ee[0],O[n+60>>2]=ee[1],v[n+64>>2]=i%1e3*1e3*1e3,ee=[Math.floor(a/1e3)>>>0,(Z=Math.floor(a/1e3),+Math.abs(Z)>=1?Z>0?+Math.floor(Z/4294967296)>>>0:~~+Math.ceil((Z-+(~~Z>>>0))/4294967296)>>>0:0)],O[n+72>>2]=ee[0],O[n+76>>2]=ee[1],v[n+80>>2]=a%1e3*1e3*1e3,ee=[r.ino>>>0,(Z=r.ino,+Math.abs(Z)>=1?Z>0?+Math.floor(Z/4294967296)>>>0:~~+Math.ceil((Z-+(~~Z>>>0))/4294967296)>>>0:0)],O[n+88>>2]=ee[0],O[n+92>>2]=ee[1],0},doMsync(e,t,n,r,o){if(!Le.isFile(t.node.mode))throw new Le.ErrnoError(43);if(2&r)return 0;var i=C.slice(e,e+n);Le.msync(t,i,o,n,r)},getStreamFromFD:e=>Le.getStreamChecked(e),varargs:void 0,getStr:e=>be(e)},Ne=(e,t)=>(I(e==e>>>0||e==(0|e)),I(t===(0|t)),t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN),Ue=(e,t,n)=>(I("number"==typeof n,"stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),Ce(e,C,t,n)),Ve=[0,31,60,91,121,152,182,213,244,274,305,335],We=[0,31,59,90,120,151,181,212,243,273,304,334],ze=e=>{var t=G.buffer,n=(e-t.byteLength+65535)/65536|0;try{return G.grow(n),k(),1}catch(n){E(`growMemory: Attempted to grow heap from ${t.byteLength} bytes to ${e} bytes, but got error: ${n}`)}},He={},$e=()=>{if(!$e.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:c||"./this.program"};for(var t in He)void 0===He[t]?delete e[t]:e[t]=He[t];var n=[];for(var t in e)n.push(`${t}=${e[t]}`);$e.strings=n}return $e.strings},Xe=[],Ke=e=>{var t=Xe[e];return t||(e>=Xe.length&&(Xe.length=e+1),Xe[e]=t=Te.get(e)),I(Te.get(e)==t,"JavaScript-side Wasm function table mirror is out of date!"),t},Ye="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0,Je=(e,t)=>{I(e<16384),e<128?t.push(e):t.push(e%128|128,e>>7)},qe=(e,t)=>{if(I(!t.includes("j"),"i64 not permitted in function signatures when WASM_BIGINT is disabled"),"function"==typeof WebAssembly.Function)return new WebAssembly.Function((e=>{I(!e.includes("j"),"i64 not permitted in function signatures when WASM_BIGINT is disabled");for(var t={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},n={parameters:[],results:"v"==e[0]?[]:[t[e[0]]]},r=1;r<e.length;++r)I(e[r]in t,"invalid signature char: "+e[r]),n.parameters.push(t[e[r]]);return n})(t),e);var n=[1];((e,t)=>{var n=e.slice(0,1),r=e.slice(1),o={i:127,p:127,j:126,f:125,d:124,e:111};t.push(96),Je(r.length,t);for(var i=0;i<r.length;++i)I(r[i]in o,"invalid signature char: "+r[i]),t.push(o[r[i]]);"v"==n?t.push(0):t.push(1,o[n])})(t,n);var r=[0,97,115,109,1,0,0,0,1];Je(n.length,r),r.push(...n),r.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var o=new WebAssembly.Module(new Uint8Array(r));return new WebAssembly.Instance(o,{e:{f:e}}).exports.f},Qe=e=>(Oe||(Oe=new WeakMap,((e,t)=>{if(Oe)for(var n=e;n<e+t;n++){var r=Ke(n);r&&Oe.set(r,n)}})(0,Te.length)),Oe.get(e)||0),Ze=[],et=(e,t)=>{Te.set(e,t),Xe[e]=Te.get(e)},tt=e=>Pt(e),nt=(e,t,n,r,o)=>{var a={string:e=>{var t=0;return null!=e&&0!==e&&(t=(e=>{var t=Me(e)+1,n=tt(t);return Ue(e,n,t),n})(e)),t},array:e=>{var t,n,r=tt(e.length);return n=r,I((t=e).length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),M.set(t,n),r}},s=(e=>{var t=i["_"+e];return I(t,"Cannot call unknown function "+e+", make sure it is exported"),t})(e),u=[],F=0;if(I("array"!==t,\'Return type should not be "array".\'),r)for(var l=0;l<r.length;l++){var m=a[n[l]];m?(0===F&&(F=ce()),u[l]=m(r[l])):u[l]=r[l]}var d=s(...u);return d=function(e){return 0!==F&&Pe(F),function(e){return"string"===t?be(e):"boolean"===t?Boolean(e):e}(e)}(d)};Le.createPreloadedFile=(e,t,n,r,o,i,a,s,u,F)=>{var l=t?Ge.resolve(Ae.join2(e,t)):e,m=K(`cp ${l}`);function _(n){function d(n){F?.(),s||((e,t,n,r,o,i)=>{Le.createDataFile(e,t,n,r,o,i)})(e,t,n,r,o,u),i?.(),J(m)}((e,t,n,r)=>{"undefined"!=typeof Browser&&Browser.init();var o=!1;return Ie.forEach((i=>{o||i.canHandle(t)&&(i.handle(e,t,n,r),o=!0)})),o})(n,l,d,(()=>{a?.(),J(m)}))||d(n)}Y(m),"string"==typeof n?((e,t,n,r)=>{var o=r?"":K(`al ${e}`);d(e).then((n=>{I(n,`Loading data file "${e}" failed (no arrayBuffer).`),t(new Uint8Array(n)),o&&J(o)}),(t=>{if(!n)throw`Loading data file "${e}" failed.`;n()})),o&&Y(o)})(n,_,a):_(n)},Le.staticInit();var rt={__assert_fail:(e,t,n,r)=>{q(`Assertion failed: ${be(e)}, at: `+[t?be(t):"unknown filename",n,r?be(r):"unknown function"])},__syscall_fcntl64:function(e,t,n){Be.varargs=n;try{var r=Be.getStreamFromFD(e);switch(t){case 0:if((o=pe())<0)return-28;for(;Le.streams[o];)o++;return Le.dupStream(r,o).fd;case 1:case 2:case 13:case 14:return 0;case 3:return r.flags;case 4:var o=pe();return r.flags|=o,0;case 12:return o=fe(),y[o+0>>1]=2,0}return-28}catch(e){if(void 0===Le||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_fstat64:function(e,t){try{var n=Be.getStreamFromFD(e);return Be.doStat(Le.stat,n.path,t)}catch(e){if(void 0===Le||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_ftruncate64:function(e,t,n){var r=Ne(t,n);try{return isNaN(r)?61:(Le.ftruncate(e,r),0)}catch(e){if(void 0===Le||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_getdents64:function(e,t,n){try{var r=Be.getStreamFromFD(e);r.getdents||=Le.readdir(r.path);for(var o=280,i=0,a=Le.llseek(r,0,1),s=Math.floor(a/o);s<r.getdents.length&&i+o<=n;){var u,F,l=r.getdents[s];if("."===l)u=r.node.id,F=4;else if(".."===l)u=Le.lookupPath(r.path,{parent:!0}).node.id,F=4;else{var m=Le.lookupNode(r.node,l);u=m.id,F=Le.isChrdev(m.mode)?2:Le.isDir(m.mode)?4:Le.isLink(m.mode)?10:8}I(u),ee=[u>>>0,(Z=u,+Math.abs(Z)>=1?Z>0?+Math.floor(Z/4294967296)>>>0:~~+Math.ceil((Z-+(~~Z>>>0))/4294967296)>>>0:0)],O[t+i>>2]=ee[0],O[t+i+4>>2]=ee[1],ee=[(s+1)*o>>>0,(Z=(s+1)*o,+Math.abs(Z)>=1?Z>0?+Math.floor(Z/4294967296)>>>0:~~+Math.ceil((Z-+(~~Z>>>0))/4294967296)>>>0:0)],O[t+i+8>>2]=ee[0],O[t+i+12>>2]=ee[1],y[t+i+16>>1]=280,M[t+i+18]=F,Ue(l,t+i+19,256),i+=o,s+=1}return Le.llseek(r,s*o,0),i}catch(e){if(void 0===Le||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_ioctl:function(e,t,n){Be.varargs=n;try{var r=Be.getStreamFromFD(e);switch(t){case 21509:case 21510:case 21511:case 21512:case 21524:case 21515:return r.tty?0:-59;case 21505:if(!r.tty)return-59;if(r.tty.ops.ioctl_tcgets){var o=r.tty.ops.ioctl_tcgets(r),i=fe();O[i>>2]=o.c_iflag||0,O[i+4>>2]=o.c_oflag||0,O[i+8>>2]=o.c_cflag||0,O[i+12>>2]=o.c_lflag||0;for(var a=0;a<32;a++)M[i+a+17]=o.c_cc[a]||0;return 0}return 0;case 21506:case 21507:case 21508:if(!r.tty)return-59;if(r.tty.ops.ioctl_tcsets){i=fe();var s=O[i>>2],u=O[i+4>>2],F=O[i+8>>2],l=O[i+12>>2],m=[];for(a=0;a<32;a++)m.push(M[i+a+17]);return r.tty.ops.ioctl_tcsets(r.tty,t,{c_iflag:s,c_oflag:u,c_cflag:F,c_lflag:l,c_cc:m})}return 0;case 21519:return r.tty?(i=fe(),O[i>>2]=0,0):-59;case 21520:return r.tty?-28:-59;case 21531:return i=fe(),Le.ioctl(r,t,i);case 21523:if(!r.tty)return-59;if(r.tty.ops.ioctl_tiocgwinsz){var d=r.tty.ops.ioctl_tiocgwinsz(r.tty);i=fe(),y[i>>1]=d[0],y[i+2>>1]=d[1]}return 0;default:return-28}}catch(e){if(void 0===Le||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_lstat64:function(e,t){try{return e=Be.getStr(e),Be.doStat(Le.lstat,e,t)}catch(e){if(void 0===Le||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_newfstatat:function(e,t,n,r){try{t=Be.getStr(t);var o=256&r,i=4096&r;return I(!(r&=-6401),`unknown flags in __syscall_newfstatat: ${r}`),t=Be.calculateAt(e,t,i),Be.doStat(o?Le.lstat:Le.stat,t,n)}catch(e){if(void 0===Le||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_openat:function(e,t,n,r){Be.varargs=r;try{t=Be.getStr(t),t=Be.calculateAt(e,t);var o=r?pe():0;return Le.open(t,n,o).fd}catch(e){if(void 0===Le||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_rmdir:function(e){try{return e=Be.getStr(e),Le.rmdir(e),0}catch(e){if(void 0===Le||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_stat64:function(e,t){try{return e=Be.getStr(e),Be.doStat(Le.stat,e,t)}catch(e){if(void 0===Le||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_unlinkat:function(e,t,n){try{return t=Be.getStr(t),t=Be.calculateAt(e,t),0===n?Le.unlink(t):512===n?Le.rmdir(t):q("Invalid flags passed to unlinkat"),0}catch(e){if(void 0===Le||"ErrnoError"!==e.name)throw e;return-e.errno}},_abort_js:()=>{q("native code called abort()")},_emscripten_memcpy_js:(e,t,n)=>C.copyWithin(e,t,t+n),_emscripten_throw_longjmp:()=>{throw 1/0},_gmtime_js:function(e,t,n){var r=Ne(e,t),o=new Date(1e3*r);O[n>>2]=o.getUTCSeconds(),O[n+4>>2]=o.getUTCMinutes(),O[n+8>>2]=o.getUTCHours(),O[n+12>>2]=o.getUTCDate(),O[n+16>>2]=o.getUTCMonth(),O[n+20>>2]=o.getUTCFullYear()-1900,O[n+24>>2]=o.getUTCDay();var i=Date.UTC(o.getUTCFullYear(),0,1,0,0,0,0),a=(o.getTime()-i)/864e5|0;O[n+28>>2]=a},_localtime_js:function(e,t,n){var r=Ne(e,t),o=new Date(1e3*r);O[n>>2]=o.getSeconds(),O[n+4>>2]=o.getMinutes(),O[n+8>>2]=o.getHours(),O[n+12>>2]=o.getDate(),O[n+16>>2]=o.getMonth(),O[n+20>>2]=o.getFullYear()-1900,O[n+24>>2]=o.getDay();var i=0|(e=>{var t;return((t=e.getFullYear())%4!=0||t%100==0&&t%400!=0?We:Ve)[e.getMonth()]+e.getDate()-1})(o);O[n+28>>2]=i,O[n+36>>2]=-60*o.getTimezoneOffset();var a=new Date(o.getFullYear(),0,1),s=new Date(o.getFullYear(),6,1).getTimezoneOffset(),u=a.getTimezoneOffset(),F=0|(s!=u&&o.getTimezoneOffset()==Math.min(u,s));O[n+32>>2]=F},_tzset_js:(e,t,n,r)=>{var o=(new Date).getFullYear(),i=new Date(o,0,1),a=new Date(o,6,1),s=i.getTimezoneOffset(),u=a.getTimezoneOffset(),F=Math.max(s,u);v[e>>2]=60*F,O[t>>2]=Number(s!=u);var l=e=>{var t=e>=0?"-":"+",n=Math.abs(e);return`UTC${t}${String(Math.floor(n/60)).padStart(2,"0")}${String(n%60).padStart(2,"0")}`},m=l(s),d=l(u);I(m),I(d),I(Me(m)<=16,`timezone name truncated to fit in TZNAME_MAX (${m})`),I(Me(d)<=16,`timezone name truncated to fit in TZNAME_MAX (${d})`),u<s?(Ue(m,n,17),Ue(d,r,17)):(Ue(m,r,17),Ue(d,n,17))},emscripten_date_now:()=>Date.now(),emscripten_resize_heap:e=>{var t=C.length;I((e>>>=0)>t);var n=2147483648;if(e>n)return E(`Cannot enlarge memory, requested ${e} bytes, but the limit is 2147483648 bytes!`),!1;for(var r=1;r<=4;r*=2){var o=t*(1+.2/r);o=Math.min(o,e+100663296);var i=Math.min(n,xe(Math.max(e,o),65536));if(ze(i))return!0}return E(`Failed to grow the heap from ${t} bytes to ${i} bytes, not enough memory!`),!1},environ_get:(e,t)=>{var n=0;return $e().forEach(((r,o)=>{var i=t+n;v[e+4*o>>2]=i,((e,t)=>{for(var n=0;n<e.length;++n)I(e.charCodeAt(n)===(255&e.charCodeAt(n))),M[t++]=e.charCodeAt(n);M[t]=0})(r,i),n+=r.length+1})),0},environ_sizes_get:(e,t)=>{var n=$e();v[e>>2]=n.length;var r=0;return n.forEach((e=>r+=e.length+1)),v[t>>2]=r,0},fd_close:function(e){try{var t=Be.getStreamFromFD(e);return Le.close(t),0}catch(e){if(void 0===Le||"ErrnoError"!==e.name)throw e;return e.errno}},fd_read:function(e,t,n,r){try{var o=((e,t,n,r)=>{for(var o=0,i=0;i<n;i++){var a=v[t>>2],s=v[t+4>>2];t+=8;var u=Le.read(e,M,a,s,r);if(u<0)return-1;if(o+=u,u<s)break;void 0!==r&&(r+=u)}return o})(Be.getStreamFromFD(e),t,n);return v[r>>2]=o,0}catch(e){if(void 0===Le||"ErrnoError"!==e.name)throw e;return e.errno}},fd_seek:function(e,t,n,r,o){var i=Ne(t,n);try{if(isNaN(i))return 61;var a=Be.getStreamFromFD(e);return Le.llseek(a,i,r),ee=[a.position>>>0,(Z=a.position,+Math.abs(Z)>=1?Z>0?+Math.floor(Z/4294967296)>>>0:~~+Math.ceil((Z-+(~~Z>>>0))/4294967296)>>>0:0)],O[o>>2]=ee[0],O[o+4>>2]=ee[1],a.getdents&&0===i&&0===r&&(a.getdents=null),0}catch(e){if(void 0===Le||"ErrnoError"!==e.name)throw e;return e.errno}},fd_sync:function(e){try{var t=Be.getStreamFromFD(e);return t.stream_ops?.fsync?t.stream_ops.fsync(t):0}catch(e){if(void 0===Le||"ErrnoError"!==e.name)throw e;return e.errno}},fd_write:function(e,t,n,r){try{var o=((e,t,n,r)=>{for(var o=0,i=0;i<n;i++){var a=v[t>>2],s=v[t+4>>2];t+=8;var u=Le.write(e,M,a,s,r);if(u<0)return-1;if(o+=u,u<s)break;void 0!==r&&(r+=u)}return o})(Be.getStreamFromFD(e),t,n);return v[r>>2]=o,0}catch(e){if(void 0===Le||"ErrnoError"!==e.name)throw e;return e.errno}},invoke_ii:function(e,t){var n=ce();try{return Ke(e)(t)}catch(e){if(Pe(n),e!==e+0)throw e;lt(1,0)}},invoke_iii:function(e,t,n){var r=ce();try{return Ke(e)(t,n)}catch(e){if(Pe(r),e!==e+0)throw e;lt(1,0)}},invoke_iiii:function(e,t,n,r){var o=ce();try{return Ke(e)(t,n,r)}catch(e){if(Pe(o),e!==e+0)throw e;lt(1,0)}},invoke_iiiii:function(e,t,n,r,o){var i=ce();try{return Ke(e)(t,n,r,o)}catch(e){if(Pe(i),e!==e+0)throw e;lt(1,0)}},invoke_v:function(e){var t=ce();try{Ke(e)()}catch(e){if(Pe(t),e!==e+0)throw e;lt(1,0)}},invoke_viii:function(e,t,n,r){var o=ce();try{Ke(e)(t,n,r)}catch(e){if(Pe(o),e!==e+0)throw e;lt(1,0)}},invoke_viiii:function(e,t,n,r,o){var i=ce();try{Ke(e)(t,n,r,o)}catch(e){if(Pe(i),e!==e+0)throw e;lt(1,0)}}},ot=function(){var e={env:rt,wasi_snapshot_preview1:rt};function t(e,t){var n;return ot=e.exports,i.wasmExports=ot,I(G=ot.memory,"memory not found in wasm exports"),k(),I(Te=ot.__indirect_function_table,"table not found in wasm exports"),n=ot.__wasm_call_ctors,B.unshift(n),J("wasm-instantiate"),ot}Y("wasm-instantiate");var n,r,a,s,u=i;if(i.instantiateWasm)try{return i.instantiateWasm(e,t)}catch(e){E(`Module.instantiateWasm callback failed with error: ${e}`),o(e)}return Q??=oe(),(n=S,r=Q,a=e,s=function(e){I(i===u,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),u=null,t(e.instance)},n||"function"!=typeof WebAssembly.instantiateStreaming||te(r)||F||"function"!=typeof fetch?ae(r,a,s):fetch(r,{credentials:"same-origin"}).then((e=>WebAssembly.instantiateStreaming(e,a).then(s,(function(e){return E(`wasm streaming compile failed: ${e}`),E("falling back to ArrayBuffer instantiation"),ae(r,a,s)}))))).catch(o),{}}();i._PDFiumExt_Init=re("PDFiumExt_Init",0),i._FPDF_InitLibraryWithConfig=re("FPDF_InitLibraryWithConfig",1),i._PDFiumExt_OpenFileWriter=re("PDFiumExt_OpenFileWriter",0),i._PDFiumExt_GetFileWriterSize=re("PDFiumExt_GetFileWriterSize",1),i._PDFiumExt_GetFileWriterData=re("PDFiumExt_GetFileWriterData",3),i._PDFiumExt_CloseFileWriter=re("PDFiumExt_CloseFileWriter",1),i._PDFiumExt_SaveAsCopy=re("PDFiumExt_SaveAsCopy",2),i._FPDF_SaveAsCopy=re("FPDF_SaveAsCopy",3),i._PDFiumExt_OpenFormFillInfo=re("PDFiumExt_OpenFormFillInfo",0),i._PDFiumExt_CloseFormFillInfo=re("PDFiumExt_CloseFormFillInfo",1),i._PDFiumExt_InitFormFillEnvironment=re("PDFiumExt_InitFormFillEnvironment",2),i._FPDFDOC_InitFormFillEnvironment=re("FPDFDOC_InitFormFillEnvironment",2),i._PDFiumExt_ExitFormFillEnvironment=re("PDFiumExt_ExitFormFillEnvironment",1),i._FPDFDOC_ExitFormFillEnvironment=re("FPDFDOC_ExitFormFillEnvironment",1),i._FPDFAnnot_IsSupportedSubtype=re("FPDFAnnot_IsSupportedSubtype",1),i._FPDFPage_CreateAnnot=re("FPDFPage_CreateAnnot",2),i._FPDFPage_GetAnnotCount=re("FPDFPage_GetAnnotCount",1),i._FPDFPage_GetAnnot=re("FPDFPage_GetAnnot",2),i._FPDFPage_GetAnnotIndex=re("FPDFPage_GetAnnotIndex",2),i._FPDFPage_CloseAnnot=re("FPDFPage_CloseAnnot",1),i._FPDFPage_RemoveAnnot=re("FPDFPage_RemoveAnnot",2),i._FPDFAnnot_GetSubtype=re("FPDFAnnot_GetSubtype",1),i._FPDFAnnot_IsObjectSupportedSubtype=re("FPDFAnnot_IsObjectSupportedSubtype",1),i._FPDFAnnot_UpdateObject=re("FPDFAnnot_UpdateObject",2),i._FPDFAnnot_AddInkStroke=re("FPDFAnnot_AddInkStroke",3),i._FPDFAnnot_RemoveInkList=re("FPDFAnnot_RemoveInkList",1),i._FPDFAnnot_AppendObject=re("FPDFAnnot_AppendObject",2),i._FPDFAnnot_GetObjectCount=re("FPDFAnnot_GetObjectCount",1),i._FPDFAnnot_GetObject=re("FPDFAnnot_GetObject",2),i._FPDFAnnot_RemoveObject=re("FPDFAnnot_RemoveObject",2),i._FPDFAnnot_SetColor=re("FPDFAnnot_SetColor",6),i._FPDFAnnot_GetColor=re("FPDFAnnot_GetColor",6),i._FPDFAnnot_HasAttachmentPoints=re("FPDFAnnot_HasAttachmentPoints",1),i._FPDFAnnot_SetAttachmentPoints=re("FPDFAnnot_SetAttachmentPoints",3),i._FPDFAnnot_AppendAttachmentPoints=re("FPDFAnnot_AppendAttachmentPoints",2),i._FPDFAnnot_CountAttachmentPoints=re("FPDFAnnot_CountAttachmentPoints",1),i._FPDFAnnot_GetAttachmentPoints=re("FPDFAnnot_GetAttachmentPoints",3),i._FPDFAnnot_SetRect=re("FPDFAnnot_SetRect",2),i._FPDFAnnot_GetRect=re("FPDFAnnot_GetRect",2),i._FPDFAnnot_GetVertices=re("FPDFAnnot_GetVertices",3),i._FPDFAnnot_GetInkListCount=re("FPDFAnnot_GetInkListCount",1),i._FPDFAnnot_GetInkListPath=re("FPDFAnnot_GetInkListPath",4),i._FPDFAnnot_GetLine=re("FPDFAnnot_GetLine",3),i._FPDFAnnot_SetBorder=re("FPDFAnnot_SetBorder",4),i._FPDFAnnot_GetBorder=re("FPDFAnnot_GetBorder",4),i._FPDFAnnot_HasKey=re("FPDFAnnot_HasKey",2),i._FPDFAnnot_GetValueType=re("FPDFAnnot_GetValueType",2),i._FPDFAnnot_SetStringValue=re("FPDFAnnot_SetStringValue",3),i._FPDFAnnot_GetStringValue=re("FPDFAnnot_GetStringValue",4),i._FPDFAnnot_GetNumberValue=re("FPDFAnnot_GetNumberValue",3),i._FPDFAnnot_SetAP=re("FPDFAnnot_SetAP",3),i._FPDFAnnot_GetAP=re("FPDFAnnot_GetAP",4),i._FPDFAnnot_GetLinkedAnnot=re("FPDFAnnot_GetLinkedAnnot",2),i._FPDFAnnot_GetFlags=re("FPDFAnnot_GetFlags",1),i._FPDFAnnot_SetFlags=re("FPDFAnnot_SetFlags",2),i._FPDFAnnot_GetFormFieldFlags=re("FPDFAnnot_GetFormFieldFlags",2),i._FPDFAnnot_SetFormFieldFlags=re("FPDFAnnot_SetFormFieldFlags",3),i._FPDFAnnot_GetFormFieldAtPoint=re("FPDFAnnot_GetFormFieldAtPoint",3),i._FPDFAnnot_GetFormFieldName=re("FPDFAnnot_GetFormFieldName",4),i._FPDFAnnot_GetFormFieldType=re("FPDFAnnot_GetFormFieldType",2),i._FPDFAnnot_GetFormAdditionalActionJavaScript=re("FPDFAnnot_GetFormAdditionalActionJavaScript",5),i._FPDFAnnot_GetFormFieldAlternateName=re("FPDFAnnot_GetFormFieldAlternateName",4),i._FPDFAnnot_GetFormFieldValue=re("FPDFAnnot_GetFormFieldValue",4),i._FPDFAnnot_GetOptionCount=re("FPDFAnnot_GetOptionCount",2),i._FPDFAnnot_GetOptionLabel=re("FPDFAnnot_GetOptionLabel",5),i._FPDFAnnot_IsOptionSelected=re("FPDFAnnot_IsOptionSelected",3),i._FPDFAnnot_GetFontSize=re("FPDFAnnot_GetFontSize",3),i._FPDFAnnot_SetFontColor=re("FPDFAnnot_SetFontColor",5),i._FPDFAnnot_GetFontColor=re("FPDFAnnot_GetFontColor",5),i._FPDFAnnot_IsChecked=re("FPDFAnnot_IsChecked",2),i._FPDFAnnot_SetFocusableSubtypes=re("FPDFAnnot_SetFocusableSubtypes",3),i._FPDFAnnot_GetFocusableSubtypesCount=re("FPDFAnnot_GetFocusableSubtypesCount",1),i._FPDFAnnot_GetFocusableSubtypes=re("FPDFAnnot_GetFocusableSubtypes",3),i._FPDFAnnot_GetLink=re("FPDFAnnot_GetLink",1),i._FPDFAnnot_GetFormControlCount=re("FPDFAnnot_GetFormControlCount",2),i._FPDFAnnot_GetFormControlIndex=re("FPDFAnnot_GetFormControlIndex",2),i._FPDFAnnot_GetFormFieldExportValue=re("FPDFAnnot_GetFormFieldExportValue",4),i._FPDFAnnot_SetURI=re("FPDFAnnot_SetURI",2),i._FPDFAnnot_GetFileAttachment=re("FPDFAnnot_GetFileAttachment",1),i._FPDFAnnot_AddFileAttachment=re("FPDFAnnot_AddFileAttachment",2),i._EPDFAnnot_SetColor=re("EPDFAnnot_SetColor",6),i._EPDFAnnot_GetColor=re("EPDFAnnot_GetColor",6),i._EPDFAnnot_GetBorderEffect=re("EPDFAnnot_GetBorderEffect",2),i._EPDFAnnot_GetRectangleDifferences=re("EPDFAnnot_GetRectangleDifferences",5),i._EPDFAnnot_GetBorderDashPatternCount=re("EPDFAnnot_GetBorderDashPatternCount",1),i._EPDFAnnot_GetBorderDashPattern=re("EPDFAnnot_GetBorderDashPattern",3),i._EPDFAnnot_GetBorderStyle=re("EPDFAnnot_GetBorderStyle",2),i._EPDFAnnot_SetBorderStyle=re("EPDFAnnot_SetBorderStyle",3),i._EPDFAnnot_GenerateAppearance=re("EPDFAnnot_GenerateAppearance",1),i._EPDFAnnot_GenerateAppearanceWithBlend=re("EPDFAnnot_GenerateAppearanceWithBlend",2),i._EPDFAnnot_GetBlendMode=re("EPDFAnnot_GetBlendMode",1),i._EPDFAnnot_SetIntent=re("EPDFAnnot_SetIntent",2),i._EPDFAnnot_GetIntent=re("EPDFAnnot_GetIntent",3),i._EPDFAnnot_GetRichContent=re("EPDFAnnot_GetRichContent",3),i._FPDFDoc_GetAttachmentCount=re("FPDFDoc_GetAttachmentCount",1),i._FPDFDoc_AddAttachment=re("FPDFDoc_AddAttachment",2),i._FPDFDoc_GetAttachment=re("FPDFDoc_GetAttachment",2),i._FPDFDoc_DeleteAttachment=re("FPDFDoc_DeleteAttachment",2),i._FPDFAttachment_GetName=re("FPDFAttachment_GetName",3),i._FPDFAttachment_HasKey=re("FPDFAttachment_HasKey",2),i._FPDFAttachment_GetValueType=re("FPDFAttachment_GetValueType",2),i._FPDFAttachment_SetStringValue=re("FPDFAttachment_SetStringValue",3),i._FPDFAttachment_GetStringValue=re("FPDFAttachment_GetStringValue",4),i._FPDFAttachment_SetFile=re("FPDFAttachment_SetFile",4),i._FPDFAttachment_GetFile=re("FPDFAttachment_GetFile",4),i._FPDFAttachment_GetSubtype=re("FPDFAttachment_GetSubtype",3),i._FPDFCatalog_IsTagged=re("FPDFCatalog_IsTagged",1),i._FPDFCatalog_SetLanguage=re("FPDFCatalog_SetLanguage",2),i._FPDFAvail_Create=re("FPDFAvail_Create",2),i._FPDFAvail_Destroy=re("FPDFAvail_Destroy",1),i._FPDFAvail_IsDocAvail=re("FPDFAvail_IsDocAvail",2),i._FPDFAvail_GetDocument=re("FPDFAvail_GetDocument",2),i._FPDFAvail_GetFirstPageNum=re("FPDFAvail_GetFirstPageNum",1),i._FPDFAvail_IsPageAvail=re("FPDFAvail_IsPageAvail",3),i._FPDFAvail_IsFormAvail=re("FPDFAvail_IsFormAvail",2),i._FPDFAvail_IsLinearized=re("FPDFAvail_IsLinearized",1),i._FPDFBookmark_GetFirstChild=re("FPDFBookmark_GetFirstChild",2),i._FPDFBookmark_GetNextSibling=re("FPDFBookmark_GetNextSibling",2),i._FPDFBookmark_GetTitle=re("FPDFBookmark_GetTitle",3),i._FPDFBookmark_GetCount=re("FPDFBookmark_GetCount",1),i._FPDFBookmark_Find=re("FPDFBookmark_Find",2),i._FPDFBookmark_GetDest=re("FPDFBookmark_GetDest",2),i._FPDFBookmark_GetAction=re("FPDFBookmark_GetAction",1),i._FPDFAction_GetType=re("FPDFAction_GetType",1),i._FPDFAction_GetDest=re("FPDFAction_GetDest",2),i._FPDFAction_GetFilePath=re("FPDFAction_GetFilePath",3),i._FPDFAction_GetURIPath=re("FPDFAction_GetURIPath",4),i._FPDFDest_GetDestPageIndex=re("FPDFDest_GetDestPageIndex",2),i._FPDFDest_GetView=re("FPDFDest_GetView",3),i._FPDFDest_GetLocationInPage=re("FPDFDest_GetLocationInPage",7),i._FPDFLink_GetLinkAtPoint=re("FPDFLink_GetLinkAtPoint",3),i._FPDFLink_GetLinkZOrderAtPoint=re("FPDFLink_GetLinkZOrderAtPoint",3),i._FPDFLink_GetDest=re("FPDFLink_GetDest",2),i._FPDFLink_GetAction=re("FPDFLink_GetAction",1),i._FPDFLink_Enumerate=re("FPDFLink_Enumerate",3),i._FPDFLink_GetAnnot=re("FPDFLink_GetAnnot",2),i._FPDFLink_GetAnnotRect=re("FPDFLink_GetAnnotRect",2),i._FPDFLink_CountQuadPoints=re("FPDFLink_CountQuadPoints",1),i._FPDFLink_GetQuadPoints=re("FPDFLink_GetQuadPoints",3),i._FPDF_GetPageAAction=re("FPDF_GetPageAAction",2),i._FPDF_GetFileIdentifier=re("FPDF_GetFileIdentifier",4),i._FPDF_GetMetaText=re("FPDF_GetMetaText",4),i._FPDF_GetPageLabel=re("FPDF_GetPageLabel",4),i._FPDFPageObj_NewImageObj=re("FPDFPageObj_NewImageObj",1),i._FPDFImageObj_LoadJpegFile=re("FPDFImageObj_LoadJpegFile",4),i._FPDFImageObj_LoadJpegFileInline=re("FPDFImageObj_LoadJpegFileInline",4),i._FPDFImageObj_SetMatrix=re("FPDFImageObj_SetMatrix",7),i._FPDFImageObj_SetBitmap=re("FPDFImageObj_SetBitmap",4),i._FPDFImageObj_GetBitmap=re("FPDFImageObj_GetBitmap",1),i._FPDFImageObj_GetRenderedBitmap=re("FPDFImageObj_GetRenderedBitmap",3),i._FPDFImageObj_GetImageDataDecoded=re("FPDFImageObj_GetImageDataDecoded",3),i._FPDFImageObj_GetImageDataRaw=re("FPDFImageObj_GetImageDataRaw",3),i._FPDFImageObj_GetImageFilterCount=re("FPDFImageObj_GetImageFilterCount",1),i._FPDFImageObj_GetImageFilter=re("FPDFImageObj_GetImageFilter",4),i._FPDFImageObj_GetImageMetadata=re("FPDFImageObj_GetImageMetadata",3),i._FPDFImageObj_GetImagePixelSize=re("FPDFImageObj_GetImagePixelSize",3),i._FPDFImageObj_GetIccProfileDataDecoded=re("FPDFImageObj_GetIccProfileDataDecoded",5),i._FPDF_CreateNewDocument=re("FPDF_CreateNewDocument",0),i._FPDFPage_Delete=re("FPDFPage_Delete",2),i._FPDF_MovePages=re("FPDF_MovePages",4),i._FPDFPage_New=re("FPDFPage_New",4),i._FPDFPage_GetRotation=re("FPDFPage_GetRotation",1),i._FPDFPage_InsertObject=re("FPDFPage_InsertObject",2),i._FPDFPage_InsertObjectAtIndex=re("FPDFPage_InsertObjectAtIndex",3),i._FPDFPage_RemoveObject=re("FPDFPage_RemoveObject",2),i._FPDFPage_CountObjects=re("FPDFPage_CountObjects",1),i._FPDFPage_GetObject=re("FPDFPage_GetObject",2),i._FPDFPage_HasTransparency=re("FPDFPage_HasTransparency",1),i._FPDFPageObj_Destroy=re("FPDFPageObj_Destroy",1),i._FPDFPageObj_GetMarkedContentID=re("FPDFPageObj_GetMarkedContentID",1),i._FPDFPageObj_CountMarks=re("FPDFPageObj_CountMarks",1),i._FPDFPageObj_GetMark=re("FPDFPageObj_GetMark",2),i._FPDFPageObj_AddMark=re("FPDFPageObj_AddMark",2),i._FPDFPageObj_RemoveMark=re("FPDFPageObj_RemoveMark",2),i._FPDFPageObjMark_GetName=re("FPDFPageObjMark_GetName",4),i._FPDFPageObjMark_CountParams=re("FPDFPageObjMark_CountParams",1),i._FPDFPageObjMark_GetParamKey=re("FPDFPageObjMark_GetParamKey",5),i._FPDFPageObjMark_GetParamValueType=re("FPDFPageObjMark_GetParamValueType",2),i._FPDFPageObjMark_GetParamIntValue=re("FPDFPageObjMark_GetParamIntValue",3),i._FPDFPageObjMark_GetParamStringValue=re("FPDFPageObjMark_GetParamStringValue",5),i._FPDFPageObjMark_GetParamBlobValue=re("FPDFPageObjMark_GetParamBlobValue",5),i._FPDFPageObj_HasTransparency=re("FPDFPageObj_HasTransparency",1),i._FPDFPageObjMark_SetIntParam=re("FPDFPageObjMark_SetIntParam",5),i._FPDFPageObjMark_SetStringParam=re("FPDFPageObjMark_SetStringParam",5),i._FPDFPageObjMark_SetBlobParam=re("FPDFPageObjMark_SetBlobParam",6),i._FPDFPageObjMark_RemoveParam=re("FPDFPageObjMark_RemoveParam",3),i._FPDFPageObj_GetType=re("FPDFPageObj_GetType",1),i._FPDFPageObj_GetIsActive=re("FPDFPageObj_GetIsActive",2),i._FPDFPageObj_SetIsActive=re("FPDFPageObj_SetIsActive",2),i._FPDFPage_GenerateContent=re("FPDFPage_GenerateContent",1),i._FPDFPageObj_Transform=re("FPDFPageObj_Transform",7),i._FPDFPageObj_TransformF=re("FPDFPageObj_TransformF",2),i._FPDFPageObj_GetMatrix=re("FPDFPageObj_GetMatrix",2),i._FPDFPageObj_SetMatrix=re("FPDFPageObj_SetMatrix",2),i._FPDFPageObj_SetBlendMode=re("FPDFPageObj_SetBlendMode",2),i._FPDFPage_TransformAnnots=re("FPDFPage_TransformAnnots",7),i._FPDFPage_SetRotation=re("FPDFPage_SetRotation",2),i._FPDFPageObj_SetFillColor=re("FPDFPageObj_SetFillColor",5),i._FPDFPageObj_GetFillColor=re("FPDFPageObj_GetFillColor",5),i._FPDFPageObj_GetBounds=re("FPDFPageObj_GetBounds",5),i._FPDFPageObj_GetRotatedBounds=re("FPDFPageObj_GetRotatedBounds",2),i._FPDFPageObj_SetStrokeColor=re("FPDFPageObj_SetStrokeColor",5),i._FPDFPageObj_GetStrokeColor=re("FPDFPageObj_GetStrokeColor",5),i._FPDFPageObj_SetStrokeWidth=re("FPDFPageObj_SetStrokeWidth",2),i._FPDFPageObj_GetStrokeWidth=re("FPDFPageObj_GetStrokeWidth",2),i._FPDFPageObj_GetLineJoin=re("FPDFPageObj_GetLineJoin",1),i._FPDFPageObj_SetLineJoin=re("FPDFPageObj_SetLineJoin",2),i._FPDFPageObj_GetLineCap=re("FPDFPageObj_GetLineCap",1),i._FPDFPageObj_SetLineCap=re("FPDFPageObj_SetLineCap",2),i._FPDFPageObj_GetDashPhase=re("FPDFPageObj_GetDashPhase",2),i._FPDFPageObj_SetDashPhase=re("FPDFPageObj_SetDashPhase",2),i._FPDFPageObj_GetDashCount=re("FPDFPageObj_GetDashCount",1),i._FPDFPageObj_GetDashArray=re("FPDFPageObj_GetDashArray",3),i._FPDFPageObj_SetDashArray=re("FPDFPageObj_SetDashArray",4),i._FPDFFormObj_CountObjects=re("FPDFFormObj_CountObjects",1),i._FPDFFormObj_GetObject=re("FPDFFormObj_GetObject",2),i._FPDFFormObj_RemoveObject=re("FPDFFormObj_RemoveObject",2),i._FPDFPageObj_CreateNewPath=re("FPDFPageObj_CreateNewPath",2),i._FPDFPageObj_CreateNewRect=re("FPDFPageObj_CreateNewRect",4),i._FPDFPath_CountSegments=re("FPDFPath_CountSegments",1),i._FPDFPath_GetPathSegment=re("FPDFPath_GetPathSegment",2),i._FPDFPath_MoveTo=re("FPDFPath_MoveTo",3),i._FPDFPath_LineTo=re("FPDFPath_LineTo",3),i._FPDFPath_BezierTo=re("FPDFPath_BezierTo",7),i._FPDFPath_Close=re("FPDFPath_Close",1),i._FPDFPath_SetDrawMode=re("FPDFPath_SetDrawMode",3),i._FPDFPath_GetDrawMode=re("FPDFPath_GetDrawMode",3),i._FPDFPathSegment_GetPoint=re("FPDFPathSegment_GetPoint",3),i._FPDFPathSegment_GetType=re("FPDFPathSegment_GetType",1),i._FPDFPathSegment_GetClose=re("FPDFPathSegment_GetClose",1),i._FPDFPageObj_NewTextObj=re("FPDFPageObj_NewTextObj",3),i._FPDFText_SetText=re("FPDFText_SetText",2),i._FPDFText_SetCharcodes=re("FPDFText_SetCharcodes",3),i._FPDFText_LoadFont=re("FPDFText_LoadFont",5),i._FPDFText_LoadStandardFont=re("FPDFText_LoadStandardFont",2),i._FPDFText_LoadCidType2Font=re("FPDFText_LoadCidType2Font",6),i._FPDFTextObj_GetFontSize=re("FPDFTextObj_GetFontSize",2),i._FPDFTextObj_GetText=re("FPDFTextObj_GetText",4),i._FPDFTextObj_GetRenderedBitmap=re("FPDFTextObj_GetRenderedBitmap",4),i._FPDFFont_Close=re("FPDFFont_Close",1),i._FPDFPageObj_CreateTextObj=re("FPDFPageObj_CreateTextObj",3),i._FPDFTextObj_GetTextRenderMode=re("FPDFTextObj_GetTextRenderMode",1),i._FPDFTextObj_SetTextRenderMode=re("FPDFTextObj_SetTextRenderMode",2),i._FPDFTextObj_GetFont=re("FPDFTextObj_GetFont",1),i._FPDFFont_GetBaseFontName=re("FPDFFont_GetBaseFontName",3),i._FPDFFont_GetFamilyName=re("FPDFFont_GetFamilyName",3),i._FPDFFont_GetFontData=re("FPDFFont_GetFontData",4),i._FPDFFont_GetIsEmbedded=re("FPDFFont_GetIsEmbedded",1),i._FPDFFont_GetFlags=re("FPDFFont_GetFlags",1),i._FPDFFont_GetWeight=re("FPDFFont_GetWeight",1),i._FPDFFont_GetItalicAngle=re("FPDFFont_GetItalicAngle",2),i._FPDFFont_GetAscent=re("FPDFFont_GetAscent",3),i._FPDFFont_GetDescent=re("FPDFFont_GetDescent",3),i._FPDFFont_GetGlyphWidth=re("FPDFFont_GetGlyphWidth",4),i._FPDFFont_GetGlyphPath=re("FPDFFont_GetGlyphPath",3),i._FPDFGlyphPath_CountGlyphSegments=re("FPDFGlyphPath_CountGlyphSegments",1),i._FPDFGlyphPath_GetGlyphPathSegment=re("FPDFGlyphPath_GetGlyphPathSegment",2),i._FPDFDoc_GetPageMode=re("FPDFDoc_GetPageMode",1),i._FPDFPage_Flatten=re("FPDFPage_Flatten",2),i._FPDFPage_HasFormFieldAtPoint=re("FPDFPage_HasFormFieldAtPoint",4),i._FPDFPage_FormFieldZOrderAtPoint=re("FPDFPage_FormFieldZOrderAtPoint",4),i._malloc=re("malloc",1),i._free=re("free",1),i._FORM_OnMouseMove=re("FORM_OnMouseMove",5),i._FORM_OnMouseWheel=re("FORM_OnMouseWheel",6),i._FORM_OnFocus=re("FORM_OnFocus",5),i._FORM_OnLButtonDown=re("FORM_OnLButtonDown",5),i._FORM_OnLButtonUp=re("FORM_OnLButtonUp",5),i._FORM_OnLButtonDoubleClick=re("FORM_OnLButtonDoubleClick",5),i._FORM_OnRButtonDown=re("FORM_OnRButtonDown",5),i._FORM_OnRButtonUp=re("FORM_OnRButtonUp",5),i._FORM_OnKeyDown=re("FORM_OnKeyDown",4),i._FORM_OnKeyUp=re("FORM_OnKeyUp",4),i._FORM_OnChar=re("FORM_OnChar",4),i._FORM_GetFocusedText=re("FORM_GetFocusedText",4),i._FORM_GetSelectedText=re("FORM_GetSelectedText",4),i._FORM_ReplaceAndKeepSelection=re("FORM_ReplaceAndKeepSelection",3),i._FORM_ReplaceSelection=re("FORM_ReplaceSelection",3),i._FORM_SelectAllText=re("FORM_SelectAllText",2),i._FORM_CanUndo=re("FORM_CanUndo",2),i._FORM_CanRedo=re("FORM_CanRedo",2),i._FORM_Undo=re("FORM_Undo",2),i._FORM_Redo=re("FORM_Redo",2),i._FORM_ForceToKillFocus=re("FORM_ForceToKillFocus",1),i._FORM_GetFocusedAnnot=re("FORM_GetFocusedAnnot",3),i._FORM_SetFocusedAnnot=re("FORM_SetFocusedAnnot",2),i._FPDF_FFLDraw=re("FPDF_FFLDraw",9),i._FPDF_SetFormFieldHighlightColor=re("FPDF_SetFormFieldHighlightColor",3),i._FPDF_SetFormFieldHighlightAlpha=re("FPDF_SetFormFieldHighlightAlpha",2),i._FPDF_RemoveFormFieldHighlight=re("FPDF_RemoveFormFieldHighlight",1),i._FORM_OnAfterLoadPage=re("FORM_OnAfterLoadPage",2),i._FORM_OnBeforeClosePage=re("FORM_OnBeforeClosePage",2),i._FORM_DoDocumentJSAction=re("FORM_DoDocumentJSAction",1),i._FORM_DoDocumentOpenAction=re("FORM_DoDocumentOpenAction",1),i._FORM_DoDocumentAAction=re("FORM_DoDocumentAAction",2),i._FORM_DoPageAAction=re("FORM_DoPageAAction",3),i._FORM_SetIndexSelected=re("FORM_SetIndexSelected",4),i._FORM_IsIndexSelected=re("FORM_IsIndexSelected",3),i._FPDFDoc_GetJavaScriptActionCount=re("FPDFDoc_GetJavaScriptActionCount",1),i._FPDFDoc_GetJavaScriptAction=re("FPDFDoc_GetJavaScriptAction",2),i._FPDFDoc_CloseJavaScriptAction=re("FPDFDoc_CloseJavaScriptAction",1),i._FPDFJavaScriptAction_GetName=re("FPDFJavaScriptAction_GetName",3),i._FPDFJavaScriptAction_GetScript=re("FPDFJavaScriptAction_GetScript",3),i._FPDF_ImportPagesByIndex=re("FPDF_ImportPagesByIndex",5),i._FPDF_ImportPages=re("FPDF_ImportPages",4),i._FPDF_ImportNPagesToOne=re("FPDF_ImportNPagesToOne",5),i._FPDF_NewXObjectFromPage=re("FPDF_NewXObjectFromPage",3),i._FPDF_CloseXObject=re("FPDF_CloseXObject",1),i._FPDF_NewFormObjectFromXObject=re("FPDF_NewFormObjectFromXObject",1),i._FPDF_CopyViewerPreferences=re("FPDF_CopyViewerPreferences",2),i._FPDF_RenderPageBitmapWithColorScheme_Start=re("FPDF_RenderPageBitmapWithColorScheme_Start",10),i._FPDF_RenderPageBitmap_Start=re("FPDF_RenderPageBitmap_Start",9),i._FPDF_RenderPage_Continue=re("FPDF_RenderPage_Continue",2),i._FPDF_RenderPage_Close=re("FPDF_RenderPage_Close",1),i._FPDF_SaveWithVersion=re("FPDF_SaveWithVersion",4),i._FPDFText_GetCharIndexFromTextIndex=re("FPDFText_GetCharIndexFromTextIndex",2),i._FPDFText_GetTextIndexFromCharIndex=re("FPDFText_GetTextIndexFromCharIndex",2),i._FPDF_GetSignatureCount=re("FPDF_GetSignatureCount",1),i._FPDF_GetSignatureObject=re("FPDF_GetSignatureObject",2),i._FPDFSignatureObj_GetContents=re("FPDFSignatureObj_GetContents",3),i._FPDFSignatureObj_GetByteRange=re("FPDFSignatureObj_GetByteRange",3),i._FPDFSignatureObj_GetSubFilter=re("FPDFSignatureObj_GetSubFilter",3),i._FPDFSignatureObj_GetReason=re("FPDFSignatureObj_GetReason",3),i._FPDFSignatureObj_GetTime=re("FPDFSignatureObj_GetTime",3),i._FPDFSignatureObj_GetDocMDPPermission=re("FPDFSignatureObj_GetDocMDPPermission",1),i._FPDF_StructTree_GetForPage=re("FPDF_StructTree_GetForPage",1),i._FPDF_StructTree_Close=re("FPDF_StructTree_Close",1),i._FPDF_StructTree_CountChildren=re("FPDF_StructTree_CountChildren",1),i._FPDF_StructTree_GetChildAtIndex=re("FPDF_StructTree_GetChildAtIndex",2),i._FPDF_StructElement_GetAltText=re("FPDF_StructElement_GetAltText",3),i._FPDF_StructElement_GetActualText=re("FPDF_StructElement_GetActualText",3),i._FPDF_StructElement_GetID=re("FPDF_StructElement_GetID",3),i._FPDF_StructElement_GetLang=re("FPDF_StructElement_GetLang",3),i._FPDF_StructElement_GetAttributeCount=re("FPDF_StructElement_GetAttributeCount",1),i._FPDF_StructElement_GetAttributeAtIndex=re("FPDF_StructElement_GetAttributeAtIndex",2),i._FPDF_StructElement_GetStringAttribute=re("FPDF_StructElement_GetStringAttribute",4),i._FPDF_StructElement_GetMarkedContentID=re("FPDF_StructElement_GetMarkedContentID",1),i._FPDF_StructElement_GetType=re("FPDF_StructElement_GetType",3),i._FPDF_StructElement_GetObjType=re("FPDF_StructElement_GetObjType",3),i._FPDF_StructElement_GetTitle=re("FPDF_StructElement_GetTitle",3),i._FPDF_StructElement_CountChildren=re("FPDF_StructElement_CountChildren",1),i._FPDF_StructElement_GetChildAtIndex=re("FPDF_StructElement_GetChildAtIndex",2),i._FPDF_StructElement_GetChildMarkedContentID=re("FPDF_StructElement_GetChildMarkedContentID",2),i._FPDF_StructElement_GetParent=re("FPDF_StructElement_GetParent",1),i._FPDF_StructElement_Attr_GetCount=re("FPDF_StructElement_Attr_GetCount",1),i._FPDF_StructElement_Attr_GetName=re("FPDF_StructElement_Attr_GetName",5),i._FPDF_StructElement_Attr_GetValue=re("FPDF_StructElement_Attr_GetValue",2),i._FPDF_StructElement_Attr_GetType=re("FPDF_StructElement_Attr_GetType",1),i._FPDF_StructElement_Attr_GetBooleanValue=re("FPDF_StructElement_Attr_GetBooleanValue",2),i._FPDF_StructElement_Attr_GetNumberValue=re("FPDF_StructElement_Attr_GetNumberValue",2),i._FPDF_StructElement_Attr_GetStringValue=re("FPDF_StructElement_Attr_GetStringValue",4),i._FPDF_StructElement_Attr_GetBlobValue=re("FPDF_StructElement_Attr_GetBlobValue",4),i._FPDF_StructElement_Attr_CountChildren=re("FPDF_StructElement_Attr_CountChildren",1),i._FPDF_StructElement_Attr_GetChildAtIndex=re("FPDF_StructElement_Attr_GetChildAtIndex",2),i._FPDF_StructElement_GetMarkedContentIdCount=re("FPDF_StructElement_GetMarkedContentIdCount",1),i._FPDF_StructElement_GetMarkedContentIdAtIndex=re("FPDF_StructElement_GetMarkedContentIdAtIndex",2),i._FPDF_AddInstalledFont=re("FPDF_AddInstalledFont",3),i._FPDF_SetSystemFontInfo=re("FPDF_SetSystemFontInfo",1),i._FPDF_GetDefaultTTFMap=re("FPDF_GetDefaultTTFMap",0),i._FPDF_GetDefaultTTFMapCount=re("FPDF_GetDefaultTTFMapCount",0),i._FPDF_GetDefaultTTFMapEntry=re("FPDF_GetDefaultTTFMapEntry",1),i._FPDF_GetDefaultSystemFontInfo=re("FPDF_GetDefaultSystemFontInfo",0),i._FPDF_FreeDefaultSystemFontInfo=re("FPDF_FreeDefaultSystemFontInfo",1),i._FPDFText_LoadPage=re("FPDFText_LoadPage",1),i._FPDFText_ClosePage=re("FPDFText_ClosePage",1),i._FPDFText_CountChars=re("FPDFText_CountChars",1),i._FPDFText_GetUnicode=re("FPDFText_GetUnicode",2),i._FPDFText_GetTextObject=re("FPDFText_GetTextObject",2),i._FPDFText_IsGenerated=re("FPDFText_IsGenerated",2),i._FPDFText_IsHyphen=re("FPDFText_IsHyphen",2),i._FPDFText_HasUnicodeMapError=re("FPDFText_HasUnicodeMapError",2),i._FPDFText_GetFontSize=re("FPDFText_GetFontSize",2),i._FPDFText_GetFontInfo=re("FPDFText_GetFontInfo",5),i._FPDFText_GetFontWeight=re("FPDFText_GetFontWeight",2),i._FPDFText_GetFillColor=re("FPDFText_GetFillColor",6),i._FPDFText_GetStrokeColor=re("FPDFText_GetStrokeColor",6),i._FPDFText_GetCharAngle=re("FPDFText_GetCharAngle",2),i._FPDFText_GetCharBox=re("FPDFText_GetCharBox",6),i._FPDFText_GetLooseCharBox=re("FPDFText_GetLooseCharBox",3),i._FPDFText_GetMatrix=re("FPDFText_GetMatrix",3),i._FPDFText_GetCharOrigin=re("FPDFText_GetCharOrigin",4),i._FPDFText_GetCharIndexAtPos=re("FPDFText_GetCharIndexAtPos",5),i._FPDFText_GetText=re("FPDFText_GetText",4),i._FPDFText_CountRects=re("FPDFText_CountRects",3),i._FPDFText_GetRect=re("FPDFText_GetRect",6),i._FPDFText_GetBoundedText=re("FPDFText_GetBoundedText",7),i._FPDFText_FindStart=re("FPDFText_FindStart",4),i._FPDFText_FindNext=re("FPDFText_FindNext",1),i._FPDFText_FindPrev=re("FPDFText_FindPrev",1),i._FPDFText_GetSchResultIndex=re("FPDFText_GetSchResultIndex",1),i._FPDFText_GetSchCount=re("FPDFText_GetSchCount",1),i._FPDFText_FindClose=re("FPDFText_FindClose",1),i._FPDFLink_LoadWebLinks=re("FPDFLink_LoadWebLinks",1),i._FPDFLink_CountWebLinks=re("FPDFLink_CountWebLinks",1),i._FPDFLink_GetURL=re("FPDFLink_GetURL",4),i._FPDFLink_CountRects=re("FPDFLink_CountRects",2),i._FPDFLink_GetRect=re("FPDFLink_GetRect",7),i._FPDFLink_GetTextRange=re("FPDFLink_GetTextRange",4),i._FPDFLink_CloseWebLinks=re("FPDFLink_CloseWebLinks",1),i._FPDFPage_GetDecodedThumbnailData=re("FPDFPage_GetDecodedThumbnailData",3),i._FPDFPage_GetRawThumbnailData=re("FPDFPage_GetRawThumbnailData",3),i._FPDFPage_GetThumbnailAsBitmap=re("FPDFPage_GetThumbnailAsBitmap",1),i._FPDFPage_SetMediaBox=re("FPDFPage_SetMediaBox",5),i._FPDFPage_SetCropBox=re("FPDFPage_SetCropBox",5),i._FPDFPage_SetBleedBox=re("FPDFPage_SetBleedBox",5),i._FPDFPage_SetTrimBox=re("FPDFPage_SetTrimBox",5),i._FPDFPage_SetArtBox=re("FPDFPage_SetArtBox",5),i._FPDFPage_GetMediaBox=re("FPDFPage_GetMediaBox",5),i._FPDFPage_GetCropBox=re("FPDFPage_GetCropBox",5),i._FPDFPage_GetBleedBox=re("FPDFPage_GetBleedBox",5),i._FPDFPage_GetTrimBox=re("FPDFPage_GetTrimBox",5),i._FPDFPage_GetArtBox=re("FPDFPage_GetArtBox",5),i._FPDFPage_TransFormWithClip=re("FPDFPage_TransFormWithClip",3),i._FPDFPageObj_TransformClipPath=re("FPDFPageObj_TransformClipPath",7),i._FPDFPageObj_GetClipPath=re("FPDFPageObj_GetClipPath",1),i._FPDFClipPath_CountPaths=re("FPDFClipPath_CountPaths",1),i._FPDFClipPath_CountPathSegments=re("FPDFClipPath_CountPathSegments",2),i._FPDFClipPath_GetPathSegment=re("FPDFClipPath_GetPathSegment",3),i._FPDF_CreateClipPath=re("FPDF_CreateClipPath",4),i._FPDF_DestroyClipPath=re("FPDF_DestroyClipPath",1),i._FPDFPage_InsertClipPath=re("FPDFPage_InsertClipPath",2),i._FPDF_InitLibrary=re("FPDF_InitLibrary",0),i._FPDF_DestroyLibrary=re("FPDF_DestroyLibrary",0),i._FPDF_SetSandBoxPolicy=re("FPDF_SetSandBoxPolicy",2),i._FPDF_LoadDocument=re("FPDF_LoadDocument",2),i._FPDF_GetFormType=re("FPDF_GetFormType",1),i._FPDF_LoadXFA=re("FPDF_LoadXFA",1),i._FPDF_LoadMemDocument=re("FPDF_LoadMemDocument",3),i._FPDF_LoadMemDocument64=re("FPDF_LoadMemDocument64",3),i._FPDF_LoadCustomDocument=re("FPDF_LoadCustomDocument",2),i._FPDF_GetFileVersion=re("FPDF_GetFileVersion",2),i._FPDF_DocumentHasValidCrossReferenceTable=re("FPDF_DocumentHasValidCrossReferenceTable",1),i._FPDF_GetDocPermissions=re("FPDF_GetDocPermissions",1),i._FPDF_GetDocUserPermissions=re("FPDF_GetDocUserPermissions",1),i._FPDF_GetSecurityHandlerRevision=re("FPDF_GetSecurityHandlerRevision",1),i._FPDF_GetPageCount=re("FPDF_GetPageCount",1),i._FPDF_LoadPage=re("FPDF_LoadPage",2),i._FPDF_GetPageWidthF=re("FPDF_GetPageWidthF",1),i._FPDF_GetPageWidth=re("FPDF_GetPageWidth",1),i._FPDF_GetPageHeightF=re("FPDF_GetPageHeightF",1),i._FPDF_GetPageHeight=re("FPDF_GetPageHeight",1),i._FPDF_GetPageBoundingBox=re("FPDF_GetPageBoundingBox",2),i._FPDF_RenderPageBitmap=re("FPDF_RenderPageBitmap",8),i._FPDF_RenderPageBitmapWithMatrix=re("FPDF_RenderPageBitmapWithMatrix",5),i._EPDF_RenderAnnotBitmap=re("EPDF_RenderAnnotBitmap",6),i._FPDF_ClosePage=re("FPDF_ClosePage",1),i._FPDF_CloseDocument=re("FPDF_CloseDocument",1),i._FPDF_GetLastError=re("FPDF_GetLastError",0),i._FPDF_DeviceToPage=re("FPDF_DeviceToPage",10),i._FPDF_PageToDevice=re("FPDF_PageToDevice",10),i._FPDFBitmap_Create=re("FPDFBitmap_Create",3),i._FPDFBitmap_CreateEx=re("FPDFBitmap_CreateEx",5),i._FPDFBitmap_GetFormat=re("FPDFBitmap_GetFormat",1),i._FPDFBitmap_FillRect=re("FPDFBitmap_FillRect",6),i._FPDFBitmap_GetBuffer=re("FPDFBitmap_GetBuffer",1),i._FPDFBitmap_GetWidth=re("FPDFBitmap_GetWidth",1),i._FPDFBitmap_GetHeight=re("FPDFBitmap_GetHeight",1),i._FPDFBitmap_GetStride=re("FPDFBitmap_GetStride",1),i._FPDFBitmap_Destroy=re("FPDFBitmap_Destroy",1),i._FPDF_GetPageSizeByIndexF=re("FPDF_GetPageSizeByIndexF",3),i._FPDF_GetPageSizeByIndex=re("FPDF_GetPageSizeByIndex",4),i._FPDF_VIEWERREF_GetPrintScaling=re("FPDF_VIEWERREF_GetPrintScaling",1),i._FPDF_VIEWERREF_GetNumCopies=re("FPDF_VIEWERREF_GetNumCopies",1),i._FPDF_VIEWERREF_GetPrintPageRange=re("FPDF_VIEWERREF_GetPrintPageRange",1),i._FPDF_VIEWERREF_GetPrintPageRangeCount=re("FPDF_VIEWERREF_GetPrintPageRangeCount",1),i._FPDF_VIEWERREF_GetPrintPageRangeElement=re("FPDF_VIEWERREF_GetPrintPageRangeElement",2),i._FPDF_VIEWERREF_GetDuplex=re("FPDF_VIEWERREF_GetDuplex",1),i._FPDF_VIEWERREF_GetName=re("FPDF_VIEWERREF_GetName",4),i._FPDF_CountNamedDests=re("FPDF_CountNamedDests",1),i._FPDF_GetNamedDestByName=re("FPDF_GetNamedDestByName",2),i._FPDF_GetNamedDest=re("FPDF_GetNamedDest",4),i._FPDF_GetXFAPacketCount=re("FPDF_GetXFAPacketCount",1),i._FPDF_GetXFAPacketName=re("FPDF_GetXFAPacketName",4),i._FPDF_GetXFAPacketContent=re("FPDF_GetXFAPacketContent",5),i._FPDF_GetTrailerEnds=re("FPDF_GetTrailerEnds",3);var it,at,st=re("fflush",1),ut=re("emscripten_builtin_memalign",2),Ft=re("strerror",1),lt=re("setThrew",2),mt=()=>(mt=ot.emscripten_stack_init)(),dt=()=>(dt=ot.emscripten_stack_get_end)(),_t=e=>(_t=ot._emscripten_stack_restore)(e),Pt=e=>(Pt=ot._emscripten_stack_alloc)(e),ct=()=>(ct=ot.emscripten_stack_get_current)();function ht(){var e;mt(),I(!(3&(e=dt()))),0==e&&(e+=4),v[e>>2]=34821223,v[e+4>>2]=2310721022,v[0]=1668509029}function gt(){var e;function t(){it||(it=1,i.calledRun=1,R||(I(!U),U=!0,j(),i.noFSInit||Le.initialized||Le.init(),Le.ignorePermissions=!1,de(B),r(i),i.onRuntimeInitialized?.(),I(!i._main,\'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]\'),function(){j();var e=i.postRun;e&&("function"==typeof e&&(e=[e]),e.forEach(W)),de(N)}()))}z>0||(ht(),!at&&(at=1,(e=i.preRun)&&("function"==typeof e&&(e=[e]),e.forEach(V)),de(L),z>0)||(i.setStatus?(i.setStatus("Running..."),setTimeout((()=>{setTimeout((()=>i.setStatus("")),1),t()}),1)):t(),j()))}if(i.dynCall_ji=re("dynCall_ji",2),i.dynCall_jij=re("dynCall_jij",4),i.dynCall_iiij=re("dynCall_iiij",5),i.dynCall_iij=re("dynCall_iij",4),i.dynCall_j=re("dynCall_j",1),i.dynCall_jji=re("dynCall_jji",4),i.dynCall_iji=re("dynCall_iji",4),i.dynCall_viijii=re("dynCall_viijii",7),i.dynCall_iiji=re("dynCall_iiji",5),i.dynCall_jiji=re("dynCall_jiji",5),i.dynCall_iiiiij=re("dynCall_iiiiij",7),i.dynCall_iiiiijj=re("dynCall_iiiiijj",9),i.dynCall_iiiiiijj=re("dynCall_iiiiiijj",10),i.dynCall_viji=re("dynCall_viji",5),i.wasmExports=ot,i.ccall=nt,i.cwrap=(e,t,n,r)=>(...r)=>nt(e,t,n,r),i.addFunction=(e,t)=>{I(void 0!==e);var n=Qe(e);if(n)return n;var r=(()=>{if(Ze.length)return Ze.pop();try{Te.grow(1)}catch(e){if(!(e instanceof RangeError))throw e;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}return Te.length-1})();try{et(r,e)}catch(n){if(!(n instanceof TypeError))throw n;I(void 0!==t,"Missing signature argument to addFunction: "+e);var o=qe(e,t);et(r,o)}return Oe.set(e,r),r},i.removeFunction=e=>{Oe.delete(Ke(e)),et(e,null),Ze.push(e)},i.setValue=function(e,t,n="i8"){switch(n.endsWith("*")&&(n="*"),n){case"i1":case"i8":M[e]=t;break;case"i16":y[e>>1]=t;break;case"i32":O[e>>2]=t;break;case"i64":q("to do setValue(i64) use WASM_BIGINT");case"float":x[e>>2]=t;break;case"double":w[e>>3]=t;break;case"*":v[e>>2]=t;break;default:q(`invalid type for setValue: ${n}`)}},i.getValue=function(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":case"i8":return M[e];case"i16":return y[e>>1];case"i32":return O[e>>2];case"i64":q("to do getValue(i64) use WASM_BIGINT");case"float":return x[e>>2];case"double":return w[e>>3];case"*":return v[e>>2];default:q(`invalid type for getValue: ${t}`)}},i.UTF8ToString=be,i.stringToUTF8=Ue,i.UTF16ToString=(e,t)=>{I(e%2==0,"Pointer passed to UTF16ToString must be aligned to two bytes!");for(var n=e,r=n>>1,o=r+t/2;!(r>=o)&&T[r];)++r;if((n=r<<1)-e>32&&Ye)return Ye.decode(C.subarray(e,n));for(var i="",a=0;!(a>=t/2);++a){var s=y[e+2*a>>1];if(0==s)break;i+=String.fromCharCode(s)}return i},i.stringToUTF16=(e,t,n)=>{if(I(t%2==0,"Pointer passed to stringToUTF16 must be aligned to two bytes!"),I("number"==typeof n,"stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),n??=2147483647,n<2)return 0;for(var r=t,o=(n-=2)<2*e.length?n/2:e.length,i=0;i<o;++i){var a=e.charCodeAt(i);y[t>>1]=a,t+=2}return y[t>>1]=0,t-r},["writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertU32PairToI53","getTempRet0","setTempRet0","exitJS","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","emscriptenLog","readEmAsmArgs","jstoi_q","listenOnce","autoResumeAudioContext","dynCallLegacy","getDynCaller","dynCall","handleException","keepRuntimeAlive","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","asmjsMangle","HandleAllocator","getNativeTypeSize","STACK_SIZE","STACK_ALIGN","POINTER_SIZE","ASSERTIONS","reallyNegative","unSign","strLen","reSign","formatString","intArrayToString","AsciiToString","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","stringToNewUTF8","registerKeyEventCallback","maybeCStringToJsString","findEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","jsStackTrace","getCallstack","convertPCtoSourceLocation","checkWasiClock","wasiRightsToMuslOFlags","wasiOFlagsToMuslOFlags","createDyncallWrapper","safeSetTimeout","setImmediateWrapped","clearImmediateWrapped","polyfillSetImmediate","registerPostMainLoop","registerPreMainLoop","getPromise","makePromise","idsToPromises","makePromiseCallback","ExceptionInfo","findMatchingCatch","Browser_asyncPrepareDataCounter","safeRequestAnimationFrame","arraySum","addDays","getSocketFromFD","getSocketAddress","FS_unlink","FS_mkdirTree","_setNetworkCallback","heapObjectForWebGLType","toTypedArrayIndex","webgl_enable_ANGLE_instanced_arrays","webgl_enable_OES_vertex_array_object","webgl_enable_WEBGL_draw_buffers","webgl_enable_WEBGL_multi_draw","webgl_enable_EXT_polygon_offset_clamp","webgl_enable_EXT_clip_control","webgl_enable_WEBGL_polygon_mode","emscriptenWebGLGet","computeUnpackAlignedImageSize","colorChannelsInGlTextureFormat","emscriptenWebGLGetTexPixelData","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","__glGetActiveAttribOrUniform","writeGLArray","registerWebGlEventCallback","runAndAbortIfError","ALLOC_NORMAL","ALLOC_STACK","allocate","writeStringToMemory","writeAsciiToMemory","setErrNo","demangle","stackTrace"].forEach((function(e){Fe(e,(()=>{var t=`\\`${e}\\` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line`,n=e;n.startsWith("_")||(n="$"+e),t+=` (e.g. -sDEFAULT_LIBRARY_FUNCS_TO_INCLUDE=\'${n}\')`,ue(e)&&(t+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),he(t)})),me(e)})),["run","addOnPreRun","addOnInit","addOnPreMain","addOnExit","addOnPostRun","addRunDependency","removeRunDependency","out","err","callMain","abort","wasmMemory","writeStackCookie","checkStackCookie","convertI32PairToI53Checked","stackSave","stackRestore","stackAlloc","ptrToString","zeroMemory","getHeapMax","growMemory","ENV","ERRNO_CODES","strError","DNS","Protocols","Sockets","initRandomFill","randomFill","timers","warnOnce","readEmAsmArgsArray","jstoi_s","getExecutableName","asyncLoad","alignMemory","mmapAlloc","wasmTable","noExitRuntime","getCFunc","uleb128Encode","sigToWasmTypes","generateFuncType","convertJsFunctionToWasm","freeTableIndexes","functionsInTableMap","getEmptyTableSlot","updateTableMap","getFunctionAddress","PATH","PATH_FS","UTF8Decoder","UTF8ArrayToString","stringToUTF8Array","lengthBytesUTF8","intArrayFromString","stringToAscii","UTF16Decoder","stringToUTF8OnStack","writeArrayToMemory","JSEvents","specialHTMLTargets","findCanvasEventTarget","currentFullscreenStrategy","restoreOldWindowedStyle","UNWIND_CACHE","ExitStatus","getEnvStrings","doReadv","doWritev","promiseMap","uncaughtExceptionCount","exceptionLast","exceptionCaught","Browser","getPreloadedImageData__data","wget","MONTH_DAYS_REGULAR","MONTH_DAYS_LEAP","MONTH_DAYS_REGULAR_CUMULATIVE","MONTH_DAYS_LEAP_CUMULATIVE","isLeapYear","ydayFromDate","SYSCALLS","preloadPlugins","FS_createPreloadedFile","FS_modeStringToFlags","FS_getMode","FS_stdin_getChar_buffer","FS_stdin_getChar","FS_createPath","FS_createDevice","FS_readFile","FS","FS_createDataFile","FS_createLazyFile","MEMFS","TTY","PIPEFS","SOCKFS","tempFixedLengthArray","miniTempWebGLFloatBuffers","miniTempWebGLIntBuffers","GL","AL","GLUT","EGL","GLEW","IDBStore","SDL","SDL_gfx","allocateUTF8","allocateUTF8OnStack","print","printErr"].forEach(me),$=function e(){it||gt(),it||($=e)},i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();gt(),n=a;for(const e of Object.keys(i))e in t||Object.defineProperty(t,e,{configurable:!0,get(){q(`Access to module property (\'${e}\') is no longer possible via the module constructor argument; Instead, use the result of the module constructor.`)}});return n});const n={EPDF_RenderAnnotBitmap:[["number","number","number","number","number","number"],"boolean"],EPDFAnnot_GenerateAppearance:[["number"],"boolean"],EPDFAnnot_GenerateAppearanceWithBlend:[["number","number"],"boolean"],EPDFAnnot_GetBlendMode:[["number"],"number"],EPDFAnnot_GetBorderDashPattern:[["number","number","number"],"boolean"],EPDFAnnot_GetBorderDashPatternCount:[["number"],"number"],EPDFAnnot_GetBorderEffect:[["number","number"],"boolean"],EPDFAnnot_GetBorderStyle:[["number","number"],"number"],EPDFAnnot_GetColor:[["number","number","number","number","number","number"],"boolean"],EPDFAnnot_GetIntent:[["number","number","number"],"number"],EPDFAnnot_GetRectangleDifferences:[["number","number","number","number","number"],"boolean"],EPDFAnnot_GetRichContent:[["number","number","number"],"number"],EPDFAnnot_SetBorderStyle:[["number","number","number"],"boolean"],EPDFAnnot_SetColor:[["number","number","number","number","number","number"],"boolean"],EPDFAnnot_SetIntent:[["number","string"],"boolean"],FORM_CanRedo:[["number","number"],"boolean"],FORM_CanUndo:[["number","number"],"boolean"],FORM_DoDocumentAAction:[["number","number"],null],FORM_DoDocumentJSAction:[["number"],null],FORM_DoDocumentOpenAction:[["number"],null],FORM_DoPageAAction:[["number","number","number"],null],FORM_ForceToKillFocus:[["number"],"boolean"],FORM_GetFocusedAnnot:[["number","number","number"],"boolean"],FORM_GetFocusedText:[["number","number","number","number"],"number"],FORM_GetSelectedText:[["number","number","number","number"],"number"],FORM_IsIndexSelected:[["number","number","number"],"boolean"],FORM_OnAfterLoadPage:[["number","number"],null],FORM_OnBeforeClosePage:[["number","number"],null],FORM_OnChar:[["number","number","number","number"],"boolean"],FORM_OnFocus:[["number","number","number","number","number"],"boolean"],FORM_OnKeyDown:[["number","number","number","number"],"boolean"],FORM_OnKeyUp:[["number","number","number","number"],"boolean"],FORM_OnLButtonDoubleClick:[["number","number","number","number","number"],"boolean"],FORM_OnLButtonDown:[["number","number","number","number","number"],"boolean"],FORM_OnLButtonUp:[["number","number","number","number","number"],"boolean"],FORM_OnMouseMove:[["number","number","number","number","number"],"boolean"],FORM_OnMouseWheel:[["number","number","number","number","number","number"],"boolean"],FORM_OnRButtonDown:[["number","number","number","number","number"],"boolean"],FORM_OnRButtonUp:[["number","number","number","number","number"],"boolean"],FORM_Redo:[["number","number"],"boolean"],FORM_ReplaceAndKeepSelection:[["number","number","number"],null],FORM_ReplaceSelection:[["number","number","number"],null],FORM_SelectAllText:[["number","number"],"boolean"],FORM_SetFocusedAnnot:[["number","number"],"boolean"],FORM_SetIndexSelected:[["number","number","number","boolean"],"boolean"],FORM_Undo:[["number","number"],"boolean"],FPDF_AddInstalledFont:[["number","number","number"],null],FPDF_CloseDocument:[["number"],null],FPDF_ClosePage:[["number"],null],FPDF_CloseXObject:[["number"],null],FPDF_CopyViewerPreferences:[["number","number"],"boolean"],FPDF_CountNamedDests:[["number"],"number"],FPDF_CreateClipPath:[["number","number","number","number"],"number"],FPDF_CreateNewDocument:[[],"number"],FPDF_DestroyClipPath:[["number"],null],FPDF_DestroyLibrary:[[],null],FPDF_DeviceToPage:[["number","number","number","number","number","number","number","number","number","number"],"boolean"],FPDF_DocumentHasValidCrossReferenceTable:[["number"],"boolean"],FPDF_FFLDraw:[["number","number","number","number","number","number","number","number","number"],null],FPDF_FreeDefaultSystemFontInfo:[["number"],null],FPDF_GetDefaultSystemFontInfo:[[],"number"],FPDF_GetDefaultTTFMap:[[],"number"],FPDF_GetDefaultTTFMapCount:[[],"number"],FPDF_GetDefaultTTFMapEntry:[["number"],"number"],FPDF_GetDocPermissions:[["number"],"number"],FPDF_GetDocUserPermissions:[["number"],"number"],FPDF_GetFileIdentifier:[["number","number","number","number"],"number"],FPDF_GetFileVersion:[["number","number"],"boolean"],FPDF_GetFormType:[["number"],"number"],FPDF_GetLastError:[[],"number"],FPDF_GetMetaText:[["number","string","number","number"],"number"],FPDF_GetNamedDest:[["number","number","number","number"],"number"],FPDF_GetNamedDestByName:[["number","string"],"number"],FPDF_GetPageAAction:[["number","number"],"number"],FPDF_GetPageBoundingBox:[["number","number"],"boolean"],FPDF_GetPageCount:[["number"],"number"],FPDF_GetPageHeight:[["number"],"number"],FPDF_GetPageHeightF:[["number"],"number"],FPDF_GetPageLabel:[["number","number","number","number"],"number"],FPDF_GetPageSizeByIndex:[["number","number","number","number"],"number"],FPDF_GetPageSizeByIndexF:[["number","number","number"],"boolean"],FPDF_GetPageWidth:[["number"],"number"],FPDF_GetPageWidthF:[["number"],"number"],FPDF_GetSecurityHandlerRevision:[["number"],"number"],FPDF_GetSignatureCount:[["number"],"number"],FPDF_GetSignatureObject:[["number","number"],"number"],FPDF_GetTrailerEnds:[["number","number","number"],"number"],FPDF_GetXFAPacketContent:[["number","number","number","number","number"],"boolean"],FPDF_GetXFAPacketCount:[["number"],"number"],FPDF_GetXFAPacketName:[["number","number","number","number"],"number"],FPDF_ImportNPagesToOne:[["number","number","number","number","number"],"number"],FPDF_ImportPages:[["number","number","string","number"],"boolean"],FPDF_ImportPagesByIndex:[["number","number","number","number","number"],"boolean"],FPDF_InitLibrary:[[],null],FPDF_InitLibraryWithConfig:[["number"],null],FPDF_LoadCustomDocument:[["number","string"],"number"],FPDF_LoadDocument:[["number","string"],"number"],FPDF_LoadMemDocument:[["number","number","string"],"number"],FPDF_LoadMemDocument64:[["number","number","string"],"number"],FPDF_LoadPage:[["number","number"],"number"],FPDF_LoadXFA:[["number"],"boolean"],FPDF_MovePages:[["number","number","number","number"],"boolean"],FPDF_NewFormObjectFromXObject:[["number"],"number"],FPDF_NewXObjectFromPage:[["number","number","number"],"number"],FPDF_PageToDevice:[["number","number","number","number","number","number","number","number","number","number"],"boolean"],FPDF_RemoveFormFieldHighlight:[["number"],null],FPDF_RenderPage_Close:[["number"],null],FPDF_RenderPage_Continue:[["number","number"],"number"],FPDF_RenderPageBitmap:[["number","number","number","number","number","number","number","number"],null],FPDF_RenderPageBitmap_Start:[["number","number","number","number","number","number","number","number","number"],"number"],FPDF_RenderPageBitmapWithColorScheme_Start:[["number","number","number","number","number","number","number","number","number","number"],"number"],FPDF_RenderPageBitmapWithMatrix:[["number","number","number","number","number"],null],FPDF_SaveAsCopy:[["number","number","number"],"boolean"],FPDF_SaveWithVersion:[["number","number","number","number"],"boolean"],FPDF_SetFormFieldHighlightAlpha:[["number","number"],null],FPDF_SetFormFieldHighlightColor:[["number","number","number"],null],FPDF_SetSandBoxPolicy:[["number","boolean"],null],FPDF_SetSystemFontInfo:[["number"],null],FPDF_StructElement_Attr_CountChildren:[["number"],"number"],FPDF_StructElement_Attr_GetBlobValue:[["number","number","number","number"],"boolean"],FPDF_StructElement_Attr_GetBooleanValue:[["number","number"],"boolean"],FPDF_StructElement_Attr_GetChildAtIndex:[["number","number"],"number"],FPDF_StructElement_Attr_GetCount:[["number"],"number"],FPDF_StructElement_Attr_GetName:[["number","number","number","number","number"],"boolean"],FPDF_StructElement_Attr_GetNumberValue:[["number","number"],"boolean"],FPDF_StructElement_Attr_GetStringValue:[["number","number","number","number"],"boolean"],FPDF_StructElement_Attr_GetType:[["number"],"number"],FPDF_StructElement_Attr_GetValue:[["number","string"],"number"],FPDF_StructElement_CountChildren:[["number"],"number"],FPDF_StructElement_GetActualText:[["number","number","number"],"number"],FPDF_StructElement_GetAltText:[["number","number","number"],"number"],FPDF_StructElement_GetAttributeAtIndex:[["number","number"],"number"],FPDF_StructElement_GetAttributeCount:[["number"],"number"],FPDF_StructElement_GetChildAtIndex:[["number","number"],"number"],FPDF_StructElement_GetChildMarkedContentID:[["number","number"],"number"],FPDF_StructElement_GetID:[["number","number","number"],"number"],FPDF_StructElement_GetLang:[["number","number","number"],"number"],FPDF_StructElement_GetMarkedContentID:[["number"],"number"],FPDF_StructElement_GetMarkedContentIdAtIndex:[["number","number"],"number"],FPDF_StructElement_GetMarkedContentIdCount:[["number"],"number"],FPDF_StructElement_GetObjType:[["number","number","number"],"number"],FPDF_StructElement_GetParent:[["number"],"number"],FPDF_StructElement_GetStringAttribute:[["number","string","number","number"],"number"],FPDF_StructElement_GetTitle:[["number","number","number"],"number"],FPDF_StructElement_GetType:[["number","number","number"],"number"],FPDF_StructTree_Close:[["number"],null],FPDF_StructTree_CountChildren:[["number"],"number"],FPDF_StructTree_GetChildAtIndex:[["number","number"],"number"],FPDF_StructTree_GetForPage:[["number"],"number"],FPDF_VIEWERREF_GetDuplex:[["number"],"number"],FPDF_VIEWERREF_GetName:[["number","string","number","number"],"number"],FPDF_VIEWERREF_GetNumCopies:[["number"],"number"],FPDF_VIEWERREF_GetPrintPageRange:[["number"],"number"],FPDF_VIEWERREF_GetPrintPageRangeCount:[["number"],"number"],FPDF_VIEWERREF_GetPrintPageRangeElement:[["number","number"],"number"],FPDF_VIEWERREF_GetPrintScaling:[["number"],"boolean"],FPDFAction_GetDest:[["number","number"],"number"],FPDFAction_GetFilePath:[["number","number","number"],"number"],FPDFAction_GetType:[["number"],"number"],FPDFAction_GetURIPath:[["number","number","number","number"],"number"],FPDFAnnot_AddFileAttachment:[["number","number"],"number"],FPDFAnnot_AddInkStroke:[["number","number","number"],"number"],FPDFAnnot_AppendAttachmentPoints:[["number","number"],"boolean"],FPDFAnnot_AppendObject:[["number","number"],"boolean"],FPDFAnnot_CountAttachmentPoints:[["number"],"number"],FPDFAnnot_GetAP:[["number","number","number","number"],"number"],FPDFAnnot_GetAttachmentPoints:[["number","number","number"],"boolean"],FPDFAnnot_GetBorder:[["number","number","number","number"],"boolean"],FPDFAnnot_GetColor:[["number","number","number","number","number","number"],"boolean"],FPDFAnnot_GetFileAttachment:[["number"],"number"],FPDFAnnot_GetFlags:[["number"],"number"],FPDFAnnot_GetFocusableSubtypes:[["number","number","number"],"boolean"],FPDFAnnot_GetFocusableSubtypesCount:[["number"],"number"],FPDFAnnot_GetFontColor:[["number","number","number","number","number"],"boolean"],FPDFAnnot_GetFontSize:[["number","number","number"],"boolean"],FPDFAnnot_GetFormAdditionalActionJavaScript:[["number","number","number","number","number"],"number"],FPDFAnnot_GetFormControlCount:[["number","number"],"number"],FPDFAnnot_GetFormControlIndex:[["number","number"],"number"],FPDFAnnot_GetFormFieldAlternateName:[["number","number","number","number"],"number"],FPDFAnnot_GetFormFieldAtPoint:[["number","number","number"],"number"],FPDFAnnot_GetFormFieldExportValue:[["number","number","number","number"],"number"],FPDFAnnot_GetFormFieldFlags:[["number","number"],"number"],FPDFAnnot_GetFormFieldName:[["number","number","number","number"],"number"],FPDFAnnot_GetFormFieldType:[["number","number"],"number"],FPDFAnnot_GetFormFieldValue:[["number","number","number","number"],"number"],FPDFAnnot_GetInkListCount:[["number"],"number"],FPDFAnnot_GetInkListPath:[["number","number","number","number"],"number"],FPDFAnnot_GetLine:[["number","number","number"],"boolean"],FPDFAnnot_GetLink:[["number"],"number"],FPDFAnnot_GetLinkedAnnot:[["number","string"],"number"],FPDFAnnot_GetNumberValue:[["number","string","number"],"boolean"],FPDFAnnot_GetObject:[["number","number"],"number"],FPDFAnnot_GetObjectCount:[["number"],"number"],FPDFAnnot_GetOptionCount:[["number","number"],"number"],FPDFAnnot_GetOptionLabel:[["number","number","number","number","number"],"number"],FPDFAnnot_GetRect:[["number","number"],"boolean"],FPDFAnnot_GetStringValue:[["number","string","number","number"],"number"],FPDFAnnot_GetSubtype:[["number"],"number"],FPDFAnnot_GetValueType:[["number","string"],"number"],FPDFAnnot_GetVertices:[["number","number","number"],"number"],FPDFAnnot_HasAttachmentPoints:[["number"],"boolean"],FPDFAnnot_HasKey:[["number","string"],"boolean"],FPDFAnnot_IsChecked:[["number","number"],"boolean"],FPDFAnnot_IsObjectSupportedSubtype:[["number"],"boolean"],FPDFAnnot_IsOptionSelected:[["number","number","number"],"boolean"],FPDFAnnot_IsSupportedSubtype:[["number"],"boolean"],FPDFAnnot_RemoveInkList:[["number"],"boolean"],FPDFAnnot_RemoveObject:[["number","number"],"boolean"],FPDFAnnot_SetAP:[["number","number","number"],"boolean"],FPDFAnnot_SetAttachmentPoints:[["number","number","number"],"boolean"],FPDFAnnot_SetBorder:[["number","number","number","number"],"boolean"],FPDFAnnot_SetColor:[["number","number","number","number","number","number"],"boolean"],FPDFAnnot_SetFlags:[["number","number"],"boolean"],FPDFAnnot_SetFocusableSubtypes:[["number","number","number"],"boolean"],FPDFAnnot_SetFontColor:[["number","number","number","number","number"],"boolean"],FPDFAnnot_SetFormFieldFlags:[["number","number","number"],"boolean"],FPDFAnnot_SetRect:[["number","number"],"boolean"],FPDFAnnot_SetStringValue:[["number","string","number"],"boolean"],FPDFAnnot_SetURI:[["number","number"],"boolean"],FPDFAnnot_UpdateObject:[["number","number"],"boolean"],FPDFAttachment_GetFile:[["number","number","number","number"],"boolean"],FPDFAttachment_GetName:[["number","number","number"],"number"],FPDFAttachment_GetStringValue:[["number","string","number","number"],"number"],FPDFAttachment_GetSubtype:[["number","number","number"],"number"],FPDFAttachment_GetValueType:[["number","string"],"number"],FPDFAttachment_HasKey:[["number","string"],"boolean"],FPDFAttachment_SetFile:[["number","number","number","number"],"boolean"],FPDFAttachment_SetStringValue:[["number","string","number"],"boolean"],FPDFAvail_Create:[["number","number"],"number"],FPDFAvail_Destroy:[["number"],null],FPDFAvail_GetDocument:[["number","string"],"number"],FPDFAvail_GetFirstPageNum:[["number"],"number"],FPDFAvail_IsDocAvail:[["number","number"],"number"],FPDFAvail_IsFormAvail:[["number","number"],"number"],FPDFAvail_IsLinearized:[["number"],"number"],FPDFAvail_IsPageAvail:[["number","number","number"],"number"],FPDFBitmap_Create:[["number","number","number"],"number"],FPDFBitmap_CreateEx:[["number","number","number","number","number"],"number"],FPDFBitmap_Destroy:[["number"],null],FPDFBitmap_FillRect:[["number","number","number","number","number","number"],"boolean"],FPDFBitmap_GetBuffer:[["number"],"number"],FPDFBitmap_GetFormat:[["number"],"number"],FPDFBitmap_GetHeight:[["number"],"number"],FPDFBitmap_GetStride:[["number"],"number"],FPDFBitmap_GetWidth:[["number"],"number"],FPDFBookmark_Find:[["number","number"],"number"],FPDFBookmark_GetAction:[["number"],"number"],FPDFBookmark_GetCount:[["number"],"number"],FPDFBookmark_GetDest:[["number","number"],"number"],FPDFBookmark_GetFirstChild:[["number","number"],"number"],FPDFBookmark_GetNextSibling:[["number","number"],"number"],FPDFBookmark_GetTitle:[["number","number","number"],"number"],FPDFCatalog_IsTagged:[["number"],"boolean"],FPDFCatalog_SetLanguage:[["number","string"],"boolean"],FPDFClipPath_CountPaths:[["number"],"number"],FPDFClipPath_CountPathSegments:[["number","number"],"number"],FPDFClipPath_GetPathSegment:[["number","number","number"],"number"],FPDFDest_GetDestPageIndex:[["number","number"],"number"],FPDFDest_GetLocationInPage:[["number","number","number","number","number","number","number"],"boolean"],FPDFDest_GetView:[["number","number","number"],"number"],FPDFDoc_AddAttachment:[["number","number"],"number"],FPDFDoc_CloseJavaScriptAction:[["number"],null],FPDFDoc_DeleteAttachment:[["number","number"],"boolean"],FPDFDOC_ExitFormFillEnvironment:[["number"],null],FPDFDoc_GetAttachment:[["number","number"],"number"],FPDFDoc_GetAttachmentCount:[["number"],"number"],FPDFDoc_GetJavaScriptAction:[["number","number"],"number"],FPDFDoc_GetJavaScriptActionCount:[["number"],"number"],FPDFDoc_GetPageMode:[["number"],"number"],FPDFDOC_InitFormFillEnvironment:[["number","number"],"number"],FPDFFont_Close:[["number"],null],FPDFFont_GetAscent:[["number","number","number"],"boolean"],FPDFFont_GetBaseFontName:[["number","number","number"],"number"],FPDFFont_GetDescent:[["number","number","number"],"boolean"],FPDFFont_GetFamilyName:[["number","number","number"],"number"],FPDFFont_GetFlags:[["number"],"number"],FPDFFont_GetFontData:[["number","number","number","number"],"boolean"],FPDFFont_GetGlyphPath:[["number","number","number"],"number"],FPDFFont_GetGlyphWidth:[["number","number","number","number"],"boolean"],FPDFFont_GetIsEmbedded:[["number"],"number"],FPDFFont_GetItalicAngle:[["number","number"],"boolean"],FPDFFont_GetWeight:[["number"],"number"],FPDFFormObj_CountObjects:[["number"],"number"],FPDFFormObj_GetObject:[["number","number"],"number"],FPDFFormObj_RemoveObject:[["number","number"],"boolean"],FPDFGlyphPath_CountGlyphSegments:[["number"],"number"],FPDFGlyphPath_GetGlyphPathSegment:[["number","number"],"number"],FPDFImageObj_GetBitmap:[["number"],"number"],FPDFImageObj_GetIccProfileDataDecoded:[["number","number","number","number","number"],"boolean"],FPDFImageObj_GetImageDataDecoded:[["number","number","number"],"number"],FPDFImageObj_GetImageDataRaw:[["number","number","number"],"number"],FPDFImageObj_GetImageFilter:[["number","number","number","number"],"number"],FPDFImageObj_GetImageFilterCount:[["number"],"number"],FPDFImageObj_GetImageMetadata:[["number","number","number"],"boolean"],FPDFImageObj_GetImagePixelSize:[["number","number","number"],"boolean"],FPDFImageObj_GetRenderedBitmap:[["number","number","number"],"number"],FPDFImageObj_LoadJpegFile:[["number","number","number","number"],"boolean"],FPDFImageObj_LoadJpegFileInline:[["number","number","number","number"],"boolean"],FPDFImageObj_SetBitmap:[["number","number","number","number"],"boolean"],FPDFImageObj_SetMatrix:[["number","number","number","number","number","number","number"],"boolean"],FPDFJavaScriptAction_GetName:[["number","number","number"],"number"],FPDFJavaScriptAction_GetScript:[["number","number","number"],"number"],FPDFLink_CloseWebLinks:[["number"],null],FPDFLink_CountQuadPoints:[["number"],"number"],FPDFLink_CountRects:[["number","number"],"number"],FPDFLink_CountWebLinks:[["number"],"number"],FPDFLink_Enumerate:[["number","number","number"],"boolean"],FPDFLink_GetAction:[["number"],"number"],FPDFLink_GetAnnot:[["number","number"],"number"],FPDFLink_GetAnnotRect:[["number","number"],"boolean"],FPDFLink_GetDest:[["number","number"],"number"],FPDFLink_GetLinkAtPoint:[["number","number","number"],"number"],FPDFLink_GetLinkZOrderAtPoint:[["number","number","number"],"number"],FPDFLink_GetQuadPoints:[["number","number","number"],"boolean"],FPDFLink_GetRect:[["number","number","number","number","number","number","number"],"boolean"],FPDFLink_GetTextRange:[["number","number","number","number"],"boolean"],FPDFLink_GetURL:[["number","number","number","number"],"number"],FPDFLink_LoadWebLinks:[["number"],"number"],FPDFPage_CloseAnnot:[["number"],null],FPDFPage_CountObjects:[["number"],"number"],FPDFPage_CreateAnnot:[["number","number"],"number"],FPDFPage_Delete:[["number","number"],null],FPDFPage_Flatten:[["number","number"],"number"],FPDFPage_FormFieldZOrderAtPoint:[["number","number","number","number"],"number"],FPDFPage_GenerateContent:[["number"],"boolean"],FPDFPage_GetAnnot:[["number","number"],"number"],FPDFPage_GetAnnotCount:[["number"],"number"],FPDFPage_GetAnnotIndex:[["number","number"],"number"],FPDFPage_GetArtBox:[["number","number","number","number","number"],"boolean"],FPDFPage_GetBleedBox:[["number","number","number","number","number"],"boolean"],FPDFPage_GetCropBox:[["number","number","number","number","number"],"boolean"],FPDFPage_GetDecodedThumbnailData:[["number","number","number"],"number"],FPDFPage_GetMediaBox:[["number","number","number","number","number"],"boolean"],FPDFPage_GetObject:[["number","number"],"number"],FPDFPage_GetRawThumbnailData:[["number","number","number"],"number"],FPDFPage_GetRotation:[["number"],"number"],FPDFPage_GetThumbnailAsBitmap:[["number"],"number"],FPDFPage_GetTrimBox:[["number","number","number","number","number"],"boolean"],FPDFPage_HasFormFieldAtPoint:[["number","number","number","number"],"number"],FPDFPage_HasTransparency:[["number"],"boolean"],FPDFPage_InsertClipPath:[["number","number"],null],FPDFPage_InsertObject:[["number","number"],null],FPDFPage_InsertObjectAtIndex:[["number","number","number"],"boolean"],FPDFPage_New:[["number","number","number","number"],"number"],FPDFPage_RemoveAnnot:[["number","number"],"boolean"],FPDFPage_RemoveObject:[["number","number"],"boolean"],FPDFPage_SetArtBox:[["number","number","number","number","number"],null],FPDFPage_SetBleedBox:[["number","number","number","number","number"],null],FPDFPage_SetCropBox:[["number","number","number","number","number"],null],FPDFPage_SetMediaBox:[["number","number","number","number","number"],null],FPDFPage_SetRotation:[["number","number"],null],FPDFPage_SetTrimBox:[["number","number","number","number","number"],null],FPDFPage_TransformAnnots:[["number","number","number","number","number","number","number"],null],FPDFPage_TransFormWithClip:[["number","number","number"],"boolean"],FPDFPageObj_AddMark:[["number","string"],"number"],FPDFPageObj_CountMarks:[["number"],"number"],FPDFPageObj_CreateNewPath:[["number","number"],"number"],FPDFPageObj_CreateNewRect:[["number","number","number","number"],"number"],FPDFPageObj_CreateTextObj:[["number","number","number"],"number"],FPDFPageObj_Destroy:[["number"],null],FPDFPageObj_GetBounds:[["number","number","number","number","number"],"boolean"],FPDFPageObj_GetClipPath:[["number"],"number"],FPDFPageObj_GetDashArray:[["number","number","number"],"boolean"],FPDFPageObj_GetDashCount:[["number"],"number"],FPDFPageObj_GetDashPhase:[["number","number"],"boolean"],FPDFPageObj_GetFillColor:[["number","number","number","number","number"],"boolean"],FPDFPageObj_GetIsActive:[["number","number"],"boolean"],FPDFPageObj_GetLineCap:[["number"],"number"],FPDFPageObj_GetLineJoin:[["number"],"number"],FPDFPageObj_GetMark:[["number","number"],"number"],FPDFPageObj_GetMarkedContentID:[["number"],"number"],FPDFPageObj_GetMatrix:[["number","number"],"boolean"],FPDFPageObj_GetRotatedBounds:[["number","number"],"boolean"],FPDFPageObj_GetStrokeColor:[["number","number","number","number","number"],"boolean"],FPDFPageObj_GetStrokeWidth:[["number","number"],"boolean"],FPDFPageObj_GetType:[["number"],"number"],FPDFPageObj_HasTransparency:[["number"],"boolean"],FPDFPageObj_NewImageObj:[["number"],"number"],FPDFPageObj_NewTextObj:[["number","string","number"],"number"],FPDFPageObj_RemoveMark:[["number","number"],"boolean"],FPDFPageObj_SetBlendMode:[["number","string"],null],FPDFPageObj_SetDashArray:[["number","number","number","number"],"boolean"],FPDFPageObj_SetDashPhase:[["number","number"],"boolean"],FPDFPageObj_SetFillColor:[["number","number","number","number","number"],"boolean"],FPDFPageObj_SetIsActive:[["number","boolean"],"boolean"],FPDFPageObj_SetLineCap:[["number","number"],"boolean"],FPDFPageObj_SetLineJoin:[["number","number"],"boolean"],FPDFPageObj_SetMatrix:[["number","number"],"boolean"],FPDFPageObj_SetStrokeColor:[["number","number","number","number","number"],"boolean"],FPDFPageObj_SetStrokeWidth:[["number","number"],"boolean"],FPDFPageObj_Transform:[["number","number","number","number","number","number","number"],null],FPDFPageObj_TransformClipPath:[["number","number","number","number","number","number","number"],null],FPDFPageObj_TransformF:[["number","number"],"boolean"],FPDFPageObjMark_CountParams:[["number"],"number"],FPDFPageObjMark_GetName:[["number","number","number","number"],"boolean"],FPDFPageObjMark_GetParamBlobValue:[["number","string","number","number","number"],"boolean"],FPDFPageObjMark_GetParamIntValue:[["number","string","number"],"boolean"],FPDFPageObjMark_GetParamKey:[["number","number","number","number","number"],"boolean"],FPDFPageObjMark_GetParamStringValue:[["number","string","number","number","number"],"boolean"],FPDFPageObjMark_GetParamValueType:[["number","string"],"number"],FPDFPageObjMark_RemoveParam:[["number","number","string"],"boolean"],FPDFPageObjMark_SetBlobParam:[["number","number","number","string","number","number"],"boolean"],FPDFPageObjMark_SetIntParam:[["number","number","number","string","number"],"boolean"],FPDFPageObjMark_SetStringParam:[["number","number","number","string","string"],"boolean"],FPDFPath_BezierTo:[["number","number","number","number","number","number","number"],"boolean"],FPDFPath_Close:[["number"],"boolean"],FPDFPath_CountSegments:[["number"],"number"],FPDFPath_GetDrawMode:[["number","number","number"],"boolean"],FPDFPath_GetPathSegment:[["number","number"],"number"],FPDFPath_LineTo:[["number","number","number"],"boolean"],FPDFPath_MoveTo:[["number","number","number"],"boolean"],FPDFPath_SetDrawMode:[["number","number","boolean"],"boolean"],FPDFPathSegment_GetClose:[["number"],"boolean"],FPDFPathSegment_GetPoint:[["number","number","number"],"boolean"],FPDFPathSegment_GetType:[["number"],"number"],FPDFSignatureObj_GetByteRange:[["number","number","number"],"number"],FPDFSignatureObj_GetContents:[["number","number","number"],"number"],FPDFSignatureObj_GetDocMDPPermission:[["number"],"number"],FPDFSignatureObj_GetReason:[["number","number","number"],"number"],FPDFSignatureObj_GetSubFilter:[["number","number","number"],"number"],FPDFSignatureObj_GetTime:[["number","number","number"],"number"],FPDFText_ClosePage:[["number"],null],FPDFText_CountChars:[["number"],"number"],FPDFText_CountRects:[["number","number","number"],"number"],FPDFText_FindClose:[["number"],null],FPDFText_FindNext:[["number"],"boolean"],FPDFText_FindPrev:[["number"],"boolean"],FPDFText_FindStart:[["number","number","number","number"],"number"],FPDFText_GetBoundedText:[["number","number","number","number","number","number","number"],"number"],FPDFText_GetCharAngle:[["number","number"],"number"],FPDFText_GetCharBox:[["number","number","number","number","number","number"],"boolean"],FPDFText_GetCharIndexAtPos:[["number","number","number","number","number"],"number"],FPDFText_GetCharIndexFromTextIndex:[["number","number"],"number"],FPDFText_GetCharOrigin:[["number","number","number","number"],"boolean"],FPDFText_GetFillColor:[["number","number","number","number","number","number"],"boolean"],FPDFText_GetFontInfo:[["number","number","number","number","number"],"number"],FPDFText_GetFontSize:[["number","number"],"number"],FPDFText_GetFontWeight:[["number","number"],"number"],FPDFText_GetLooseCharBox:[["number","number","number"],"boolean"],FPDFText_GetMatrix:[["number","number","number"],"boolean"],FPDFText_GetRect:[["number","number","number","number","number","number"],"boolean"],FPDFText_GetSchCount:[["number"],"number"],FPDFText_GetSchResultIndex:[["number"],"number"],FPDFText_GetStrokeColor:[["number","number","number","number","number","number"],"boolean"],FPDFText_GetText:[["number","number","number","number"],"number"],FPDFText_GetTextIndexFromCharIndex:[["number","number"],"number"],FPDFText_GetTextObject:[["number","number"],"number"],FPDFText_GetUnicode:[["number","number"],"number"],FPDFText_HasUnicodeMapError:[["number","number"],"number"],FPDFText_IsGenerated:[["number","number"],"number"],FPDFText_IsHyphen:[["number","number"],"number"],FPDFText_LoadCidType2Font:[["number","number","number","string","number","number"],"number"],FPDFText_LoadFont:[["number","number","number","number","boolean"],"number"],FPDFText_LoadPage:[["number"],"number"],FPDFText_LoadStandardFont:[["number","string"],"number"],FPDFText_SetCharcodes:[["number","number","number"],"boolean"],FPDFText_SetText:[["number","number"],"boolean"],FPDFTextObj_GetFont:[["number"],"number"],FPDFTextObj_GetFontSize:[["number","number"],"boolean"],FPDFTextObj_GetRenderedBitmap:[["number","number","number","number"],"number"],FPDFTextObj_GetText:[["number","number","number","number"],"number"],FPDFTextObj_GetTextRenderMode:[["number"],"number"],FPDFTextObj_SetTextRenderMode:[["number","number"],"boolean"],PDFiumExt_CloseFileWriter:[["number"],null],PDFiumExt_CloseFormFillInfo:[["number"],null],PDFiumExt_ExitFormFillEnvironment:[["number"],null],PDFiumExt_GetFileWriterData:[["number","number","number"],"number"],PDFiumExt_GetFileWriterSize:[["number"],"number"],PDFiumExt_Init:[[],null],PDFiumExt_InitFormFillEnvironment:[["number","number"],"number"],PDFiumExt_OpenFileWriter:[[],"number"],PDFiumExt_OpenFormFillInfo:[[],"number"],PDFiumExt_SaveAsCopy:[["number","number"],"number"]};async function r(e){return async function(e){const t={pdfium:e};for(const r in n){const o=r,i=n[o][0],a=n[o][1];t[o]=e.cwrap(r,a,i)}return t}(await t(e))}var o=(e=>(e[e.Degree0=0]="Degree0",e[e.Degree90=1]="Degree90",e[e.Degree180=2]="Degree180",e[e.Degree270=3]="Degree270",e))(o||{});function i(e){return{width:Math.ceil(e.width),height:Math.ceil(e.height)}}function a(e){return{origin:(t=e.origin,{x:Math.floor(t.x),y:Math.floor(t.y)}),size:i(e.size)};var t}function s(e){const{width:t,height:n}=e;return{width:n,height:t}}function u(e){const t=[e.p1.x,e.p2.x,e.p3.x,e.p4.x],n=[e.p1.y,e.p2.y,e.p3.y,e.p4.y];return{origin:{x:Math.min(...t),y:Math.min(...n)},size:{width:Math.max(...t)-Math.min(...t),height:Math.max(...n)-Math.min(...n)}}}function F(e,t,n,r){return function(e,t){return{origin:{x:e.origin.x*t,y:e.origin.y*t},size:{width:e.size.width*t,height:e.size.height*t}}}(function(e,t,n){let r=t.origin.x,o=t.origin.y,i=t.size;switch(n){case 0:break;case 1:r=e.height-t.origin.y-t.size.height,o=t.origin.x,i=s(t.size);break;case 2:r=e.width-t.origin.x-t.size.width,o=e.height-t.origin.y-t.size.height;break;case 3:r=t.origin.y,o=e.width-t.origin.x-t.size.width,i=s(t.size)}return{origin:{x:r,y:o},size:{width:i.width,height:i.height}}}(e,t,n),r)}var l=class{debug(){}info(){}warn(){}error(){}perf(){}},m=class extends Error{constructor(e){super(`Task aborted: ${JSON.stringify(e)}`),this.name="TaskAbortedError"}},d=class extends Error{constructor(e){super(`Task rejected: ${JSON.stringify(e)}`),this.name="TaskRejectedError"}},_=class e{constructor(){this.state={stage:0},this.resolvedCallbacks=[],this.rejectedCallbacks=[],this._promise=null}toPromise(){return this._promise||(this._promise=new Promise(((e,t)=>{this.wait((t=>e(t)),(e=>{"abort"===e.type?t(new m(e.reason)):t(new d(e.reason))}))}))),this._promise}wait(e,t){switch(this.state.stage){case 0:this.resolvedCallbacks.push(e),this.rejectedCallbacks.push(t);break;case 1:e(this.state.result);break;case 2:t({type:"reject",reason:this.state.reason});break;case 3:t({type:"abort",reason:this.state.reason})}}resolve(e){if(0===this.state.stage){this.state={stage:1,result:e};for(const t of this.resolvedCallbacks)try{t(e)}catch(e){}this.resolvedCallbacks=[],this.rejectedCallbacks=[]}}reject(e){if(0===this.state.stage){this.state={stage:2,reason:e};for(const t of this.rejectedCallbacks)try{t({type:"reject",reason:e})}catch(e){}this.resolvedCallbacks=[],this.rejectedCallbacks=[]}}abort(e){if(0===this.state.stage){this.state={stage:3,reason:e};for(const t of this.rejectedCallbacks)try{t({type:"abort",reason:e})}catch(e){}this.resolvedCallbacks=[],this.rejectedCallbacks=[]}}fail(e){"abort"===e.type?this.abort(e.reason):this.reject(e.reason)}static all(t){const n=new e;if(0===t.length)return n.resolve([]),n;const r=new Array(t.length);let o=0,i=!1;return t.forEach(((e,a)=>{e.wait((e=>{i||(r[a]=e,o++,o===t.length&&(i=!0,n.resolve(r)))}),(e=>{i||(i=!0,"abort"===e.type?n.abort(e.reason):n.reject(e.reason))}))})),n}static allSettled(t){const n=new e;if(0===t.length)return n.resolve([]),n;const r=new Array(t.length);let o=0;return t.forEach(((e,i)=>{e.wait((e=>{r[i]={status:"resolved",value:e},o++,o===t.length&&n.resolve(r)}),(e=>{r[i]={status:"abort"===e.type?"aborted":"rejected",reason:e.reason},o++,o===t.length&&n.resolve(r)}))})),n}static race(t){const n=new e;if(0===t.length)return n.reject("No tasks provided"),n;let r=!1;return t.forEach((e=>{e.wait((e=>{r||(r=!0,n.resolve(e))}),(e=>{r||(r=!0,"abort"===e.type?n.abort(e.reason):n.reject(e.reason))}))})),n}static withProgress(t,n){const r=e.all(t);if(n){let e=0;t.forEach((r=>{r.wait((()=>{e++,n(e,t.length)}),(()=>{e++,n(e,t.length)}))}))}return r}},P=Object.freeze(["­","​","⁠","\\ufeff","￾","￿"]),c=new RegExp(`[${P.join("")}]`,"g");var h=(e=>(e[e.Unknown=0]="Unknown",e[e.XYZ=1]="XYZ",e[e.FitPage=2]="FitPage",e[e.FitHorizontal=3]="FitHorizontal",e[e.FitVertical=4]="FitVertical",e[e.FitRectangle=5]="FitRectangle",e))(h||{}),g=Object.freeze([{id:0,label:"Normal",css:"normal"},{id:1,label:"Multiply",css:"multiply"},{id:2,label:"Screen",css:"screen"},{id:3,label:"Overlay",css:"overlay"},{id:4,label:"Darken",css:"darken"},{id:5,label:"Lighten",css:"lighten"},{id:6,label:"Color Dodge",css:"color-dodge"},{id:7,label:"Color Burn",css:"color-burn"},{id:8,label:"Hard Light",css:"hard-light"},{id:9,label:"Soft Light",css:"soft-light"},{id:10,label:"Difference",css:"difference"},{id:11,label:"Exclusion",css:"exclusion"},{id:12,label:"Hue",css:"hue"},{id:13,label:"Saturation",css:"saturation"},{id:14,label:"Color",css:"color"},{id:15,label:"Luminosity",css:"luminosity"}]);g.reduce(((e,t)=>(e[t.id]=t,e)),{}),g.reduce(((e,t)=>(e[t.css]=t.id,e)),{}),g.map((e=>({value:e.id,label:e.label})));var D=(e=>(e[e.Unsupported=0]="Unsupported",e[e.Goto=1]="Goto",e[e.RemoteGoto=2]="RemoteGoto",e[e.URI=3]="URI",e[e.LaunchAppOrOpenFile=4]="LaunchAppOrOpenFile",e))(D||{}),b=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.TEXT=1]="TEXT",e[e.LINK=2]="LINK",e[e.FREETEXT=3]="FREETEXT",e[e.LINE=4]="LINE",e[e.SQUARE=5]="SQUARE",e[e.CIRCLE=6]="CIRCLE",e[e.POLYGON=7]="POLYGON",e[e.POLYLINE=8]="POLYLINE",e[e.HIGHLIGHT=9]="HIGHLIGHT",e[e.UNDERLINE=10]="UNDERLINE",e[e.SQUIGGLY=11]="SQUIGGLY",e[e.STRIKEOUT=12]="STRIKEOUT",e[e.STAMP=13]="STAMP",e[e.CARET=14]="CARET",e[e.INK=15]="INK",e[e.POPUP=16]="POPUP",e[e.FILEATTACHMENT=17]="FILEATTACHMENT",e[e.SOUND=18]="SOUND",e[e.MOVIE=19]="MOVIE",e[e.WIDGET=20]="WIDGET",e[e.SCREEN=21]="SCREEN",e[e.PRINTERMARK=22]="PRINTERMARK",e[e.TRAPNET=23]="TRAPNET",e[e.WATERMARK=24]="WATERMARK",e[e.THREED=25]="THREED",e[e.RICHMEDIA=26]="RICHMEDIA",e[e.XFAWIDGET=27]="XFAWIDGET",e[e.REDACT=28]="REDACT",e))(b||{}),p=(e=>(e[e.Normal=0]="Normal",e[e.Rollover=1]="Rollover",e[e.Down=2]="Down",e))(p||{}),f=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.PUSHBUTTON=1]="PUSHBUTTON",e[e.CHECKBOX=2]="CHECKBOX",e[e.RADIOBUTTON=3]="RADIOBUTTON",e[e.COMBOBOX=4]="COMBOBOX",e[e.LISTBOX=5]="LISTBOX",e[e.TEXTFIELD=6]="TEXTFIELD",e[e.SIGNATURE=7]="SIGNATURE",e[e.XFA=8]="XFA",e[e.XFA_CHECKBOX=9]="XFA_CHECKBOX",e[e.XFA_COMBOBOX=10]="XFA_COMBOBOX",e[e.XFA_IMAGEFIELD=11]="XFA_IMAGEFIELD",e[e.XFA_LISTBOX=12]="XFA_LISTBOX",e[e.XFA_PUSHBUTTON=13]="XFA_PUSHBUTTON",e[e.XFA_SIGNATURE=14]="XFA_SIGNATURE",e[e.XFA_TEXTFIELD=15]="XFA_TEXTFIELD",e))(f||{}),A=(e=>(e[e.Color=0]="Color",e[e.InteriorColor=1]="InteriorColor",e))(A||{}),E=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.SOLID=1]="SOLID",e[e.DASHED=2]="DASHED",e[e.BEVELED=3]="BEVELED",e[e.INSET=4]="INSET",e[e.UNDERLINE=5]="UNDERLINE",e[e.CLOUDY=6]="CLOUDY",e))(E||{}),G=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.TEXT=1]="TEXT",e[e.PATH=2]="PATH",e[e.IMAGE=3]="IMAGE",e[e.SHADING=4]="SHADING",e[e.FORM=5]="FORM",e))(G||{}),S=Object.freeze({1:"invisible",2:"hidden",4:"print",8:"noZoom",16:"noRotate",32:"noView",64:"readOnly",128:"locked",256:"toggleNoView"});Object.entries(S).reduce(((e,[t,n])=>(e[n]=Number(t),e)),{});var M=(e=>(e[e.None=0]="None",e[e.MatchCase=1]="MatchCase",e[e.MatchWholeWord=2]="MatchWholeWord",e[e.MatchConsecutive=4]="MatchConsecutive",e))(M||{}),C=(e=>(e[e.Ok=0]="Ok",e[e.Unknown=1]="Unknown",e[e.NotFound=2]="NotFound",e[e.WrongFormat=3]="WrongFormat",e[e.Password=4]="Password",e[e.Security=5]="Security",e[e.PageError=6]="PageError",e[e.XFALoad=7]="XFALoad",e[e.XFALayout=8]="XFALayout",e[e.Cancelled=9]="Cancelled",e[e.Initialization=10]="Initialization",e[e.NotReady=11]="NotReady",e[e.NotSupport=12]="NotSupport",e[e.LoadDoc=13]="LoadDoc",e[e.DocNotOpen=14]="DocNotOpen",e[e.CantCloseDoc=15]="CantCloseDoc",e[e.CantCreateNewDoc=16]="CantCreateNewDoc",e[e.CantImportPages=17]="CantImportPages",e[e.CantCreateAnnot=18]="CantCreateAnnot",e[e.CantSetAnnotRect=19]="CantSetAnnotRect",e[e.CantSetAnnotContent=20]="CantSetAnnotContent",e[e.CantRemoveInkList=21]="CantRemoveInkList",e[e.CantAddInkStoke=22]="CantAddInkStoke",e[e.CantReadAttachmentSize=23]="CantReadAttachmentSize",e[e.CantReadAttachmentContent=24]="CantReadAttachmentContent",e[e.CantFocusAnnot=25]="CantFocusAnnot",e[e.CantSelectText=26]="CantSelectText",e[e.CantSelectOption=27]="CantSelectOption",e[e.CantCheckField=28]="CantCheckField",e))(C||{}),y=class{static create(){return new _}static resolve(e){const t=new _;return t.resolve(e),t}static reject(e){const t=new _;return t.reject(e),t}static abort(e){const t=new _;return t.reject(e),t}};function T(e){if(!e?.startsWith("D:")||e.length<16)return;const t=+e.slice(2,6),n=+e.slice(6,8)-1,r=+e.slice(8,10),o=+e.slice(10,12),i=+e.slice(12,14),a=+e.slice(14,16);return new Date(Date.UTC(t,n,r,o,i,a))}function O(e=new Date){const t=(e,t=2)=>e.toString().padStart(t,"0");return`D:${e.getUTCFullYear()}${t(e.getUTCMonth()+1)}${t(e.getUTCDate())}${t(e.getUTCHours())}${t(e.getUTCMinutes())}${t(e.getUTCSeconds())}`}const v="WebWorkerEngineRunner",x="Engine";class w{constructor(e=new l){this.logger=e,this.execute=e=>{if(this.logger.debug(v,x,"runner start exeucte request"),!this.engine){const t={type:"reject",reason:{code:C.NotReady,message:"engine has not started yet"}},n={id:e.id,type:"ExecuteResponse",data:{type:"error",value:t}};return void this.respond(n)}const t=this.engine,{name:n,args:r}=e.data;if(!t[n]){const t={type:"reject",reason:{code:C.NotSupport,message:`engine method ${n} is not supported yet`}},r={id:e.id,type:"ExecuteResponse",data:{type:"error",value:t}};return void this.respond(r)}let o;switch(n){case"isSupport":case"initialize":case"destroy":case"openDocumentUrl":case"openDocumentFromBuffer":case"openDocumentFromLoader":case"getDocPermissions":case"getDocUserPermissions":case"getMetadata":case"getBookmarks":case"getSignatures":case"renderPage":case"renderPageRect":case"renderAnnotation":case"renderThumbnail":case"getAllAnnotations":case"getPageAnnotations":case"createPageAnnotation":case"updatePageAnnotation":case"removePageAnnotation":case"updateAnnotationColor":case"getPageTextRects":case"searchAllPages":case"closeDocument":case"saveAsCopy":case"getAttachments":case"readAttachmentContent":case"setFormFieldValue":case"flattenPage":case"extractPages":case"extractText":case"getTextSlices":case"getPageGlyphs":case"getPageGeometry":case"merge":case"mergePages":o=this.engine[n](...r)}o.wait((t=>{const n={id:e.id,type:"ExecuteResponse",data:{type:"result",value:t}};this.respond(n)}),(t=>{const n={id:e.id,type:"ExecuteResponse",data:{type:"error",value:t}};this.respond(n)}))}}listen(){self.onmessage=e=>this.handle(e)}handle(e){this.logger.debug(v,x,"webworker receive message event: ",e.data);try{const t=e.data;if("ExecuteRequest"===t.type)this.execute(t)}catch(e){this.logger.info(v,x,"webworker met error when processing message event:",e)}}ready(){this.listen(),this.respond({id:"0",type:"ReadyResponse"}),this.logger.debug(v,x,"runner is ready")}respond(e){this.logger.debug(v,x,"runner respond: ",e),self.postMessage(e)}}function R(e,t,n,r=100){let o=e.wasmExports.malloc(r);for(let t=0;t<r;t++)e.HEAP8[o+t]=0;const i=t(o,r);let a;if(i>r){e.wasmExports.free(o),o=e.wasmExports.malloc(i);for(let t=0;t<i;t++)e.HEAP8[o+t]=0;t(o,i),a=n(o)}else a=n(o);return e.wasmExports.free(o),a}function I(e,t){const n=t(0,0),r=e.wasmExports.malloc(n);t(r,n);const o=new ArrayBuffer(n),i=new DataView(o);for(let t=0;t<n;t++)i.setInt8(t,e.getValue(r+t,"i8"));return e.wasmExports.free(r),o}class k{constructor(e){this.pdfium=e,this.docs=new Map}setDocument(e,t,n){let r=this.docs.get(e);r||(r=new j(t,n,this.pdfium),this.docs.set(e,r))}getContext(e){return this.docs.get(e)}closeDocument(e){const t=this.docs.get(e);return!!t&&(t.dispose(),this.docs.delete(e),!0)}}class j{constructor(e,t,n){this.filePtr=e,this.docPtr=t,this.pageCache=new L(n,t)}acquirePage(e){return this.pageCache.acquire(e)}dispose(){this.pageCache.forceReleaseAll(),this.pageCache.pdf.FPDF_CloseDocument(this.docPtr),this.pageCache.pdf.pdfium.wasmExports.free(this.filePtr)}}class L{constructor(e,t){this.pdf=e,this.docPtr=t,this.cache=new Map}acquire(e){let t=this.cache.get(e);if(!t){const n=this.pdf.FPDF_LoadPage(this.docPtr,e);t=new B(this.pdf,this.docPtr,e,n,(()=>{this.cache.delete(e)})),this.cache.set(e,t)}return t.clearExpiryTimer(),t.bumpRefCount(),t}forceReleaseAll(){for(const e of this.cache.values())e.disposeImmediate();this.cache.clear()}}class B{constructor(e,t,n,r,o){this.pdf=e,this.docPtr=t,this.pageIdx=n,this.pagePtr=r,this.onFinalDispose=o,this.refCount=0,this.disposed=!1}bumpRefCount(){if(this.disposed)throw new Error("Context already disposed");this.refCount++}clearExpiryTimer(){this.expiryTimer&&(clearTimeout(this.expiryTimer),this.expiryTimer=void 0)}release(){this.disposed||(this.refCount--,0===this.refCount&&(this.expiryTimer=setTimeout((()=>this.disposeImmediate()),5e3)))}disposeImmediate(){this.disposed||(this.disposed=!0,void 0!==this.textPagePtr&&this.pdf.FPDFText_ClosePage(this.textPagePtr),void 0!==this.formHandle&&(this.pdf.FORM_OnBeforeClosePage(this.pagePtr,this.formHandle),this.pdf.PDFiumExt_ExitFormFillEnvironment(this.formHandle)),void 0!==this.formInfoPtr&&this.pdf.PDFiumExt_CloseFormFillInfo(this.formInfoPtr),this.pdf.FPDF_ClosePage(this.pagePtr),this.onFinalDispose())}getTextPage(){return this.ensureAlive(),void 0===this.textPagePtr&&(this.textPagePtr=this.pdf.FPDFText_LoadPage(this.pagePtr)),this.textPagePtr}getFormHandle(){return this.ensureAlive(),void 0===this.formHandle&&(this.formInfoPtr=this.pdf.PDFiumExt_OpenFormFillInfo(),this.formHandle=this.pdf.PDFiumExt_InitFormFillEnvironment(this.docPtr,this.formInfoPtr),this.pdf.FORM_OnAfterLoadPage(this.pagePtr,this.formHandle)),this.formHandle}withAnnotation(e,t){this.ensureAlive();const n=this.pdf.FPDFPage_GetAnnot(this.pagePtr,e);try{return t(n)}finally{this.pdf.FPDFPage_CloseAnnot(n)}}ensureAlive(){if(this.disposed)throw new Error("PageContext already disposed")}}var N,U;!function(e){e[e.Bitmap_Gray=1]="Bitmap_Gray",e[e.Bitmap_BGR=2]="Bitmap_BGR",e[e.Bitmap_BGRx=3]="Bitmap_BGRx",e[e.Bitmap_BGRA=4]="Bitmap_BGRA"}(N||(N={})),function(e){e[e.ANNOT=1]="ANNOT",e[e.LCD_TEXT=2]="LCD_TEXT",e[e.NO_NATIVETEXT=4]="NO_NATIVETEXT",e[e.GRAYSCALE=8]="GRAYSCALE",e[e.DEBUG_INFO=128]="DEBUG_INFO",e[e.NO_CATCH=256]="NO_CATCH",e[e.RENDER_LIMITEDIMAGECACHE=512]="RENDER_LIMITEDIMAGECACHE",e[e.RENDER_FORCEHALFTONE=1024]="RENDER_FORCEHALFTONE",e[e.PRINTING=2048]="PRINTING",e[e.REVERSE_BYTE_ORDER=16]="REVERSE_BYTE_ORDER"}(U||(U={}));const V="PDFiumEngine",W="Engine";var z;!function(e){e[e.Success=0]="Success",e[e.Unknown=1]="Unknown",e[e.File=2]="File",e[e.Format=3]="Format",e[e.Password=4]="Password",e[e.Security=5]="Security",e[e.Page=6]="Page",e[e.XFALoad=7]="XFALoad",e[e.XFALayout=8]="XFALayout"}(z||(z={}));const H=(e,t="image/webp")=>{if("undefined"==typeof OffscreenCanvas)throw new Error("OffscreenCanvas is not available in this environment. This converter is intended for browser use only. Please use createNodeImageDataToBlobConverter() or createNodeCanvasImageDataToBlobConverter() for Node.js.");const n=new ImageData(e.data,e.width,e.height),r=new OffscreenCanvas(n.width,n.height);return r.getContext("2d").putImageData(n,0,0),r.convertToBlob({type:t})};class ${constructor(e,t=new l,n=H){this.pdfiumModule=e,this.logger=t,this.imageDataConverter=n,this.cache=new k(this.pdfiumModule)}initialize(){return this.logger.debug(V,W,"initialize"),this.logger.perf(V,W,"Initialize","Begin","General"),this.pdfiumModule.PDFiumExt_Init(),this.logger.perf(V,W,"Initialize","End","General"),y.resolve(!0)}destroy(){return this.logger.debug(V,W,"destroy"),this.logger.perf(V,W,"Destroy","Begin","General"),this.pdfiumModule.FPDF_DestroyLibrary(),this.logger.perf(V,W,"Destroy","End","General"),y.resolve(!0)}openDocumentUrl(e,t){const n=t?.mode??"auto",r=t?.password??"";this.logger.debug(V,W,"openDocumentUrl called",e.url,n);const o=y.create();return(async()=>{try{if("full-fetch"===n){(await this.fetchFullAndOpen(e,r)).wait((e=>o.resolve(e)),(e=>o.reject(e.reason)))}else if("range-request"===n){(await this.openDocumentWithRangeRequest(e,r)).wait((e=>o.resolve(e)),(e=>o.reject(e.reason)))}else{const{supportsRanges:t,fileLength:n,content:i}=await this.checkRangeSupport(e.url);if(t){(await this.openDocumentWithRangeRequest(e,r,n)).wait((e=>o.resolve(e)),(e=>o.reject(e.reason)))}else if(i){const t={id:e.id,content:i};this.openDocumentFromBuffer(t,r).wait((e=>o.resolve(e)),(e=>o.reject(e.reason)))}else{(await this.fetchFullAndOpen(e,r)).wait((e=>o.resolve(e)),(e=>o.reject(e.reason)))}}}catch(e){this.logger.error(V,W,"openDocumentUrl error",e),o.reject({code:C.Unknown,message:String(e)})}})(),o}async checkRangeSupport(e){try{this.logger.debug(V,W,"checkRangeSupport",e);const t=await fetch(e,{method:"HEAD"}),n=t.headers.get("Content-Length");if("bytes"===t.headers.get("Accept-Ranges"))return{supportsRanges:!0,fileLength:parseInt(n??"0"),content:null};const r=await fetch(e,{headers:{Range:"bytes=0-1"}});if(200===r.status){const e=await r.arrayBuffer();return{supportsRanges:!1,fileLength:parseInt(n??"0"),content:e}}return{supportsRanges:206===r.status,fileLength:parseInt(n??"0"),content:null}}catch(e){throw this.logger.error(V,W,"checkRangeSupport failed",e),new Error("Failed to check range support: "+e)}}async fetchFullAndOpen(e,t){this.logger.debug(V,W,"fetchFullAndOpen",e.url);const n=await fetch(e.url);if(!n.ok)throw new Error(`Could not fetch PDF: ${n.statusText}`);const r=await n.arrayBuffer(),o={id:e.id,content:r};return this.openDocumentFromBuffer(o,t)}async openDocumentWithRangeRequest(e,t,n){this.logger.debug(V,W,"openDocumentWithRangeRequest",e.url);const r=n??(await this.retrieveFileLength(e.url)).fileLength;return this.openDocumentFromLoader({id:e.id,fileLength:r,callback:(t,n)=>{const r=new XMLHttpRequest;if(r.open("GET",e.url,!1),r.overrideMimeType("text/plain; charset=x-user-defined"),r.setRequestHeader("Range",`bytes=${t}-${t+n-1}`),r.send(null),206===r.status||200===r.status)return this.convertResponseToUint8Array(r.responseText);throw new Error(`Range request failed with status ${r.status}`)}},t)}async retrieveFileLength(e){this.logger.debug(V,W,"retrieveFileLength",e);const t=await fetch(e,{method:"HEAD"});if(!t.ok)throw new Error(`Failed HEAD request for file length: ${t.statusText}`);const n=t.headers.get("Content-Length")||"0",r=parseInt(n,10)||0;if(!r)throw new Error("Content-Length not found or zero.");return{fileLength:r}}convertResponseToUint8Array(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=255&e.charCodeAt(n);return t}openDocumentFromBuffer(e,t=""){this.logger.debug(V,W,"openDocumentFromBuffer",e,t),this.logger.perf(V,W,"OpenDocumentFromBuffer","Begin",e.id);const n=new Uint8Array(e.content),r=n.length,o=this.malloc(r);this.pdfiumModule.pdfium.HEAPU8.set(n,o);const i=this.pdfiumModule.FPDF_LoadMemDocument(o,r,t);if(!i){const t=this.pdfiumModule.FPDF_GetLastError();return this.logger.error(V,W,`FPDF_LoadMemDocument failed with ${t}`),this.free(o),this.logger.perf(V,W,"OpenDocumentFromBuffer","End",e.id),y.reject({code:t,message:"FPDF_LoadMemDocument failed"})}const a=this.pdfiumModule.FPDF_GetPageCount(i),s=[],u=this.malloc(8);for(let t=0;t<a;t++){if(!this.pdfiumModule.FPDF_GetPageSizeByIndexF(i,t,u)){const t=this.pdfiumModule.FPDF_GetLastError();return this.logger.error(V,W,`FPDF_GetPageSizeByIndexF failed with ${t}`),this.free(u),this.pdfiumModule.FPDF_CloseDocument(i),this.free(o),this.logger.perf(V,W,"OpenDocumentFromBuffer","End",e.id),y.reject({code:t,message:"FPDF_GetPageSizeByIndexF failed"})}const n={index:t,size:{width:this.pdfiumModule.pdfium.getValue(u,"float"),height:this.pdfiumModule.pdfium.getValue(u+4,"float")}};s.push(n)}this.free(u);const F={id:e.id,pageCount:a,pages:s};return this.cache.setDocument(e.id,o,i),this.logger.perf(V,W,"OpenDocumentFromBuffer","End",e.id),y.resolve(F)}openDocumentFromLoader(e,t=""){const{fileLength:n,callback:r,...o}=e;this.logger.debug(V,W,"openDocumentFromLoader",o,t),this.logger.perf(V,W,"OpenDocumentFromLoader","Begin",o.id);const i=this.pdfiumModule.pdfium.addFunction(((e,t,o,i)=>{try{if(this.logger.debug(V,W,"readBlock",t,i,o),t<0||t>=n)return this.logger.error(V,W,"Offset out of bounds:",t),0;const e=r(t,i);return new Uint8Array(this.pdfiumModule.pdfium.HEAPU8.buffer,o,e.length).set(e),e.length}catch(e){return this.logger.error(V,W,"ReadBlock error:",e),0}}),"iiiii"),a=this.malloc(12);this.pdfiumModule.pdfium.setValue(a,n,"i32"),this.pdfiumModule.pdfium.setValue(a+4,i,"i32"),this.pdfiumModule.pdfium.setValue(a+8,0,"i32");const s=this.pdfiumModule.FPDF_LoadCustomDocument(a,t);if(!s){const e=this.pdfiumModule.FPDF_GetLastError();return this.logger.error(V,W,`FPDF_LoadCustomDocument failed with ${e}`),this.free(a),this.logger.perf(V,W,"OpenDocumentFromLoader","End",o.id),y.reject({code:e,message:"FPDF_LoadCustomDocument failed"})}const u=this.pdfiumModule.FPDF_GetPageCount(s),F=[],l=this.malloc(8);for(let e=0;e<u;e++){if(!this.pdfiumModule.FPDF_GetPageSizeByIndexF(s,e,l)){const e=this.pdfiumModule.FPDF_GetLastError();return this.logger.error(V,W,`FPDF_GetPageSizeByIndexF failed with ${e}`),this.free(l),this.pdfiumModule.FPDF_CloseDocument(s),this.free(a),this.logger.perf(V,W,"OpenDocumentFromLoader","End",o.id),y.reject({code:e,message:"FPDF_GetPageSizeByIndexF failed"})}const t={index:e,size:{width:this.pdfiumModule.pdfium.getValue(l,"float"),height:this.pdfiumModule.pdfium.getValue(l+4,"float")}};F.push(t)}this.free(l);const m={id:o.id,pageCount:u,pages:F};return this.cache.setDocument(o.id,a,s),this.logger.perf(V,W,"OpenDocumentFromLoader","End",o.id),y.resolve(m)}getMetadata(e){this.logger.debug(V,W,"getMetadata",e),this.logger.perf(V,W,"GetMetadata","Begin",e.id);const t=this.cache.getContext(e.id);if(!t)return this.logger.perf(V,W,"GetMetadata","End",e.id),y.reject({code:C.DocNotOpen,message:"document does not open"});const n={title:this.readMetaText(t.docPtr,"Title"),author:this.readMetaText(t.docPtr,"Author"),subject:this.readMetaText(t.docPtr,"Subject"),keywords:this.readMetaText(t.docPtr,"Keywords"),producer:this.readMetaText(t.docPtr,"Producer"),creator:this.readMetaText(t.docPtr,"Creator"),creationDate:this.readMetaText(t.docPtr,"CreationDate"),modificationDate:this.readMetaText(t.docPtr,"ModDate")};return this.logger.perf(V,W,"GetMetadata","End",e.id),y.resolve(n)}getDocPermissions(e){this.logger.debug(V,W,"getDocPermissions",e),this.logger.perf(V,W,"getDocPermissions","Begin",e.id);const t=this.cache.getContext(e.id);if(!t)return this.logger.perf(V,W,"getDocPermissions","End",e.id),y.reject({code:C.DocNotOpen,message:"document does not open"});const n=this.pdfiumModule.FPDF_GetDocPermissions(t.docPtr);return y.resolve(n)}getDocUserPermissions(e){this.logger.debug(V,W,"getDocUserPermissions",e),this.logger.perf(V,W,"getDocUserPermissions","Begin",e.id);const t=this.cache.getContext(e.id);if(!t)return this.logger.perf(V,W,"getDocUserPermissions","End",e.id),y.reject({code:C.DocNotOpen,message:"document does not open"});const n=this.pdfiumModule.FPDF_GetDocUserPermissions(t.docPtr);return y.resolve(n)}getSignatures(e){this.logger.debug(V,W,"getSignatures",e),this.logger.perf(V,W,"GetSignatures","Begin",e.id);const t=this.cache.getContext(e.id);if(!t)return this.logger.perf(V,W,"GetSignatures","End",e.id),y.reject({code:C.DocNotOpen,message:"document does not open"});const n=[],r=this.pdfiumModule.FPDF_GetSignatureCount(t.docPtr);for(let e=0;e<r;e++){const r=this.pdfiumModule.FPDF_GetSignatureObject(t.docPtr,e),o=I(this.pdfiumModule.pdfium,((e,t)=>this.pdfiumModule.FPDFSignatureObj_GetContents(r,e,t))),i=I(this.pdfiumModule.pdfium,((e,t)=>4*this.pdfiumModule.FPDFSignatureObj_GetByteRange(r,e,t))),a=I(this.pdfiumModule.pdfium,((e,t)=>this.pdfiumModule.FPDFSignatureObj_GetSubFilter(r,e,t))),s=R(this.pdfiumModule.pdfium,((e,t)=>this.pdfiumModule.FPDFSignatureObj_GetReason(r,e,t)),this.pdfiumModule.pdfium.UTF16ToString),u=R(this.pdfiumModule.pdfium,((e,t)=>this.pdfiumModule.FPDFSignatureObj_GetTime(r,e,t)),this.pdfiumModule.pdfium.UTF8ToString),F=this.pdfiumModule.FPDFSignatureObj_GetDocMDPPermission(r);n.push({contents:o,byteRange:i,subFilter:a,reason:s,time:u,docMDP:F})}return this.logger.perf(V,W,"GetSignatures","End",e.id),y.resolve(n)}getBookmarks(e){this.logger.debug(V,W,"getBookmarks",e),this.logger.perf(V,W,"GetBookmarks","Begin",e.id);const t=this.cache.getContext(e.id);if(!t)return this.logger.perf(V,W,"getBookmarks","End",e.id),y.reject({code:C.DocNotOpen,message:"document does not open"});const n=this.readPdfBookmarks(t.docPtr,0);return this.logger.perf(V,W,"GetBookmarks","End",e.id),y.resolve({bookmarks:n})}renderPage(e,t,n=1,r=o.Degree0,i=1,a={withAnnotations:!1},s="image/webp"){const u=new _;this.logger.debug(V,W,"renderPage",e,t,n,r,i,a),this.logger.perf(V,W,"RenderPage","Begin",`${e.id}-${t.index}`);const F=this.cache.getContext(e.id);if(!F)return this.logger.perf(V,W,"RenderPage","End",`${e.id}-${t.index}`),y.reject({code:C.DocNotOpen,message:"document does not open"});const l=this.renderPageRectToImageData(F,t,{origin:{x:0,y:0},size:t.size},n,r,i,a);return this.logger.perf(V,W,"RenderPage","End",`${e.id}-${t.index}`),this.imageDataConverter(l,s).then((e=>u.resolve(e))),u}renderPageRect(e,t,n,r,o,i,a,s="image/webp"){const u=new _;this.logger.debug(V,W,"renderPageRect",e,t,n,r,o,i,a),this.logger.perf(V,W,"RenderPageRect","Begin",`${e.id}-${t.index}`);const F=this.cache.getContext(e.id);if(!F)return this.logger.perf(V,W,"RenderPageRect","End",`${e.id}-${t.index}`),y.reject({code:C.DocNotOpen,message:"document does not open"});const l=this.renderPageRectToImageData(F,t,i,n,r,o,a);return this.logger.perf(V,W,"RenderPageRect","End",`${e.id}-${t.index}`),this.imageDataConverter(l,s).then((e=>u.resolve(e))),u}getAllAnnotations(e){this.logger.debug(V,W,"getAllAnnotations",e),this.logger.perf(V,W,"GetAllAnnotations","Begin",e.id);const t=this.cache.getContext(e.id);if(!t)return this.logger.perf(V,W,"GetAllAnnotations","End",e.id),y.reject({code:C.DocNotOpen,message:"document does not open"});const n=this.readAllAnnotations(e,t);return this.logger.perf(V,W,"GetAllAnnotations","End",e.id),y.resolve(n)}readAllAnnotations(e,t){const n={};for(let r=0;r<e.pageCount;r++){const o=this.readPageAnnotations(t,e.pages[r]);n[r]=o}return n}getPageAnnotations(e,t){this.logger.debug(V,W,"getPageAnnotations",e,t),this.logger.perf(V,W,"GetPageAnnotations","Begin",`${e.id}-${t.index}`);const n=this.cache.getContext(e.id);if(!n)return this.logger.perf(V,W,"GetPageAnnotations","End",`${e.id}-${t.index}`),y.reject({code:C.DocNotOpen,message:"document does not open"});const r=this.readPageAnnotations(n,t);return this.logger.perf(V,W,"GetPageAnnotations","End",`${e.id}-${t.index}`),this.logger.debug(V,W,"GetPageAnnotations",`${e.id}-${t.index}`,r),y.resolve(r)}createPageAnnotation(e,t,n){this.logger.debug(V,W,"createPageAnnotation",e,t,n),this.logger.perf(V,W,"CreatePageAnnotation","Begin",`${e.id}-${t.index}`);const r=this.cache.getContext(e.id);if(!r)return this.logger.perf(V,W,"CreatePageAnnotation","End",`${e.id}-${t.index}`),y.reject({code:C.DocNotOpen,message:"document does not open"});const o=r.acquirePage(t.index),i=this.pdfiumModule.FPDFPage_CreateAnnot(o.pagePtr,n.type);if(!i)return this.logger.perf(V,W,"CreatePageAnnotation","End",`${e.id}-${t.index}`),o.release(),y.reject({code:C.CantCreateAnnot,message:"can not create annotation with specified type"});if(!this.setPageAnnoRect(t,o.pagePtr,i,n.rect))return this.pdfiumModule.FPDFPage_CloseAnnot(i),o.release(),this.logger.perf(V,W,"CreatePageAnnotation","End",`${e.id}-${t.index}`),y.reject({code:C.CantSetAnnotRect,message:"can not set the rect of the annotation"});let a=!1;switch(n.type){case b.INK:a=this.addInkStroke(t,o.pagePtr,i,n);break;case b.STAMP:a=this.addStampContent(r.docPtr,t,o.pagePtr,i,n.rect,n.contents);break;case b.UNDERLINE:case b.STRIKEOUT:case b.SQUIGGLY:case b.HIGHLIGHT:a=this.addTextMarkupContent(t,o.pagePtr,i,n)}if(!a)return this.pdfiumModule.FPDFPage_RemoveAnnot(o.pagePtr,i),o.release(),this.logger.perf(V,W,"CreatePageAnnotation","End",`${e.id}-${t.index}`),y.reject({code:C.CantSetAnnotContent,message:"can not add content of the annotation"});void 0!==n.blendMode?this.pdfiumModule.EPDFAnnot_GenerateAppearanceWithBlend(i,n.blendMode):this.pdfiumModule.EPDFAnnot_GenerateAppearance(i),this.pdfiumModule.FPDFPage_GenerateContent(o.pagePtr);const s=this.pdfiumModule.FPDFPage_GetAnnotIndex(o.pagePtr,i);return this.pdfiumModule.FPDFPage_CloseAnnot(i),o.release(),this.logger.perf(V,W,"CreatePageAnnotation","End",`${e.id}-${t.index}`),s>=0?y.resolve(s):y.reject({code:C.CantCreateAnnot,message:"annotation created but index could not be determined"})}updatePageAnnotation(e,t,n){this.logger.debug(V,W,"updatePageAnnotation",e,t,n),this.logger.perf(V,W,"UpdatePageAnnotation","Begin",`${e.id}-${t.index}`);const r=this.cache.getContext(e.id);if(!r)return this.logger.perf(V,W,"UpdatePageAnnotation","End",`${e.id}-${t.index}`),y.reject({code:C.DocNotOpen,message:"document does not open"});const o=r.acquirePage(t.index),i=this.pdfiumModule.FPDFPage_GetAnnot(o.pagePtr,n.id);if(!i)return o.release(),this.logger.perf(V,W,"UpdatePageAnnotation","End",`${e.id}-${t.index}`),y.reject({code:C.NotFound,message:"annotation not found"});if(!this.setPageAnnoRect(t,o.pagePtr,i,n.rect))return this.pdfiumModule.FPDFPage_CloseAnnot(i),o.release(),this.logger.perf(V,W,"UpdatePageAnnotation","End",`${e.id}-${t.index}`),y.reject({code:C.CantSetAnnotRect,message:"failed to move annotation"});let a=!1;switch(n.type){case b.INK:if(!this.pdfiumModule.FPDFAnnot_RemoveInkList(i))break;a=this.addInkStroke(t,o.pagePtr,i,n);break;case b.STAMP:for(let e=this.pdfiumModule.FPDFAnnot_GetObjectCount(i)-1;e>=0;e--)this.pdfiumModule.FPDFAnnot_RemoveObject(i,e);a=this.addStampContent(r.docPtr,t,o.pagePtr,i,n.rect,n.contents);break;case b.HIGHLIGHT:case b.UNDERLINE:case b.STRIKEOUT:case b.SQUIGGLY:a=this.addTextMarkupContent(t,o.pagePtr,i,n);break;default:a=!1}return a&&(void 0!==n.blendMode?this.pdfiumModule.EPDFAnnot_GenerateAppearanceWithBlend(i,n.blendMode):this.pdfiumModule.EPDFAnnot_GenerateAppearance(i),this.pdfiumModule.FPDFPage_GenerateContent(o.pagePtr)),this.pdfiumModule.FPDFPage_CloseAnnot(i),o.release(),this.logger.perf(V,W,"UpdatePageAnnotation","End",`${e.id}-${t.index}`),a?y.resolve(!0):y.reject({code:C.CantSetAnnotContent,message:"failed to update annotation"})}removePageAnnotation(e,t,n){this.logger.debug(V,W,"removePageAnnotation",e,t,n),this.logger.perf(V,W,"RemovePageAnnotation","Begin",`${e.id}-${t.index}`);const r=this.cache.getContext(e.id);if(!r)return this.logger.perf(V,W,"RemovePageAnnotation","End",`${e.id}-${t.index}`),y.reject({code:C.DocNotOpen,message:"document does not open"});const o=r.acquirePage(t.index);let i=!1;return i=this.pdfiumModule.FPDFPage_RemoveAnnot(o.pagePtr,n.id),i?(i=this.pdfiumModule.FPDFPage_GenerateContent(o.pagePtr),i||this.logger.error(V,W,"FPDFPage_GenerateContent Failed",`${e.id}-${t.index}`)):this.logger.error(V,W,"FPDFPage_RemoveAnnot Failed",`${e.id}-${t.index}`),o.release(),this.logger.perf(V,W,"RemovePageAnnotation","End",`${e.id}-${t.index}`),y.resolve(i)}getPageTextRects(e,t,n,r){this.logger.debug(V,W,"getPageTextRects",e,t,n,r),this.logger.perf(V,W,"GetPageTextRects","Begin",`${e.id}-${t.index}`);const o=this.cache.getContext(e.id);if(!o)return this.logger.perf(V,W,"GetPageTextRects","End",`${e.id}-${t.index}`),y.reject({code:C.DocNotOpen,message:"document does not open"});const i=o.acquirePage(t.index),a=this.pdfiumModule.FPDFText_LoadPage(i.pagePtr),s=this.readPageTextRects(t,i.docPtr,i.pagePtr,a);return this.pdfiumModule.FPDFText_ClosePage(a),i.release(),this.logger.perf(V,W,"GetPageTextRects","End",`${e.id}-${t.index}`),y.resolve(s)}renderThumbnail(e,t,n,r,o){this.logger.debug(V,W,"renderThumbnail",e,t,n,r,o),this.logger.perf(V,W,"RenderThumbnail","Begin",`${e.id}-${t.index}`);if(!this.cache.getContext(e.id))return this.logger.perf(V,W,"RenderThumbnail","End",`${e.id}-${t.index}`),y.reject({code:C.DocNotOpen,message:"document does not open"});n=Math.max(n,.5);const i=this.renderPage(e,t,n,r,o,{withAnnotations:!0});return this.logger.perf(V,W,"RenderThumbnail","End",`${e.id}-${t.index}`),i}getAttachments(e){this.logger.debug(V,W,"getAttachments",e),this.logger.perf(V,W,"GetAttachments","Begin",e.id);const t=this.cache.getContext(e.id);if(!t)return this.logger.perf(V,W,"GetAttachments","End",e.id),y.reject({code:C.DocNotOpen,message:"document does not open"});const n=[],r=this.pdfiumModule.FPDFDoc_GetAttachmentCount(t.docPtr);for(let e=0;e<r;e++){const r=this.readPdfAttachment(t.docPtr,e);n.push(r)}return this.logger.perf(V,W,"GetAttachments","End",e.id),y.resolve(n)}readAttachmentContent(e,t){this.logger.debug(V,W,"readAttachmentContent",e,t),this.logger.perf(V,W,"ReadAttachmentContent","Begin",e.id);const n=this.cache.getContext(e.id);if(!n)return this.logger.perf(V,W,"ReadAttachmentContent","End",e.id),y.reject({code:C.DocNotOpen,message:"document does not open"});const r=this.pdfiumModule.FPDFDoc_GetAttachment(n.docPtr,t.index),o=this.malloc(8);if(!this.pdfiumModule.FPDFAttachment_GetFile(r,0,0,o))return this.free(o),this.logger.perf(V,W,"ReadAttachmentContent","End",e.id),y.reject({code:C.CantReadAttachmentSize,message:"can not read attachment size"});const i=this.pdfiumModule.pdfium.getValue(o,"i64"),a=this.malloc(i);if(!this.pdfiumModule.FPDFAttachment_GetFile(r,a,i,o))return this.free(o),this.free(a),this.logger.perf(V,W,"ReadAttachmentContent","End",e.id),y.reject({code:C.CantReadAttachmentContent,message:"can not read attachment content"});const s=new ArrayBuffer(i),u=new DataView(s);for(let e=0;e<i;e++)u.setInt8(e,this.pdfiumModule.pdfium.getValue(a+e,"i8"));return this.free(o),this.free(a),this.logger.perf(V,W,"ReadAttachmentContent","End",e.id),y.resolve(s)}setFormFieldValue(e,t,n,r){this.logger.debug(V,W,"SetFormFieldValue",e,n,r),this.logger.perf(V,W,"SetFormFieldValue","Begin",`${e.id}-${n.id}`);const o=this.cache.getContext(e.id);if(!o)return this.logger.debug(V,W,"SetFormFieldValue","document is not opened"),this.logger.perf(V,W,"SetFormFieldValue","End",`${e.id}-${n.id}`),y.reject({code:C.DocNotOpen,message:"document does not open"});const i=this.pdfiumModule.PDFiumExt_OpenFormFillInfo(),a=this.pdfiumModule.PDFiumExt_InitFormFillEnvironment(o.docPtr,i),s=o.acquirePage(t.index);this.pdfiumModule.FORM_OnAfterLoadPage(s.pagePtr,a);const u=this.pdfiumModule.FPDFPage_GetAnnot(s.pagePtr,n.id);if(!this.pdfiumModule.FORM_SetFocusedAnnot(a,u))return this.logger.debug(V,W,"SetFormFieldValue","failed to set focused annotation"),this.logger.perf(V,W,"SetFormFieldValue","End",`${e.id}-${n.id}`),this.pdfiumModule.FPDFPage_CloseAnnot(u),this.pdfiumModule.FORM_OnBeforeClosePage(s.pagePtr,a),s.release(),this.pdfiumModule.PDFiumExt_ExitFormFillEnvironment(a),this.pdfiumModule.PDFiumExt_CloseFormFillInfo(i),y.reject({code:C.CantFocusAnnot,message:"failed to set focused annotation"});switch(r.kind){case"text":{if(!this.pdfiumModule.FORM_SelectAllText(a,s.pagePtr))return this.logger.debug(V,W,"SetFormFieldValue","failed to select all text"),this.logger.perf(V,W,"SetFormFieldValue","End",`${e.id}-${n.id}`),this.pdfiumModule.FORM_ForceToKillFocus(a),this.pdfiumModule.FPDFPage_CloseAnnot(u),this.pdfiumModule.FORM_OnBeforeClosePage(s.pagePtr,a),s.release(),this.pdfiumModule.PDFiumExt_ExitFormFillEnvironment(a),this.pdfiumModule.PDFiumExt_CloseFormFillInfo(i),y.reject({code:C.CantSelectText,message:"failed to select all text"});const t=2*(r.text.length+1),o=this.malloc(t);this.pdfiumModule.pdfium.stringToUTF16(r.text,o,t),this.pdfiumModule.FORM_ReplaceSelection(a,s.pagePtr,o),this.free(o)}break;case"selection":if(!this.pdfiumModule.FORM_SetIndexSelected(a,s.pagePtr,r.index,r.isSelected))return this.logger.debug(V,W,"SetFormFieldValue","failed to set index selected"),this.logger.perf(V,W,"SetFormFieldValue","End",`${e.id}-${n.id}`),this.pdfiumModule.FORM_ForceToKillFocus(a),this.pdfiumModule.FPDFPage_CloseAnnot(u),this.pdfiumModule.FORM_OnBeforeClosePage(s.pagePtr,a),s.release(),this.pdfiumModule.PDFiumExt_ExitFormFillEnvironment(a),this.pdfiumModule.PDFiumExt_CloseFormFillInfo(i),y.reject({code:C.CantSelectOption,message:"failed to set index selected"});break;case"checked":{const t=13;if(!this.pdfiumModule.FORM_OnChar(a,s.pagePtr,t,0))return this.logger.debug(V,W,"SetFormFieldValue","failed to set field checked"),this.logger.perf(V,W,"SetFormFieldValue","End",`${e.id}-${n.id}`),this.pdfiumModule.FORM_ForceToKillFocus(a),this.pdfiumModule.FPDFPage_CloseAnnot(u),this.pdfiumModule.FORM_OnBeforeClosePage(s.pagePtr,a),s.release(),this.pdfiumModule.PDFiumExt_ExitFormFillEnvironment(a),this.pdfiumModule.PDFiumExt_CloseFormFillInfo(i),y.reject({code:C.CantCheckField,message:"failed to set field checked"})}}return this.pdfiumModule.FORM_ForceToKillFocus(a),this.pdfiumModule.FPDFPage_CloseAnnot(u),this.pdfiumModule.FORM_OnBeforeClosePage(s.pagePtr,a),s.release(),this.pdfiumModule.PDFiumExt_ExitFormFillEnvironment(a),this.pdfiumModule.PDFiumExt_CloseFormFillInfo(i),y.resolve(!0)}flattenPage(e,t,n){this.logger.debug(V,W,"flattenPage",e,t,n),this.logger.perf(V,W,"flattenPage","Begin",e.id);const r=this.cache.getContext(e.id);if(!r)return this.logger.perf(V,W,"flattenPage","End",e.id),y.reject({code:C.DocNotOpen,message:"document does not open"});const o=r.acquirePage(t.index),i=this.pdfiumModule.FPDFPage_Flatten(o.pagePtr,n);return o.release(),this.logger.perf(V,W,"flattenPage","End",e.id),y.resolve(i)}extractPages(e,t){this.logger.debug(V,W,"extractPages",e,t),this.logger.perf(V,W,"ExtractPages","Begin",e.id);const n=this.cache.getContext(e.id);if(!n)return this.logger.perf(V,W,"ExtractPages","End",e.id),y.reject({code:C.DocNotOpen,message:"document does not open"});const r=this.pdfiumModule.FPDF_CreateNewDocument();if(!r)return this.logger.perf(V,W,"ExtractPages","End",e.id),y.reject({code:C.CantCreateNewDoc,message:"can not create new document"});const o=this.malloc(4*t.length);for(let e=0;e<t.length;e++)this.pdfiumModule.pdfium.setValue(o+4*e,t[e],"i32");if(!this.pdfiumModule.FPDF_ImportPagesByIndex(r,n.docPtr,o,t.length,0))return this.pdfiumModule.FPDF_CloseDocument(r),this.logger.perf(V,W,"ExtractPages","End",e.id),y.reject({code:C.CantImportPages,message:"can not import pages to new document"});const i=this.saveDocument(r);return this.pdfiumModule.FPDF_CloseDocument(r),this.logger.perf(V,W,"ExtractPages","End",e.id),y.resolve(i)}extractText(e,t){this.logger.debug(V,W,"extractText",e,t),this.logger.perf(V,W,"ExtractText","Begin",e.id);const n=this.cache.getContext(e.id);if(!n)return this.logger.perf(V,W,"ExtractText","End",e.id),y.reject({code:C.DocNotOpen,message:"document does not open"});const r=[];for(let e=0;e<t.length;e++){const o=n.acquirePage(t[e]),i=this.pdfiumModule.FPDFText_LoadPage(o.pagePtr),a=this.pdfiumModule.FPDFText_CountChars(i),s=this.malloc(2*(a+1));this.pdfiumModule.FPDFText_GetText(i,0,a,s);const u=this.pdfiumModule.pdfium.UTF16ToString(s);this.free(s),r.push(u),this.pdfiumModule.FPDFText_ClosePage(i),o.release()}const o=r.join("\\n\\n");return this.logger.perf(V,W,"ExtractText","End",e.id),y.resolve(o)}getTextSlices(e,t){if(this.logger.debug(V,W,"getTextSlices",e,t),this.logger.perf(V,W,"GetTextSlices","Begin",e.id),0===t.length)return this.logger.perf(V,W,"GetTextSlices","End",e.id),y.resolve([]);const n=this.cache.getContext(e.id);if(!n)return this.logger.perf(V,W,"GetTextSlices","End",e.id),y.reject({code:C.DocNotOpen,message:"document does not open"});try{const r=new Array(t.length),o=new Map;t.forEach(((e,t)=>{(o.get(e.pageIndex)??o.set(e.pageIndex,[]).get(e.pageIndex)).push({slice:e,pos:t})}));for(const[e,t]of o){const o=n.acquirePage(e),i=o.getTextPage();for(const{slice:e,pos:n}of t){const t=this.malloc(2*(e.charCount+1));this.pdfiumModule.FPDFText_GetText(i,e.charIndex,e.charCount,t),r[n]=this.pdfiumModule.pdfium.UTF16ToString(t).replace(c,""),this.free(t)}o.release()}return this.logger.perf(V,W,"GetTextSlices","End",e.id),y.resolve(r)}catch(t){return this.logger.error(V,W,"getTextSlices error",t),this.logger.perf(V,W,"GetTextSlices","End",e.id),y.reject({code:C.Unknown,message:String(t)})}}merge(e){this.logger.debug(V,W,"merge",e);const t=e.map((e=>e.id)).join(".");this.logger.perf(V,W,"Merge","Begin",t);const n=this.pdfiumModule.FPDF_CreateNewDocument();if(!n)return this.logger.perf(V,W,"Merge","End",t),y.reject({code:C.CantCreateNewDoc,message:"can not create new document"});const r=[];for(const o of e.reverse()){const e=new Uint8Array(o.content),i=e.length,a=this.malloc(i);this.pdfiumModule.pdfium.HEAPU8.set(e,a);const s=this.pdfiumModule.FPDF_LoadMemDocument(a,i,"");if(!s){const e=this.pdfiumModule.FPDF_GetLastError();this.logger.error(V,W,`FPDF_LoadMemDocument failed with ${e}`),this.free(a);for(const e of r)this.pdfiumModule.FPDF_CloseDocument(e.docPtr),this.free(e.filePtr);return this.logger.perf(V,W,"Merge","End",t),y.reject({code:e,message:"FPDF_LoadMemDocument failed"})}if(r.push({filePtr:a,docPtr:s}),!this.pdfiumModule.FPDF_ImportPages(n,s,"",0)){this.pdfiumModule.FPDF_CloseDocument(n);for(const e of r)this.pdfiumModule.FPDF_CloseDocument(e.docPtr),this.free(e.filePtr);return this.logger.perf(V,W,"Merge","End",t),y.reject({code:C.CantImportPages,message:"can not import pages to new document"})}}const o=this.saveDocument(n);this.pdfiumModule.FPDF_CloseDocument(n);for(const e of r)this.pdfiumModule.FPDF_CloseDocument(e.docPtr),this.free(e.filePtr);const i={id:`${Math.random()}`,content:o};return this.logger.perf(V,W,"Merge","End",t),y.resolve(i)}mergePages(e){const t=e.map((e=>`${e.docId}:${e.pageIndices.join(",")}`)).join("|");this.logger.debug(V,W,"mergePages",e),this.logger.perf(V,W,"MergePages","Begin",t);const n=this.pdfiumModule.FPDF_CreateNewDocument();if(!n)return this.logger.perf(V,W,"MergePages","End",t),y.reject({code:C.CantCreateNewDoc,message:"Cannot create new document"});try{for(const t of[...e].reverse()){const e=this.cache.getContext(t.docId);if(!e){this.logger.warn(V,W,`Document ${t.docId} is not open, skipping`);continue}const r=this.pdfiumModule.FPDF_GetPageCount(e.docPtr),o=t.pageIndices.filter((e=>e>=0&&e<r));if(0===o.length)continue;const i=o.map((e=>e+1)).join(",");try{if(!this.pdfiumModule.FPDF_ImportPages(n,e.docPtr,i,0))throw new Error(`Failed to import pages ${i} from document ${t.docId}`)}finally{}}const r=this.saveDocument(n),o={id:`${Math.random()}`,content:r};return this.logger.perf(V,W,"MergePages","End",t),y.resolve(o)}catch(e){return this.logger.error(V,W,"mergePages failed",e),this.logger.perf(V,W,"MergePages","End",t),y.reject({code:C.CantImportPages,message:e instanceof Error?e.message:"Failed to merge pages"})}finally{n&&this.pdfiumModule.FPDF_CloseDocument(n)}}saveAsCopy(e){this.logger.debug(V,W,"saveAsCopy",e),this.logger.perf(V,W,"SaveAsCopy","Begin",e.id);const t=this.cache.getContext(e.id);if(!t)return this.logger.perf(V,W,"SaveAsCopy","End",e.id),y.reject({code:C.DocNotOpen,message:"document does not open"});const n=this.saveDocument(t.docPtr);return this.logger.perf(V,W,"SaveAsCopy","End",e.id),y.resolve(n)}closeDocument(e){this.logger.debug(V,W,"closeDocument",e),this.logger.perf(V,W,"CloseDocument","Begin",e.id);const t=this.cache.getContext(e.id);return t?(t.dispose(),this.logger.perf(V,W,"CloseDocument","End",e.id),y.resolve(!0)):(this.logger.perf(V,W,"CloseDocument","End",e.id),y.reject({code:C.DocNotOpen,message:"document does not open"}))}malloc(e){const t=this.pdfiumModule.pdfium.wasmExports.malloc(e);for(let n=0;n<e;n++)this.pdfiumModule.pdfium.HEAP8[t+n]=0;return t}free(e){this.pdfiumModule.pdfium.wasmExports.free(e)}addInkStroke(e,t,n,r){return!!this.setBorderStyle(n,E.SOLID,r.strokeWidth)&&(!!this.setPageAnnoRect(e,t,n,r.rect)&&(!!this.setInkList(e,n,r.inkList)&&(!!this.setAnnotString(n,"T",r.author||"")&&(!!this.setAnnotString(n,"M",O(r.modified))&&!!this.setAnnotationColor(n,{color:r.color??"#FFFF00",opacity:r.opacity??1},A.Color)))))}addTextMarkupContent(e,t,n,r){return!!this.setPageAnnoRect(e,t,n,r.rect)&&(!!this.syncQuadPointsAnno(e,n,r.segmentRects)&&(!!this.setAnnotString(n,"Contents",r.contents??"")&&(!!this.setAnnotString(n,"T",r.author||"")&&(!!this.setAnnotString(n,"M",O(r.modified))&&!!this.setAnnotationColor(n,{color:r.color??"#FFFF00",opacity:r.opacity??1},A.Color)))))}addStampContent(e,t,n,r,o,i){for(const a of i)if(a.type===G.IMAGE)return this.addImageObject(e,t,n,r,o.origin,a.imageData);return!1}addImageObject(e,t,n,r,o,i){const a=i.width*i.height,s=this.malloc(4*a);if(!s)return!1;for(let e=0;e<a;e++){const t=i.data[4*e],n=i.data[4*e+1],r=i.data[4*e+2],o=i.data[4*e+3];this.pdfiumModule.pdfium.setValue(s+4*e,r,"i8"),this.pdfiumModule.pdfium.setValue(s+4*e+1,n,"i8"),this.pdfiumModule.pdfium.setValue(s+4*e+2,t,"i8"),this.pdfiumModule.pdfium.setValue(s+4*e+3,o,"i8")}const u=N.Bitmap_BGRA,F=this.pdfiumModule.FPDFBitmap_CreateEx(i.width,i.height,u,s,0);if(!F)return this.free(s),!1;const l=this.pdfiumModule.FPDFPageObj_NewImageObj(e);if(!l)return this.pdfiumModule.FPDFBitmap_Destroy(F),this.free(s),!1;if(!this.pdfiumModule.FPDFImageObj_SetBitmap(n,0,l,F))return this.pdfiumModule.FPDFBitmap_Destroy(F),this.pdfiumModule.FPDFPageObj_Destroy(l),this.free(s),!1;const m=this.malloc(24);return this.pdfiumModule.pdfium.setValue(m,i.width,"float"),this.pdfiumModule.pdfium.setValue(m+4,0,"float"),this.pdfiumModule.pdfium.setValue(m+8,0,"float"),this.pdfiumModule.pdfium.setValue(m+12,i.height,"float"),this.pdfiumModule.pdfium.setValue(m+16,0,"float"),this.pdfiumModule.pdfium.setValue(m+20,0,"float"),this.pdfiumModule.FPDFPageObj_SetMatrix(l,m)?(this.free(m),this.pdfiumModule.FPDFPageObj_Transform(l,1,0,0,1,o.x,o.y),this.pdfiumModule.FPDFAnnot_AppendObject(r,l)?(this.pdfiumModule.FPDFPage_GenerateContent(n),this.pdfiumModule.FPDFBitmap_Destroy(F),this.free(s),!0):(this.pdfiumModule.FPDFBitmap_Destroy(F),this.pdfiumModule.FPDFPageObj_Destroy(l),this.free(s),!1)):(this.free(m),this.pdfiumModule.FPDFBitmap_Destroy(F),this.pdfiumModule.FPDFPageObj_Destroy(l),this.free(s),!1)}saveDocument(e){const t=this.pdfiumModule.PDFiumExt_OpenFileWriter();this.pdfiumModule.PDFiumExt_SaveAsCopy(e,t);const n=this.pdfiumModule.PDFiumExt_GetFileWriterSize(t),r=this.malloc(n);this.pdfiumModule.PDFiumExt_GetFileWriterData(t,r,n);const o=new ArrayBuffer(n),i=new DataView(o);for(let e=0;e<n;e++)i.setInt8(e,this.pdfiumModule.pdfium.getValue(r+e,"i8"));return this.free(r),this.pdfiumModule.PDFiumExt_CloseFileWriter(t),o}readMetaText(e,t){return R(this.pdfiumModule.pdfium,((n,r)=>this.pdfiumModule.FPDF_GetMetaText(e,t,n,r)),this.pdfiumModule.pdfium.UTF16ToString)}readPdfBookmarks(e,t=0){let n=this.pdfiumModule.FPDFBookmark_GetFirstChild(e,t);const r=[];for(;n;){const t=this.readPdfBookmark(e,n);r.push(t);n=this.pdfiumModule.FPDFBookmark_GetNextSibling(e,n)}return r}readPdfBookmark(e,t){const n=R(this.pdfiumModule.pdfium,((e,n)=>this.pdfiumModule.FPDFBookmark_GetTitle(t,e,n)),this.pdfiumModule.pdfium.UTF16ToString),r=this.readPdfBookmarks(e,t);return{title:n,target:this.readPdfBookmarkTarget(e,(()=>this.pdfiumModule.FPDFBookmark_GetAction(t)),(()=>this.pdfiumModule.FPDFBookmark_GetDest(e,t))),children:r}}readPageTextRects(e,t,n,r){const o=this.pdfiumModule.FPDFText_CountRects(r,0,-1),i=[];for(let t=0;t<o;t++){const o=this.malloc(8),a=this.malloc(8),s=this.malloc(8),u=this.malloc(8);if(!this.pdfiumModule.FPDFText_GetRect(r,t,a,o,s,u)){this.free(a),this.free(o),this.free(s),this.free(u);continue}const F=this.pdfiumModule.pdfium.getValue(a,"double"),l=this.pdfiumModule.pdfium.getValue(o,"double"),m=this.pdfiumModule.pdfium.getValue(s,"double"),d=this.pdfiumModule.pdfium.getValue(u,"double");this.free(a),this.free(o),this.free(s),this.free(u);const _=this.malloc(4),P=this.malloc(4);this.pdfiumModule.FPDF_PageToDevice(n,0,0,e.size.width,e.size.height,0,F,l,_,P);const c=this.pdfiumModule.pdfium.getValue(_,"i32"),h=this.pdfiumModule.pdfium.getValue(P,"i32");this.free(_),this.free(P);const g={origin:{x:c,y:h},size:{width:Math.ceil(Math.abs(m-F)),height:Math.ceil(Math.abs(l-d))}},D=this.pdfiumModule.FPDFText_GetBoundedText(r,F,l,m,d,0,0),b=2*(D+1),p=this.malloc(b);this.pdfiumModule.FPDFText_GetBoundedText(r,F,l,m,d,p,D);const f=this.pdfiumModule.pdfium.UTF16ToString(p);this.free(p);const A=this.pdfiumModule.FPDFText_GetCharIndexAtPos(r,F,l,2,2);let E="",G=g.size.height;if(A>=0){G=this.pdfiumModule.FPDFText_GetFontSize(r,A);const e=this.pdfiumModule.FPDFText_GetFontInfo(r,A,0,0,0)+1,t=this.malloc(e),n=this.malloc(4);this.pdfiumModule.FPDFText_GetFontInfo(r,A,t,e,n),E=this.pdfiumModule.pdfium.UTF8ToString(t),this.free(t),this.free(n)}const S={content:f,rect:g,font:{family:E,size:G}};i.push(S)}return i}getPageGeometry(e,t){const n="getPageGeometry";this.logger.perf(V,W,n,"Begin",e.id);const r=this.cache.getContext(e.id);if(!r)return this.logger.perf(V,W,n,"End",e.id),y.reject({code:C.DocNotOpen,message:"document does not open"});const o=r.acquirePage(t.index),i=o.getTextPage(),a=this.pdfiumModule.FPDFText_CountChars(i),s=[];for(let e=0;e<a;e++){const n=this.readGlyphInfo(t,o.pagePtr,i,e);s.push(n)}const u=this.buildRunsFromGlyphs(s,i);return o.release(),this.logger.perf(V,W,n,"End",e.id),y.resolve({runs:u})}buildRunsFromGlyphs(e,t){const n=[];let r=null,o=null,i=null;for(let a=0;a<e.length;a++){const s=e[a],u=this.pdfiumModule.FPDFText_GetTextObject(t,a);if(u!==o&&(o=u,r={rect:{x:s.origin.x,y:s.origin.y,width:s.size.width,height:s.size.height},charStart:a,glyphs:[]},i={minX:s.origin.x,minY:s.origin.y,maxX:s.origin.x+s.size.width,maxY:s.origin.y+s.size.height},n.push(r)),r.glyphs.push({x:s.origin.x,y:s.origin.y,width:s.size.width,height:s.size.height,flags:s.isEmpty?2:s.isSpace?1:0}),s.isEmpty)continue;const F=s.origin.x+s.size.width,l=s.origin.y+s.size.height;i.minX=Math.min(i.minX,s.origin.x),i.minY=Math.min(i.minY,s.origin.y),i.maxX=Math.max(i.maxX,F),i.maxY=Math.max(i.maxY,l),r.rect.x=i.minX,r.rect.y=i.minY,r.rect.width=i.maxX-i.minX,r.rect.height=i.maxY-i.minY}return n}readGlyphInfo(e,t,n,r){const o=this.malloc(4),i=this.malloc(4),a=this.malloc(4),s=this.malloc(4),u=this.malloc(16);let F=0,l=0,m=0,d=0,_=!1;if(this.pdfiumModule.FPDFText_GetLooseCharBox(n,r,u)){const P=this.pdfiumModule.pdfium.getValue(u,"float"),c=this.pdfiumModule.pdfium.getValue(u+4,"float"),h=this.pdfiumModule.pdfium.getValue(u+8,"float"),g=this.pdfiumModule.pdfium.getValue(u+12,"float");if(P===h||c===g)return{origin:{x:0,y:0},size:{width:0,height:0},isEmpty:!0};this.pdfiumModule.FPDF_PageToDevice(t,0,0,e.size.width,e.size.height,0,P,c,o,i),this.pdfiumModule.FPDF_PageToDevice(t,0,0,e.size.width,e.size.height,0,h,g,a,s);const D=this.pdfiumModule.pdfium.getValue(o,"i32"),b=this.pdfiumModule.pdfium.getValue(i,"i32"),p=this.pdfiumModule.pdfium.getValue(a,"i32"),f=this.pdfiumModule.pdfium.getValue(s,"i32");F=Math.min(D,p),l=Math.min(b,f),m=Math.max(1,Math.abs(p-D)),d=Math.max(1,Math.abs(f-b));_=32===this.pdfiumModule.FPDFText_GetUnicode(n,r)}return[u,o,i,a,s].forEach((e=>this.free(e))),{origin:{x:F,y:l},size:{width:m,height:d},..._&&{isSpace:_}}}getPageGlyphs(e,t){this.logger.debug(V,W,"getPageGlyphs",e,t),this.logger.perf(V,W,"getPageGlyphs","Begin",e.id);const n=this.cache.getContext(e.id);if(!n)return this.logger.perf(V,W,"getPageGlyphs","End",e.id),y.reject({code:C.DocNotOpen,message:"document does not open"});const r=n.acquirePage(t.index),o=r.getTextPage(),i=this.pdfiumModule.FPDFText_CountChars(o),a=new Array(i);for(let e=0;e<i;e++){const n=this.readGlyphInfo(t,r.pagePtr,o,e);n.isEmpty||(a[e]={...n})}return r.release(),this.logger.perf(V,W,"getPageGlyphs","End",e.id),y.resolve(a)}readCharBox(e,t,n,r){const o=this.malloc(8),i=this.malloc(8),a=this.malloc(8),s=this.malloc(8);let u=0,F=0,l=0,m=0;if(this.pdfiumModule.FPDFText_GetCharBox(n,r,i,s,a,o)){const n=this.pdfiumModule.pdfium.getValue(o,"double"),r=this.pdfiumModule.pdfium.getValue(i,"double"),d=this.pdfiumModule.pdfium.getValue(a,"double"),_=this.pdfiumModule.pdfium.getValue(s,"double"),P=this.malloc(4),c=this.malloc(4);this.pdfiumModule.FPDF_PageToDevice(t,0,0,e.size.width,e.size.height,0,r,n,P,c),u=this.pdfiumModule.pdfium.getValue(P,"i32"),F=this.pdfiumModule.pdfium.getValue(c,"i32"),this.free(P),this.free(c),l=Math.ceil(Math.abs(_-r)),m=Math.ceil(Math.abs(n-d))}return this.free(o),this.free(i),this.free(a),this.free(s),{origin:{x:u,y:F},size:{width:l,height:m}}}readPageAnnotations(e,t){const n=e.acquirePage(t.index),r=this.pdfiumModule.FPDFPage_GetAnnotCount(n.pagePtr),o=[];for(let e=0;e<r;e++)n.withAnnotation(e,(r=>{const i=this.readPageAnnotation(t,n,r,e);i&&o.push(i)}));return o}readPageAnnotation(e,t,n,r){const o=this.pdfiumModule.FPDFAnnot_GetSubtype(n);let i;switch(o){case b.TEXT:i=this.readPdfTextAnno(e,t.pagePtr,n,r);break;case b.FREETEXT:i=this.readPdfFreeTextAnno(e,t.pagePtr,n,r);break;case b.LINK:i=this.readPdfLinkAnno(e,t.docPtr,t.pagePtr,t.getTextPage(),n,r);break;case b.WIDGET:i=this.readPdfWidgetAnno(e,t.pagePtr,n,t.getFormHandle(),r);break;case b.FILEATTACHMENT:i=this.readPdfFileAttachmentAnno(e,t.pagePtr,n,r);break;case b.INK:i=this.readPdfInkAnno(e,t.pagePtr,n,r);break;case b.POLYGON:i=this.readPdfPolygonAnno(e,t.pagePtr,n,r);break;case b.POLYLINE:i=this.readPdfPolylineAnno(e,t.pagePtr,n,r);break;case b.LINE:i=this.readPdfLineAnno(e,t.pagePtr,n,r);break;case b.HIGHLIGHT:i=this.readPdfHighlightAnno(e,t.pagePtr,n,r);break;case b.STAMP:i=this.readPdfStampAnno(t.docPtr,e,t.pagePtr,n,r);break;case b.SQUARE:i=this.readPdfSquareAnno(e,t.pagePtr,n,r);break;case b.CIRCLE:i=this.readPdfCircleAnno(e,t.pagePtr,n,r);break;case b.UNDERLINE:i=this.readPdfUnderlineAnno(e,t.pagePtr,n,r);break;case b.SQUIGGLY:i=this.readPdfSquigglyAnno(e,t.pagePtr,n,r);break;case b.STRIKEOUT:i=this.readPdfStrikeOutAnno(e,t.pagePtr,n,r);break;case b.CARET:i=this.readPdfCaretAnno(e,t.pagePtr,n,r);break;default:i=this.readPdfAnno(e,t.pagePtr,o,n,r)}return i}readAnnotationColor(e,t=A.Color){const n=this.malloc(4),r=this.malloc(4),o=this.malloc(4),i=this.malloc(4);let a;return this.pdfiumModule.EPDFAnnot_GetColor(e,t,n,r,o,i)&&(a={red:255&this.pdfiumModule.pdfium.getValue(n,"i32"),green:255&this.pdfiumModule.pdfium.getValue(r,"i32"),blue:255&this.pdfiumModule.pdfium.getValue(o,"i32"),alpha:255&this.pdfiumModule.pdfium.getValue(i,"i32")}),this.free(n),this.free(r),this.free(o),this.free(i),a}resolveAnnotationColor(e,t=A.Color,n={red:255,green:245,blue:155,alpha:255}){return function(e){const t=e=>Math.max(0,Math.min(255,e)),n=e=>t(e).toString(16).padStart(2,"0");return{color:`#${n(e.red)}${n(e.green)}${n(e.blue)}`,opacity:t(e.alpha)/255}}(this.readAnnotationColor(e,t)??n)}setAnnotationColor(e,t,n=A.Color){const r=function({color:e,opacity:t}){/^#?[0-9a-f]{3}$/i.test(e)&&(e=e.replace(/^#?([0-9a-f])([0-9a-f])([0-9a-f])$/i,"#$1$1$2$2$3$3").toLowerCase());const[,n,r,o]=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(e)??(()=>{throw new Error(`Invalid hex colour: “${e}”`)})();return{red:parseInt(n,16),green:parseInt(r,16),blue:parseInt(o,16),alpha:((e,t=255)=>Math.max(0,Math.min(t,e)))(Math.round(255*t))}}(t);return this.pdfiumModule.EPDFAnnot_SetColor(e,n,255&r.red,255&r.green,255&r.blue,255&(r.alpha??255))}getBorderStyle(e){const t=this.malloc(4);let n=0,r=E.UNKNOWN,o=!1;return r=this.pdfiumModule.EPDFAnnot_GetBorderStyle(e,t),n=this.pdfiumModule.pdfium.getValue(t,"float"),o=r!==E.UNKNOWN,this.free(t),{ok:o,style:r,width:n}}setBorderStyle(e,t,n){return this.pdfiumModule.EPDFAnnot_SetBorderStyle(e,t,n)}getBorderEffect(e){const t=this.malloc(4),n=!!this.pdfiumModule.EPDFAnnot_GetBorderEffect(e,t),r=n?this.pdfiumModule.pdfium.getValue(t,"float"):0;return this.free(t),{ok:n,intensity:r}}getRectangleDifferences(e){const t=this.malloc(4),n=this.malloc(4),r=this.malloc(4),o=this.malloc(4),i=!!this.pdfiumModule.EPDFAnnot_GetRectangleDifferences(e,t,n,r,o),a=this.pdfiumModule.pdfium,s=a.getValue(t,"float"),u=a.getValue(n,"float"),F=a.getValue(r,"float"),l=a.getValue(o,"float");return this.free(t),this.free(n),this.free(r),this.free(o),{ok:i,left:s,top:u,right:F,bottom:l}}getBorderDashPattern(e){const t=this.pdfiumModule.EPDFAnnot_GetBorderDashPatternCount(e);if(0===t)return{ok:!1,pattern:[]};const n=this.malloc(4*t),r=!!this.pdfiumModule.EPDFAnnot_GetBorderDashPattern(e,n,t),o=[];if(r){const e=this.pdfiumModule.pdfium;for(let r=0;r<t;r++)o.push(e.getValue(n+4*r,"float"))}return this.free(n),{ok:r,pattern:o}}getQuadPointsAnno(e,t){const n=this.pdfiumModule.FPDFAnnot_CountAttachmentPoints(t);if(0===n)return[];const r=[];for(let o=0;o<n;o++){const n=this.malloc(32);if(this.pdfiumModule.FPDFAnnot_GetAttachmentPoints(t,o,n)){const t=[],o=[];for(let e=0;e<4;e++){const r=n+8*e;t.push(this.pdfiumModule.pdfium.getValue(r,"float")),o.push(this.pdfiumModule.pdfium.getValue(r+4,"float"))}const i=this.convertPagePointToDevicePoint(e,{x:t[0],y:o[0]}),a=this.convertPagePointToDevicePoint(e,{x:t[1],y:o[1]}),s=this.convertPagePointToDevicePoint(e,{x:t[2],y:o[2]}),u=this.convertPagePointToDevicePoint(e,{x:t[3],y:o[3]});r.push({p1:i,p2:a,p3:s,p4:u})}this.free(n)}return r.map(u)}syncQuadPointsAnno(e,t,n){const r=this.pdfiumModule.pdfium,o=this.pdfiumModule.FPDFAnnot_CountAttachmentPoints(t),i=this.malloc(32),a=t=>{const n=function(e){return{p1:{x:e.origin.x,y:e.origin.y},p2:{x:e.origin.x+e.size.width,y:e.origin.y},p3:{x:e.origin.x+e.size.width,y:e.origin.y+e.size.height},p4:{x:e.origin.x,y:e.origin.y+e.size.height}}}(t),o=this.convertDevicePointToPagePoint(e,n.p1),a=this.convertDevicePointToPagePoint(e,n.p2),s=this.convertDevicePointToPagePoint(e,n.p3),u=this.convertDevicePointToPagePoint(e,n.p4);r.setValue(i+0,o.x,"float"),r.setValue(i+4,o.y,"float"),r.setValue(i+8,a.x,"float"),r.setValue(i+12,a.y,"float"),r.setValue(i+16,u.x,"float"),r.setValue(i+20,u.y,"float"),r.setValue(i+24,s.x,"float"),r.setValue(i+28,s.y,"float")},s=Math.min(o,n.length);for(let e=0;e<s;e++)if(a(n[e]),!this.pdfiumModule.FPDFAnnot_SetAttachmentPoints(t,e,i))return this.free(i),!1;for(let e=o;e<n.length;e++)if(a(n[e]),!this.pdfiumModule.FPDFAnnot_AppendAttachmentPoints(t,i))return this.free(i),!1;return this.free(i),!0}getInkList(e,t){const n=[],r=this.pdfiumModule.FPDFAnnot_GetInkListCount(t);for(let o=0;o<r;o++){const r=[],i=this.pdfiumModule.FPDFAnnot_GetInkListPath(t,o,0,0);if(i>0){const n=8,a=this.malloc(i*n);this.pdfiumModule.FPDFAnnot_GetInkListPath(t,o,a,i);for(let t=0;t<i;t++){const n=this.pdfiumModule.pdfium.getValue(a+8*t,"float"),o=this.pdfiumModule.pdfium.getValue(a+8*t+4,"float"),{x:i,y:s}=this.convertPagePointToDevicePoint(e,{x:n,y:o});r.push({x:i,y:s})}this.free(a)}n.push({points:r})}return n}setInkList(e,t,n){for(const r of n){const n=r.points.length,o=this.malloc(8*n);for(let t=0;t<n;t++){const n=r.points[t],{x:i,y:a}=this.convertDevicePointToPagePoint(e,n);this.pdfiumModule.pdfium.setValue(o+8*t,i,"float"),this.pdfiumModule.pdfium.setValue(o+8*t+4,a,"float")}if(-1===this.pdfiumModule.FPDFAnnot_AddInkStroke(t,o,n))return this.free(o),!1;this.free(o)}return!0}readPdfTextAnno(e,t,n,r){const o=this.readPageAnnoRect(n),i=this.convertPageRectToDeviceRect(e,t,o),a=this.getAnnotString(n,"T"),s=T(this.getAnnotString(n,"M")),u=this.getAnnotString(n,"Contents")||"",F=this.getAnnotString(n,"State"),l=this.getAnnotString(n,"StateModel"),m=this.resolveAnnotationColor(n),d=this.getInReplyToId(t,n);return{pageIndex:e.index,id:r,type:b.TEXT,contents:u,...m,rect:i,inReplyToId:d,author:a,modified:s,state:F,stateModel:l}}readPdfFreeTextAnno(e,t,n,r){const o=this.readPageAnnoRect(n),i=this.convertPageRectToDeviceRect(e,t,o),a=this.getAnnotString(n,"Contents")||"",s=this.getAnnotString(n,"T"),u=T(this.getAnnotString(n,"M")),F=this.getAnnotRichContent(n);return{pageIndex:e.index,id:r,type:b.FREETEXT,richContent:F,contents:a,author:s,modified:u,rect:i}}readPdfLinkAnno(e,t,n,r,o,i){const a=this.pdfiumModule.FPDFAnnot_GetLink(o);if(!a)return;const s=this.readPageAnnoRect(o),{left:u,top:F,right:l,bottom:m}=s,d=this.convertPageRectToDeviceRect(e,n,s),_=this.getAnnotString(o,"T"),P=T(this.getAnnotString(o,"M")),c=this.pdfiumModule.FPDFText_GetBoundedText(r,u,F,l,m,0,0),h=2*(c+1),g=this.malloc(h);this.pdfiumModule.FPDFText_GetBoundedText(r,u,F,l,m,g,c);const D=this.pdfiumModule.pdfium.UTF16ToString(g);this.free(g);const p=this.readPdfLinkAnnoTarget(t,(()=>this.pdfiumModule.FPDFLink_GetAction(a)),(()=>this.pdfiumModule.FPDFLink_GetDest(t,a)));return{pageIndex:e.index,id:i,type:b.LINK,text:D,target:p,rect:d,author:_,modified:P}}readPdfWidgetAnno(e,t,n,r,o){const i=this.readPageAnnoRect(n),a=this.convertPageRectToDeviceRect(e,t,i),s=this.getAnnotString(n,"T"),u=T(this.getAnnotString(n,"M")),F=this.readPdfWidgetAnnoField(r,n);return{pageIndex:e.index,id:o,type:b.WIDGET,rect:a,field:F,author:s,modified:u}}readPdfFileAttachmentAnno(e,t,n,r){const o=this.readPageAnnoRect(n),i=this.convertPageRectToDeviceRect(e,t,o),a=this.getAnnotString(n,"T"),s=T(this.getAnnotString(n,"M"));return{pageIndex:e.index,id:r,type:b.FILEATTACHMENT,rect:i,author:a,modified:s}}readPdfInkAnno(e,t,n,r){const o=this.readPageAnnoRect(n),i=this.convertPageRectToDeviceRect(e,t,o),a=this.getAnnotString(n,"T"),s=T(this.getAnnotString(n,"M")),u=this.resolveAnnotationColor(n),{width:F}=this.getBorderStyle(n),l=this.getInkList(e,n),m=this.pdfiumModule.EPDFAnnot_GetBlendMode(n),d=this.getAnnotIntent(n);return{pageIndex:e.index,id:r,type:b.INK,...d&&{intent:d},blendMode:m,...u,strokeWidth:F,rect:i,inkList:l,author:a,modified:s}}readPdfPolygonAnno(e,t,n,r){const o=this.readPageAnnoRect(n),i=this.convertPageRectToDeviceRect(e,t,o),a=this.getAnnotString(n,"T"),s=T(this.getAnnotString(n,"M")),u=this.readPdfAnnoVertices(e,t,n);return{pageIndex:e.index,id:r,type:b.POLYGON,rect:i,vertices:u,author:a,modified:s}}readPdfPolylineAnno(e,t,n,r){const o=this.readPageAnnoRect(n),i=this.convertPageRectToDeviceRect(e,t,o),a=this.getAnnotString(n,"T"),s=T(this.getAnnotString(n,"M")),u=this.readPdfAnnoVertices(e,t,n);return{pageIndex:e.index,id:r,type:b.POLYLINE,rect:i,vertices:u,author:a,modified:s}}readPdfLineAnno(e,t,n,r){const o=this.readPageAnnoRect(n),i=this.convertPageRectToDeviceRect(e,t,o),a=this.getAnnotString(n,"T"),s=T(this.getAnnotString(n,"M")),u=this.malloc(8),F=this.malloc(8);this.pdfiumModule.FPDFAnnot_GetLine(n,u,F);const l=this.pdfiumModule.pdfium.getValue(u,"float"),m=this.pdfiumModule.pdfium.getValue(u+4,"float"),d=this.convertPagePointToDevicePoint(e,{x:l,y:m}),_=this.pdfiumModule.pdfium.getValue(F,"float"),P=this.pdfiumModule.pdfium.getValue(F+4,"float"),c=this.convertPagePointToDevicePoint(e,{x:_,y:P});return this.free(u),this.free(F),{pageIndex:e.index,id:r,type:b.LINE,rect:i,startPoint:d,endPoint:c,author:a,modified:s}}readPdfHighlightAnno(e,t,n,r){const o=this.readPageAnnoRect(n),i=this.convertPageRectToDeviceRect(e,t,o),a=this.getQuadPointsAnno(e,n),s=this.resolveAnnotationColor(n),u=this.pdfiumModule.EPDFAnnot_GetBlendMode(n),F=this.getAnnotString(n,"T"),l=T(this.getAnnotString(n,"M")),m=this.getAnnotString(n,"Contents")||"";return{pageIndex:e.index,id:r,blendMode:u,type:b.HIGHLIGHT,rect:i,contents:m,segmentRects:a,...s,author:F,modified:l}}readPdfUnderlineAnno(e,t,n,r){const o=this.readPageAnnoRect(n),i=this.convertPageRectToDeviceRect(e,t,o),a=this.getAnnotString(n,"T"),s=T(this.getAnnotString(n,"M")),u=this.getQuadPointsAnno(e,n),F=this.getAnnotString(n,"Contents")||"",l=this.resolveAnnotationColor(n),m=this.pdfiumModule.EPDFAnnot_GetBlendMode(n);return{pageIndex:e.index,id:r,blendMode:m,type:b.UNDERLINE,rect:i,contents:F,segmentRects:u,...l,author:a,modified:s}}readPdfStrikeOutAnno(e,t,n,r){const o=this.readPageAnnoRect(n),i=this.convertPageRectToDeviceRect(e,t,o),a=this.getAnnotString(n,"T"),s=T(this.getAnnotString(n,"M")),u=this.getQuadPointsAnno(e,n),F=this.getAnnotString(n,"Contents")||"",l=this.resolveAnnotationColor(n),m=this.pdfiumModule.EPDFAnnot_GetBlendMode(n);return{pageIndex:e.index,id:r,blendMode:m,type:b.STRIKEOUT,rect:i,contents:F,segmentRects:u,...l,author:a,modified:s}}readPdfSquigglyAnno(e,t,n,r){const o=this.readPageAnnoRect(n),i=this.convertPageRectToDeviceRect(e,t,o),a=this.getAnnotString(n,"T"),s=T(this.getAnnotString(n,"M")),u=this.getQuadPointsAnno(e,n),F=this.getAnnotString(n,"Contents")||"",l=this.resolveAnnotationColor(n),m=this.pdfiumModule.EPDFAnnot_GetBlendMode(n);return{pageIndex:e.index,id:r,blendMode:m,type:b.SQUIGGLY,rect:i,contents:F,segmentRects:u,...l,author:a,modified:s}}readPdfCaretAnno(e,t,n,r){const o=this.readPageAnnoRect(n),i=this.convertPageRectToDeviceRect(e,t,o),a=this.getAnnotString(n,"T"),s=T(this.getAnnotString(n,"M"));return{pageIndex:e.index,id:r,type:b.CARET,rect:i,author:a,modified:s}}readPdfStampAnno(e,t,n,r,o){const i=this.readPageAnnoRect(r),a=this.convertPageRectToDeviceRect(t,n,i),s=this.getAnnotString(r,"T"),u=T(this.getAnnotString(r,"M")),F=[],l=this.pdfiumModule.FPDFAnnot_GetObjectCount(r);for(let e=0;e<l;e++){const t=this.pdfiumModule.FPDFAnnot_GetObject(r,e),n=this.readPdfPageObject(t);n&&F.push(n)}return{pageIndex:t.index,id:o,type:b.STAMP,rect:a,contents:F,author:s,modified:u}}readPdfPageObject(e){switch(this.pdfiumModule.FPDFPageObj_GetType(e)){case G.PATH:return this.readPathObject(e);case G.IMAGE:return this.readImageObject(e);case G.FORM:return this.readFormObject(e)}}readPathObject(e){const t=this.pdfiumModule.FPDFPath_CountSegments(e),n=this.malloc(4),r=this.malloc(4),o=this.malloc(4),i=this.malloc(4);this.pdfiumModule.FPDFPageObj_GetBounds(e,n,r,o,i);const a={left:this.pdfiumModule.pdfium.getValue(n,"float"),bottom:this.pdfiumModule.pdfium.getValue(r,"float"),right:this.pdfiumModule.pdfium.getValue(o,"float"),top:this.pdfiumModule.pdfium.getValue(i,"float")};this.free(n),this.free(r),this.free(o),this.free(i);const s=[];for(let n=0;n<t;n++){const t=this.readPdfSegment(e,n);s.push(t)}const u=this.readPdfPageObjectTransformMatrix(e);return{type:G.PATH,bounds:a,segments:s,matrix:u}}readPdfSegment(e,t){const n=this.pdfiumModule.FPDFPath_GetPathSegment(e,t),r=this.pdfiumModule.FPDFPathSegment_GetType(n),o=this.pdfiumModule.FPDFPathSegment_GetClose(n),i=this.malloc(4),a=this.malloc(4);this.pdfiumModule.FPDFPathSegment_GetPoint(n,i,a);const s=this.pdfiumModule.pdfium.getValue(i,"float"),u=this.pdfiumModule.pdfium.getValue(a,"float");return this.free(i),this.free(a),{type:r,point:{x:s,y:u},isClosed:o}}readImageObject(e){const t=this.pdfiumModule.FPDFImageObj_GetBitmap(e),n=this.pdfiumModule.FPDFBitmap_GetBuffer(t),r=this.pdfiumModule.FPDFBitmap_GetWidth(t),o=this.pdfiumModule.FPDFBitmap_GetHeight(t),i=this.pdfiumModule.FPDFBitmap_GetFormat(t),a=r*o,s=new Uint8ClampedArray(4*a);for(let e=0;e<a;e++)if(i===N.Bitmap_BGR){const t=this.pdfiumModule.pdfium.getValue(n+3*e,"i8"),r=this.pdfiumModule.pdfium.getValue(n+3*e+1,"i8"),o=this.pdfiumModule.pdfium.getValue(n+3*e+2,"i8");s[4*e]=o,s[4*e+1]=r,s[4*e+2]=t,s[4*e+3]=100}const u=new ImageData(s,r,o),F=this.readPdfPageObjectTransformMatrix(e);return{type:G.IMAGE,imageData:u,matrix:F}}readFormObject(e){const t=this.pdfiumModule.FPDFFormObj_CountObjects(e),n=[];for(let r=0;r<t;r++){const t=this.pdfiumModule.FPDFFormObj_GetObject(e,r),o=this.readPdfPageObject(t);o&&n.push(o)}const r=this.readPdfPageObjectTransformMatrix(e);return{type:G.FORM,objects:n,matrix:r}}readPdfPageObjectTransformMatrix(e){const t=this.malloc(24);if(this.pdfiumModule.FPDFPageObj_GetMatrix(e,t)){const e=this.pdfiumModule.pdfium.getValue(t,"float"),n=this.pdfiumModule.pdfium.getValue(t+4,"float"),r=this.pdfiumModule.pdfium.getValue(t+8,"float"),o=this.pdfiumModule.pdfium.getValue(t+12,"float"),i=this.pdfiumModule.pdfium.getValue(t+16,"float"),a=this.pdfiumModule.pdfium.getValue(t+20,"float");return this.free(t),{a:e,b:n,c:r,d:o,e:i,f:a}}return this.free(t),{a:1,b:0,c:0,d:1,e:0,f:0}}getStrokeWidth(e){const t=this.malloc(4),n=this.malloc(4),r=this.malloc(4),o=this.pdfiumModule.FPDFAnnot_GetBorder(e,t,n,r)?this.pdfiumModule.pdfium.getValue(r,"float"):1;return this.free(t),this.free(n),this.free(r),o}getAnnotationFlags(e){const t=this.pdfiumModule.FPDFAnnot_GetFlags(e);return n=t,Object.keys(S).filter((e=>!!(n&e))).map((e=>S[e]));var n}readPdfCircleAnno(e,t,n,r){const o=this.getAnnotationFlags(n),i=this.readPageAnnoRect(n),a=this.convertPageRectToDeviceRect(e,t,i),s=this.getAnnotString(n,"T"),u=T(this.getAnnotString(n,"M")),{color:F,opacity:l}=this.resolveAnnotationColor(n,A.InteriorColor),{color:m}=this.resolveAnnotationColor(n);let d,_,P,{style:c,width:h}=this.getBorderStyle(n);if(c===E.CLOUDY||c===E.UNKNOWN){const{ok:e,intensity:t}=this.getBorderEffect(n);if(e){d=t,c=E.CLOUDY;const{ok:e,left:r,top:o,right:i,bottom:a}=this.getRectangleDifferences(n);e&&(_=[r,o,i,a])}}if(c===E.DASHED){const{ok:e,pattern:t}=this.getBorderDashPattern(n);e&&(P=t)}return{pageIndex:e.index,id:r,type:b.CIRCLE,flags:o,color:F,opacity:l,strokeWidth:h,strokeColor:m,strokeStyle:c,rect:a,author:s,modified:u,...void 0!==d&&{cloudyBorderIntensity:d},...void 0!==_&&{cloudyBorderInset:_},...void 0!==P&&{strokeDashArray:P}}}readPdfSquareAnno(e,t,n,r){const o=this.getAnnotationFlags(n),i=this.readPageAnnoRect(n),a=this.convertPageRectToDeviceRect(e,t,i),s=this.getAnnotString(n,"T"),u=T(this.getAnnotString(n,"M")),{color:F,opacity:l}=this.resolveAnnotationColor(n,A.InteriorColor),{color:m}=this.resolveAnnotationColor(n);let d,_,P,{style:c,width:h}=this.getBorderStyle(n);if(c===E.CLOUDY||c===E.UNKNOWN){const{ok:e,intensity:t}=this.getBorderEffect(n);if(e){d=t,c=E.CLOUDY;const{ok:e,left:r,top:o,right:i,bottom:a}=this.getRectangleDifferences(n);e&&(_=[r,o,i,a])}}if(c===E.DASHED){const{ok:e,pattern:t}=this.getBorderDashPattern(n);e&&(P=t)}return{pageIndex:e.index,id:r,type:b.SQUARE,flags:o,color:F,opacity:l,strokeColor:m,strokeWidth:h,strokeStyle:c,rect:a,author:s,modified:u,...void 0!==d&&{cloudyBorderIntensity:d},...void 0!==_&&{cloudyBorderInset:_},...void 0!==P&&{strokeDashArray:P}}}readPdfAnno(e,t,n,r,o){const i=this.readPageAnnoRect(r),a=this.convertPageRectToDeviceRect(e,t,i),s=this.getAnnotString(r,"T"),u=T(this.getAnnotString(r,"M"));return{pageIndex:e.index,id:o,type:n,rect:a,author:s,modified:u}}getInReplyToId(e,t){const n=this.pdfiumModule.FPDFAnnot_GetLinkedAnnot(t,"IRT");if(!n)return;const r=this.pdfiumModule.FPDFPage_GetAnnotIndex(e,n);return r>=0?r:void 0}getAnnotString(e,t){const n=this.pdfiumModule.FPDFAnnot_GetStringValue(e,t,0,0);if(0===n)return;const r=2*(n+1),o=this.malloc(r);this.pdfiumModule.FPDFAnnot_GetStringValue(e,t,o,r);const i=this.pdfiumModule.pdfium.UTF16ToString(o);return this.free(o),i||void 0}getAnnotIntent(e){const t=this.pdfiumModule.EPDFAnnot_GetIntent(e,0,0);if(0===t)return;const n=2*(t+1),r=this.malloc(n);this.pdfiumModule.EPDFAnnot_GetIntent(e,r,n);const o=this.pdfiumModule.pdfium.UTF16ToString(r);return this.free(r),o&&"undefined"!==o?o:void 0}getAnnotRichContent(e){const t=this.pdfiumModule.EPDFAnnot_GetRichContent(e,0,0);if(0===t)return;const n=2*(t+1),r=this.malloc(n);this.pdfiumModule.EPDFAnnot_GetRichContent(e,r,n);const o=this.pdfiumModule.pdfium.UTF16ToString(r);return this.free(r),o||void 0}setAnnotString(e,t,n){const r=2*(n.length+1),o=this.malloc(r);this.pdfiumModule.pdfium.stringToUTF16(n,o,r);const i=this.pdfiumModule.FPDFAnnot_SetStringValue(e,t,o);return this.free(o),i}readPdfAnnoVertices(e,t,n){const r=[],o=this.pdfiumModule.FPDFAnnot_GetVertices(n,0,0),i=this.malloc(8*o);this.pdfiumModule.FPDFAnnot_GetVertices(n,i,o);for(let t=0;t<o;t++){const n=this.pdfiumModule.pdfium.getValue(i+8*t,"float"),o=this.pdfiumModule.pdfium.getValue(i+8*t+4,"float"),{x:a,y:s}=this.convertPagePointToDevicePoint(e,{x:n,y:o});r.push({x:a,y:s})}return this.free(i),r}readPdfBookmarkTarget(e,t,n){const r=t();if(r){return{type:"action",action:this.readPdfAction(e,r)}}{const t=n();if(t){return{type:"destination",destination:this.readPdfDestination(e,t)}}}}readPdfWidgetAnnoField(e,t){const n=this.pdfiumModule.FPDFAnnot_GetFormFieldFlags(e,t),r=this.pdfiumModule.FPDFAnnot_GetFormFieldType(e,t),o=R(this.pdfiumModule.pdfium,((n,r)=>this.pdfiumModule.FPDFAnnot_GetFormFieldName(e,t,n,r)),this.pdfiumModule.pdfium.UTF16ToString),i=R(this.pdfiumModule.pdfium,((n,r)=>this.pdfiumModule.FPDFAnnot_GetFormFieldAlternateName(e,t,n,r)),this.pdfiumModule.pdfium.UTF16ToString),a=R(this.pdfiumModule.pdfium,((n,r)=>this.pdfiumModule.FPDFAnnot_GetFormFieldValue(e,t,n,r)),this.pdfiumModule.pdfium.UTF16ToString),s=[];if(r===f.COMBOBOX||r===f.LISTBOX){const n=this.pdfiumModule.FPDFAnnot_GetOptionCount(e,t);for(let r=0;r<n;r++){const n=R(this.pdfiumModule.pdfium,((n,o)=>this.pdfiumModule.FPDFAnnot_GetOptionLabel(e,t,r,n,o)),this.pdfiumModule.pdfium.UTF16ToString),o=this.pdfiumModule.FPDFAnnot_IsOptionSelected(e,t,r);s.push({label:n,isSelected:o})}}let u=!1;return r!==f.CHECKBOX&&r!==f.RADIOBUTTON||(u=this.pdfiumModule.FPDFAnnot_IsChecked(e,t)),{flag:n,type:r,name:o,alternateName:i,value:a,isChecked:u,options:s}}renderAnnotation(e,t,n,r,o,i=1,s=p.Normal,u="image/webp"){this.logger.debug(V,W,"renderAnnotation",e,t,n,r,o,i,s,u),this.logger.perf(V,W,"RenderAnnotation","Begin",`${e.id}-${t.index}-${n.id}`);const l=new _,m=this.cache.getContext(e.id);if(!m)return this.logger.perf(V,W,"RenderAnnotation","End",`${e.id}-${t.index}-${n.id}`),y.reject({code:C.DocNotOpen,message:"document does not open"});const d=m.acquirePage(t.index),P=this.pdfiumModule.FPDFPage_GetAnnot(d.pagePtr,n.id);if(!P)return d.release(),this.logger.perf(V,W,"RenderAnnotation","End",`${e.id}-${t.index}-${n.id}`),y.reject({code:C.NotFound,message:"annotation not found"});const c=r*i,h=n.rect,g=a(F(t.size,h,o,c)),D=N.Bitmap_BGRA,b=g.size.width*g.size.height*4,f=this.malloc(b),A=this.pdfiumModule.FPDFBitmap_CreateEx(g.size.width,g.size.height,D,f,4*g.size.width);this.pdfiumModule.FPDFBitmap_FillRect(A,0,0,g.size.width,g.size.height,0);const E=((e,t,n)=>{const{width:r,height:o}=e.size;switch(t){case 0:return{a:n,b:0,c:0,d:-n,e:0,f:o*n};case 1:return{a:0,b:n,c:n,d:0,e:0,f:0};case 2:return{a:-n,b:0,c:0,d:n,e:r*n,f:0};case 3:return{a:0,b:-n,c:-n,d:0,e:o*n,f:r*n}}})(n.rect,o,c),G=this.malloc(24);new Float32Array(this.pdfiumModule.pdfium.HEAPF32.buffer,G,6).set([E.a,E.b,E.c,E.d,E.e,E.f]);const S=U.REVERSE_BYTE_ORDER,M=!!this.pdfiumModule.EPDF_RenderAnnotBitmap(A,d.pagePtr,P,s,G,S);if(this.free(G),this.pdfiumModule.FPDFBitmap_Destroy(A),this.pdfiumModule.FPDFPage_CloseAnnot(P),d.release(),!M)return this.free(f),this.logger.perf(V,W,"RenderAnnotation","End",`${e.id}-${t.index}-${n.id}`),y.reject({code:C.Unknown,message:"EPDF_RenderAnnotBitmap failed"});const T=this.pdfiumModule.pdfium.HEAPU8.subarray(f,f+b),O={data:new Uint8ClampedArray(T),width:g.size.width,height:g.size.height};return this.free(f),this.logger.perf(V,W,"RenderAnnotation","End",`${e.id}-${t.index}-${n.id}`),this.imageDataConverter(O,u).then((e=>l.resolve(e))).catch((e=>l.reject({code:C.Unknown,message:String(e)}))),l}renderPageRectToImageData(e,t,n,r,o,u,l){const m=N.Bitmap_BGRA,d=a(F(t.size,n,o,r*u)),_=i(function(e,t,n){return{width:(e=t%2==0?e:s(e)).width*n,height:e.height*n}}(t.size,o,r*u)),P=d.size.width*d.size.height*4,c=this.malloc(P),h=this.pdfiumModule.FPDFBitmap_CreateEx(d.size.width,d.size.height,m,c,4*d.size.width);this.pdfiumModule.FPDFBitmap_FillRect(h,0,0,d.size.width,d.size.height,4294967295);let g=U.REVERSE_BYTE_ORDER;l?.withAnnotations&&(g|=U.ANNOT);const D=e.acquirePage(t.index);this.pdfiumModule.FPDF_RenderPageBitmap(h,D.pagePtr,-d.origin.x,-d.origin.y,_.width,_.height,o,g),this.pdfiumModule.FPDFBitmap_Destroy(h),D.release();const b=this.pdfiumModule.pdfium.HEAPU8.subarray(c,c+P),p={data:new Uint8ClampedArray(b),width:d.size.width,height:d.size.height};return this.free(c),p}readPdfLinkAnnoTarget(e,t,n){const r=n();if(r){return{type:"destination",destination:this.readPdfDestination(e,r)}}{const n=t();if(n){return{type:"action",action:this.readPdfAction(e,n)}}}}readPdfAction(e,t){let n;switch(this.pdfiumModule.FPDFAction_GetType(t)){case D.Unsupported:n={type:D.Unsupported};break;case D.Goto:{const r=this.pdfiumModule.FPDFAction_GetDest(e,t);if(r){const t=this.readPdfDestination(e,r);n={type:D.Goto,destination:t}}else n={type:D.Unsupported}}break;case D.RemoteGoto:n={type:D.Unsupported};break;case D.URI:{const r=R(this.pdfiumModule.pdfium,((n,r)=>this.pdfiumModule.FPDFAction_GetURIPath(e,t,n,r)),this.pdfiumModule.pdfium.UTF8ToString);n={type:D.URI,uri:r}}break;case D.LaunchAppOrOpenFile:{const e=R(this.pdfiumModule.pdfium,((e,n)=>this.pdfiumModule.FPDFAction_GetFilePath(t,e,n)),this.pdfiumModule.pdfium.UTF8ToString);n={type:D.LaunchAppOrOpenFile,path:e}}}return n}readPdfDestination(e,t){const n=this.pdfiumModule.FPDFDest_GetDestPageIndex(e,t),r=this.malloc(4),o=this.malloc(16),i=this.pdfiumModule.FPDFDest_GetView(t,r,o),a=this.pdfiumModule.pdfium.getValue(r,"i32"),s=[];for(let e=0;e<a;e++){const t=o+4*e;s.push(this.pdfiumModule.pdfium.getValue(t,"float"))}if(this.free(r),this.free(o),i===h.XYZ){const e=this.malloc(1),r=this.malloc(1),o=this.malloc(1),a=this.malloc(4),u=this.malloc(4),F=this.malloc(4);if(this.pdfiumModule.FPDFDest_GetLocationInPage(t,e,r,o,a,u,F)){const t=this.pdfiumModule.pdfium.getValue(e,"i8"),l=this.pdfiumModule.pdfium.getValue(r,"i8"),m=this.pdfiumModule.pdfium.getValue(o,"i8"),d=t?this.pdfiumModule.pdfium.getValue(a,"float"):0,_=l?this.pdfiumModule.pdfium.getValue(u,"float"):0,P=m?this.pdfiumModule.pdfium.getValue(F,"float"):0;return this.free(e),this.free(r),this.free(o),this.free(a),this.free(u),this.free(F),{pageIndex:n,zoom:{mode:i,params:{x:d,y:_,zoom:P}},view:s}}return this.free(e),this.free(r),this.free(o),this.free(a),this.free(u),this.free(F),{pageIndex:n,zoom:{mode:i,params:{x:0,y:0,zoom:0}},view:s}}return{pageIndex:n,zoom:{mode:i},view:s}}readPdfAttachment(e,t){const n=this.pdfiumModule.FPDFDoc_GetAttachment(e,t);return{index:t,name:R(this.pdfiumModule.pdfium,((e,t)=>this.pdfiumModule.FPDFAttachment_GetName(n,e,t)),this.pdfiumModule.pdfium.UTF16ToString),creationDate:R(this.pdfiumModule.pdfium,((e,t)=>this.pdfiumModule.FPDFAttachment_GetStringValue(n,"CreationDate",e,t)),this.pdfiumModule.pdfium.UTF16ToString),checksum:R(this.pdfiumModule.pdfium,((e,t)=>this.pdfiumModule.FPDFAttachment_GetStringValue(n,"Checksum",e,t)),this.pdfiumModule.pdfium.UTF16ToString)}}convertDevicePointToPagePoint(e,t){return{x:t.x,y:e.size.height-t.y}}convertPagePointToDevicePoint(e,t){return{x:t.x,y:e.size.height-t.y}}convertPageRectToDeviceRect(e,t,n){const{x:r,y:o}=this.convertPagePointToDevicePoint(e,{x:n.left,y:n.top});return{origin:{x:r,y:o},size:{width:Math.abs(n.right-n.left),height:Math.abs(n.top-n.bottom)}}}readPageAnnoAppearanceStreams(e){return{normal:this.readPageAnnoAppearanceStream(e,p.Normal),rollover:this.readPageAnnoAppearanceStream(e,p.Rollover),down:this.readPageAnnoAppearanceStream(e,p.Down)}}readPageAnnoAppearanceStream(e,t=p.Normal){const n=2*(this.pdfiumModule.FPDFAnnot_GetAP(e,t,0,0)+1),r=this.malloc(n);this.pdfiumModule.FPDFAnnot_GetAP(e,t,r,n);const o=this.pdfiumModule.pdfium.UTF16ToString(r);return this.free(r),o}updateAnnotationColor(e,t,n,r,o=0){this.logger.debug(V,W,"setAnnotationColor",e,t,n,r,o),this.logger.perf(V,W,"setAnnotationColor","Begin",e.id);const i=y.create();try{const a=this.cache.getContext(e.id);if(!a)return this.logger.perf(V,W,"setAnnotationColor","End",e.id),this.logger.warn(V,W,"setAnnotationColor: doc closed"),i.resolve(!1),i;const s=a.acquirePage(t.index),u=this.pdfiumModule.FPDFPage_GetAnnot(s.pagePtr,n.id);if(!u)return this.logger.perf(V,W,"setAnnotationColor","End",e.id),this.logger.warn(V,W,"setAnnotationColor: annot not found"),s.release(),i.resolve(!1),i;const F=this.setAnnotationColor(u,r,o);F&&this.pdfiumModule.FPDFPage_GenerateContent(s.pagePtr),this.pdfiumModule.FPDFPage_CloseAnnot(u),s.release(),this.logger.perf(V,W,"setAnnotationColor","End",e.id),i.resolve(!!F)}catch(t){this.logger.perf(V,W,"setAnnotationColor","End",e.id),this.logger.error(V,W,"setAnnotationColor: error",t),i.reject({code:C.Unknown,message:`Failed to set annotation color: ${t instanceof Error?t.message:String(t)}`})}return i}setPageAnnoRect(e,t,n,r){const o=this.malloc(8),i=this.malloc(8);if(!this.pdfiumModule.FPDF_DeviceToPage(t,0,0,e.size.width,e.size.height,0,r.origin.x,r.origin.y,o,i))return this.free(o),this.free(i),!1;const a=this.pdfiumModule.pdfium.getValue(o,"double"),s=this.pdfiumModule.pdfium.getValue(i,"double");this.free(o),this.free(i);const u=this.malloc(16);return this.pdfiumModule.pdfium.setValue(u,a,"float"),this.pdfiumModule.pdfium.setValue(u+4,s,"float"),this.pdfiumModule.pdfium.setValue(u+8,a+r.size.width,"float"),this.pdfiumModule.pdfium.setValue(u+12,s-r.size.height,"float"),this.pdfiumModule.FPDFAnnot_SetRect(n,u)?(this.free(u),!0):(this.free(u),!1)}readPageAnnoRect(e){const t=this.malloc(16),n={left:0,top:0,right:0,bottom:0};return this.pdfiumModule.FPDFAnnot_GetRect(e,t)&&(n.left=this.pdfiumModule.pdfium.getValue(t,"float"),n.top=this.pdfiumModule.pdfium.getValue(t+4,"float"),n.right=this.pdfiumModule.pdfium.getValue(t+8,"float"),n.bottom=this.pdfiumModule.pdfium.getValue(t+12,"float")),this.free(t),n}getHighlightRects(e,t,n,r,o){const i=this.pdfiumModule.FPDFText_CountRects(n,r,o),a=[];for(let r=0;r<i;r++){const o=this.malloc(8),i=this.malloc(8),s=this.malloc(8),u=this.malloc(8);if(!this.pdfiumModule.FPDFText_GetRect(n,r,i,o,s,u)){this.free(i),this.free(o),this.free(s),this.free(u);continue}const F=this.pdfiumModule.pdfium.getValue(i,"double"),l=this.pdfiumModule.pdfium.getValue(o,"double"),m=this.pdfiumModule.pdfium.getValue(s,"double"),d=this.pdfiumModule.pdfium.getValue(u,"double");this.free(i),this.free(o),this.free(s),this.free(u);const _=this.malloc(4),P=this.malloc(4);this.pdfiumModule.FPDF_PageToDevice(t,0,0,e.size.width,e.size.height,0,F,l,_,P);const c=this.pdfiumModule.pdfium.getValue(_,"i32"),h=this.pdfiumModule.pdfium.getValue(P,"i32");this.free(_),this.free(P);const g=Math.ceil(Math.abs(m-F)),D=Math.ceil(Math.abs(l-d));a.push({origin:{x:c,y:h},size:{width:g,height:D}})}return a}searchAllPages(e,t,n=[]){this.logger.debug(V,W,"searchAllPages",e,t,n),this.logger.perf(V,W,"SearchAllPages","Begin",e.id);const r=this.cache.getContext(e.id);if(!r)return this.logger.perf(V,W,"SearchAllPages","End",e.id),y.resolve({results:[],total:0});const o=2*(t.length+1),i=this.malloc(o);this.pdfiumModule.pdfium.stringToUTF16(t,i,o);const a=n.reduce(((e,t)=>e|t),M.None),s=[],u=y.create();return(async()=>{for(let t=0;t<e.pageCount;t++){const n=this.searchAllInPage(r,e.pages[t],i,a);s.push(...n)}this.free(i),this.logger.perf(V,W,"SearchAllPages","End",e.id),u.resolve({results:s,total:s.length})})().catch((t=>{this.free(i),this.logger.perf(V,W,"SearchAllPages","End",e.id),u.reject({code:C.Unknown,message:`Error searching document: ${t}`})})),u}buildContext(e,t,n,r=30){const o=/[\\s\\u00A0.,;:!?()\\[\\]{}<>/\\\\\\-"\'`"”\\u2013\\u2014]/;let i=t;for(;i>0&&o.test(e[i-1]);)i--;let a=0;for(;i>0&&a<r;)i--,o.test(e[i])||a++;i=(t=>{for(;t>0&&!o.test(e[t-1]);)t--;return t})(i);let s=t+n;for(;s<e.length&&o.test(e[s]);)s++;for(a=0;s<e.length&&a<r;)o.test(e[s])||a++,s++;s=(t=>{for(;t<e.length&&!o.test(e[t]);)t++;return t})(s);const u=e.slice(i,t).replace(/\\s+/g," ").trimStart(),F=e.slice(t,t+n),l=e.slice(t+n,s).replace(/\\s+/g," ").trimEnd();return{before:this.tidy(u),match:this.tidy(F),after:this.tidy(l),truncatedLeft:i>0,truncatedRight:s<e.length}}tidy(e){return e.replace(/-\\uFFFE\\s*/g,"").replace(/[\\uFFFE\\u00AD\\u200B\\u2060\\uFEFF]/g,"").replace(/\\s+/g," ")}searchAllInPage(e,t,n,r){const o=t.index,i=e.acquirePage(o),a=i.getTextPage(),s=this.pdfiumModule.FPDFText_CountChars(a),u=this.malloc(2*(s+1));this.pdfiumModule.FPDFText_GetText(a,0,s,u);const F=this.pdfiumModule.pdfium.UTF16ToString(u);this.free(u);const l=[],m=this.pdfiumModule.FPDFText_FindStart(a,n,r,0);for(;this.pdfiumModule.FPDFText_FindNext(m);){const e=this.pdfiumModule.FPDFText_GetSchResultIndex(m),n=this.pdfiumModule.FPDFText_GetSchCount(m),r=this.getHighlightRects(t,i.pagePtr,a,e,n),s=this.buildContext(F,e,n);l.push({pageIndex:o,charIndex:e,charCount:n,rects:r,context:s})}return this.pdfiumModule.FPDFText_FindClose(m),i.release(),l}}class X extends w{constructor(e){super(),this.wasmBinary=e}async prepare(){const e=this.wasmBinary,t=await r({wasmBinary:e});this.engine=new $(t),this.ready()}}let K=null;self.onmessage=async e=>{const{type:t,wasmUrl:n}=e.data;if("wasmInit"===t&&n&&!K)try{const e=await fetch(n),t=await e.arrayBuffer();K=new X(t),await K.prepare()}catch(e){const t=e instanceof Error?e.message:String(e);self.postMessage({type:"wasmError",error:t})}};\n'],{type:"application/javascript"})),{type:"module"});return n.postMessage({type:"wasmInit",wasmUrl:e}),new Il(n,t)}}),Ll=(Ol=import.meta.url,async function(e={}){var t,n,r,o=e,i=new Promise(((e,t)=>{n=e,r=t}));["_EPDF_RenderAnnotBitmap","_EPDFAnnot_GenerateAppearance","_EPDFAnnot_GenerateAppearanceWithBlend","_EPDFAnnot_GetBlendMode","_EPDFAnnot_GetBorderDashPattern","_EPDFAnnot_GetBorderDashPatternCount","_EPDFAnnot_GetBorderEffect","_EPDFAnnot_GetBorderStyle","_EPDFAnnot_GetColor","_EPDFAnnot_GetIntent","_EPDFAnnot_GetRectangleDifferences","_EPDFAnnot_GetRichContent","_EPDFAnnot_SetBorderStyle","_EPDFAnnot_SetColor","_EPDFAnnot_SetIntent","_FORM_CanRedo","_FORM_CanUndo","_FORM_DoDocumentAAction","_FORM_DoDocumentJSAction","_FORM_DoDocumentOpenAction","_FORM_DoPageAAction","_FORM_ForceToKillFocus","_FORM_GetFocusedAnnot","_FORM_GetFocusedText","_FORM_GetSelectedText","_FORM_IsIndexSelected","_FORM_OnAfterLoadPage","_FORM_OnBeforeClosePage","_FORM_OnChar","_FORM_OnFocus","_FORM_OnKeyDown","_FORM_OnKeyUp","_FORM_OnLButtonDoubleClick","_FORM_OnLButtonDown","_FORM_OnLButtonUp","_FORM_OnMouseMove","_FORM_OnMouseWheel","_FORM_OnRButtonDown","_FORM_OnRButtonUp","_FORM_Redo","_FORM_ReplaceAndKeepSelection","_FORM_ReplaceSelection","_FORM_SelectAllText","_FORM_SetFocusedAnnot","_FORM_SetIndexSelected","_FORM_Undo","_FPDF_AddInstalledFont","_FPDF_CloseDocument","_FPDF_ClosePage","_FPDF_CloseXObject","_FPDF_CopyViewerPreferences","_FPDF_CountNamedDests","_FPDF_CreateClipPath","_FPDF_CreateNewDocument","_FPDF_DestroyClipPath","_FPDF_DestroyLibrary","_FPDF_DeviceToPage","_FPDF_DocumentHasValidCrossReferenceTable","_FPDF_FFLDraw","_FPDF_FreeDefaultSystemFontInfo","_FPDF_GetDefaultSystemFontInfo","_FPDF_GetDefaultTTFMap","_FPDF_GetDefaultTTFMapCount","_FPDF_GetDefaultTTFMapEntry","_FPDF_GetDocPermissions","_FPDF_GetDocUserPermissions","_FPDF_GetFileIdentifier","_FPDF_GetFileVersion","_FPDF_GetFormType","_FPDF_GetLastError","_FPDF_GetMetaText","_FPDF_GetNamedDest","_FPDF_GetNamedDestByName","_FPDF_GetPageAAction","_FPDF_GetPageBoundingBox","_FPDF_GetPageCount","_FPDF_GetPageHeight","_FPDF_GetPageHeightF","_FPDF_GetPageLabel","_FPDF_GetPageSizeByIndex","_FPDF_GetPageSizeByIndexF","_FPDF_GetPageWidth","_FPDF_GetPageWidthF","_FPDF_GetSecurityHandlerRevision","_FPDF_GetSignatureCount","_FPDF_GetSignatureObject","_FPDF_GetTrailerEnds","_FPDF_GetXFAPacketContent","_FPDF_GetXFAPacketCount","_FPDF_GetXFAPacketName","_FPDF_ImportNPagesToOne","_FPDF_ImportPages","_FPDF_ImportPagesByIndex","_FPDF_InitLibrary","_FPDF_InitLibraryWithConfig","_FPDF_LoadCustomDocument","_FPDF_LoadDocument","_FPDF_LoadMemDocument","_FPDF_LoadMemDocument64","_FPDF_LoadPage","_FPDF_LoadXFA","_FPDF_MovePages","_FPDF_NewFormObjectFromXObject","_FPDF_NewXObjectFromPage","_FPDF_PageToDevice","_FPDF_RemoveFormFieldHighlight","_FPDF_RenderPage_Close","_FPDF_RenderPage_Continue","_FPDF_RenderPageBitmap","_FPDF_RenderPageBitmap_Start","_FPDF_RenderPageBitmapWithColorScheme_Start","_FPDF_RenderPageBitmapWithMatrix","_FPDF_SaveAsCopy","_FPDF_SaveWithVersion","_FPDF_SetFormFieldHighlightAlpha","_FPDF_SetFormFieldHighlightColor","_FPDF_SetSandBoxPolicy","_FPDF_SetSystemFontInfo","_FPDF_StructElement_Attr_CountChildren","_FPDF_StructElement_Attr_GetBlobValue","_FPDF_StructElement_Attr_GetBooleanValue","_FPDF_StructElement_Attr_GetChildAtIndex","_FPDF_StructElement_Attr_GetCount","_FPDF_StructElement_Attr_GetName","_FPDF_StructElement_Attr_GetNumberValue","_FPDF_StructElement_Attr_GetStringValue","_FPDF_StructElement_Attr_GetType","_FPDF_StructElement_Attr_GetValue","_FPDF_StructElement_CountChildren","_FPDF_StructElement_GetActualText","_FPDF_StructElement_GetAltText","_FPDF_StructElement_GetAttributeAtIndex","_FPDF_StructElement_GetAttributeCount","_FPDF_StructElement_GetChildAtIndex","_FPDF_StructElement_GetChildMarkedContentID","_FPDF_StructElement_GetID","_FPDF_StructElement_GetLang","_FPDF_StructElement_GetMarkedContentID","_FPDF_StructElement_GetMarkedContentIdAtIndex","_FPDF_StructElement_GetMarkedContentIdCount","_FPDF_StructElement_GetObjType","_FPDF_StructElement_GetParent","_FPDF_StructElement_GetStringAttribute","_FPDF_StructElement_GetTitle","_FPDF_StructElement_GetType","_FPDF_StructTree_Close","_FPDF_StructTree_CountChildren","_FPDF_StructTree_GetChildAtIndex","_FPDF_StructTree_GetForPage","_FPDF_VIEWERREF_GetDuplex","_FPDF_VIEWERREF_GetName","_FPDF_VIEWERREF_GetNumCopies","_FPDF_VIEWERREF_GetPrintPageRange","_FPDF_VIEWERREF_GetPrintPageRangeCount","_FPDF_VIEWERREF_GetPrintPageRangeElement","_FPDF_VIEWERREF_GetPrintScaling","_FPDFAction_GetDest","_FPDFAction_GetFilePath","_FPDFAction_GetType","_FPDFAction_GetURIPath","_FPDFAnnot_AddFileAttachment","_FPDFAnnot_AddInkStroke","_FPDFAnnot_AppendAttachmentPoints","_FPDFAnnot_AppendObject","_FPDFAnnot_CountAttachmentPoints","_FPDFAnnot_GetAP","_FPDFAnnot_GetAttachmentPoints","_FPDFAnnot_GetBorder","_FPDFAnnot_GetColor","_FPDFAnnot_GetFileAttachment","_FPDFAnnot_GetFlags","_FPDFAnnot_GetFocusableSubtypes","_FPDFAnnot_GetFocusableSubtypesCount","_FPDFAnnot_GetFontColor","_FPDFAnnot_GetFontSize","_FPDFAnnot_GetFormAdditionalActionJavaScript","_FPDFAnnot_GetFormControlCount","_FPDFAnnot_GetFormControlIndex","_FPDFAnnot_GetFormFieldAlternateName","_FPDFAnnot_GetFormFieldAtPoint","_FPDFAnnot_GetFormFieldExportValue","_FPDFAnnot_GetFormFieldFlags","_FPDFAnnot_GetFormFieldName","_FPDFAnnot_GetFormFieldType","_FPDFAnnot_GetFormFieldValue","_FPDFAnnot_GetInkListCount","_FPDFAnnot_GetInkListPath","_FPDFAnnot_GetLine","_FPDFAnnot_GetLink","_FPDFAnnot_GetLinkedAnnot","_FPDFAnnot_GetNumberValue","_FPDFAnnot_GetObject","_FPDFAnnot_GetObjectCount","_FPDFAnnot_GetOptionCount","_FPDFAnnot_GetOptionLabel","_FPDFAnnot_GetRect","_FPDFAnnot_GetStringValue","_FPDFAnnot_GetSubtype","_FPDFAnnot_GetValueType","_FPDFAnnot_GetVertices","_FPDFAnnot_HasAttachmentPoints","_FPDFAnnot_HasKey","_FPDFAnnot_IsChecked","_FPDFAnnot_IsObjectSupportedSubtype","_FPDFAnnot_IsOptionSelected","_FPDFAnnot_IsSupportedSubtype","_FPDFAnnot_RemoveInkList","_FPDFAnnot_RemoveObject","_FPDFAnnot_SetAP","_FPDFAnnot_SetAttachmentPoints","_FPDFAnnot_SetBorder","_FPDFAnnot_SetColor","_FPDFAnnot_SetFlags","_FPDFAnnot_SetFocusableSubtypes","_FPDFAnnot_SetFontColor","_FPDFAnnot_SetFormFieldFlags","_FPDFAnnot_SetRect","_FPDFAnnot_SetStringValue","_FPDFAnnot_SetURI","_FPDFAnnot_UpdateObject","_FPDFAttachment_GetFile","_FPDFAttachment_GetName","_FPDFAttachment_GetStringValue","_FPDFAttachment_GetSubtype","_FPDFAttachment_GetValueType","_FPDFAttachment_HasKey","_FPDFAttachment_SetFile","_FPDFAttachment_SetStringValue","_FPDFAvail_Create","_FPDFAvail_Destroy","_FPDFAvail_GetDocument","_FPDFAvail_GetFirstPageNum","_FPDFAvail_IsDocAvail","_FPDFAvail_IsFormAvail","_FPDFAvail_IsLinearized","_FPDFAvail_IsPageAvail","_FPDFBitmap_Create","_FPDFBitmap_CreateEx","_FPDFBitmap_Destroy","_FPDFBitmap_FillRect","_FPDFBitmap_GetBuffer","_FPDFBitmap_GetFormat","_FPDFBitmap_GetHeight","_FPDFBitmap_GetStride","_FPDFBitmap_GetWidth","_FPDFBookmark_Find","_FPDFBookmark_GetAction","_FPDFBookmark_GetCount","_FPDFBookmark_GetDest","_FPDFBookmark_GetFirstChild","_FPDFBookmark_GetNextSibling","_FPDFBookmark_GetTitle","_FPDFCatalog_IsTagged","_FPDFCatalog_SetLanguage","_FPDFClipPath_CountPaths","_FPDFClipPath_CountPathSegments","_FPDFClipPath_GetPathSegment","_FPDFDest_GetDestPageIndex","_FPDFDest_GetLocationInPage","_FPDFDest_GetView","_FPDFDoc_AddAttachment","_FPDFDoc_CloseJavaScriptAction","_FPDFDoc_DeleteAttachment","_FPDFDOC_ExitFormFillEnvironment","_FPDFDoc_GetAttachment","_FPDFDoc_GetAttachmentCount","_FPDFDoc_GetJavaScriptAction","_FPDFDoc_GetJavaScriptActionCount","_FPDFDoc_GetPageMode","_FPDFDOC_InitFormFillEnvironment","_FPDFFont_Close","_FPDFFont_GetAscent","_FPDFFont_GetBaseFontName","_FPDFFont_GetDescent","_FPDFFont_GetFamilyName","_FPDFFont_GetFlags","_FPDFFont_GetFontData","_FPDFFont_GetGlyphPath","_FPDFFont_GetGlyphWidth","_FPDFFont_GetIsEmbedded","_FPDFFont_GetItalicAngle","_FPDFFont_GetWeight","_FPDFFormObj_CountObjects","_FPDFFormObj_GetObject","_FPDFFormObj_RemoveObject","_FPDFGlyphPath_CountGlyphSegments","_FPDFGlyphPath_GetGlyphPathSegment","_FPDFImageObj_GetBitmap","_FPDFImageObj_GetIccProfileDataDecoded","_FPDFImageObj_GetImageDataDecoded","_FPDFImageObj_GetImageDataRaw","_FPDFImageObj_GetImageFilter","_FPDFImageObj_GetImageFilterCount","_FPDFImageObj_GetImageMetadata","_FPDFImageObj_GetImagePixelSize","_FPDFImageObj_GetRenderedBitmap","_FPDFImageObj_LoadJpegFile","_FPDFImageObj_LoadJpegFileInline","_FPDFImageObj_SetBitmap","_FPDFImageObj_SetMatrix","_FPDFJavaScriptAction_GetName","_FPDFJavaScriptAction_GetScript","_FPDFLink_CloseWebLinks","_FPDFLink_CountQuadPoints","_FPDFLink_CountRects","_FPDFLink_CountWebLinks","_FPDFLink_Enumerate","_FPDFLink_GetAction","_FPDFLink_GetAnnot","_FPDFLink_GetAnnotRect","_FPDFLink_GetDest","_FPDFLink_GetLinkAtPoint","_FPDFLink_GetLinkZOrderAtPoint","_FPDFLink_GetQuadPoints","_FPDFLink_GetRect","_FPDFLink_GetTextRange","_FPDFLink_GetURL","_FPDFLink_LoadWebLinks","_FPDFPage_CloseAnnot","_FPDFPage_CountObjects","_FPDFPage_CreateAnnot","_FPDFPage_Delete","_FPDFPage_Flatten","_FPDFPage_FormFieldZOrderAtPoint","_FPDFPage_GenerateContent","_FPDFPage_GetAnnot","_FPDFPage_GetAnnotCount","_FPDFPage_GetAnnotIndex","_FPDFPage_GetArtBox","_FPDFPage_GetBleedBox","_FPDFPage_GetCropBox","_FPDFPage_GetDecodedThumbnailData","_FPDFPage_GetMediaBox","_FPDFPage_GetObject","_FPDFPage_GetRawThumbnailData","_FPDFPage_GetRotation","_FPDFPage_GetThumbnailAsBitmap","_FPDFPage_GetTrimBox","_FPDFPage_HasFormFieldAtPoint","_FPDFPage_HasTransparency","_FPDFPage_InsertClipPath","_FPDFPage_InsertObject","_FPDFPage_InsertObjectAtIndex","_FPDFPage_New","_FPDFPage_RemoveAnnot","_FPDFPage_RemoveObject","_FPDFPage_SetArtBox","_FPDFPage_SetBleedBox","_FPDFPage_SetCropBox","_FPDFPage_SetMediaBox","_FPDFPage_SetRotation","_FPDFPage_SetTrimBox","_FPDFPage_TransformAnnots","_FPDFPage_TransFormWithClip","_FPDFPageObj_AddMark","_FPDFPageObj_CountMarks","_FPDFPageObj_CreateNewPath","_FPDFPageObj_CreateNewRect","_FPDFPageObj_CreateTextObj","_FPDFPageObj_Destroy","_FPDFPageObj_GetBounds","_FPDFPageObj_GetClipPath","_FPDFPageObj_GetDashArray","_FPDFPageObj_GetDashCount","_FPDFPageObj_GetDashPhase","_FPDFPageObj_GetFillColor","_FPDFPageObj_GetIsActive","_FPDFPageObj_GetLineCap","_FPDFPageObj_GetLineJoin","_FPDFPageObj_GetMark","_FPDFPageObj_GetMarkedContentID","_FPDFPageObj_GetMatrix","_FPDFPageObj_GetRotatedBounds","_FPDFPageObj_GetStrokeColor","_FPDFPageObj_GetStrokeWidth","_FPDFPageObj_GetType","_FPDFPageObj_HasTransparency","_FPDFPageObj_NewImageObj","_FPDFPageObj_NewTextObj","_FPDFPageObj_RemoveMark","_FPDFPageObj_SetBlendMode","_FPDFPageObj_SetDashArray","_FPDFPageObj_SetDashPhase","_FPDFPageObj_SetFillColor","_FPDFPageObj_SetIsActive","_FPDFPageObj_SetLineCap","_FPDFPageObj_SetLineJoin","_FPDFPageObj_SetMatrix","_FPDFPageObj_SetStrokeColor","_FPDFPageObj_SetStrokeWidth","_FPDFPageObj_Transform","_FPDFPageObj_TransformClipPath","_FPDFPageObj_TransformF","_FPDFPageObjMark_CountParams","_FPDFPageObjMark_GetName","_FPDFPageObjMark_GetParamBlobValue","_FPDFPageObjMark_GetParamIntValue","_FPDFPageObjMark_GetParamKey","_FPDFPageObjMark_GetParamStringValue","_FPDFPageObjMark_GetParamValueType","_FPDFPageObjMark_RemoveParam","_FPDFPageObjMark_SetBlobParam","_FPDFPageObjMark_SetIntParam","_FPDFPageObjMark_SetStringParam","_FPDFPath_BezierTo","_FPDFPath_Close","_FPDFPath_CountSegments","_FPDFPath_GetDrawMode","_FPDFPath_GetPathSegment","_FPDFPath_LineTo","_FPDFPath_MoveTo","_FPDFPath_SetDrawMode","_FPDFPathSegment_GetClose","_FPDFPathSegment_GetPoint","_FPDFPathSegment_GetType","_FPDFSignatureObj_GetByteRange","_FPDFSignatureObj_GetContents","_FPDFSignatureObj_GetDocMDPPermission","_FPDFSignatureObj_GetReason","_FPDFSignatureObj_GetSubFilter","_FPDFSignatureObj_GetTime","_FPDFText_ClosePage","_FPDFText_CountChars","_FPDFText_CountRects","_FPDFText_FindClose","_FPDFText_FindNext","_FPDFText_FindPrev","_FPDFText_FindStart","_FPDFText_GetBoundedText","_FPDFText_GetCharAngle","_FPDFText_GetCharBox","_FPDFText_GetCharIndexAtPos","_FPDFText_GetCharIndexFromTextIndex","_FPDFText_GetCharOrigin","_FPDFText_GetFillColor","_FPDFText_GetFontInfo","_FPDFText_GetFontSize","_FPDFText_GetFontWeight","_FPDFText_GetLooseCharBox","_FPDFText_GetMatrix","_FPDFText_GetRect","_FPDFText_GetSchCount","_FPDFText_GetSchResultIndex","_FPDFText_GetStrokeColor","_FPDFText_GetText","_FPDFText_GetTextIndexFromCharIndex","_FPDFText_GetTextObject","_FPDFText_GetUnicode","_FPDFText_HasUnicodeMapError","_FPDFText_IsGenerated","_FPDFText_IsHyphen","_FPDFText_LoadCidType2Font","_FPDFText_LoadFont","_FPDFText_LoadPage","_FPDFText_LoadStandardFont","_FPDFText_SetCharcodes","_FPDFText_SetText","_FPDFTextObj_GetFont","_FPDFTextObj_GetFontSize","_FPDFTextObj_GetRenderedBitmap","_FPDFTextObj_GetText","_FPDFTextObj_GetTextRenderMode","_FPDFTextObj_SetTextRenderMode","_PDFiumExt_CloseFileWriter","_PDFiumExt_CloseFormFillInfo","_PDFiumExt_ExitFormFillEnvironment","_PDFiumExt_GetFileWriterData","_PDFiumExt_GetFileWriterSize","_PDFiumExt_Init","_PDFiumExt_InitFormFillEnvironment","_PDFiumExt_OpenFileWriter","_PDFiumExt_OpenFormFillInfo","_PDFiumExt_SaveAsCopy","_malloc","_free","_memory","___indirect_function_table","onRuntimeInitialized"].forEach((e=>{Object.getOwnPropertyDescriptor(i,e)||Object.defineProperty(i,e,{get:()=>H("You are getting "+e+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js"),set:()=>H("You are setting "+e+" on the Promise object, instead of the instance. Use .then() to get called back with the instance, see the MODULARIZE docs in src/settings.js")})}));var a="object"==typeof window,s="function"==typeof importScripts;"object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node&&process.type;var l,u,d=!a&&!s,c=Object.assign({},o),m="./this.program",h="";if(d){if("object"==typeof window||"function"==typeof importScripts)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");u=e=>{if("function"==typeof readbuffer)return new Uint8Array(readbuffer(e));let t=read(e,"binary");return E("object"==typeof t),t},l=e=>new Promise(((t,n)=>{setTimeout((()=>t(u(e))))})),globalThis.clearTimeout??=e=>{},globalThis.setTimeout??=e=>"function"==typeof e?e():H(),"undefined"!=typeof print&&(globalThis.console??={},console.log=print,console.warn=console.error=globalThis.printErr??print)}else{if(!a&&!s)throw new Error("environment detection error");if(s?h=self.location.href:"undefined"!=typeof document&&document.currentScript&&(h=document.currentScript.src),Ol&&(h=Ol),h=h.startsWith("blob:")?"":h.substr(0,h.replace(/[?#].*/,"").lastIndexOf("/")+1),"object"!=typeof window&&"function"!=typeof importScripts)throw new Error("not compiled for this environment (did you build to HTML and try to run it not on the web, or set ENVIRONMENT to something - like node - and run it someplace else - like on the web?)");s&&(u=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),l=e=>(E(!Y(e),"readAsync does not work with file:// URLs"),fetch(e,{credentials:"same-origin"}).then((e=>e.ok?e.arrayBuffer():Promise.reject(new Error(e.status+" : "+e.url)))))}var g,F=o.print||console.log.bind(console),p=o.printErr||console.error.bind(console);Object.assign(o,c),c=null,g="fetchSettings",Object.getOwnPropertyDescriptor(o,g)&&H(`\`Module.${g}\` was supplied but \`${g}\` not included in INCOMING_MODULE_JS_API`),o.arguments&&o.arguments,ee("arguments","arguments_"),o.thisProgram&&(m=o.thisProgram),ee("thisProgram","thisProgram"),E(void 0===o.memoryInitializerPrefixURL,"Module.memoryInitializerPrefixURL option was removed, use Module.locateFile instead"),E(void 0===o.pthreadMainPrefixURL,"Module.pthreadMainPrefixURL option was removed, use Module.locateFile instead"),E(void 0===o.cdInitializerPrefixURL,"Module.cdInitializerPrefixURL option was removed, use Module.locateFile instead"),E(void 0===o.filePackagePrefixURL,"Module.filePackagePrefixURL option was removed, use Module.locateFile instead"),E(void 0===o.read,"Module.read option was removed"),E(void 0===o.readAsync,"Module.readAsync option was removed (modify readAsync in JS)"),E(void 0===o.readBinary,"Module.readBinary option was removed (modify readBinary in JS)"),E(void 0===o.setWindowTitle,"Module.setWindowTitle option was removed (modify emscripten_set_window_title in JS)"),E(void 0===o.TOTAL_MEMORY,"Module.TOTAL_MEMORY has been renamed Module.INITIAL_MEMORY"),ee("asm","wasmExports"),ee("readAsync","readAsync"),ee("readBinary","readBinary"),ee("setWindowTitle","setWindowTitle");var _,b=o.wasmBinary;ee("wasmBinary","wasmBinary"),"object"!=typeof WebAssembly&&p("no native wasm support detected");var f,P,D,v,y,w,x,A,S=!1;function E(e,t){e||H("Assertion failed"+(t?": "+t:""))}function C(){var e=_.buffer;o.HEAP8=f=new Int8Array(e),o.HEAP16=D=new Int16Array(e),o.HEAPU8=P=new Uint8Array(e),o.HEAPU16=v=new Uint16Array(e),o.HEAP32=y=new Int32Array(e),o.HEAPU32=w=new Uint32Array(e),o.HEAPF32=x=new Float32Array(e),o.HEAPF64=A=new Float64Array(e)}function M(){if(!S){var e=it();0==e&&(e+=4);var t=w[e>>2],n=w[e+4>>2];34821223==t&&2310721022==n||H(`Stack overflow! Stack cookie has been overwritten at ${ae(e)}, expected hex dwords 0x89BACDFE and 0x2135467, but received ${ae(n)} ${ae(t)}`),1668509029!=w[0]&&H("Runtime error: The application has corrupted its heap memory area (address zero)!")}}E(!o.STACK_SIZE,"STACK_SIZE can no longer be set at runtime.  Use -sSTACK_SIZE at link time"),E("undefined"!=typeof Int32Array&&"undefined"!=typeof Float64Array&&null!=Int32Array.prototype.subarray&&null!=Int32Array.prototype.set,"JS engine does not provide full typed array support"),E(!o.wasmMemory,"Use of `wasmMemory` detected.  Use -sIMPORTED_MEMORY to define wasmMemory externally"),E(!o.INITIAL_MEMORY,"Detected runtime INITIAL_MEMORY setting.  Use -sIMPORTED_MEMORY to define wasmMemory dynamically");var T=[],G=[],k=[],I=!1;function O(e){T.unshift(e)}function R(e){k.unshift(e)}E(Math.imul,"This browser does not support Math.imul(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),E(Math.fround,"This browser does not support Math.fround(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),E(Math.clz32,"This browser does not support Math.clz32(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill"),E(Math.trunc,"This browser does not support Math.trunc(), build with LEGACY_VM_SUPPORT or POLYFILL_OLD_MATH_FUNCTIONS to add in a polyfill");var L=0,j=null,N=null,B={};function z(e){for(var t=e;;){if(!B[e])return e;e=t+Math.random()}}function U(e){L++,o.monitorRunDependencies?.(L),e?(E(!B[e]),B[e]=1,null===j&&"undefined"!=typeof setInterval&&(j=setInterval((()=>{if(S)return clearInterval(j),void(j=null);var e=!1;for(var t in B)e||(e=!0,p("still waiting on run dependencies:")),p(`dependency: ${t}`);e&&p("(end of list)")}),1e4))):p("warning: run dependency added without ID")}function V(e){if(L--,o.monitorRunDependencies?.(L),e?(E(B[e]),delete B[e]):p("warning: run dependency removed without ID"),0==L&&(null!==j&&(clearInterval(j),j=null),N)){var t=N;N=null,t()}}function H(e){o.onAbort?.(e),p(e="Aborted("+e+")"),S=!0;var t=new WebAssembly.RuntimeError(e);throw r(t),t}var W,$,q,X=e=>e.startsWith("data:application/octet-stream;base64,"),Y=e=>e.startsWith("file://");function Z(e,t){return(...n)=>{E(I,`native function \`${e}\` called before runtime initialization`);var r=Ke[e];return E(r,`exported native function \`${e}\` not found`),E(n.length<=t,`native function \`${e}\` called with ${n.length} args but expects ${t}`),r(...n)}}function K(){if(o.locateFile){var e="pdfium.wasm";return X(e)?e:(t=e,o.locateFile?o.locateFile(t,h):h+t)}var t;return d?"pdfium.wasm":new URL("pdfium.wasm",import.meta.url).href}function J(e){if(e==W&&b)return new Uint8Array(b);if(u)return u(e);throw"both async and sync fetching of the wasm failed"}function Q(e,t,n){return function(e){return b?Promise.resolve().then((()=>J(e))):l(e).then((e=>new Uint8Array(e)),(()=>J(e)))}(e).then((e=>WebAssembly.instantiate(e,t))).then(n,(e=>{p(`failed to asynchronously prepare wasm: ${e}`),Y(W)&&p(`warning: Loading from a file URI (${W}) is not supported in most browsers. See https://emscripten.org/docs/getting_started/FAQ.html#how-do-i-run-a-local-webserver-for-testing-why-does-my-program-stall-in-downloading-or-preparing`),H(e)}))}if((()=>{var e=new Int16Array(1),t=new Int8Array(e.buffer);if(e[0]=25459,115!==t[0]||99!==t[1])throw"Runtime error: expected the system to be little-endian! (Run with -sSUPPORT_BIG_ENDIAN to bypass)"})(),o.ENVIRONMENT)throw new Error("Module.ENVIRONMENT has been deprecated. To force the environment, use the ENVIRONMENT compile-time option (for example, -sENVIRONMENT=web or -sENVIRONMENT=node)");function ee(e,t,n=!0){Object.getOwnPropertyDescriptor(o,e)||Object.defineProperty(o,e,{configurable:!0,get(){H(`\`Module.${e}\` has been replaced by \`${t}\``+(n?" (the initial value can be provided on Module, but after startup the value is only looked for on a local variable of that name)":""))}})}function te(e){return"FS_createPath"===e||"FS_createDataFile"===e||"FS_createPreloadedFile"===e||"FS_unlink"===e||"addRunDependency"===e||"FS_createLazyFile"===e||"FS_createDevice"===e||"removeRunDependency"===e}function ne(e,t){"undefined"==typeof globalThis||Object.getOwnPropertyDescriptor(globalThis,e)||Object.defineProperty(globalThis,e,{configurable:!0,get(){t()}})}function re(e,t){ne(e,(()=>{ue(`\`${e}\` is not longer defined by emscripten. ${t}`)}))}function oe(e){Object.getOwnPropertyDescriptor(o,e)||Object.defineProperty(o,e,{configurable:!0,get(){var t=`'${e}' was not exported. add it to EXPORTED_RUNTIME_METHODS (see the Emscripten FAQ)`;te(e)&&(t+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),H(t)}})}re("buffer","Please use HEAP8.buffer or wasmMemory.buffer"),re("asm","Please use wasmExports instead");var ie=e=>{e.forEach((e=>e(o)))};o.noExitRuntime;var ae=e=>(E("number"==typeof e),"0x"+(e>>>=0).toString(16).padStart(8,"0")),se=e=>at(e),le=()=>lt(),ue=e=>{ue.shown||={},ue.shown[e]||(ue.shown[e]=1,p(e))},de="undefined"!=typeof TextDecoder?new TextDecoder:void 0,ce=(e,t=0,n=NaN)=>{for(var r=t+n,o=t;e[o]&&!(o>=r);)++o;if(o-t>16&&e.buffer&&de)return de.decode(e.subarray(t,o));for(var i="";t<o;){var a=e[t++];if(128&a){var s=63&e[t++];if(192!=(224&a)){var l=63&e[t++];if(224==(240&a)?a=(15&a)<<12|s<<6|l:(240!=(248&a)&&ue("Invalid UTF-8 leading byte "+ae(a)+" encountered when deserializing a UTF-8 string in wasm memory to a JS string!"),a=(7&a)<<18|s<<12|l<<6|63&e[t++]),a<65536)i+=String.fromCharCode(a);else{var u=a-65536;i+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else i+=String.fromCharCode((31&a)<<6|s)}else i+=String.fromCharCode(a)}return i},me=(e,t)=>(E("number"==typeof e,`UTF8ToString expects a number (got ${typeof e})`),e?ce(P,e,t):"");function he(){E(null!=Ge.varargs);var e=y[+Ge.varargs>>2];return Ge.varargs+=4,e}var ge=he,Fe={isAbs:e=>"/"===e.charAt(0),splitPath:e=>/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1),normalizeArray:(e,t)=>{for(var n=0,r=e.length-1;r>=0;r--){var o=e[r];"."===o?e.splice(r,1):".."===o?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n;n--)e.unshift("..");return e},normalize:e=>{var t=Fe.isAbs(e),n="/"===e.substr(-1);return e=Fe.normalizeArray(e.split("/").filter((e=>!!e)),!t).join("/"),e||t||(e="."),e&&n&&(e+="/"),(t?"/":"")+e},dirname:e=>{var t=Fe.splitPath(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},basename:e=>{if("/"===e)return"/";var t=(e=(e=Fe.normalize(e)).replace(/\/$/,"")).lastIndexOf("/");return-1===t?e:e.substr(t+1)},join:(...e)=>Fe.normalize(e.join("/")),join2:(e,t)=>Fe.normalize(e+"/"+t)},pe=e=>(pe=(()=>{if("object"==typeof crypto&&"function"==typeof crypto.getRandomValues)return e=>crypto.getRandomValues(e);H("no cryptographic support found for randomDevice. consider polyfilling it if you want to use something insecure like Math.random(), e.g. put this in a --pre-js: var crypto = { getRandomValues: (array) => { for (var i = 0; i < array.length; i++) array[i] = (Math.random()*256)|0 } };")})())(e),_e={resolve:(...e)=>{for(var t="",n=!1,r=e.length-1;r>=-1&&!n;r--){var o=r>=0?e[r]:Te.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");if(!o)return"";t=o+"/"+t,n=Fe.isAbs(o)}return t=Fe.normalizeArray(t.split("/").filter((e=>!!e)),!n).join("/"),(n?"/":"")+t||"."},relative:(e,t)=>{function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=_e.resolve(e).substr(1),t=_e.resolve(t).substr(1);for(var r=n(e.split("/")),o=n(t.split("/")),i=Math.min(r.length,o.length),a=i,s=0;s<i;s++)if(r[s]!==o[s]){a=s;break}var l=[];for(s=a;s<r.length;s++)l.push("..");return(l=l.concat(o.slice(a))).join("/")}},be=[],fe=e=>{for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r<=127?t++:r<=2047?t+=2:r>=55296&&r<=57343?(t+=4,++n):t+=3}return t},Pe=(e,t,n,r)=>{if(E("string"==typeof e,`stringToUTF8Array expects a string (got ${typeof e})`),!(r>0))return 0;for(var o=n,i=n+r-1,a=0;a<e.length;++a){var s=e.charCodeAt(a);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++a)),s<=127){if(n>=i)break;t[n++]=s}else if(s<=2047){if(n+1>=i)break;t[n++]=192|s>>6,t[n++]=128|63&s}else if(s<=65535){if(n+2>=i)break;t[n++]=224|s>>12,t[n++]=128|s>>6&63,t[n++]=128|63&s}else{if(n+3>=i)break;s>1114111&&ue("Invalid Unicode code point "+ae(s)+" encountered when serializing a JS string to a UTF-8 string in wasm memory! (Valid unicode code points should be in range 0-0x10FFFF)."),t[n++]=240|s>>18,t[n++]=128|s>>12&63,t[n++]=128|s>>6&63,t[n++]=128|63&s}}return t[n]=0,n-o};function De(e,t,n){var r=n>0?n:fe(e)+1,o=new Array(r),i=Pe(e,o,0,o.length);return t&&(o.length=i),o}var ve,ye,we={ttys:[],init(){},shutdown(){},register(e,t){we.ttys[e]={input:[],output:[],ops:t},Te.registerDevice(e,we.stream_ops)},stream_ops:{open(e){var t=we.ttys[e.node.rdev];if(!t)throw new Te.ErrnoError(43);e.tty=t,e.seekable=!1},close(e){e.tty.ops.fsync(e.tty)},fsync(e){e.tty.ops.fsync(e.tty)},read(e,t,n,r,o){if(!e.tty||!e.tty.ops.get_char)throw new Te.ErrnoError(60);for(var i=0,a=0;a<r;a++){var s;try{s=e.tty.ops.get_char(e.tty)}catch(e){throw new Te.ErrnoError(29)}if(void 0===s&&0===i)throw new Te.ErrnoError(6);if(null==s)break;i++,t[n+a]=s}return i&&(e.node.timestamp=Date.now()),i},write(e,t,n,r,o){if(!e.tty||!e.tty.ops.put_char)throw new Te.ErrnoError(60);try{for(var i=0;i<r;i++)e.tty.ops.put_char(e.tty,t[n+i])}catch(e){throw new Te.ErrnoError(29)}return r&&(e.node.timestamp=Date.now()),i}},default_tty_ops:{get_char:e=>(()=>{if(!be.length){var e=null;if("undefined"!=typeof window&&"function"==typeof window.prompt?null!==(e=window.prompt("Input: "))&&(e+="\n"):"function"==typeof readline&&(e=readline())&&(e+="\n"),!e)return null;be=De(e,!0)}return be.shift()})(),put_char(e,t){null===t||10===t?(F(ce(e.output)),e.output=[]):0!=t&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(F(ce(e.output)),e.output=[])},ioctl_tcgets:e=>({c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}),ioctl_tcsets:(e,t,n)=>0,ioctl_tiocgwinsz:e=>[24,80]},default_tty1_ops:{put_char(e,t){null===t||10===t?(p(ce(e.output)),e.output=[]):0!=t&&e.output.push(t)},fsync(e){e.output&&e.output.length>0&&(p(ce(e.output)),e.output=[])}}},xe=(e,t)=>(E(t,"alignment argument is required"),Math.ceil(e/t)*t),Ae=e=>{e=xe(e,65536);var t=tt(65536,e);return t&&((e,t)=>{P.fill(0,e,e+t)})(t,e),t},Se={ops_table:null,mount:e=>Se.createNode(null,"/",16895,0),createNode(e,t,n,r){if(Te.isBlkdev(n)||Te.isFIFO(n))throw new Te.ErrnoError(63);Se.ops_table||={dir:{node:{getattr:Se.node_ops.getattr,setattr:Se.node_ops.setattr,lookup:Se.node_ops.lookup,mknod:Se.node_ops.mknod,rename:Se.node_ops.rename,unlink:Se.node_ops.unlink,rmdir:Se.node_ops.rmdir,readdir:Se.node_ops.readdir,symlink:Se.node_ops.symlink},stream:{llseek:Se.stream_ops.llseek}},file:{node:{getattr:Se.node_ops.getattr,setattr:Se.node_ops.setattr},stream:{llseek:Se.stream_ops.llseek,read:Se.stream_ops.read,write:Se.stream_ops.write,allocate:Se.stream_ops.allocate,mmap:Se.stream_ops.mmap,msync:Se.stream_ops.msync}},link:{node:{getattr:Se.node_ops.getattr,setattr:Se.node_ops.setattr,readlink:Se.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Se.node_ops.getattr,setattr:Se.node_ops.setattr},stream:Te.chrdev_stream_ops}};var o=Te.createNode(e,t,n,r);return Te.isDir(o.mode)?(o.node_ops=Se.ops_table.dir.node,o.stream_ops=Se.ops_table.dir.stream,o.contents={}):Te.isFile(o.mode)?(o.node_ops=Se.ops_table.file.node,o.stream_ops=Se.ops_table.file.stream,o.usedBytes=0,o.contents=null):Te.isLink(o.mode)?(o.node_ops=Se.ops_table.link.node,o.stream_ops=Se.ops_table.link.stream):Te.isChrdev(o.mode)&&(o.node_ops=Se.ops_table.chrdev.node,o.stream_ops=Se.ops_table.chrdev.stream),o.timestamp=Date.now(),e&&(e.contents[t]=o,e.timestamp=o.timestamp),o},getFileDataAsTypedArray:e=>e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0),expandFileStorage(e,t){var n=e.contents?e.contents.length:0;if(!(n>=t)){t=Math.max(t,n*(n<1048576?2:1.125)>>>0),0!=n&&(t=Math.max(t,256));var r=e.contents;e.contents=new Uint8Array(t),e.usedBytes>0&&e.contents.set(r.subarray(0,e.usedBytes),0)}},resizeFileStorage(e,t){if(e.usedBytes!=t)if(0==t)e.contents=null,e.usedBytes=0;else{var n=e.contents;e.contents=new Uint8Array(t),n&&e.contents.set(n.subarray(0,Math.min(t,e.usedBytes))),e.usedBytes=t}},node_ops:{getattr(e){var t={};return t.dev=Te.isChrdev(e.mode)?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,Te.isDir(e.mode)?t.size=4096:Te.isFile(e.mode)?t.size=e.usedBytes:Te.isLink(e.mode)?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},setattr(e,t){void 0!==t.mode&&(e.mode=t.mode),void 0!==t.timestamp&&(e.timestamp=t.timestamp),void 0!==t.size&&Se.resizeFileStorage(e,t.size)},lookup(e,t){throw Te.genericErrors[44]},mknod:(e,t,n,r)=>Se.createNode(e,t,n,r),rename(e,t,n){if(Te.isDir(e.mode)){var r;try{r=Te.lookupNode(t,n)}catch(e){}if(r)for(var o in r.contents)throw new Te.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=n,t.contents[n]=e,t.timestamp=e.parent.timestamp},unlink(e,t){delete e.contents[t],e.timestamp=Date.now()},rmdir(e,t){var n=Te.lookupNode(e,t);for(var r in n.contents)throw new Te.ErrnoError(55);delete e.contents[t],e.timestamp=Date.now()},readdir(e){var t=[".",".."];for(var n of Object.keys(e.contents))t.push(n);return t},symlink(e,t,n){var r=Se.createNode(e,t,41471,0);return r.link=n,r},readlink(e){if(!Te.isLink(e.mode))throw new Te.ErrnoError(28);return e.link}},stream_ops:{read(e,t,n,r,o){var i=e.node.contents;if(o>=e.node.usedBytes)return 0;var a=Math.min(e.node.usedBytes-o,r);if(E(a>=0),a>8&&i.subarray)t.set(i.subarray(o,o+a),n);else for(var s=0;s<a;s++)t[n+s]=i[o+s];return a},write(e,t,n,r,o,i){if(E(!(t instanceof ArrayBuffer)),t.buffer===f.buffer&&(i=!1),!r)return 0;var a=e.node;if(a.timestamp=Date.now(),t.subarray&&(!a.contents||a.contents.subarray)){if(i)return E(0===o,"canOwn must imply no weird position inside the file"),a.contents=t.subarray(n,n+r),a.usedBytes=r,r;if(0===a.usedBytes&&0===o)return a.contents=t.slice(n,n+r),a.usedBytes=r,r;if(o+r<=a.usedBytes)return a.contents.set(t.subarray(n,n+r),o),r}if(Se.expandFileStorage(a,o+r),a.contents.subarray&&t.subarray)a.contents.set(t.subarray(n,n+r),o);else for(var s=0;s<r;s++)a.contents[o+s]=t[n+s];return a.usedBytes=Math.max(a.usedBytes,o+r),r},llseek(e,t,n){var r=t;if(1===n?r+=e.position:2===n&&Te.isFile(e.node.mode)&&(r+=e.node.usedBytes),r<0)throw new Te.ErrnoError(28);return r},allocate(e,t,n){Se.expandFileStorage(e.node,t+n),e.node.usedBytes=Math.max(e.node.usedBytes,t+n)},mmap(e,t,n,r,o){if(!Te.isFile(e.node.mode))throw new Te.ErrnoError(43);var i,a,s=e.node.contents;if(2&o||!s||s.buffer!==f.buffer){if(a=!0,!(i=Ae(t)))throw new Te.ErrnoError(48);s&&((n>0||n+t<s.length)&&(s=s.subarray?s.subarray(n,n+t):Array.prototype.slice.call(s,n,n+t)),f.set(s,i))}else a=!1,i=s.byteOffset;return{ptr:i,allocated:a}},msync:(e,t,n,r,o)=>(Se.stream_ops.write(e,t,0,r,n,!1),0)}},Ee=o.preloadPlugins||[],Ce=(e,t)=>{var n=0;return e&&(n|=365),t&&(n|=146),n},Me={EPERM:63,ENOENT:44,ESRCH:71,EINTR:27,EIO:29,ENXIO:60,E2BIG:1,ENOEXEC:45,EBADF:8,ECHILD:12,EAGAIN:6,EWOULDBLOCK:6,ENOMEM:48,EACCES:2,EFAULT:21,ENOTBLK:105,EBUSY:10,EEXIST:20,EXDEV:75,ENODEV:43,ENOTDIR:54,EISDIR:31,EINVAL:28,ENFILE:41,EMFILE:33,ENOTTY:59,ETXTBSY:74,EFBIG:22,ENOSPC:51,ESPIPE:70,EROFS:69,EMLINK:34,EPIPE:64,EDOM:18,ERANGE:68,ENOMSG:49,EIDRM:24,ECHRNG:106,EL2NSYNC:156,EL3HLT:107,EL3RST:108,ELNRNG:109,EUNATCH:110,ENOCSI:111,EL2HLT:112,EDEADLK:16,ENOLCK:46,EBADE:113,EBADR:114,EXFULL:115,ENOANO:104,EBADRQC:103,EBADSLT:102,EDEADLOCK:16,EBFONT:101,ENOSTR:100,ENODATA:116,ETIME:117,ENOSR:118,ENONET:119,ENOPKG:120,EREMOTE:121,ENOLINK:47,EADV:122,ESRMNT:123,ECOMM:124,EPROTO:65,EMULTIHOP:36,EDOTDOT:125,EBADMSG:9,ENOTUNIQ:126,EBADFD:127,EREMCHG:128,ELIBACC:129,ELIBBAD:130,ELIBSCN:131,ELIBMAX:132,ELIBEXEC:133,ENOSYS:52,ENOTEMPTY:55,ENAMETOOLONG:37,ELOOP:32,EOPNOTSUPP:138,EPFNOSUPPORT:139,ECONNRESET:15,ENOBUFS:42,EAFNOSUPPORT:5,EPROTOTYPE:67,ENOTSOCK:57,ENOPROTOOPT:50,ESHUTDOWN:140,ECONNREFUSED:14,EADDRINUSE:3,ECONNABORTED:13,ENETUNREACH:40,ENETDOWN:38,ETIMEDOUT:73,EHOSTDOWN:142,EHOSTUNREACH:23,EINPROGRESS:26,EALREADY:7,EDESTADDRREQ:17,EMSGSIZE:35,EPROTONOSUPPORT:66,ESOCKTNOSUPPORT:137,EADDRNOTAVAIL:4,ENETRESET:39,EISCONN:30,ENOTCONN:53,ETOOMANYREFS:141,EUSERS:136,EDQUOT:19,ESTALE:72,ENOTSUP:138,ENOMEDIUM:148,EILSEQ:25,EOVERFLOW:61,ECANCELED:11,ENOTRECOVERABLE:56,EOWNERDEAD:62,ESTRPIPE:135},Te={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:class extends Error{constructor(e){for(var t in super(I?(e=>me(nt(e)))(e):""),this.name="ErrnoError",this.errno=e,Me)if(Me[t]===e){this.code=t;break}}},genericErrors:{},filesystems:null,syncFSRequests:0,readFiles:{},FSStream:class{constructor(){this.shared={}}get object(){return this.node}set object(e){this.node=e}get isRead(){return 1!=(2097155&this.flags)}get isWrite(){return!!(2097155&this.flags)}get isAppend(){return 1024&this.flags}get flags(){return this.shared.flags}set flags(e){this.shared.flags=e}get position(){return this.shared.position}set position(e){this.shared.position=e}},FSNode:class{constructor(e,t,n,r){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=Te.nextInode++,this.name=t,this.mode=n,this.node_ops={},this.stream_ops={},this.rdev=r,this.readMode=365,this.writeMode=146}get read(){return(this.mode&this.readMode)===this.readMode}set read(e){e?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(e){e?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return Te.isDir(this.mode)}get isDevice(){return Te.isChrdev(this.mode)}},lookupPath(e,t={}){if(!(e=_e.resolve(e)))return{path:"",node:null};if((t=Object.assign({follow_mount:!0,recurse_count:0},t)).recurse_count>8)throw new Te.ErrnoError(32);for(var n=e.split("/").filter((e=>!!e)),r=Te.root,o="/",i=0;i<n.length;i++){var a=i===n.length-1;if(a&&t.parent)break;if(r=Te.lookupNode(r,n[i]),o=Fe.join2(o,n[i]),Te.isMountpoint(r)&&(!a||a&&t.follow_mount)&&(r=r.mounted.root),!a||t.follow)for(var s=0;Te.isLink(r.mode);){var l=Te.readlink(o);if(o=_e.resolve(Fe.dirname(o),l),r=Te.lookupPath(o,{recurse_count:t.recurse_count+1}).node,s++>40)throw new Te.ErrnoError(32)}}return{path:o,node:r}},getPath(e){for(var t;;){if(Te.isRoot(e)){var n=e.mount.mountpoint;return t?"/"!==n[n.length-1]?`${n}/${t}`:n+t:n}t=t?`${e.name}/${t}`:e.name,e=e.parent}},hashName(e,t){for(var n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(e+n>>>0)%Te.nameTable.length},hashAddNode(e){var t=Te.hashName(e.parent.id,e.name);e.name_next=Te.nameTable[t],Te.nameTable[t]=e},hashRemoveNode(e){var t=Te.hashName(e.parent.id,e.name);if(Te.nameTable[t]===e)Te.nameTable[t]=e.name_next;else for(var n=Te.nameTable[t];n;){if(n.name_next===e){n.name_next=e.name_next;break}n=n.name_next}},lookupNode(e,t){var n=Te.mayLookup(e);if(n)throw new Te.ErrnoError(n);for(var r=Te.hashName(e.id,t),o=Te.nameTable[r];o;o=o.name_next){var i=o.name;if(o.parent.id===e.id&&i===t)return o}return Te.lookup(e,t)},createNode(e,t,n,r){E("object"==typeof e);var o=new Te.FSNode(e,t,n,r);return Te.hashAddNode(o),o},destroyNode(e){Te.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>32768==(61440&e),isDir:e=>16384==(61440&e),isLink:e=>40960==(61440&e),isChrdev:e=>8192==(61440&e),isBlkdev:e=>24576==(61440&e),isFIFO:e=>4096==(61440&e),isSocket:e=>!(49152&~e),flagsToPermissionString(e){var t=["r","w","rw"][3&e];return 512&e&&(t+="w"),t},nodePermissions:(e,t)=>Te.ignorePermissions||(!t.includes("r")||292&e.mode)&&(!t.includes("w")||146&e.mode)&&(!t.includes("x")||73&e.mode)?0:2,mayLookup(e){if(!Te.isDir(e.mode))return 54;var t=Te.nodePermissions(e,"x");return t||(e.node_ops.lookup?0:2)},mayCreate(e,t){try{return Te.lookupNode(e,t),20}catch(e){}return Te.nodePermissions(e,"wx")},mayDelete(e,t,n){var r;try{r=Te.lookupNode(e,t)}catch(e){return e.errno}var o=Te.nodePermissions(e,"wx");if(o)return o;if(n){if(!Te.isDir(r.mode))return 54;if(Te.isRoot(r)||Te.getPath(r)===Te.cwd())return 10}else if(Te.isDir(r.mode))return 31;return 0},mayOpen:(e,t)=>e?Te.isLink(e.mode)?32:Te.isDir(e.mode)&&("r"!==Te.flagsToPermissionString(t)||512&t)?31:Te.nodePermissions(e,Te.flagsToPermissionString(t)):44,MAX_OPEN_FDS:4096,nextfd(){for(var e=0;e<=Te.MAX_OPEN_FDS;e++)if(!Te.streams[e])return e;throw new Te.ErrnoError(33)},getStreamChecked(e){var t=Te.getStream(e);if(!t)throw new Te.ErrnoError(8);return t},getStream:e=>Te.streams[e],createStream:(e,t=-1)=>(E(t>=-1),e=Object.assign(new Te.FSStream,e),-1==t&&(t=Te.nextfd()),e.fd=t,Te.streams[t]=e,e),closeStream(e){Te.streams[e]=null},dupStream(e,t=-1){var n=Te.createStream(e,t);return n.stream_ops?.dup?.(n),n},chrdev_stream_ops:{open(e){var t=Te.getDevice(e.node.rdev);e.stream_ops=t.stream_ops,e.stream_ops.open?.(e)},llseek(){throw new Te.ErrnoError(70)}},major:e=>e>>8,minor:e=>255&e,makedev:(e,t)=>e<<8|t,registerDevice(e,t){Te.devices[e]={stream_ops:t}},getDevice:e=>Te.devices[e],getMounts(e){for(var t=[],n=[e];n.length;){var r=n.pop();t.push(r),n.push(...r.mounts)}return t},syncfs(e,t){"function"==typeof e&&(t=e,e=!1),Te.syncFSRequests++,Te.syncFSRequests>1&&p(`warning: ${Te.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var n=Te.getMounts(Te.root.mount),r=0;function o(e){return E(Te.syncFSRequests>0),Te.syncFSRequests--,t(e)}function i(e){if(e)return i.errored?void 0:(i.errored=!0,o(e));++r>=n.length&&o(null)}n.forEach((t=>{if(!t.type.syncfs)return i(null);t.type.syncfs(t,e,i)}))},mount(e,t,n){if("string"==typeof e)throw e;var r,o="/"===n,i=!n;if(o&&Te.root)throw new Te.ErrnoError(10);if(!o&&!i){var a=Te.lookupPath(n,{follow_mount:!1});if(n=a.path,r=a.node,Te.isMountpoint(r))throw new Te.ErrnoError(10);if(!Te.isDir(r.mode))throw new Te.ErrnoError(54)}var s={type:e,opts:t,mountpoint:n,mounts:[]},l=e.mount(s);return l.mount=s,s.root=l,o?Te.root=l:r&&(r.mounted=s,r.mount&&r.mount.mounts.push(s)),l},unmount(e){var t=Te.lookupPath(e,{follow_mount:!1});if(!Te.isMountpoint(t.node))throw new Te.ErrnoError(28);var n=t.node,r=n.mounted,o=Te.getMounts(r);Object.keys(Te.nameTable).forEach((e=>{for(var t=Te.nameTable[e];t;){var n=t.name_next;o.includes(t.mount)&&Te.destroyNode(t),t=n}})),n.mounted=null;var i=n.mount.mounts.indexOf(r);E(-1!==i),n.mount.mounts.splice(i,1)},lookup:(e,t)=>e.node_ops.lookup(e,t),mknod(e,t,n){var r=Te.lookupPath(e,{parent:!0}).node,o=Fe.basename(e);if(!o||"."===o||".."===o)throw new Te.ErrnoError(28);var i=Te.mayCreate(r,o);if(i)throw new Te.ErrnoError(i);if(!r.node_ops.mknod)throw new Te.ErrnoError(63);return r.node_ops.mknod(r,o,t,n)},create:(e,t)=>(t=void 0!==t?t:438,t&=4095,t|=32768,Te.mknod(e,t,0)),mkdir:(e,t)=>(t=void 0!==t?t:511,t&=1023,t|=16384,Te.mknod(e,t,0)),mkdirTree(e,t){for(var n=e.split("/"),r="",o=0;o<n.length;++o)if(n[o]){r+="/"+n[o];try{Te.mkdir(r,t)}catch(e){if(20!=e.errno)throw e}}},mkdev:(e,t,n)=>(void 0===n&&(n=t,t=438),t|=8192,Te.mknod(e,t,n)),symlink(e,t){if(!_e.resolve(e))throw new Te.ErrnoError(44);var n=Te.lookupPath(t,{parent:!0}).node;if(!n)throw new Te.ErrnoError(44);var r=Fe.basename(t),o=Te.mayCreate(n,r);if(o)throw new Te.ErrnoError(o);if(!n.node_ops.symlink)throw new Te.ErrnoError(63);return n.node_ops.symlink(n,r,e)},rename(e,t){var n,r,o=Fe.dirname(e),i=Fe.dirname(t),a=Fe.basename(e),s=Fe.basename(t);if(n=Te.lookupPath(e,{parent:!0}).node,r=Te.lookupPath(t,{parent:!0}).node,!n||!r)throw new Te.ErrnoError(44);if(n.mount!==r.mount)throw new Te.ErrnoError(75);var l,u=Te.lookupNode(n,a),d=_e.relative(e,i);if("."!==d.charAt(0))throw new Te.ErrnoError(28);if("."!==(d=_e.relative(t,o)).charAt(0))throw new Te.ErrnoError(55);try{l=Te.lookupNode(r,s)}catch(e){}if(u!==l){var c=Te.isDir(u.mode),m=Te.mayDelete(n,a,c);if(m)throw new Te.ErrnoError(m);if(m=l?Te.mayDelete(r,s,c):Te.mayCreate(r,s))throw new Te.ErrnoError(m);if(!n.node_ops.rename)throw new Te.ErrnoError(63);if(Te.isMountpoint(u)||l&&Te.isMountpoint(l))throw new Te.ErrnoError(10);if(r!==n&&(m=Te.nodePermissions(n,"w")))throw new Te.ErrnoError(m);Te.hashRemoveNode(u);try{n.node_ops.rename(u,r,s),u.parent=r}catch(e){throw e}finally{Te.hashAddNode(u)}}},rmdir(e){var t=Te.lookupPath(e,{parent:!0}).node,n=Fe.basename(e),r=Te.lookupNode(t,n),o=Te.mayDelete(t,n,!0);if(o)throw new Te.ErrnoError(o);if(!t.node_ops.rmdir)throw new Te.ErrnoError(63);if(Te.isMountpoint(r))throw new Te.ErrnoError(10);t.node_ops.rmdir(t,n),Te.destroyNode(r)},readdir(e){var t=Te.lookupPath(e,{follow:!0}).node;if(!t.node_ops.readdir)throw new Te.ErrnoError(54);return t.node_ops.readdir(t)},unlink(e){var t=Te.lookupPath(e,{parent:!0}).node;if(!t)throw new Te.ErrnoError(44);var n=Fe.basename(e),r=Te.lookupNode(t,n),o=Te.mayDelete(t,n,!1);if(o)throw new Te.ErrnoError(o);if(!t.node_ops.unlink)throw new Te.ErrnoError(63);if(Te.isMountpoint(r))throw new Te.ErrnoError(10);t.node_ops.unlink(t,n),Te.destroyNode(r)},readlink(e){var t=Te.lookupPath(e).node;if(!t)throw new Te.ErrnoError(44);if(!t.node_ops.readlink)throw new Te.ErrnoError(28);return _e.resolve(Te.getPath(t.parent),t.node_ops.readlink(t))},stat(e,t){var n=Te.lookupPath(e,{follow:!t}).node;if(!n)throw new Te.ErrnoError(44);if(!n.node_ops.getattr)throw new Te.ErrnoError(63);return n.node_ops.getattr(n)},lstat:e=>Te.stat(e,!0),chmod(e,t,n){var r;if(!(r="string"==typeof e?Te.lookupPath(e,{follow:!n}).node:e).node_ops.setattr)throw new Te.ErrnoError(63);r.node_ops.setattr(r,{mode:4095&t|-4096&r.mode,timestamp:Date.now()})},lchmod(e,t){Te.chmod(e,t,!0)},fchmod(e,t){var n=Te.getStreamChecked(e);Te.chmod(n.node,t)},chown(e,t,n,r){var o;if(!(o="string"==typeof e?Te.lookupPath(e,{follow:!r}).node:e).node_ops.setattr)throw new Te.ErrnoError(63);o.node_ops.setattr(o,{timestamp:Date.now()})},lchown(e,t,n){Te.chown(e,t,n,!0)},fchown(e,t,n){var r=Te.getStreamChecked(e);Te.chown(r.node,t,n)},truncate(e,t){if(t<0)throw new Te.ErrnoError(28);var n;if(!(n="string"==typeof e?Te.lookupPath(e,{follow:!0}).node:e).node_ops.setattr)throw new Te.ErrnoError(63);if(Te.isDir(n.mode))throw new Te.ErrnoError(31);if(!Te.isFile(n.mode))throw new Te.ErrnoError(28);var r=Te.nodePermissions(n,"w");if(r)throw new Te.ErrnoError(r);n.node_ops.setattr(n,{size:t,timestamp:Date.now()})},ftruncate(e,t){var n=Te.getStreamChecked(e);if(!(2097155&n.flags))throw new Te.ErrnoError(28);Te.truncate(n.node,t)},utime(e,t,n){var r=Te.lookupPath(e,{follow:!0}).node;r.node_ops.setattr(r,{timestamp:Math.max(t,n)})},open(e,t,n){if(""===e)throw new Te.ErrnoError(44);var r;if(n=64&(t="string"==typeof t?(e=>{var t={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[e];if(void 0===t)throw new Error(`Unknown file open mode: ${e}`);return t})(t):t)?4095&(n=void 0===n?438:n)|32768:0,"object"==typeof e)r=e;else{e=Fe.normalize(e);try{r=Te.lookupPath(e,{follow:!(131072&t)}).node}catch(e){}}var i=!1;if(64&t)if(r){if(128&t)throw new Te.ErrnoError(20)}else r=Te.mknod(e,n,0),i=!0;if(!r)throw new Te.ErrnoError(44);if(Te.isChrdev(r.mode)&&(t&=-513),65536&t&&!Te.isDir(r.mode))throw new Te.ErrnoError(54);if(!i){var a=Te.mayOpen(r,t);if(a)throw new Te.ErrnoError(a)}512&t&&!i&&Te.truncate(r,0),t&=-131713;var s=Te.createStream({node:r,path:Te.getPath(r),flags:t,seekable:!0,position:0,stream_ops:r.stream_ops,ungotten:[],error:!1});return s.stream_ops.open&&s.stream_ops.open(s),!o.logReadFiles||1&t||e in Te.readFiles||(Te.readFiles[e]=1),s},close(e){if(Te.isClosed(e))throw new Te.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(e){throw e}finally{Te.closeStream(e.fd)}e.fd=null},isClosed:e=>null===e.fd,llseek(e,t,n){if(Te.isClosed(e))throw new Te.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new Te.ErrnoError(70);if(0!=n&&1!=n&&2!=n)throw new Te.ErrnoError(28);return e.position=e.stream_ops.llseek(e,t,n),e.ungotten=[],e.position},read(e,t,n,r,o){if(E(n>=0),r<0||o<0)throw new Te.ErrnoError(28);if(Te.isClosed(e))throw new Te.ErrnoError(8);if(1==(2097155&e.flags))throw new Te.ErrnoError(8);if(Te.isDir(e.node.mode))throw new Te.ErrnoError(31);if(!e.stream_ops.read)throw new Te.ErrnoError(28);var i=void 0!==o;if(i){if(!e.seekable)throw new Te.ErrnoError(70)}else o=e.position;var a=e.stream_ops.read(e,t,n,r,o);return i||(e.position+=a),a},write(e,t,n,r,o,i){if(E(n>=0),r<0||o<0)throw new Te.ErrnoError(28);if(Te.isClosed(e))throw new Te.ErrnoError(8);if(!(2097155&e.flags))throw new Te.ErrnoError(8);if(Te.isDir(e.node.mode))throw new Te.ErrnoError(31);if(!e.stream_ops.write)throw new Te.ErrnoError(28);e.seekable&&1024&e.flags&&Te.llseek(e,0,2);var a=void 0!==o;if(a){if(!e.seekable)throw new Te.ErrnoError(70)}else o=e.position;var s=e.stream_ops.write(e,t,n,r,o,i);return a||(e.position+=s),s},allocate(e,t,n){if(Te.isClosed(e))throw new Te.ErrnoError(8);if(t<0||n<=0)throw new Te.ErrnoError(28);if(!(2097155&e.flags))throw new Te.ErrnoError(8);if(!Te.isFile(e.node.mode)&&!Te.isDir(e.node.mode))throw new Te.ErrnoError(43);if(!e.stream_ops.allocate)throw new Te.ErrnoError(138);e.stream_ops.allocate(e,t,n)},mmap(e,t,n,r,o){if(2&r&&!(2&o)&&2!=(2097155&e.flags))throw new Te.ErrnoError(2);if(1==(2097155&e.flags))throw new Te.ErrnoError(2);if(!e.stream_ops.mmap)throw new Te.ErrnoError(43);if(!t)throw new Te.ErrnoError(28);return e.stream_ops.mmap(e,t,n,r,o)},msync:(e,t,n,r,o)=>(E(n>=0),e.stream_ops.msync?e.stream_ops.msync(e,t,n,r,o):0),ioctl(e,t,n){if(!e.stream_ops.ioctl)throw new Te.ErrnoError(59);return e.stream_ops.ioctl(e,t,n)},readFile(e,t={}){if(t.flags=t.flags||0,t.encoding=t.encoding||"binary","utf8"!==t.encoding&&"binary"!==t.encoding)throw new Error(`Invalid encoding type "${t.encoding}"`);var n,r=Te.open(e,t.flags),o=Te.stat(e).size,i=new Uint8Array(o);return Te.read(r,i,0,o,0),"utf8"===t.encoding?n=ce(i):"binary"===t.encoding&&(n=i),Te.close(r),n},writeFile(e,t,n={}){n.flags=n.flags||577;var r=Te.open(e,n.flags,n.mode);if("string"==typeof t){var o=new Uint8Array(fe(t)+1),i=Pe(t,o,0,o.length);Te.write(r,o,0,i,void 0,n.canOwn)}else{if(!ArrayBuffer.isView(t))throw new Error("Unsupported data type");Te.write(r,t,0,t.byteLength,void 0,n.canOwn)}Te.close(r)},cwd:()=>Te.currentPath,chdir(e){var t=Te.lookupPath(e,{follow:!0});if(null===t.node)throw new Te.ErrnoError(44);if(!Te.isDir(t.node.mode))throw new Te.ErrnoError(54);var n=Te.nodePermissions(t.node,"x");if(n)throw new Te.ErrnoError(n);Te.currentPath=t.path},createDefaultDirectories(){Te.mkdir("/tmp"),Te.mkdir("/home"),Te.mkdir("/home/web_user")},createDefaultDevices(){Te.mkdir("/dev"),Te.registerDevice(Te.makedev(1,3),{read:()=>0,write:(e,t,n,r,o)=>r}),Te.mkdev("/dev/null",Te.makedev(1,3)),we.register(Te.makedev(5,0),we.default_tty_ops),we.register(Te.makedev(6,0),we.default_tty1_ops),Te.mkdev("/dev/tty",Te.makedev(5,0)),Te.mkdev("/dev/tty1",Te.makedev(6,0));var e=new Uint8Array(1024),t=0,n=()=>(0===t&&(t=pe(e).byteLength),e[--t]);Te.createDevice("/dev","random",n),Te.createDevice("/dev","urandom",n),Te.mkdir("/dev/shm"),Te.mkdir("/dev/shm/tmp")},createSpecialDirectories(){Te.mkdir("/proc");var e=Te.mkdir("/proc/self");Te.mkdir("/proc/self/fd"),Te.mount({mount(){var t=Te.createNode(e,"fd",16895,73);return t.node_ops={lookup(e,t){var n=+t,r=Te.getStreamChecked(n),o={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>r.path}};return o.parent=o,o}},t}},{},"/proc/self/fd")},createStandardStreams(e,t,n){e?Te.createDevice("/dev","stdin",e):Te.symlink("/dev/tty","/dev/stdin"),t?Te.createDevice("/dev","stdout",null,t):Te.symlink("/dev/tty","/dev/stdout"),n?Te.createDevice("/dev","stderr",null,n):Te.symlink("/dev/tty1","/dev/stderr");var r=Te.open("/dev/stdin",0),o=Te.open("/dev/stdout",1),i=Te.open("/dev/stderr",1);E(0===r.fd,`invalid handle for stdin (${r.fd})`),E(1===o.fd,`invalid handle for stdout (${o.fd})`),E(2===i.fd,`invalid handle for stderr (${i.fd})`)},staticInit(){[44].forEach((e=>{Te.genericErrors[e]=new Te.ErrnoError(e),Te.genericErrors[e].stack="<generic error, no stack>"})),Te.nameTable=new Array(4096),Te.mount(Se,{},"/"),Te.createDefaultDirectories(),Te.createDefaultDevices(),Te.createSpecialDirectories(),Te.filesystems={MEMFS:Se}},init(e,t,n){E(!Te.initialized,"FS.init was previously called. If you want to initialize later with custom parameters, remove any earlier calls (note that one is automatically added to the generated code)"),Te.initialized=!0,e??=o.stdin,t??=o.stdout,n??=o.stderr,Te.createStandardStreams(e,t,n)},quit(){Te.initialized=!1,et(0);for(var e=0;e<Te.streams.length;e++){var t=Te.streams[e];t&&Te.close(t)}},findObject(e,t){var n=Te.analyzePath(e,t);return n.exists?n.object:null},analyzePath(e,t){try{e=(r=Te.lookupPath(e,{follow:!t})).path}catch(e){}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var r=Te.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=r.path,n.parentObject=r.node,n.name=Fe.basename(e),r=Te.lookupPath(e,{follow:!t}),n.exists=!0,n.path=r.path,n.object=r.node,n.name=r.node.name,n.isRoot="/"===r.path}catch(e){n.error=e.errno}return n},createPath(e,t,n,r){e="string"==typeof e?e:Te.getPath(e);for(var o=t.split("/").reverse();o.length;){var i=o.pop();if(i){var a=Fe.join2(e,i);try{Te.mkdir(a)}catch(e){}e=a}}return a},createFile(e,t,n,r,o){var i=Fe.join2("string"==typeof e?e:Te.getPath(e),t),a=Ce(r,o);return Te.create(i,a)},createDataFile(e,t,n,r,o,i){var a=t;e&&(e="string"==typeof e?e:Te.getPath(e),a=t?Fe.join2(e,t):e);var s=Ce(r,o),l=Te.create(a,s);if(n){if("string"==typeof n){for(var u=new Array(n.length),d=0,c=n.length;d<c;++d)u[d]=n.charCodeAt(d);n=u}Te.chmod(l,146|s);var m=Te.open(l,577);Te.write(m,n,0,n.length,0,i),Te.close(m),Te.chmod(l,s)}},createDevice(e,t,n,r){var o=Fe.join2("string"==typeof e?e:Te.getPath(e),t),i=Ce(!!n,!!r);Te.createDevice.major??=64;var a=Te.makedev(Te.createDevice.major++,0);return Te.registerDevice(a,{open(e){e.seekable=!1},close(e){r?.buffer?.length&&r(10)},read(e,t,r,o,i){for(var a=0,s=0;s<o;s++){var l;try{l=n()}catch(e){throw new Te.ErrnoError(29)}if(void 0===l&&0===a)throw new Te.ErrnoError(6);if(null==l)break;a++,t[r+s]=l}return a&&(e.node.timestamp=Date.now()),a},write(e,t,n,o,i){for(var a=0;a<o;a++)try{r(t[n+a])}catch(e){throw new Te.ErrnoError(29)}return o&&(e.node.timestamp=Date.now()),a}}),Te.mkdev(o,i,a)},forceLoadFile(e){if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if("undefined"!=typeof XMLHttpRequest)throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{e.contents=u(e.url),e.usedBytes=e.contents.length}catch(e){throw new Te.ErrnoError(29)}},createLazyFile(e,t,n,r,o){class i{constructor(){this.lengthKnown=!1,this.chunks=[]}get(e){if(!(e>this.length-1||e<0)){var t=e%this.chunkSize,n=e/this.chunkSize|0;return this.getter(n)[t]}}setDataGetter(e){this.getter=e}cacheLength(){var e=new XMLHttpRequest;if(e.open("HEAD",n,!1),e.send(null),!(e.status>=200&&e.status<300||304===e.status))throw new Error("Couldn't load "+n+". Status: "+e.status);var t,r=Number(e.getResponseHeader("Content-length")),o=(t=e.getResponseHeader("Accept-Ranges"))&&"bytes"===t,i=(t=e.getResponseHeader("Content-Encoding"))&&"gzip"===t,a=1048576;o||(a=r);var s=this;s.setDataGetter((e=>{var t=e*a,o=(e+1)*a-1;if(o=Math.min(o,r-1),void 0===s.chunks[e]&&(s.chunks[e]=((e,t)=>{if(e>t)throw new Error("invalid range ("+e+", "+t+") or no bytes requested!");if(t>r-1)throw new Error("only "+r+" bytes available! programmer error!");var o=new XMLHttpRequest;if(o.open("GET",n,!1),r!==a&&o.setRequestHeader("Range","bytes="+e+"-"+t),o.responseType="arraybuffer",o.overrideMimeType&&o.overrideMimeType("text/plain; charset=x-user-defined"),o.send(null),!(o.status>=200&&o.status<300||304===o.status))throw new Error("Couldn't load "+n+". Status: "+o.status);return void 0!==o.response?new Uint8Array(o.response||[]):De(o.responseText||"",!0)})(t,o)),void 0===s.chunks[e])throw new Error("doXHR failed!");return s.chunks[e]})),!i&&r||(a=r=1,r=this.getter(0).length,a=r,F("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=r,this._chunkSize=a,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if("undefined"!=typeof XMLHttpRequest){if(!s)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var a={isDevice:!1,contents:new i}}else a={isDevice:!1,url:n};var l=Te.createFile(e,t,a,r,o);a.contents?l.contents=a.contents:a.url&&(l.contents=null,l.url=a.url),Object.defineProperties(l,{usedBytes:{get:function(){return this.contents.length}}});var u={};function d(e,t,n,r,o){var i=e.node.contents;if(o>=i.length)return 0;var a=Math.min(i.length-o,r);if(E(a>=0),i.slice)for(var s=0;s<a;s++)t[n+s]=i[o+s];else for(s=0;s<a;s++)t[n+s]=i.get(o+s);return a}return Object.keys(l.stream_ops).forEach((e=>{var t=l.stream_ops[e];u[e]=(...e)=>(Te.forceLoadFile(l),t(...e))})),u.read=(e,t,n,r,o)=>(Te.forceLoadFile(l),d(e,t,n,r,o)),u.mmap=(e,t,n,r,o)=>{Te.forceLoadFile(l);var i=Ae(t);if(!i)throw new Te.ErrnoError(48);return d(e,f,i,t,n),{ptr:i,allocated:!0}},l.stream_ops=u,l},absolutePath(){H("FS.absolutePath has been removed; use PATH_FS.resolve instead")},createFolder(){H("FS.createFolder has been removed; use FS.mkdir instead")},createLink(){H("FS.createLink has been removed; use FS.symlink instead")},joinPath(){H("FS.joinPath has been removed; use PATH.join instead")},mmapAlloc(){H("FS.mmapAlloc has been replaced by the top level function mmapAlloc")},standardizePath(){H("FS.standardizePath has been removed; use PATH.normalize instead")}},Ge={DEFAULT_POLLMASK:5,calculateAt(e,t,n){if(Fe.isAbs(t))return t;var r;if(r=-100===e?Te.cwd():Ge.getStreamFromFD(e).path,0==t.length){if(!n)throw new Te.ErrnoError(44);return r}return Fe.join2(r,t)},doStat(e,t,n){var r=e(t);y[n>>2]=r.dev,y[n+4>>2]=r.mode,w[n+8>>2]=r.nlink,y[n+12>>2]=r.uid,y[n+16>>2]=r.gid,y[n+20>>2]=r.rdev,q=[r.size>>>0,($=r.size,+Math.abs($)>=1?$>0?+Math.floor($/4294967296)>>>0:~~+Math.ceil(($-+(~~$>>>0))/4294967296)>>>0:0)],y[n+24>>2]=q[0],y[n+28>>2]=q[1],y[n+32>>2]=4096,y[n+36>>2]=r.blocks;var o=r.atime.getTime(),i=r.mtime.getTime(),a=r.ctime.getTime();return q=[Math.floor(o/1e3)>>>0,($=Math.floor(o/1e3),+Math.abs($)>=1?$>0?+Math.floor($/4294967296)>>>0:~~+Math.ceil(($-+(~~$>>>0))/4294967296)>>>0:0)],y[n+40>>2]=q[0],y[n+44>>2]=q[1],w[n+48>>2]=o%1e3*1e3*1e3,q=[Math.floor(i/1e3)>>>0,($=Math.floor(i/1e3),+Math.abs($)>=1?$>0?+Math.floor($/4294967296)>>>0:~~+Math.ceil(($-+(~~$>>>0))/4294967296)>>>0:0)],y[n+56>>2]=q[0],y[n+60>>2]=q[1],w[n+64>>2]=i%1e3*1e3*1e3,q=[Math.floor(a/1e3)>>>0,($=Math.floor(a/1e3),+Math.abs($)>=1?$>0?+Math.floor($/4294967296)>>>0:~~+Math.ceil(($-+(~~$>>>0))/4294967296)>>>0:0)],y[n+72>>2]=q[0],y[n+76>>2]=q[1],w[n+80>>2]=a%1e3*1e3*1e3,q=[r.ino>>>0,($=r.ino,+Math.abs($)>=1?$>0?+Math.floor($/4294967296)>>>0:~~+Math.ceil(($-+(~~$>>>0))/4294967296)>>>0:0)],y[n+88>>2]=q[0],y[n+92>>2]=q[1],0},doMsync(e,t,n,r,o){if(!Te.isFile(t.node.mode))throw new Te.ErrnoError(43);if(2&r)return 0;var i=P.slice(e,e+n);Te.msync(t,i,o,n,r)},getStreamFromFD:e=>Te.getStreamChecked(e),varargs:void 0,getStr:e=>me(e)},ke=(e,t)=>(E(e==e>>>0||e==(0|e)),E(t===(0|t)),t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN),Ie=(e,t,n)=>(E("number"==typeof n,"stringToUTF8(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),Pe(e,P,t,n)),Oe=[0,31,60,91,121,152,182,213,244,274,305,335],Re=[0,31,59,90,120,151,181,212,243,273,304,334],Le=e=>{var t=_.buffer,n=(e-t.byteLength+65535)/65536|0;try{return _.grow(n),C(),1}catch(n){p(`growMemory: Attempted to grow heap from ${t.byteLength} bytes to ${e} bytes, but got error: ${n}`)}},je={},Ne=()=>{if(!Ne.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:m||"./this.program"};for(var t in je)void 0===je[t]?delete e[t]:e[t]=je[t];var n=[];for(var t in e)n.push(`${t}=${e[t]}`);Ne.strings=n}return Ne.strings},Be=[],ze=e=>{var t=Be[e];return t||(e>=Be.length&&(Be.length=e+1),Be[e]=t=ve.get(e)),E(ve.get(e)==t,"JavaScript-side Wasm function table mirror is out of date!"),t},Ue="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0,Ve=(e,t)=>{E(e<16384),e<128?t.push(e):t.push(e%128|128,e>>7)},He=(e,t)=>{if(E(!t.includes("j"),"i64 not permitted in function signatures when WASM_BIGINT is disabled"),"function"==typeof WebAssembly.Function)return new WebAssembly.Function((e=>{E(!e.includes("j"),"i64 not permitted in function signatures when WASM_BIGINT is disabled");for(var t={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},n={parameters:[],results:"v"==e[0]?[]:[t[e[0]]]},r=1;r<e.length;++r)E(e[r]in t,"invalid signature char: "+e[r]),n.parameters.push(t[e[r]]);return n})(t),e);var n=[1];((e,t)=>{var n=e.slice(0,1),r=e.slice(1),o={i:127,p:127,j:126,f:125,d:124,e:111};t.push(96),Ve(r.length,t);for(var i=0;i<r.length;++i)E(r[i]in o,"invalid signature char: "+r[i]),t.push(o[r[i]]);"v"==n?t.push(0):t.push(1,o[n])})(t,n);var r=[0,97,115,109,1,0,0,0,1];Ve(n.length,r),r.push(...n),r.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var o=new WebAssembly.Module(new Uint8Array(r));return new WebAssembly.Instance(o,{e:{f:e}}).exports.f},We=e=>(ye||(ye=new WeakMap,((e,t)=>{if(ye)for(var n=e;n<e+t;n++){var r=ze(n);r&&ye.set(r,n)}})(0,ve.length)),ye.get(e)||0),$e=[],qe=(e,t)=>{ve.set(e,t),Be[e]=ve.get(e)},Xe=e=>st(e),Ye=(e,t,n,r,i)=>{var a={string:e=>{var t=0;return null!=e&&0!==e&&(t=(e=>{var t=fe(e)+1,n=Xe(t);return Ie(e,n,t),n})(e)),t},array:e=>{var t,n,r=Xe(e.length);return n=r,E((t=e).length>=0,"writeArrayToMemory array must have a length (should be an array or typed array)"),f.set(t,n),r}},s=(e=>{var t=o["_"+e];return E(t,"Cannot call unknown function "+e+", make sure it is exported"),t})(e),l=[],u=0;if(E("array"!==t,'Return type should not be "array".'),r)for(var d=0;d<r.length;d++){var c=a[n[d]];c?(0===u&&(u=le()),l[d]=c(r[d])):l[d]=r[d]}var m=s(...l);return m=function(e){return 0!==u&&se(u),function(e){return"string"===t?me(e):"boolean"===t?Boolean(e):e}(e)}(m)};Te.createPreloadedFile=(e,t,n,r,o,i,a,s,u,d)=>{var c=t?_e.resolve(Fe.join2(e,t)):e,m=z(`cp ${c}`);function h(n){function l(n){d?.(),s||((e,t,n,r,o,i)=>{Te.createDataFile(e,t,n,r,o,i)})(e,t,n,r,o,u),i?.(),V(m)}((e,t,n,r)=>{"undefined"!=typeof Browser&&Browser.init();var o=!1;return Ee.forEach((i=>{o||i.canHandle(t)&&(i.handle(e,t,n,r),o=!0)})),o})(n,c,l,(()=>{a?.(),V(m)}))||l(n)}U(m),"string"==typeof n?((e,t,n,r)=>{var o=r?"":z(`al ${e}`);l(e).then((n=>{E(n,`Loading data file "${e}" failed (no arrayBuffer).`),t(new Uint8Array(n)),o&&V(o)}),(t=>{if(!n)throw`Loading data file "${e}" failed.`;n()})),o&&U(o)})(n,h,a):h(n)},Te.staticInit();var Ze={__assert_fail:(e,t,n,r)=>{H(`Assertion failed: ${me(e)}, at: `+[t?me(t):"unknown filename",n,r?me(r):"unknown function"])},__syscall_fcntl64:function(e,t,n){Ge.varargs=n;try{var r=Ge.getStreamFromFD(e);switch(t){case 0:if((o=he())<0)return-28;for(;Te.streams[o];)o++;return Te.dupStream(r,o).fd;case 1:case 2:case 13:case 14:return 0;case 3:return r.flags;case 4:var o=he();return r.flags|=o,0;case 12:return o=ge(),D[o+0>>1]=2,0}return-28}catch(e){if(void 0===Te||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_fstat64:function(e,t){try{var n=Ge.getStreamFromFD(e);return Ge.doStat(Te.stat,n.path,t)}catch(e){if(void 0===Te||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_ftruncate64:function(e,t,n){var r=ke(t,n);try{return isNaN(r)?61:(Te.ftruncate(e,r),0)}catch(e){if(void 0===Te||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_getdents64:function(e,t,n){try{var r=Ge.getStreamFromFD(e);r.getdents||=Te.readdir(r.path);for(var o=280,i=0,a=Te.llseek(r,0,1),s=Math.floor(a/o);s<r.getdents.length&&i+o<=n;){var l,u,d=r.getdents[s];if("."===d)l=r.node.id,u=4;else if(".."===d)l=Te.lookupPath(r.path,{parent:!0}).node.id,u=4;else{var c=Te.lookupNode(r.node,d);l=c.id,u=Te.isChrdev(c.mode)?2:Te.isDir(c.mode)?4:Te.isLink(c.mode)?10:8}E(l),q=[l>>>0,($=l,+Math.abs($)>=1?$>0?+Math.floor($/4294967296)>>>0:~~+Math.ceil(($-+(~~$>>>0))/4294967296)>>>0:0)],y[t+i>>2]=q[0],y[t+i+4>>2]=q[1],q=[(s+1)*o>>>0,($=(s+1)*o,+Math.abs($)>=1?$>0?+Math.floor($/4294967296)>>>0:~~+Math.ceil(($-+(~~$>>>0))/4294967296)>>>0:0)],y[t+i+8>>2]=q[0],y[t+i+12>>2]=q[1],D[t+i+16>>1]=280,f[t+i+18]=u,Ie(d,t+i+19,256),i+=o,s+=1}return Te.llseek(r,s*o,0),i}catch(e){if(void 0===Te||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_ioctl:function(e,t,n){Ge.varargs=n;try{var r=Ge.getStreamFromFD(e);switch(t){case 21509:case 21510:case 21511:case 21512:case 21524:case 21515:return r.tty?0:-59;case 21505:if(!r.tty)return-59;if(r.tty.ops.ioctl_tcgets){var o=r.tty.ops.ioctl_tcgets(r),i=ge();y[i>>2]=o.c_iflag||0,y[i+4>>2]=o.c_oflag||0,y[i+8>>2]=o.c_cflag||0,y[i+12>>2]=o.c_lflag||0;for(var a=0;a<32;a++)f[i+a+17]=o.c_cc[a]||0;return 0}return 0;case 21506:case 21507:case 21508:if(!r.tty)return-59;if(r.tty.ops.ioctl_tcsets){i=ge();var s=y[i>>2],l=y[i+4>>2],u=y[i+8>>2],d=y[i+12>>2],c=[];for(a=0;a<32;a++)c.push(f[i+a+17]);return r.tty.ops.ioctl_tcsets(r.tty,t,{c_iflag:s,c_oflag:l,c_cflag:u,c_lflag:d,c_cc:c})}return 0;case 21519:return r.tty?(i=ge(),y[i>>2]=0,0):-59;case 21520:return r.tty?-28:-59;case 21531:return i=ge(),Te.ioctl(r,t,i);case 21523:if(!r.tty)return-59;if(r.tty.ops.ioctl_tiocgwinsz){var m=r.tty.ops.ioctl_tiocgwinsz(r.tty);i=ge(),D[i>>1]=m[0],D[i+2>>1]=m[1]}return 0;default:return-28}}catch(e){if(void 0===Te||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_lstat64:function(e,t){try{return e=Ge.getStr(e),Ge.doStat(Te.lstat,e,t)}catch(e){if(void 0===Te||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_newfstatat:function(e,t,n,r){try{t=Ge.getStr(t);var o=256&r,i=4096&r;return E(!(r&=-6401),`unknown flags in __syscall_newfstatat: ${r}`),t=Ge.calculateAt(e,t,i),Ge.doStat(o?Te.lstat:Te.stat,t,n)}catch(e){if(void 0===Te||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_openat:function(e,t,n,r){Ge.varargs=r;try{t=Ge.getStr(t),t=Ge.calculateAt(e,t);var o=r?he():0;return Te.open(t,n,o).fd}catch(e){if(void 0===Te||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_rmdir:function(e){try{return e=Ge.getStr(e),Te.rmdir(e),0}catch(e){if(void 0===Te||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_stat64:function(e,t){try{return e=Ge.getStr(e),Ge.doStat(Te.stat,e,t)}catch(e){if(void 0===Te||"ErrnoError"!==e.name)throw e;return-e.errno}},__syscall_unlinkat:function(e,t,n){try{return t=Ge.getStr(t),t=Ge.calculateAt(e,t),0===n?Te.unlink(t):512===n?Te.rmdir(t):H("Invalid flags passed to unlinkat"),0}catch(e){if(void 0===Te||"ErrnoError"!==e.name)throw e;return-e.errno}},_abort_js:()=>{H("native code called abort()")},_emscripten_memcpy_js:(e,t,n)=>P.copyWithin(e,t,t+n),_emscripten_throw_longjmp:()=>{throw 1/0},_gmtime_js:function(e,t,n){var r=ke(e,t),o=new Date(1e3*r);y[n>>2]=o.getUTCSeconds(),y[n+4>>2]=o.getUTCMinutes(),y[n+8>>2]=o.getUTCHours(),y[n+12>>2]=o.getUTCDate(),y[n+16>>2]=o.getUTCMonth(),y[n+20>>2]=o.getUTCFullYear()-1900,y[n+24>>2]=o.getUTCDay();var i=Date.UTC(o.getUTCFullYear(),0,1,0,0,0,0),a=(o.getTime()-i)/864e5|0;y[n+28>>2]=a},_localtime_js:function(e,t,n){var r=ke(e,t),o=new Date(1e3*r);y[n>>2]=o.getSeconds(),y[n+4>>2]=o.getMinutes(),y[n+8>>2]=o.getHours(),y[n+12>>2]=o.getDate(),y[n+16>>2]=o.getMonth(),y[n+20>>2]=o.getFullYear()-1900,y[n+24>>2]=o.getDay();var i=0|(e=>{var t;return((t=e.getFullYear())%4!=0||t%100==0&&t%400!=0?Re:Oe)[e.getMonth()]+e.getDate()-1})(o);y[n+28>>2]=i,y[n+36>>2]=-60*o.getTimezoneOffset();var a=new Date(o.getFullYear(),0,1),s=new Date(o.getFullYear(),6,1).getTimezoneOffset(),l=a.getTimezoneOffset(),u=0|(s!=l&&o.getTimezoneOffset()==Math.min(l,s));y[n+32>>2]=u},_tzset_js:(e,t,n,r)=>{var o=(new Date).getFullYear(),i=new Date(o,0,1),a=new Date(o,6,1),s=i.getTimezoneOffset(),l=a.getTimezoneOffset(),u=Math.max(s,l);w[e>>2]=60*u,y[t>>2]=Number(s!=l);var d=e=>{var t=e>=0?"-":"+",n=Math.abs(e);return`UTC${t}${String(Math.floor(n/60)).padStart(2,"0")}${String(n%60).padStart(2,"0")}`},c=d(s),m=d(l);E(c),E(m),E(fe(c)<=16,`timezone name truncated to fit in TZNAME_MAX (${c})`),E(fe(m)<=16,`timezone name truncated to fit in TZNAME_MAX (${m})`),l<s?(Ie(c,n,17),Ie(m,r,17)):(Ie(c,r,17),Ie(m,n,17))},emscripten_date_now:()=>Date.now(),emscripten_resize_heap:e=>{var t=P.length;E((e>>>=0)>t);var n=2147483648;if(e>n)return p(`Cannot enlarge memory, requested ${e} bytes, but the limit is 2147483648 bytes!`),!1;for(var r=1;r<=4;r*=2){var o=t*(1+.2/r);o=Math.min(o,e+100663296);var i=Math.min(n,xe(Math.max(e,o),65536));if(Le(i))return!0}return p(`Failed to grow the heap from ${t} bytes to ${i} bytes, not enough memory!`),!1},environ_get:(e,t)=>{var n=0;return Ne().forEach(((r,o)=>{var i=t+n;w[e+4*o>>2]=i,((e,t)=>{for(var n=0;n<e.length;++n)E(e.charCodeAt(n)===(255&e.charCodeAt(n))),f[t++]=e.charCodeAt(n);f[t]=0})(r,i),n+=r.length+1})),0},environ_sizes_get:(e,t)=>{var n=Ne();w[e>>2]=n.length;var r=0;return n.forEach((e=>r+=e.length+1)),w[t>>2]=r,0},fd_close:function(e){try{var t=Ge.getStreamFromFD(e);return Te.close(t),0}catch(e){if(void 0===Te||"ErrnoError"!==e.name)throw e;return e.errno}},fd_read:function(e,t,n,r){try{var o=((e,t,n,r)=>{for(var o=0,i=0;i<n;i++){var a=w[t>>2],s=w[t+4>>2];t+=8;var l=Te.read(e,f,a,s,r);if(l<0)return-1;if(o+=l,l<s)break;void 0!==r&&(r+=l)}return o})(Ge.getStreamFromFD(e),t,n);return w[r>>2]=o,0}catch(e){if(void 0===Te||"ErrnoError"!==e.name)throw e;return e.errno}},fd_seek:function(e,t,n,r,o){var i=ke(t,n);try{if(isNaN(i))return 61;var a=Ge.getStreamFromFD(e);return Te.llseek(a,i,r),q=[a.position>>>0,($=a.position,+Math.abs($)>=1?$>0?+Math.floor($/4294967296)>>>0:~~+Math.ceil(($-+(~~$>>>0))/4294967296)>>>0:0)],y[o>>2]=q[0],y[o+4>>2]=q[1],a.getdents&&0===i&&0===r&&(a.getdents=null),0}catch(e){if(void 0===Te||"ErrnoError"!==e.name)throw e;return e.errno}},fd_sync:function(e){try{var t=Ge.getStreamFromFD(e);return t.stream_ops?.fsync?t.stream_ops.fsync(t):0}catch(e){if(void 0===Te||"ErrnoError"!==e.name)throw e;return e.errno}},fd_write:function(e,t,n,r){try{var o=((e,t,n,r)=>{for(var o=0,i=0;i<n;i++){var a=w[t>>2],s=w[t+4>>2];t+=8;var l=Te.write(e,f,a,s,r);if(l<0)return-1;if(o+=l,l<s)break;void 0!==r&&(r+=l)}return o})(Ge.getStreamFromFD(e),t,n);return w[r>>2]=o,0}catch(e){if(void 0===Te||"ErrnoError"!==e.name)throw e;return e.errno}},invoke_ii:function(e,t){var n=le();try{return ze(e)(t)}catch(e){if(se(n),e!==e+0)throw e;rt(1,0)}},invoke_iii:function(e,t,n){var r=le();try{return ze(e)(t,n)}catch(e){if(se(r),e!==e+0)throw e;rt(1,0)}},invoke_iiii:function(e,t,n,r){var o=le();try{return ze(e)(t,n,r)}catch(e){if(se(o),e!==e+0)throw e;rt(1,0)}},invoke_iiiii:function(e,t,n,r,o){var i=le();try{return ze(e)(t,n,r,o)}catch(e){if(se(i),e!==e+0)throw e;rt(1,0)}},invoke_v:function(e){var t=le();try{ze(e)()}catch(e){if(se(t),e!==e+0)throw e;rt(1,0)}},invoke_viii:function(e,t,n,r){var o=le();try{ze(e)(t,n,r)}catch(e){if(se(o),e!==e+0)throw e;rt(1,0)}},invoke_viiii:function(e,t,n,r,o){var i=le();try{ze(e)(t,n,r,o)}catch(e){if(se(i),e!==e+0)throw e;rt(1,0)}}},Ke=function(){var e={env:Ze,wasi_snapshot_preview1:Ze};function t(e,t){var n;return Ke=e.exports,o.wasmExports=Ke,E(_=Ke.memory,"memory not found in wasm exports"),C(),E(ve=Ke.__indirect_function_table,"table not found in wasm exports"),n=Ke.__wasm_call_ctors,G.unshift(n),V("wasm-instantiate"),Ke}U("wasm-instantiate");var n,i,a,s,l=o;if(o.instantiateWasm)try{return o.instantiateWasm(e,t)}catch(e){p(`Module.instantiateWasm callback failed with error: ${e}`),r(e)}return W??=K(),(n=b,i=W,a=e,s=function(e){E(o===l,"the Module object should not be replaced during async compilation - perhaps the order of HTML elements is wrong?"),l=null,t(e.instance)},n||"function"!=typeof WebAssembly.instantiateStreaming||X(i)||"function"!=typeof fetch?Q(i,a,s):fetch(i,{credentials:"same-origin"}).then((e=>WebAssembly.instantiateStreaming(e,a).then(s,(function(e){return p(`wasm streaming compile failed: ${e}`),p("falling back to ArrayBuffer instantiation"),Q(i,a,s)}))))).catch(r),{}}();o._PDFiumExt_Init=Z("PDFiumExt_Init",0),o._FPDF_InitLibraryWithConfig=Z("FPDF_InitLibraryWithConfig",1),o._PDFiumExt_OpenFileWriter=Z("PDFiumExt_OpenFileWriter",0),o._PDFiumExt_GetFileWriterSize=Z("PDFiumExt_GetFileWriterSize",1),o._PDFiumExt_GetFileWriterData=Z("PDFiumExt_GetFileWriterData",3),o._PDFiumExt_CloseFileWriter=Z("PDFiumExt_CloseFileWriter",1),o._PDFiumExt_SaveAsCopy=Z("PDFiumExt_SaveAsCopy",2),o._FPDF_SaveAsCopy=Z("FPDF_SaveAsCopy",3),o._PDFiumExt_OpenFormFillInfo=Z("PDFiumExt_OpenFormFillInfo",0),o._PDFiumExt_CloseFormFillInfo=Z("PDFiumExt_CloseFormFillInfo",1),o._PDFiumExt_InitFormFillEnvironment=Z("PDFiumExt_InitFormFillEnvironment",2),o._FPDFDOC_InitFormFillEnvironment=Z("FPDFDOC_InitFormFillEnvironment",2),o._PDFiumExt_ExitFormFillEnvironment=Z("PDFiumExt_ExitFormFillEnvironment",1),o._FPDFDOC_ExitFormFillEnvironment=Z("FPDFDOC_ExitFormFillEnvironment",1),o._FPDFAnnot_IsSupportedSubtype=Z("FPDFAnnot_IsSupportedSubtype",1),o._FPDFPage_CreateAnnot=Z("FPDFPage_CreateAnnot",2),o._FPDFPage_GetAnnotCount=Z("FPDFPage_GetAnnotCount",1),o._FPDFPage_GetAnnot=Z("FPDFPage_GetAnnot",2),o._FPDFPage_GetAnnotIndex=Z("FPDFPage_GetAnnotIndex",2),o._FPDFPage_CloseAnnot=Z("FPDFPage_CloseAnnot",1),o._FPDFPage_RemoveAnnot=Z("FPDFPage_RemoveAnnot",2),o._FPDFAnnot_GetSubtype=Z("FPDFAnnot_GetSubtype",1),o._FPDFAnnot_IsObjectSupportedSubtype=Z("FPDFAnnot_IsObjectSupportedSubtype",1),o._FPDFAnnot_UpdateObject=Z("FPDFAnnot_UpdateObject",2),o._FPDFAnnot_AddInkStroke=Z("FPDFAnnot_AddInkStroke",3),o._FPDFAnnot_RemoveInkList=Z("FPDFAnnot_RemoveInkList",1),o._FPDFAnnot_AppendObject=Z("FPDFAnnot_AppendObject",2),o._FPDFAnnot_GetObjectCount=Z("FPDFAnnot_GetObjectCount",1),o._FPDFAnnot_GetObject=Z("FPDFAnnot_GetObject",2),o._FPDFAnnot_RemoveObject=Z("FPDFAnnot_RemoveObject",2),o._FPDFAnnot_SetColor=Z("FPDFAnnot_SetColor",6),o._FPDFAnnot_GetColor=Z("FPDFAnnot_GetColor",6),o._FPDFAnnot_HasAttachmentPoints=Z("FPDFAnnot_HasAttachmentPoints",1),o._FPDFAnnot_SetAttachmentPoints=Z("FPDFAnnot_SetAttachmentPoints",3),o._FPDFAnnot_AppendAttachmentPoints=Z("FPDFAnnot_AppendAttachmentPoints",2),o._FPDFAnnot_CountAttachmentPoints=Z("FPDFAnnot_CountAttachmentPoints",1),o._FPDFAnnot_GetAttachmentPoints=Z("FPDFAnnot_GetAttachmentPoints",3),o._FPDFAnnot_SetRect=Z("FPDFAnnot_SetRect",2),o._FPDFAnnot_GetRect=Z("FPDFAnnot_GetRect",2),o._FPDFAnnot_GetVertices=Z("FPDFAnnot_GetVertices",3),o._FPDFAnnot_GetInkListCount=Z("FPDFAnnot_GetInkListCount",1),o._FPDFAnnot_GetInkListPath=Z("FPDFAnnot_GetInkListPath",4),o._FPDFAnnot_GetLine=Z("FPDFAnnot_GetLine",3),o._FPDFAnnot_SetBorder=Z("FPDFAnnot_SetBorder",4),o._FPDFAnnot_GetBorder=Z("FPDFAnnot_GetBorder",4),o._FPDFAnnot_HasKey=Z("FPDFAnnot_HasKey",2),o._FPDFAnnot_GetValueType=Z("FPDFAnnot_GetValueType",2),o._FPDFAnnot_SetStringValue=Z("FPDFAnnot_SetStringValue",3),o._FPDFAnnot_GetStringValue=Z("FPDFAnnot_GetStringValue",4),o._FPDFAnnot_GetNumberValue=Z("FPDFAnnot_GetNumberValue",3),o._FPDFAnnot_SetAP=Z("FPDFAnnot_SetAP",3),o._FPDFAnnot_GetAP=Z("FPDFAnnot_GetAP",4),o._FPDFAnnot_GetLinkedAnnot=Z("FPDFAnnot_GetLinkedAnnot",2),o._FPDFAnnot_GetFlags=Z("FPDFAnnot_GetFlags",1),o._FPDFAnnot_SetFlags=Z("FPDFAnnot_SetFlags",2),o._FPDFAnnot_GetFormFieldFlags=Z("FPDFAnnot_GetFormFieldFlags",2),o._FPDFAnnot_SetFormFieldFlags=Z("FPDFAnnot_SetFormFieldFlags",3),o._FPDFAnnot_GetFormFieldAtPoint=Z("FPDFAnnot_GetFormFieldAtPoint",3),o._FPDFAnnot_GetFormFieldName=Z("FPDFAnnot_GetFormFieldName",4),o._FPDFAnnot_GetFormFieldType=Z("FPDFAnnot_GetFormFieldType",2),o._FPDFAnnot_GetFormAdditionalActionJavaScript=Z("FPDFAnnot_GetFormAdditionalActionJavaScript",5),o._FPDFAnnot_GetFormFieldAlternateName=Z("FPDFAnnot_GetFormFieldAlternateName",4),o._FPDFAnnot_GetFormFieldValue=Z("FPDFAnnot_GetFormFieldValue",4),o._FPDFAnnot_GetOptionCount=Z("FPDFAnnot_GetOptionCount",2),o._FPDFAnnot_GetOptionLabel=Z("FPDFAnnot_GetOptionLabel",5),o._FPDFAnnot_IsOptionSelected=Z("FPDFAnnot_IsOptionSelected",3),o._FPDFAnnot_GetFontSize=Z("FPDFAnnot_GetFontSize",3),o._FPDFAnnot_SetFontColor=Z("FPDFAnnot_SetFontColor",5),o._FPDFAnnot_GetFontColor=Z("FPDFAnnot_GetFontColor",5),o._FPDFAnnot_IsChecked=Z("FPDFAnnot_IsChecked",2),o._FPDFAnnot_SetFocusableSubtypes=Z("FPDFAnnot_SetFocusableSubtypes",3),o._FPDFAnnot_GetFocusableSubtypesCount=Z("FPDFAnnot_GetFocusableSubtypesCount",1),o._FPDFAnnot_GetFocusableSubtypes=Z("FPDFAnnot_GetFocusableSubtypes",3),o._FPDFAnnot_GetLink=Z("FPDFAnnot_GetLink",1),o._FPDFAnnot_GetFormControlCount=Z("FPDFAnnot_GetFormControlCount",2),o._FPDFAnnot_GetFormControlIndex=Z("FPDFAnnot_GetFormControlIndex",2),o._FPDFAnnot_GetFormFieldExportValue=Z("FPDFAnnot_GetFormFieldExportValue",4),o._FPDFAnnot_SetURI=Z("FPDFAnnot_SetURI",2),o._FPDFAnnot_GetFileAttachment=Z("FPDFAnnot_GetFileAttachment",1),o._FPDFAnnot_AddFileAttachment=Z("FPDFAnnot_AddFileAttachment",2),o._EPDFAnnot_SetColor=Z("EPDFAnnot_SetColor",6),o._EPDFAnnot_GetColor=Z("EPDFAnnot_GetColor",6),o._EPDFAnnot_GetBorderEffect=Z("EPDFAnnot_GetBorderEffect",2),o._EPDFAnnot_GetRectangleDifferences=Z("EPDFAnnot_GetRectangleDifferences",5),o._EPDFAnnot_GetBorderDashPatternCount=Z("EPDFAnnot_GetBorderDashPatternCount",1),o._EPDFAnnot_GetBorderDashPattern=Z("EPDFAnnot_GetBorderDashPattern",3),o._EPDFAnnot_GetBorderStyle=Z("EPDFAnnot_GetBorderStyle",2),o._EPDFAnnot_SetBorderStyle=Z("EPDFAnnot_SetBorderStyle",3),o._EPDFAnnot_GenerateAppearance=Z("EPDFAnnot_GenerateAppearance",1),o._EPDFAnnot_GenerateAppearanceWithBlend=Z("EPDFAnnot_GenerateAppearanceWithBlend",2),o._EPDFAnnot_GetBlendMode=Z("EPDFAnnot_GetBlendMode",1),o._EPDFAnnot_SetIntent=Z("EPDFAnnot_SetIntent",2),o._EPDFAnnot_GetIntent=Z("EPDFAnnot_GetIntent",3),o._EPDFAnnot_GetRichContent=Z("EPDFAnnot_GetRichContent",3),o._FPDFDoc_GetAttachmentCount=Z("FPDFDoc_GetAttachmentCount",1),o._FPDFDoc_AddAttachment=Z("FPDFDoc_AddAttachment",2),o._FPDFDoc_GetAttachment=Z("FPDFDoc_GetAttachment",2),o._FPDFDoc_DeleteAttachment=Z("FPDFDoc_DeleteAttachment",2),o._FPDFAttachment_GetName=Z("FPDFAttachment_GetName",3),o._FPDFAttachment_HasKey=Z("FPDFAttachment_HasKey",2),o._FPDFAttachment_GetValueType=Z("FPDFAttachment_GetValueType",2),o._FPDFAttachment_SetStringValue=Z("FPDFAttachment_SetStringValue",3),o._FPDFAttachment_GetStringValue=Z("FPDFAttachment_GetStringValue",4),o._FPDFAttachment_SetFile=Z("FPDFAttachment_SetFile",4),o._FPDFAttachment_GetFile=Z("FPDFAttachment_GetFile",4),o._FPDFAttachment_GetSubtype=Z("FPDFAttachment_GetSubtype",3),o._FPDFCatalog_IsTagged=Z("FPDFCatalog_IsTagged",1),o._FPDFCatalog_SetLanguage=Z("FPDFCatalog_SetLanguage",2),o._FPDFAvail_Create=Z("FPDFAvail_Create",2),o._FPDFAvail_Destroy=Z("FPDFAvail_Destroy",1),o._FPDFAvail_IsDocAvail=Z("FPDFAvail_IsDocAvail",2),o._FPDFAvail_GetDocument=Z("FPDFAvail_GetDocument",2),o._FPDFAvail_GetFirstPageNum=Z("FPDFAvail_GetFirstPageNum",1),o._FPDFAvail_IsPageAvail=Z("FPDFAvail_IsPageAvail",3),o._FPDFAvail_IsFormAvail=Z("FPDFAvail_IsFormAvail",2),o._FPDFAvail_IsLinearized=Z("FPDFAvail_IsLinearized",1),o._FPDFBookmark_GetFirstChild=Z("FPDFBookmark_GetFirstChild",2),o._FPDFBookmark_GetNextSibling=Z("FPDFBookmark_GetNextSibling",2),o._FPDFBookmark_GetTitle=Z("FPDFBookmark_GetTitle",3),o._FPDFBookmark_GetCount=Z("FPDFBookmark_GetCount",1),o._FPDFBookmark_Find=Z("FPDFBookmark_Find",2),o._FPDFBookmark_GetDest=Z("FPDFBookmark_GetDest",2),o._FPDFBookmark_GetAction=Z("FPDFBookmark_GetAction",1),o._FPDFAction_GetType=Z("FPDFAction_GetType",1),o._FPDFAction_GetDest=Z("FPDFAction_GetDest",2),o._FPDFAction_GetFilePath=Z("FPDFAction_GetFilePath",3),o._FPDFAction_GetURIPath=Z("FPDFAction_GetURIPath",4),o._FPDFDest_GetDestPageIndex=Z("FPDFDest_GetDestPageIndex",2),o._FPDFDest_GetView=Z("FPDFDest_GetView",3),o._FPDFDest_GetLocationInPage=Z("FPDFDest_GetLocationInPage",7),o._FPDFLink_GetLinkAtPoint=Z("FPDFLink_GetLinkAtPoint",3),o._FPDFLink_GetLinkZOrderAtPoint=Z("FPDFLink_GetLinkZOrderAtPoint",3),o._FPDFLink_GetDest=Z("FPDFLink_GetDest",2),o._FPDFLink_GetAction=Z("FPDFLink_GetAction",1),o._FPDFLink_Enumerate=Z("FPDFLink_Enumerate",3),o._FPDFLink_GetAnnot=Z("FPDFLink_GetAnnot",2),o._FPDFLink_GetAnnotRect=Z("FPDFLink_GetAnnotRect",2),o._FPDFLink_CountQuadPoints=Z("FPDFLink_CountQuadPoints",1),o._FPDFLink_GetQuadPoints=Z("FPDFLink_GetQuadPoints",3),o._FPDF_GetPageAAction=Z("FPDF_GetPageAAction",2),o._FPDF_GetFileIdentifier=Z("FPDF_GetFileIdentifier",4),o._FPDF_GetMetaText=Z("FPDF_GetMetaText",4),o._FPDF_GetPageLabel=Z("FPDF_GetPageLabel",4),o._FPDFPageObj_NewImageObj=Z("FPDFPageObj_NewImageObj",1),o._FPDFImageObj_LoadJpegFile=Z("FPDFImageObj_LoadJpegFile",4),o._FPDFImageObj_LoadJpegFileInline=Z("FPDFImageObj_LoadJpegFileInline",4),o._FPDFImageObj_SetMatrix=Z("FPDFImageObj_SetMatrix",7),o._FPDFImageObj_SetBitmap=Z("FPDFImageObj_SetBitmap",4),o._FPDFImageObj_GetBitmap=Z("FPDFImageObj_GetBitmap",1),o._FPDFImageObj_GetRenderedBitmap=Z("FPDFImageObj_GetRenderedBitmap",3),o._FPDFImageObj_GetImageDataDecoded=Z("FPDFImageObj_GetImageDataDecoded",3),o._FPDFImageObj_GetImageDataRaw=Z("FPDFImageObj_GetImageDataRaw",3),o._FPDFImageObj_GetImageFilterCount=Z("FPDFImageObj_GetImageFilterCount",1),o._FPDFImageObj_GetImageFilter=Z("FPDFImageObj_GetImageFilter",4),o._FPDFImageObj_GetImageMetadata=Z("FPDFImageObj_GetImageMetadata",3),o._FPDFImageObj_GetImagePixelSize=Z("FPDFImageObj_GetImagePixelSize",3),o._FPDFImageObj_GetIccProfileDataDecoded=Z("FPDFImageObj_GetIccProfileDataDecoded",5),o._FPDF_CreateNewDocument=Z("FPDF_CreateNewDocument",0),o._FPDFPage_Delete=Z("FPDFPage_Delete",2),o._FPDF_MovePages=Z("FPDF_MovePages",4),o._FPDFPage_New=Z("FPDFPage_New",4),o._FPDFPage_GetRotation=Z("FPDFPage_GetRotation",1),o._FPDFPage_InsertObject=Z("FPDFPage_InsertObject",2),o._FPDFPage_InsertObjectAtIndex=Z("FPDFPage_InsertObjectAtIndex",3),o._FPDFPage_RemoveObject=Z("FPDFPage_RemoveObject",2),o._FPDFPage_CountObjects=Z("FPDFPage_CountObjects",1),o._FPDFPage_GetObject=Z("FPDFPage_GetObject",2),o._FPDFPage_HasTransparency=Z("FPDFPage_HasTransparency",1),o._FPDFPageObj_Destroy=Z("FPDFPageObj_Destroy",1),o._FPDFPageObj_GetMarkedContentID=Z("FPDFPageObj_GetMarkedContentID",1),o._FPDFPageObj_CountMarks=Z("FPDFPageObj_CountMarks",1),o._FPDFPageObj_GetMark=Z("FPDFPageObj_GetMark",2),o._FPDFPageObj_AddMark=Z("FPDFPageObj_AddMark",2),o._FPDFPageObj_RemoveMark=Z("FPDFPageObj_RemoveMark",2),o._FPDFPageObjMark_GetName=Z("FPDFPageObjMark_GetName",4),o._FPDFPageObjMark_CountParams=Z("FPDFPageObjMark_CountParams",1),o._FPDFPageObjMark_GetParamKey=Z("FPDFPageObjMark_GetParamKey",5),o._FPDFPageObjMark_GetParamValueType=Z("FPDFPageObjMark_GetParamValueType",2),o._FPDFPageObjMark_GetParamIntValue=Z("FPDFPageObjMark_GetParamIntValue",3),o._FPDFPageObjMark_GetParamStringValue=Z("FPDFPageObjMark_GetParamStringValue",5),o._FPDFPageObjMark_GetParamBlobValue=Z("FPDFPageObjMark_GetParamBlobValue",5),o._FPDFPageObj_HasTransparency=Z("FPDFPageObj_HasTransparency",1),o._FPDFPageObjMark_SetIntParam=Z("FPDFPageObjMark_SetIntParam",5),o._FPDFPageObjMark_SetStringParam=Z("FPDFPageObjMark_SetStringParam",5),o._FPDFPageObjMark_SetBlobParam=Z("FPDFPageObjMark_SetBlobParam",6),o._FPDFPageObjMark_RemoveParam=Z("FPDFPageObjMark_RemoveParam",3),o._FPDFPageObj_GetType=Z("FPDFPageObj_GetType",1),o._FPDFPageObj_GetIsActive=Z("FPDFPageObj_GetIsActive",2),o._FPDFPageObj_SetIsActive=Z("FPDFPageObj_SetIsActive",2),o._FPDFPage_GenerateContent=Z("FPDFPage_GenerateContent",1),o._FPDFPageObj_Transform=Z("FPDFPageObj_Transform",7),o._FPDFPageObj_TransformF=Z("FPDFPageObj_TransformF",2),o._FPDFPageObj_GetMatrix=Z("FPDFPageObj_GetMatrix",2),o._FPDFPageObj_SetMatrix=Z("FPDFPageObj_SetMatrix",2),o._FPDFPageObj_SetBlendMode=Z("FPDFPageObj_SetBlendMode",2),o._FPDFPage_TransformAnnots=Z("FPDFPage_TransformAnnots",7),o._FPDFPage_SetRotation=Z("FPDFPage_SetRotation",2),o._FPDFPageObj_SetFillColor=Z("FPDFPageObj_SetFillColor",5),o._FPDFPageObj_GetFillColor=Z("FPDFPageObj_GetFillColor",5),o._FPDFPageObj_GetBounds=Z("FPDFPageObj_GetBounds",5),o._FPDFPageObj_GetRotatedBounds=Z("FPDFPageObj_GetRotatedBounds",2),o._FPDFPageObj_SetStrokeColor=Z("FPDFPageObj_SetStrokeColor",5),o._FPDFPageObj_GetStrokeColor=Z("FPDFPageObj_GetStrokeColor",5),o._FPDFPageObj_SetStrokeWidth=Z("FPDFPageObj_SetStrokeWidth",2),o._FPDFPageObj_GetStrokeWidth=Z("FPDFPageObj_GetStrokeWidth",2),o._FPDFPageObj_GetLineJoin=Z("FPDFPageObj_GetLineJoin",1),o._FPDFPageObj_SetLineJoin=Z("FPDFPageObj_SetLineJoin",2),o._FPDFPageObj_GetLineCap=Z("FPDFPageObj_GetLineCap",1),o._FPDFPageObj_SetLineCap=Z("FPDFPageObj_SetLineCap",2),o._FPDFPageObj_GetDashPhase=Z("FPDFPageObj_GetDashPhase",2),o._FPDFPageObj_SetDashPhase=Z("FPDFPageObj_SetDashPhase",2),o._FPDFPageObj_GetDashCount=Z("FPDFPageObj_GetDashCount",1),o._FPDFPageObj_GetDashArray=Z("FPDFPageObj_GetDashArray",3),o._FPDFPageObj_SetDashArray=Z("FPDFPageObj_SetDashArray",4),o._FPDFFormObj_CountObjects=Z("FPDFFormObj_CountObjects",1),o._FPDFFormObj_GetObject=Z("FPDFFormObj_GetObject",2),o._FPDFFormObj_RemoveObject=Z("FPDFFormObj_RemoveObject",2),o._FPDFPageObj_CreateNewPath=Z("FPDFPageObj_CreateNewPath",2),o._FPDFPageObj_CreateNewRect=Z("FPDFPageObj_CreateNewRect",4),o._FPDFPath_CountSegments=Z("FPDFPath_CountSegments",1),o._FPDFPath_GetPathSegment=Z("FPDFPath_GetPathSegment",2),o._FPDFPath_MoveTo=Z("FPDFPath_MoveTo",3),o._FPDFPath_LineTo=Z("FPDFPath_LineTo",3),o._FPDFPath_BezierTo=Z("FPDFPath_BezierTo",7),o._FPDFPath_Close=Z("FPDFPath_Close",1),o._FPDFPath_SetDrawMode=Z("FPDFPath_SetDrawMode",3),o._FPDFPath_GetDrawMode=Z("FPDFPath_GetDrawMode",3),o._FPDFPathSegment_GetPoint=Z("FPDFPathSegment_GetPoint",3),o._FPDFPathSegment_GetType=Z("FPDFPathSegment_GetType",1),o._FPDFPathSegment_GetClose=Z("FPDFPathSegment_GetClose",1),o._FPDFPageObj_NewTextObj=Z("FPDFPageObj_NewTextObj",3),o._FPDFText_SetText=Z("FPDFText_SetText",2),o._FPDFText_SetCharcodes=Z("FPDFText_SetCharcodes",3),o._FPDFText_LoadFont=Z("FPDFText_LoadFont",5),o._FPDFText_LoadStandardFont=Z("FPDFText_LoadStandardFont",2),o._FPDFText_LoadCidType2Font=Z("FPDFText_LoadCidType2Font",6),o._FPDFTextObj_GetFontSize=Z("FPDFTextObj_GetFontSize",2),o._FPDFTextObj_GetText=Z("FPDFTextObj_GetText",4),o._FPDFTextObj_GetRenderedBitmap=Z("FPDFTextObj_GetRenderedBitmap",4),o._FPDFFont_Close=Z("FPDFFont_Close",1),o._FPDFPageObj_CreateTextObj=Z("FPDFPageObj_CreateTextObj",3),o._FPDFTextObj_GetTextRenderMode=Z("FPDFTextObj_GetTextRenderMode",1),o._FPDFTextObj_SetTextRenderMode=Z("FPDFTextObj_SetTextRenderMode",2),o._FPDFTextObj_GetFont=Z("FPDFTextObj_GetFont",1),o._FPDFFont_GetBaseFontName=Z("FPDFFont_GetBaseFontName",3),o._FPDFFont_GetFamilyName=Z("FPDFFont_GetFamilyName",3),o._FPDFFont_GetFontData=Z("FPDFFont_GetFontData",4),o._FPDFFont_GetIsEmbedded=Z("FPDFFont_GetIsEmbedded",1),o._FPDFFont_GetFlags=Z("FPDFFont_GetFlags",1),o._FPDFFont_GetWeight=Z("FPDFFont_GetWeight",1),o._FPDFFont_GetItalicAngle=Z("FPDFFont_GetItalicAngle",2),o._FPDFFont_GetAscent=Z("FPDFFont_GetAscent",3),o._FPDFFont_GetDescent=Z("FPDFFont_GetDescent",3),o._FPDFFont_GetGlyphWidth=Z("FPDFFont_GetGlyphWidth",4),o._FPDFFont_GetGlyphPath=Z("FPDFFont_GetGlyphPath",3),o._FPDFGlyphPath_CountGlyphSegments=Z("FPDFGlyphPath_CountGlyphSegments",1),o._FPDFGlyphPath_GetGlyphPathSegment=Z("FPDFGlyphPath_GetGlyphPathSegment",2),o._FPDFDoc_GetPageMode=Z("FPDFDoc_GetPageMode",1),o._FPDFPage_Flatten=Z("FPDFPage_Flatten",2),o._FPDFPage_HasFormFieldAtPoint=Z("FPDFPage_HasFormFieldAtPoint",4),o._FPDFPage_FormFieldZOrderAtPoint=Z("FPDFPage_FormFieldZOrderAtPoint",4),o._malloc=Z("malloc",1),o._free=Z("free",1),o._FORM_OnMouseMove=Z("FORM_OnMouseMove",5),o._FORM_OnMouseWheel=Z("FORM_OnMouseWheel",6),o._FORM_OnFocus=Z("FORM_OnFocus",5),o._FORM_OnLButtonDown=Z("FORM_OnLButtonDown",5),o._FORM_OnLButtonUp=Z("FORM_OnLButtonUp",5),o._FORM_OnLButtonDoubleClick=Z("FORM_OnLButtonDoubleClick",5),o._FORM_OnRButtonDown=Z("FORM_OnRButtonDown",5),o._FORM_OnRButtonUp=Z("FORM_OnRButtonUp",5),o._FORM_OnKeyDown=Z("FORM_OnKeyDown",4),o._FORM_OnKeyUp=Z("FORM_OnKeyUp",4),o._FORM_OnChar=Z("FORM_OnChar",4),o._FORM_GetFocusedText=Z("FORM_GetFocusedText",4),o._FORM_GetSelectedText=Z("FORM_GetSelectedText",4),o._FORM_ReplaceAndKeepSelection=Z("FORM_ReplaceAndKeepSelection",3),o._FORM_ReplaceSelection=Z("FORM_ReplaceSelection",3),o._FORM_SelectAllText=Z("FORM_SelectAllText",2),o._FORM_CanUndo=Z("FORM_CanUndo",2),o._FORM_CanRedo=Z("FORM_CanRedo",2),o._FORM_Undo=Z("FORM_Undo",2),o._FORM_Redo=Z("FORM_Redo",2),o._FORM_ForceToKillFocus=Z("FORM_ForceToKillFocus",1),o._FORM_GetFocusedAnnot=Z("FORM_GetFocusedAnnot",3),o._FORM_SetFocusedAnnot=Z("FORM_SetFocusedAnnot",2),o._FPDF_FFLDraw=Z("FPDF_FFLDraw",9),o._FPDF_SetFormFieldHighlightColor=Z("FPDF_SetFormFieldHighlightColor",3),o._FPDF_SetFormFieldHighlightAlpha=Z("FPDF_SetFormFieldHighlightAlpha",2),o._FPDF_RemoveFormFieldHighlight=Z("FPDF_RemoveFormFieldHighlight",1),o._FORM_OnAfterLoadPage=Z("FORM_OnAfterLoadPage",2),o._FORM_OnBeforeClosePage=Z("FORM_OnBeforeClosePage",2),o._FORM_DoDocumentJSAction=Z("FORM_DoDocumentJSAction",1),o._FORM_DoDocumentOpenAction=Z("FORM_DoDocumentOpenAction",1),o._FORM_DoDocumentAAction=Z("FORM_DoDocumentAAction",2),o._FORM_DoPageAAction=Z("FORM_DoPageAAction",3),o._FORM_SetIndexSelected=Z("FORM_SetIndexSelected",4),o._FORM_IsIndexSelected=Z("FORM_IsIndexSelected",3),o._FPDFDoc_GetJavaScriptActionCount=Z("FPDFDoc_GetJavaScriptActionCount",1),o._FPDFDoc_GetJavaScriptAction=Z("FPDFDoc_GetJavaScriptAction",2),o._FPDFDoc_CloseJavaScriptAction=Z("FPDFDoc_CloseJavaScriptAction",1),o._FPDFJavaScriptAction_GetName=Z("FPDFJavaScriptAction_GetName",3),o._FPDFJavaScriptAction_GetScript=Z("FPDFJavaScriptAction_GetScript",3),o._FPDF_ImportPagesByIndex=Z("FPDF_ImportPagesByIndex",5),o._FPDF_ImportPages=Z("FPDF_ImportPages",4),o._FPDF_ImportNPagesToOne=Z("FPDF_ImportNPagesToOne",5),o._FPDF_NewXObjectFromPage=Z("FPDF_NewXObjectFromPage",3),o._FPDF_CloseXObject=Z("FPDF_CloseXObject",1),o._FPDF_NewFormObjectFromXObject=Z("FPDF_NewFormObjectFromXObject",1),o._FPDF_CopyViewerPreferences=Z("FPDF_CopyViewerPreferences",2),o._FPDF_RenderPageBitmapWithColorScheme_Start=Z("FPDF_RenderPageBitmapWithColorScheme_Start",10),o._FPDF_RenderPageBitmap_Start=Z("FPDF_RenderPageBitmap_Start",9),o._FPDF_RenderPage_Continue=Z("FPDF_RenderPage_Continue",2),o._FPDF_RenderPage_Close=Z("FPDF_RenderPage_Close",1),o._FPDF_SaveWithVersion=Z("FPDF_SaveWithVersion",4),o._FPDFText_GetCharIndexFromTextIndex=Z("FPDFText_GetCharIndexFromTextIndex",2),o._FPDFText_GetTextIndexFromCharIndex=Z("FPDFText_GetTextIndexFromCharIndex",2),o._FPDF_GetSignatureCount=Z("FPDF_GetSignatureCount",1),o._FPDF_GetSignatureObject=Z("FPDF_GetSignatureObject",2),o._FPDFSignatureObj_GetContents=Z("FPDFSignatureObj_GetContents",3),o._FPDFSignatureObj_GetByteRange=Z("FPDFSignatureObj_GetByteRange",3),o._FPDFSignatureObj_GetSubFilter=Z("FPDFSignatureObj_GetSubFilter",3),o._FPDFSignatureObj_GetReason=Z("FPDFSignatureObj_GetReason",3),o._FPDFSignatureObj_GetTime=Z("FPDFSignatureObj_GetTime",3),o._FPDFSignatureObj_GetDocMDPPermission=Z("FPDFSignatureObj_GetDocMDPPermission",1),o._FPDF_StructTree_GetForPage=Z("FPDF_StructTree_GetForPage",1),o._FPDF_StructTree_Close=Z("FPDF_StructTree_Close",1),o._FPDF_StructTree_CountChildren=Z("FPDF_StructTree_CountChildren",1),o._FPDF_StructTree_GetChildAtIndex=Z("FPDF_StructTree_GetChildAtIndex",2),o._FPDF_StructElement_GetAltText=Z("FPDF_StructElement_GetAltText",3),o._FPDF_StructElement_GetActualText=Z("FPDF_StructElement_GetActualText",3),o._FPDF_StructElement_GetID=Z("FPDF_StructElement_GetID",3),o._FPDF_StructElement_GetLang=Z("FPDF_StructElement_GetLang",3),o._FPDF_StructElement_GetAttributeCount=Z("FPDF_StructElement_GetAttributeCount",1),o._FPDF_StructElement_GetAttributeAtIndex=Z("FPDF_StructElement_GetAttributeAtIndex",2),o._FPDF_StructElement_GetStringAttribute=Z("FPDF_StructElement_GetStringAttribute",4),o._FPDF_StructElement_GetMarkedContentID=Z("FPDF_StructElement_GetMarkedContentID",1),o._FPDF_StructElement_GetType=Z("FPDF_StructElement_GetType",3),o._FPDF_StructElement_GetObjType=Z("FPDF_StructElement_GetObjType",3),o._FPDF_StructElement_GetTitle=Z("FPDF_StructElement_GetTitle",3),o._FPDF_StructElement_CountChildren=Z("FPDF_StructElement_CountChildren",1),o._FPDF_StructElement_GetChildAtIndex=Z("FPDF_StructElement_GetChildAtIndex",2),o._FPDF_StructElement_GetChildMarkedContentID=Z("FPDF_StructElement_GetChildMarkedContentID",2),o._FPDF_StructElement_GetParent=Z("FPDF_StructElement_GetParent",1),o._FPDF_StructElement_Attr_GetCount=Z("FPDF_StructElement_Attr_GetCount",1),o._FPDF_StructElement_Attr_GetName=Z("FPDF_StructElement_Attr_GetName",5),o._FPDF_StructElement_Attr_GetValue=Z("FPDF_StructElement_Attr_GetValue",2),o._FPDF_StructElement_Attr_GetType=Z("FPDF_StructElement_Attr_GetType",1),o._FPDF_StructElement_Attr_GetBooleanValue=Z("FPDF_StructElement_Attr_GetBooleanValue",2),o._FPDF_StructElement_Attr_GetNumberValue=Z("FPDF_StructElement_Attr_GetNumberValue",2),o._FPDF_StructElement_Attr_GetStringValue=Z("FPDF_StructElement_Attr_GetStringValue",4),o._FPDF_StructElement_Attr_GetBlobValue=Z("FPDF_StructElement_Attr_GetBlobValue",4),o._FPDF_StructElement_Attr_CountChildren=Z("FPDF_StructElement_Attr_CountChildren",1),o._FPDF_StructElement_Attr_GetChildAtIndex=Z("FPDF_StructElement_Attr_GetChildAtIndex",2),o._FPDF_StructElement_GetMarkedContentIdCount=Z("FPDF_StructElement_GetMarkedContentIdCount",1),o._FPDF_StructElement_GetMarkedContentIdAtIndex=Z("FPDF_StructElement_GetMarkedContentIdAtIndex",2),o._FPDF_AddInstalledFont=Z("FPDF_AddInstalledFont",3),o._FPDF_SetSystemFontInfo=Z("FPDF_SetSystemFontInfo",1),o._FPDF_GetDefaultTTFMap=Z("FPDF_GetDefaultTTFMap",0),o._FPDF_GetDefaultTTFMapCount=Z("FPDF_GetDefaultTTFMapCount",0),o._FPDF_GetDefaultTTFMapEntry=Z("FPDF_GetDefaultTTFMapEntry",1),o._FPDF_GetDefaultSystemFontInfo=Z("FPDF_GetDefaultSystemFontInfo",0),o._FPDF_FreeDefaultSystemFontInfo=Z("FPDF_FreeDefaultSystemFontInfo",1),o._FPDFText_LoadPage=Z("FPDFText_LoadPage",1),o._FPDFText_ClosePage=Z("FPDFText_ClosePage",1),o._FPDFText_CountChars=Z("FPDFText_CountChars",1),o._FPDFText_GetUnicode=Z("FPDFText_GetUnicode",2),o._FPDFText_GetTextObject=Z("FPDFText_GetTextObject",2),o._FPDFText_IsGenerated=Z("FPDFText_IsGenerated",2),o._FPDFText_IsHyphen=Z("FPDFText_IsHyphen",2),o._FPDFText_HasUnicodeMapError=Z("FPDFText_HasUnicodeMapError",2),o._FPDFText_GetFontSize=Z("FPDFText_GetFontSize",2),o._FPDFText_GetFontInfo=Z("FPDFText_GetFontInfo",5),o._FPDFText_GetFontWeight=Z("FPDFText_GetFontWeight",2),o._FPDFText_GetFillColor=Z("FPDFText_GetFillColor",6),o._FPDFText_GetStrokeColor=Z("FPDFText_GetStrokeColor",6),o._FPDFText_GetCharAngle=Z("FPDFText_GetCharAngle",2),o._FPDFText_GetCharBox=Z("FPDFText_GetCharBox",6),o._FPDFText_GetLooseCharBox=Z("FPDFText_GetLooseCharBox",3),o._FPDFText_GetMatrix=Z("FPDFText_GetMatrix",3),o._FPDFText_GetCharOrigin=Z("FPDFText_GetCharOrigin",4),o._FPDFText_GetCharIndexAtPos=Z("FPDFText_GetCharIndexAtPos",5),o._FPDFText_GetText=Z("FPDFText_GetText",4),o._FPDFText_CountRects=Z("FPDFText_CountRects",3),o._FPDFText_GetRect=Z("FPDFText_GetRect",6),o._FPDFText_GetBoundedText=Z("FPDFText_GetBoundedText",7),o._FPDFText_FindStart=Z("FPDFText_FindStart",4),o._FPDFText_FindNext=Z("FPDFText_FindNext",1),o._FPDFText_FindPrev=Z("FPDFText_FindPrev",1),o._FPDFText_GetSchResultIndex=Z("FPDFText_GetSchResultIndex",1),o._FPDFText_GetSchCount=Z("FPDFText_GetSchCount",1),o._FPDFText_FindClose=Z("FPDFText_FindClose",1),o._FPDFLink_LoadWebLinks=Z("FPDFLink_LoadWebLinks",1),o._FPDFLink_CountWebLinks=Z("FPDFLink_CountWebLinks",1),o._FPDFLink_GetURL=Z("FPDFLink_GetURL",4),o._FPDFLink_CountRects=Z("FPDFLink_CountRects",2),o._FPDFLink_GetRect=Z("FPDFLink_GetRect",7),o._FPDFLink_GetTextRange=Z("FPDFLink_GetTextRange",4),o._FPDFLink_CloseWebLinks=Z("FPDFLink_CloseWebLinks",1),o._FPDFPage_GetDecodedThumbnailData=Z("FPDFPage_GetDecodedThumbnailData",3),o._FPDFPage_GetRawThumbnailData=Z("FPDFPage_GetRawThumbnailData",3),o._FPDFPage_GetThumbnailAsBitmap=Z("FPDFPage_GetThumbnailAsBitmap",1),o._FPDFPage_SetMediaBox=Z("FPDFPage_SetMediaBox",5),o._FPDFPage_SetCropBox=Z("FPDFPage_SetCropBox",5),o._FPDFPage_SetBleedBox=Z("FPDFPage_SetBleedBox",5),o._FPDFPage_SetTrimBox=Z("FPDFPage_SetTrimBox",5),o._FPDFPage_SetArtBox=Z("FPDFPage_SetArtBox",5),o._FPDFPage_GetMediaBox=Z("FPDFPage_GetMediaBox",5),o._FPDFPage_GetCropBox=Z("FPDFPage_GetCropBox",5),o._FPDFPage_GetBleedBox=Z("FPDFPage_GetBleedBox",5),o._FPDFPage_GetTrimBox=Z("FPDFPage_GetTrimBox",5),o._FPDFPage_GetArtBox=Z("FPDFPage_GetArtBox",5),o._FPDFPage_TransFormWithClip=Z("FPDFPage_TransFormWithClip",3),o._FPDFPageObj_TransformClipPath=Z("FPDFPageObj_TransformClipPath",7),o._FPDFPageObj_GetClipPath=Z("FPDFPageObj_GetClipPath",1),o._FPDFClipPath_CountPaths=Z("FPDFClipPath_CountPaths",1),o._FPDFClipPath_CountPathSegments=Z("FPDFClipPath_CountPathSegments",2),o._FPDFClipPath_GetPathSegment=Z("FPDFClipPath_GetPathSegment",3),o._FPDF_CreateClipPath=Z("FPDF_CreateClipPath",4),o._FPDF_DestroyClipPath=Z("FPDF_DestroyClipPath",1),o._FPDFPage_InsertClipPath=Z("FPDFPage_InsertClipPath",2),o._FPDF_InitLibrary=Z("FPDF_InitLibrary",0),o._FPDF_DestroyLibrary=Z("FPDF_DestroyLibrary",0),o._FPDF_SetSandBoxPolicy=Z("FPDF_SetSandBoxPolicy",2),o._FPDF_LoadDocument=Z("FPDF_LoadDocument",2),o._FPDF_GetFormType=Z("FPDF_GetFormType",1),o._FPDF_LoadXFA=Z("FPDF_LoadXFA",1),o._FPDF_LoadMemDocument=Z("FPDF_LoadMemDocument",3),o._FPDF_LoadMemDocument64=Z("FPDF_LoadMemDocument64",3),o._FPDF_LoadCustomDocument=Z("FPDF_LoadCustomDocument",2),o._FPDF_GetFileVersion=Z("FPDF_GetFileVersion",2),o._FPDF_DocumentHasValidCrossReferenceTable=Z("FPDF_DocumentHasValidCrossReferenceTable",1),o._FPDF_GetDocPermissions=Z("FPDF_GetDocPermissions",1),o._FPDF_GetDocUserPermissions=Z("FPDF_GetDocUserPermissions",1),o._FPDF_GetSecurityHandlerRevision=Z("FPDF_GetSecurityHandlerRevision",1),o._FPDF_GetPageCount=Z("FPDF_GetPageCount",1),o._FPDF_LoadPage=Z("FPDF_LoadPage",2),o._FPDF_GetPageWidthF=Z("FPDF_GetPageWidthF",1),o._FPDF_GetPageWidth=Z("FPDF_GetPageWidth",1),o._FPDF_GetPageHeightF=Z("FPDF_GetPageHeightF",1),o._FPDF_GetPageHeight=Z("FPDF_GetPageHeight",1),o._FPDF_GetPageBoundingBox=Z("FPDF_GetPageBoundingBox",2),o._FPDF_RenderPageBitmap=Z("FPDF_RenderPageBitmap",8),o._FPDF_RenderPageBitmapWithMatrix=Z("FPDF_RenderPageBitmapWithMatrix",5),o._EPDF_RenderAnnotBitmap=Z("EPDF_RenderAnnotBitmap",6),o._FPDF_ClosePage=Z("FPDF_ClosePage",1),o._FPDF_CloseDocument=Z("FPDF_CloseDocument",1),o._FPDF_GetLastError=Z("FPDF_GetLastError",0),o._FPDF_DeviceToPage=Z("FPDF_DeviceToPage",10),o._FPDF_PageToDevice=Z("FPDF_PageToDevice",10),o._FPDFBitmap_Create=Z("FPDFBitmap_Create",3),o._FPDFBitmap_CreateEx=Z("FPDFBitmap_CreateEx",5),o._FPDFBitmap_GetFormat=Z("FPDFBitmap_GetFormat",1),o._FPDFBitmap_FillRect=Z("FPDFBitmap_FillRect",6),o._FPDFBitmap_GetBuffer=Z("FPDFBitmap_GetBuffer",1),o._FPDFBitmap_GetWidth=Z("FPDFBitmap_GetWidth",1),o._FPDFBitmap_GetHeight=Z("FPDFBitmap_GetHeight",1),o._FPDFBitmap_GetStride=Z("FPDFBitmap_GetStride",1),o._FPDFBitmap_Destroy=Z("FPDFBitmap_Destroy",1),o._FPDF_GetPageSizeByIndexF=Z("FPDF_GetPageSizeByIndexF",3),o._FPDF_GetPageSizeByIndex=Z("FPDF_GetPageSizeByIndex",4),o._FPDF_VIEWERREF_GetPrintScaling=Z("FPDF_VIEWERREF_GetPrintScaling",1),o._FPDF_VIEWERREF_GetNumCopies=Z("FPDF_VIEWERREF_GetNumCopies",1),o._FPDF_VIEWERREF_GetPrintPageRange=Z("FPDF_VIEWERREF_GetPrintPageRange",1),o._FPDF_VIEWERREF_GetPrintPageRangeCount=Z("FPDF_VIEWERREF_GetPrintPageRangeCount",1),o._FPDF_VIEWERREF_GetPrintPageRangeElement=Z("FPDF_VIEWERREF_GetPrintPageRangeElement",2),o._FPDF_VIEWERREF_GetDuplex=Z("FPDF_VIEWERREF_GetDuplex",1),o._FPDF_VIEWERREF_GetName=Z("FPDF_VIEWERREF_GetName",4),o._FPDF_CountNamedDests=Z("FPDF_CountNamedDests",1),o._FPDF_GetNamedDestByName=Z("FPDF_GetNamedDestByName",2),o._FPDF_GetNamedDest=Z("FPDF_GetNamedDest",4),o._FPDF_GetXFAPacketCount=Z("FPDF_GetXFAPacketCount",1),o._FPDF_GetXFAPacketName=Z("FPDF_GetXFAPacketName",4),o._FPDF_GetXFAPacketContent=Z("FPDF_GetXFAPacketContent",5),o._FPDF_GetTrailerEnds=Z("FPDF_GetTrailerEnds",3);var Je,Qe,et=Z("fflush",1),tt=Z("emscripten_builtin_memalign",2),nt=Z("strerror",1),rt=Z("setThrew",2),ot=()=>(ot=Ke.emscripten_stack_init)(),it=()=>(it=Ke.emscripten_stack_get_end)(),at=e=>(at=Ke._emscripten_stack_restore)(e),st=e=>(st=Ke._emscripten_stack_alloc)(e),lt=()=>(lt=Ke.emscripten_stack_get_current)();function ut(){ot(),function(){var e=it();E(!(3&e)),0==e&&(e+=4),w[e>>2]=34821223,w[e+4>>2]=2310721022,w[0]=1668509029}()}function dt(){var e;function t(){Je||(Je=1,o.calledRun=1,S||(E(!I),I=!0,M(),o.noFSInit||Te.initialized||Te.init(),Te.ignorePermissions=!1,ie(G),n(o),o.onRuntimeInitialized?.(),E(!o._main,'compiled without a main, but one is present. if you added it from JS, use Module["onRuntimeInitialized"]'),function(){M();var e=o.postRun;e&&("function"==typeof e&&(e=[e]),e.forEach(R)),ie(k)}()))}L>0||(ut(),!Qe&&(Qe=1,(e=o.preRun)&&("function"==typeof e&&(e=[e]),e.forEach(O)),ie(T),L>0)||(o.setStatus?(o.setStatus("Running..."),setTimeout((()=>{setTimeout((()=>o.setStatus("")),1),t()}),1)):t(),M()))}if(o.dynCall_ji=Z("dynCall_ji",2),o.dynCall_jij=Z("dynCall_jij",4),o.dynCall_iiij=Z("dynCall_iiij",5),o.dynCall_iij=Z("dynCall_iij",4),o.dynCall_j=Z("dynCall_j",1),o.dynCall_jji=Z("dynCall_jji",4),o.dynCall_iji=Z("dynCall_iji",4),o.dynCall_viijii=Z("dynCall_viijii",7),o.dynCall_iiji=Z("dynCall_iiji",5),o.dynCall_jiji=Z("dynCall_jiji",5),o.dynCall_iiiiij=Z("dynCall_iiiiij",7),o.dynCall_iiiiijj=Z("dynCall_iiiiijj",9),o.dynCall_iiiiiijj=Z("dynCall_iiiiiijj",10),o.dynCall_viji=Z("dynCall_viji",5),o.wasmExports=Ke,o.ccall=Ye,o.cwrap=(e,t,n,r)=>(...r)=>Ye(e,t,n,r),o.addFunction=(e,t)=>{E(void 0!==e);var n=We(e);if(n)return n;var r=(()=>{if($e.length)return $e.pop();try{ve.grow(1)}catch(e){if(!(e instanceof RangeError))throw e;throw"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH."}return ve.length-1})();try{qe(r,e)}catch(n){if(!(n instanceof TypeError))throw n;E(void 0!==t,"Missing signature argument to addFunction: "+e);var o=He(e,t);qe(r,o)}return ye.set(e,r),r},o.removeFunction=e=>{ye.delete(ze(e)),qe(e,null),$e.push(e)},o.setValue=function(e,t,n="i8"){switch(n.endsWith("*")&&(n="*"),n){case"i1":case"i8":f[e]=t;break;case"i16":D[e>>1]=t;break;case"i32":y[e>>2]=t;break;case"i64":H("to do setValue(i64) use WASM_BIGINT");case"float":x[e>>2]=t;break;case"double":A[e>>3]=t;break;case"*":w[e>>2]=t;break;default:H(`invalid type for setValue: ${n}`)}},o.getValue=function(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":case"i8":return f[e];case"i16":return D[e>>1];case"i32":return y[e>>2];case"i64":H("to do getValue(i64) use WASM_BIGINT");case"float":return x[e>>2];case"double":return A[e>>3];case"*":return w[e>>2];default:H(`invalid type for getValue: ${t}`)}},o.UTF8ToString=me,o.stringToUTF8=Ie,o.UTF16ToString=(e,t)=>{E(e%2==0,"Pointer passed to UTF16ToString must be aligned to two bytes!");for(var n=e,r=n>>1,o=r+t/2;!(r>=o)&&v[r];)++r;if((n=r<<1)-e>32&&Ue)return Ue.decode(P.subarray(e,n));for(var i="",a=0;!(a>=t/2);++a){var s=D[e+2*a>>1];if(0==s)break;i+=String.fromCharCode(s)}return i},o.stringToUTF16=(e,t,n)=>{if(E(t%2==0,"Pointer passed to stringToUTF16 must be aligned to two bytes!"),E("number"==typeof n,"stringToUTF16(str, outPtr, maxBytesToWrite) is missing the third parameter that specifies the length of the output buffer!"),n??=2147483647,n<2)return 0;for(var r=t,o=(n-=2)<2*e.length?n/2:e.length,i=0;i<o;++i){var a=e.charCodeAt(i);D[t>>1]=a,t+=2}return D[t>>1]=0,t-r},["writeI53ToI64","writeI53ToI64Clamped","writeI53ToI64Signaling","writeI53ToU64Clamped","writeI53ToU64Signaling","readI53FromI64","readI53FromU64","convertI32PairToI53","convertU32PairToI53","getTempRet0","setTempRet0","exitJS","inetPton4","inetNtop4","inetPton6","inetNtop6","readSockaddr","writeSockaddr","emscriptenLog","readEmAsmArgs","jstoi_q","listenOnce","autoResumeAudioContext","dynCallLegacy","getDynCaller","dynCall","handleException","keepRuntimeAlive","runtimeKeepalivePush","runtimeKeepalivePop","callUserCallback","maybeExit","asmjsMangle","HandleAllocator","getNativeTypeSize","STACK_SIZE","STACK_ALIGN","POINTER_SIZE","ASSERTIONS","reallyNegative","unSign","strLen","reSign","formatString","intArrayToString","AsciiToString","lengthBytesUTF16","UTF32ToString","stringToUTF32","lengthBytesUTF32","stringToNewUTF8","registerKeyEventCallback","maybeCStringToJsString","findEventTarget","getBoundingClientRect","fillMouseEventData","registerMouseEventCallback","registerWheelEventCallback","registerUiEventCallback","registerFocusEventCallback","fillDeviceOrientationEventData","registerDeviceOrientationEventCallback","fillDeviceMotionEventData","registerDeviceMotionEventCallback","screenOrientation","fillOrientationChangeEventData","registerOrientationChangeEventCallback","fillFullscreenChangeEventData","registerFullscreenChangeEventCallback","JSEvents_requestFullscreen","JSEvents_resizeCanvasForFullscreen","registerRestoreOldStyle","hideEverythingExceptGivenElement","restoreHiddenElements","setLetterbox","softFullscreenResizeWebGLRenderTarget","doRequestFullscreen","fillPointerlockChangeEventData","registerPointerlockChangeEventCallback","registerPointerlockErrorEventCallback","requestPointerLock","fillVisibilityChangeEventData","registerVisibilityChangeEventCallback","registerTouchEventCallback","fillGamepadEventData","registerGamepadEventCallback","registerBeforeUnloadEventCallback","fillBatteryEventData","battery","registerBatteryEventCallback","setCanvasElementSize","getCanvasElementSize","jsStackTrace","getCallstack","convertPCtoSourceLocation","checkWasiClock","wasiRightsToMuslOFlags","wasiOFlagsToMuslOFlags","createDyncallWrapper","safeSetTimeout","setImmediateWrapped","clearImmediateWrapped","polyfillSetImmediate","registerPostMainLoop","registerPreMainLoop","getPromise","makePromise","idsToPromises","makePromiseCallback","ExceptionInfo","findMatchingCatch","Browser_asyncPrepareDataCounter","safeRequestAnimationFrame","arraySum","addDays","getSocketFromFD","getSocketAddress","FS_unlink","FS_mkdirTree","_setNetworkCallback","heapObjectForWebGLType","toTypedArrayIndex","webgl_enable_ANGLE_instanced_arrays","webgl_enable_OES_vertex_array_object","webgl_enable_WEBGL_draw_buffers","webgl_enable_WEBGL_multi_draw","webgl_enable_EXT_polygon_offset_clamp","webgl_enable_EXT_clip_control","webgl_enable_WEBGL_polygon_mode","emscriptenWebGLGet","computeUnpackAlignedImageSize","colorChannelsInGlTextureFormat","emscriptenWebGLGetTexPixelData","emscriptenWebGLGetUniform","webglGetUniformLocation","webglPrepareUniformLocationsBeforeFirstUse","webglGetLeftBracePos","emscriptenWebGLGetVertexAttrib","__glGetActiveAttribOrUniform","writeGLArray","registerWebGlEventCallback","runAndAbortIfError","ALLOC_NORMAL","ALLOC_STACK","allocate","writeStringToMemory","writeAsciiToMemory","setErrNo","demangle","stackTrace"].forEach((function(e){ne(e,(()=>{var t=`\`${e}\` is a library symbol and not included by default; add it to your library.js __deps or to DEFAULT_LIBRARY_FUNCS_TO_INCLUDE on the command line`,n=e;n.startsWith("_")||(n="$"+e),t+=` (e.g. -sDEFAULT_LIBRARY_FUNCS_TO_INCLUDE='${n}')`,te(e)&&(t+=". Alternatively, forcing filesystem support (-sFORCE_FILESYSTEM) can export this for you"),ue(t)})),oe(e)})),["run","addOnPreRun","addOnInit","addOnPreMain","addOnExit","addOnPostRun","addRunDependency","removeRunDependency","out","err","callMain","abort","wasmMemory","writeStackCookie","checkStackCookie","convertI32PairToI53Checked","stackSave","stackRestore","stackAlloc","ptrToString","zeroMemory","getHeapMax","growMemory","ENV","ERRNO_CODES","strError","DNS","Protocols","Sockets","initRandomFill","randomFill","timers","warnOnce","readEmAsmArgsArray","jstoi_s","getExecutableName","asyncLoad","alignMemory","mmapAlloc","wasmTable","noExitRuntime","getCFunc","uleb128Encode","sigToWasmTypes","generateFuncType","convertJsFunctionToWasm","freeTableIndexes","functionsInTableMap","getEmptyTableSlot","updateTableMap","getFunctionAddress","PATH","PATH_FS","UTF8Decoder","UTF8ArrayToString","stringToUTF8Array","lengthBytesUTF8","intArrayFromString","stringToAscii","UTF16Decoder","stringToUTF8OnStack","writeArrayToMemory","JSEvents","specialHTMLTargets","findCanvasEventTarget","currentFullscreenStrategy","restoreOldWindowedStyle","UNWIND_CACHE","ExitStatus","getEnvStrings","doReadv","doWritev","promiseMap","uncaughtExceptionCount","exceptionLast","exceptionCaught","Browser","getPreloadedImageData__data","wget","MONTH_DAYS_REGULAR","MONTH_DAYS_LEAP","MONTH_DAYS_REGULAR_CUMULATIVE","MONTH_DAYS_LEAP_CUMULATIVE","isLeapYear","ydayFromDate","SYSCALLS","preloadPlugins","FS_createPreloadedFile","FS_modeStringToFlags","FS_getMode","FS_stdin_getChar_buffer","FS_stdin_getChar","FS_createPath","FS_createDevice","FS_readFile","FS","FS_createDataFile","FS_createLazyFile","MEMFS","TTY","PIPEFS","SOCKFS","tempFixedLengthArray","miniTempWebGLFloatBuffers","miniTempWebGLIntBuffers","GL","AL","GLUT","EGL","GLEW","IDBStore","SDL","SDL_gfx","allocateUTF8","allocateUTF8OnStack","print","printErr"].forEach(oe),N=function e(){Je||dt(),Je||(N=e)},o.preInit)for("function"==typeof o.preInit&&(o.preInit=[o.preInit]);o.preInit.length>0;)o.preInit.pop()();dt(),t=i;for(const t of Object.keys(o))t in e||Object.defineProperty(e,t,{configurable:!0,get(){H(`Access to module property ('${t}') is no longer possible via the module constructor argument; Instead, use the result of the module constructor.`)}});return t});const jl={EPDF_RenderAnnotBitmap:[["number","number","number","number","number","number"],"boolean"],EPDFAnnot_GenerateAppearance:[["number"],"boolean"],EPDFAnnot_GenerateAppearanceWithBlend:[["number","number"],"boolean"],EPDFAnnot_GetBlendMode:[["number"],"number"],EPDFAnnot_GetBorderDashPattern:[["number","number","number"],"boolean"],EPDFAnnot_GetBorderDashPatternCount:[["number"],"number"],EPDFAnnot_GetBorderEffect:[["number","number"],"boolean"],EPDFAnnot_GetBorderStyle:[["number","number"],"number"],EPDFAnnot_GetColor:[["number","number","number","number","number","number"],"boolean"],EPDFAnnot_GetIntent:[["number","number","number"],"number"],EPDFAnnot_GetRectangleDifferences:[["number","number","number","number","number"],"boolean"],EPDFAnnot_GetRichContent:[["number","number","number"],"number"],EPDFAnnot_SetBorderStyle:[["number","number","number"],"boolean"],EPDFAnnot_SetColor:[["number","number","number","number","number","number"],"boolean"],EPDFAnnot_SetIntent:[["number","string"],"boolean"],FORM_CanRedo:[["number","number"],"boolean"],FORM_CanUndo:[["number","number"],"boolean"],FORM_DoDocumentAAction:[["number","number"],null],FORM_DoDocumentJSAction:[["number"],null],FORM_DoDocumentOpenAction:[["number"],null],FORM_DoPageAAction:[["number","number","number"],null],FORM_ForceToKillFocus:[["number"],"boolean"],FORM_GetFocusedAnnot:[["number","number","number"],"boolean"],FORM_GetFocusedText:[["number","number","number","number"],"number"],FORM_GetSelectedText:[["number","number","number","number"],"number"],FORM_IsIndexSelected:[["number","number","number"],"boolean"],FORM_OnAfterLoadPage:[["number","number"],null],FORM_OnBeforeClosePage:[["number","number"],null],FORM_OnChar:[["number","number","number","number"],"boolean"],FORM_OnFocus:[["number","number","number","number","number"],"boolean"],FORM_OnKeyDown:[["number","number","number","number"],"boolean"],FORM_OnKeyUp:[["number","number","number","number"],"boolean"],FORM_OnLButtonDoubleClick:[["number","number","number","number","number"],"boolean"],FORM_OnLButtonDown:[["number","number","number","number","number"],"boolean"],FORM_OnLButtonUp:[["number","number","number","number","number"],"boolean"],FORM_OnMouseMove:[["number","number","number","number","number"],"boolean"],FORM_OnMouseWheel:[["number","number","number","number","number","number"],"boolean"],FORM_OnRButtonDown:[["number","number","number","number","number"],"boolean"],FORM_OnRButtonUp:[["number","number","number","number","number"],"boolean"],FORM_Redo:[["number","number"],"boolean"],FORM_ReplaceAndKeepSelection:[["number","number","number"],null],FORM_ReplaceSelection:[["number","number","number"],null],FORM_SelectAllText:[["number","number"],"boolean"],FORM_SetFocusedAnnot:[["number","number"],"boolean"],FORM_SetIndexSelected:[["number","number","number","boolean"],"boolean"],FORM_Undo:[["number","number"],"boolean"],FPDF_AddInstalledFont:[["number","number","number"],null],FPDF_CloseDocument:[["number"],null],FPDF_ClosePage:[["number"],null],FPDF_CloseXObject:[["number"],null],FPDF_CopyViewerPreferences:[["number","number"],"boolean"],FPDF_CountNamedDests:[["number"],"number"],FPDF_CreateClipPath:[["number","number","number","number"],"number"],FPDF_CreateNewDocument:[[],"number"],FPDF_DestroyClipPath:[["number"],null],FPDF_DestroyLibrary:[[],null],FPDF_DeviceToPage:[["number","number","number","number","number","number","number","number","number","number"],"boolean"],FPDF_DocumentHasValidCrossReferenceTable:[["number"],"boolean"],FPDF_FFLDraw:[["number","number","number","number","number","number","number","number","number"],null],FPDF_FreeDefaultSystemFontInfo:[["number"],null],FPDF_GetDefaultSystemFontInfo:[[],"number"],FPDF_GetDefaultTTFMap:[[],"number"],FPDF_GetDefaultTTFMapCount:[[],"number"],FPDF_GetDefaultTTFMapEntry:[["number"],"number"],FPDF_GetDocPermissions:[["number"],"number"],FPDF_GetDocUserPermissions:[["number"],"number"],FPDF_GetFileIdentifier:[["number","number","number","number"],"number"],FPDF_GetFileVersion:[["number","number"],"boolean"],FPDF_GetFormType:[["number"],"number"],FPDF_GetLastError:[[],"number"],FPDF_GetMetaText:[["number","string","number","number"],"number"],FPDF_GetNamedDest:[["number","number","number","number"],"number"],FPDF_GetNamedDestByName:[["number","string"],"number"],FPDF_GetPageAAction:[["number","number"],"number"],FPDF_GetPageBoundingBox:[["number","number"],"boolean"],FPDF_GetPageCount:[["number"],"number"],FPDF_GetPageHeight:[["number"],"number"],FPDF_GetPageHeightF:[["number"],"number"],FPDF_GetPageLabel:[["number","number","number","number"],"number"],FPDF_GetPageSizeByIndex:[["number","number","number","number"],"number"],FPDF_GetPageSizeByIndexF:[["number","number","number"],"boolean"],FPDF_GetPageWidth:[["number"],"number"],FPDF_GetPageWidthF:[["number"],"number"],FPDF_GetSecurityHandlerRevision:[["number"],"number"],FPDF_GetSignatureCount:[["number"],"number"],FPDF_GetSignatureObject:[["number","number"],"number"],FPDF_GetTrailerEnds:[["number","number","number"],"number"],FPDF_GetXFAPacketContent:[["number","number","number","number","number"],"boolean"],FPDF_GetXFAPacketCount:[["number"],"number"],FPDF_GetXFAPacketName:[["number","number","number","number"],"number"],FPDF_ImportNPagesToOne:[["number","number","number","number","number"],"number"],FPDF_ImportPages:[["number","number","string","number"],"boolean"],FPDF_ImportPagesByIndex:[["number","number","number","number","number"],"boolean"],FPDF_InitLibrary:[[],null],FPDF_InitLibraryWithConfig:[["number"],null],FPDF_LoadCustomDocument:[["number","string"],"number"],FPDF_LoadDocument:[["number","string"],"number"],FPDF_LoadMemDocument:[["number","number","string"],"number"],FPDF_LoadMemDocument64:[["number","number","string"],"number"],FPDF_LoadPage:[["number","number"],"number"],FPDF_LoadXFA:[["number"],"boolean"],FPDF_MovePages:[["number","number","number","number"],"boolean"],FPDF_NewFormObjectFromXObject:[["number"],"number"],FPDF_NewXObjectFromPage:[["number","number","number"],"number"],FPDF_PageToDevice:[["number","number","number","number","number","number","number","number","number","number"],"boolean"],FPDF_RemoveFormFieldHighlight:[["number"],null],FPDF_RenderPage_Close:[["number"],null],FPDF_RenderPage_Continue:[["number","number"],"number"],FPDF_RenderPageBitmap:[["number","number","number","number","number","number","number","number"],null],FPDF_RenderPageBitmap_Start:[["number","number","number","number","number","number","number","number","number"],"number"],FPDF_RenderPageBitmapWithColorScheme_Start:[["number","number","number","number","number","number","number","number","number","number"],"number"],FPDF_RenderPageBitmapWithMatrix:[["number","number","number","number","number"],null],FPDF_SaveAsCopy:[["number","number","number"],"boolean"],FPDF_SaveWithVersion:[["number","number","number","number"],"boolean"],FPDF_SetFormFieldHighlightAlpha:[["number","number"],null],FPDF_SetFormFieldHighlightColor:[["number","number","number"],null],FPDF_SetSandBoxPolicy:[["number","boolean"],null],FPDF_SetSystemFontInfo:[["number"],null],FPDF_StructElement_Attr_CountChildren:[["number"],"number"],FPDF_StructElement_Attr_GetBlobValue:[["number","number","number","number"],"boolean"],FPDF_StructElement_Attr_GetBooleanValue:[["number","number"],"boolean"],FPDF_StructElement_Attr_GetChildAtIndex:[["number","number"],"number"],FPDF_StructElement_Attr_GetCount:[["number"],"number"],FPDF_StructElement_Attr_GetName:[["number","number","number","number","number"],"boolean"],FPDF_StructElement_Attr_GetNumberValue:[["number","number"],"boolean"],FPDF_StructElement_Attr_GetStringValue:[["number","number","number","number"],"boolean"],FPDF_StructElement_Attr_GetType:[["number"],"number"],FPDF_StructElement_Attr_GetValue:[["number","string"],"number"],FPDF_StructElement_CountChildren:[["number"],"number"],FPDF_StructElement_GetActualText:[["number","number","number"],"number"],FPDF_StructElement_GetAltText:[["number","number","number"],"number"],FPDF_StructElement_GetAttributeAtIndex:[["number","number"],"number"],FPDF_StructElement_GetAttributeCount:[["number"],"number"],FPDF_StructElement_GetChildAtIndex:[["number","number"],"number"],FPDF_StructElement_GetChildMarkedContentID:[["number","number"],"number"],FPDF_StructElement_GetID:[["number","number","number"],"number"],FPDF_StructElement_GetLang:[["number","number","number"],"number"],FPDF_StructElement_GetMarkedContentID:[["number"],"number"],FPDF_StructElement_GetMarkedContentIdAtIndex:[["number","number"],"number"],FPDF_StructElement_GetMarkedContentIdCount:[["number"],"number"],FPDF_StructElement_GetObjType:[["number","number","number"],"number"],FPDF_StructElement_GetParent:[["number"],"number"],FPDF_StructElement_GetStringAttribute:[["number","string","number","number"],"number"],FPDF_StructElement_GetTitle:[["number","number","number"],"number"],FPDF_StructElement_GetType:[["number","number","number"],"number"],FPDF_StructTree_Close:[["number"],null],FPDF_StructTree_CountChildren:[["number"],"number"],FPDF_StructTree_GetChildAtIndex:[["number","number"],"number"],FPDF_StructTree_GetForPage:[["number"],"number"],FPDF_VIEWERREF_GetDuplex:[["number"],"number"],FPDF_VIEWERREF_GetName:[["number","string","number","number"],"number"],FPDF_VIEWERREF_GetNumCopies:[["number"],"number"],FPDF_VIEWERREF_GetPrintPageRange:[["number"],"number"],FPDF_VIEWERREF_GetPrintPageRangeCount:[["number"],"number"],FPDF_VIEWERREF_GetPrintPageRangeElement:[["number","number"],"number"],FPDF_VIEWERREF_GetPrintScaling:[["number"],"boolean"],FPDFAction_GetDest:[["number","number"],"number"],FPDFAction_GetFilePath:[["number","number","number"],"number"],FPDFAction_GetType:[["number"],"number"],FPDFAction_GetURIPath:[["number","number","number","number"],"number"],FPDFAnnot_AddFileAttachment:[["number","number"],"number"],FPDFAnnot_AddInkStroke:[["number","number","number"],"number"],FPDFAnnot_AppendAttachmentPoints:[["number","number"],"boolean"],FPDFAnnot_AppendObject:[["number","number"],"boolean"],FPDFAnnot_CountAttachmentPoints:[["number"],"number"],FPDFAnnot_GetAP:[["number","number","number","number"],"number"],FPDFAnnot_GetAttachmentPoints:[["number","number","number"],"boolean"],FPDFAnnot_GetBorder:[["number","number","number","number"],"boolean"],FPDFAnnot_GetColor:[["number","number","number","number","number","number"],"boolean"],FPDFAnnot_GetFileAttachment:[["number"],"number"],FPDFAnnot_GetFlags:[["number"],"number"],FPDFAnnot_GetFocusableSubtypes:[["number","number","number"],"boolean"],FPDFAnnot_GetFocusableSubtypesCount:[["number"],"number"],FPDFAnnot_GetFontColor:[["number","number","number","number","number"],"boolean"],FPDFAnnot_GetFontSize:[["number","number","number"],"boolean"],FPDFAnnot_GetFormAdditionalActionJavaScript:[["number","number","number","number","number"],"number"],FPDFAnnot_GetFormControlCount:[["number","number"],"number"],FPDFAnnot_GetFormControlIndex:[["number","number"],"number"],FPDFAnnot_GetFormFieldAlternateName:[["number","number","number","number"],"number"],FPDFAnnot_GetFormFieldAtPoint:[["number","number","number"],"number"],FPDFAnnot_GetFormFieldExportValue:[["number","number","number","number"],"number"],FPDFAnnot_GetFormFieldFlags:[["number","number"],"number"],FPDFAnnot_GetFormFieldName:[["number","number","number","number"],"number"],FPDFAnnot_GetFormFieldType:[["number","number"],"number"],FPDFAnnot_GetFormFieldValue:[["number","number","number","number"],"number"],FPDFAnnot_GetInkListCount:[["number"],"number"],FPDFAnnot_GetInkListPath:[["number","number","number","number"],"number"],FPDFAnnot_GetLine:[["number","number","number"],"boolean"],FPDFAnnot_GetLink:[["number"],"number"],FPDFAnnot_GetLinkedAnnot:[["number","string"],"number"],FPDFAnnot_GetNumberValue:[["number","string","number"],"boolean"],FPDFAnnot_GetObject:[["number","number"],"number"],FPDFAnnot_GetObjectCount:[["number"],"number"],FPDFAnnot_GetOptionCount:[["number","number"],"number"],FPDFAnnot_GetOptionLabel:[["number","number","number","number","number"],"number"],FPDFAnnot_GetRect:[["number","number"],"boolean"],FPDFAnnot_GetStringValue:[["number","string","number","number"],"number"],FPDFAnnot_GetSubtype:[["number"],"number"],FPDFAnnot_GetValueType:[["number","string"],"number"],FPDFAnnot_GetVertices:[["number","number","number"],"number"],FPDFAnnot_HasAttachmentPoints:[["number"],"boolean"],FPDFAnnot_HasKey:[["number","string"],"boolean"],FPDFAnnot_IsChecked:[["number","number"],"boolean"],FPDFAnnot_IsObjectSupportedSubtype:[["number"],"boolean"],FPDFAnnot_IsOptionSelected:[["number","number","number"],"boolean"],FPDFAnnot_IsSupportedSubtype:[["number"],"boolean"],FPDFAnnot_RemoveInkList:[["number"],"boolean"],FPDFAnnot_RemoveObject:[["number","number"],"boolean"],FPDFAnnot_SetAP:[["number","number","number"],"boolean"],FPDFAnnot_SetAttachmentPoints:[["number","number","number"],"boolean"],FPDFAnnot_SetBorder:[["number","number","number","number"],"boolean"],FPDFAnnot_SetColor:[["number","number","number","number","number","number"],"boolean"],FPDFAnnot_SetFlags:[["number","number"],"boolean"],FPDFAnnot_SetFocusableSubtypes:[["number","number","number"],"boolean"],FPDFAnnot_SetFontColor:[["number","number","number","number","number"],"boolean"],FPDFAnnot_SetFormFieldFlags:[["number","number","number"],"boolean"],FPDFAnnot_SetRect:[["number","number"],"boolean"],FPDFAnnot_SetStringValue:[["number","string","number"],"boolean"],FPDFAnnot_SetURI:[["number","number"],"boolean"],FPDFAnnot_UpdateObject:[["number","number"],"boolean"],FPDFAttachment_GetFile:[["number","number","number","number"],"boolean"],FPDFAttachment_GetName:[["number","number","number"],"number"],FPDFAttachment_GetStringValue:[["number","string","number","number"],"number"],FPDFAttachment_GetSubtype:[["number","number","number"],"number"],FPDFAttachment_GetValueType:[["number","string"],"number"],FPDFAttachment_HasKey:[["number","string"],"boolean"],FPDFAttachment_SetFile:[["number","number","number","number"],"boolean"],FPDFAttachment_SetStringValue:[["number","string","number"],"boolean"],FPDFAvail_Create:[["number","number"],"number"],FPDFAvail_Destroy:[["number"],null],FPDFAvail_GetDocument:[["number","string"],"number"],FPDFAvail_GetFirstPageNum:[["number"],"number"],FPDFAvail_IsDocAvail:[["number","number"],"number"],FPDFAvail_IsFormAvail:[["number","number"],"number"],FPDFAvail_IsLinearized:[["number"],"number"],FPDFAvail_IsPageAvail:[["number","number","number"],"number"],FPDFBitmap_Create:[["number","number","number"],"number"],FPDFBitmap_CreateEx:[["number","number","number","number","number"],"number"],FPDFBitmap_Destroy:[["number"],null],FPDFBitmap_FillRect:[["number","number","number","number","number","number"],"boolean"],FPDFBitmap_GetBuffer:[["number"],"number"],FPDFBitmap_GetFormat:[["number"],"number"],FPDFBitmap_GetHeight:[["number"],"number"],FPDFBitmap_GetStride:[["number"],"number"],FPDFBitmap_GetWidth:[["number"],"number"],FPDFBookmark_Find:[["number","number"],"number"],FPDFBookmark_GetAction:[["number"],"number"],FPDFBookmark_GetCount:[["number"],"number"],FPDFBookmark_GetDest:[["number","number"],"number"],FPDFBookmark_GetFirstChild:[["number","number"],"number"],FPDFBookmark_GetNextSibling:[["number","number"],"number"],FPDFBookmark_GetTitle:[["number","number","number"],"number"],FPDFCatalog_IsTagged:[["number"],"boolean"],FPDFCatalog_SetLanguage:[["number","string"],"boolean"],FPDFClipPath_CountPaths:[["number"],"number"],FPDFClipPath_CountPathSegments:[["number","number"],"number"],FPDFClipPath_GetPathSegment:[["number","number","number"],"number"],FPDFDest_GetDestPageIndex:[["number","number"],"number"],FPDFDest_GetLocationInPage:[["number","number","number","number","number","number","number"],"boolean"],FPDFDest_GetView:[["number","number","number"],"number"],FPDFDoc_AddAttachment:[["number","number"],"number"],FPDFDoc_CloseJavaScriptAction:[["number"],null],FPDFDoc_DeleteAttachment:[["number","number"],"boolean"],FPDFDOC_ExitFormFillEnvironment:[["number"],null],FPDFDoc_GetAttachment:[["number","number"],"number"],FPDFDoc_GetAttachmentCount:[["number"],"number"],FPDFDoc_GetJavaScriptAction:[["number","number"],"number"],FPDFDoc_GetJavaScriptActionCount:[["number"],"number"],FPDFDoc_GetPageMode:[["number"],"number"],FPDFDOC_InitFormFillEnvironment:[["number","number"],"number"],FPDFFont_Close:[["number"],null],FPDFFont_GetAscent:[["number","number","number"],"boolean"],FPDFFont_GetBaseFontName:[["number","number","number"],"number"],FPDFFont_GetDescent:[["number","number","number"],"boolean"],FPDFFont_GetFamilyName:[["number","number","number"],"number"],FPDFFont_GetFlags:[["number"],"number"],FPDFFont_GetFontData:[["number","number","number","number"],"boolean"],FPDFFont_GetGlyphPath:[["number","number","number"],"number"],FPDFFont_GetGlyphWidth:[["number","number","number","number"],"boolean"],FPDFFont_GetIsEmbedded:[["number"],"number"],FPDFFont_GetItalicAngle:[["number","number"],"boolean"],FPDFFont_GetWeight:[["number"],"number"],FPDFFormObj_CountObjects:[["number"],"number"],FPDFFormObj_GetObject:[["number","number"],"number"],FPDFFormObj_RemoveObject:[["number","number"],"boolean"],FPDFGlyphPath_CountGlyphSegments:[["number"],"number"],FPDFGlyphPath_GetGlyphPathSegment:[["number","number"],"number"],FPDFImageObj_GetBitmap:[["number"],"number"],FPDFImageObj_GetIccProfileDataDecoded:[["number","number","number","number","number"],"boolean"],FPDFImageObj_GetImageDataDecoded:[["number","number","number"],"number"],FPDFImageObj_GetImageDataRaw:[["number","number","number"],"number"],FPDFImageObj_GetImageFilter:[["number","number","number","number"],"number"],FPDFImageObj_GetImageFilterCount:[["number"],"number"],FPDFImageObj_GetImageMetadata:[["number","number","number"],"boolean"],FPDFImageObj_GetImagePixelSize:[["number","number","number"],"boolean"],FPDFImageObj_GetRenderedBitmap:[["number","number","number"],"number"],FPDFImageObj_LoadJpegFile:[["number","number","number","number"],"boolean"],FPDFImageObj_LoadJpegFileInline:[["number","number","number","number"],"boolean"],FPDFImageObj_SetBitmap:[["number","number","number","number"],"boolean"],FPDFImageObj_SetMatrix:[["number","number","number","number","number","number","number"],"boolean"],FPDFJavaScriptAction_GetName:[["number","number","number"],"number"],FPDFJavaScriptAction_GetScript:[["number","number","number"],"number"],FPDFLink_CloseWebLinks:[["number"],null],FPDFLink_CountQuadPoints:[["number"],"number"],FPDFLink_CountRects:[["number","number"],"number"],FPDFLink_CountWebLinks:[["number"],"number"],FPDFLink_Enumerate:[["number","number","number"],"boolean"],FPDFLink_GetAction:[["number"],"number"],FPDFLink_GetAnnot:[["number","number"],"number"],FPDFLink_GetAnnotRect:[["number","number"],"boolean"],FPDFLink_GetDest:[["number","number"],"number"],FPDFLink_GetLinkAtPoint:[["number","number","number"],"number"],FPDFLink_GetLinkZOrderAtPoint:[["number","number","number"],"number"],FPDFLink_GetQuadPoints:[["number","number","number"],"boolean"],FPDFLink_GetRect:[["number","number","number","number","number","number","number"],"boolean"],FPDFLink_GetTextRange:[["number","number","number","number"],"boolean"],FPDFLink_GetURL:[["number","number","number","number"],"number"],FPDFLink_LoadWebLinks:[["number"],"number"],FPDFPage_CloseAnnot:[["number"],null],FPDFPage_CountObjects:[["number"],"number"],FPDFPage_CreateAnnot:[["number","number"],"number"],FPDFPage_Delete:[["number","number"],null],FPDFPage_Flatten:[["number","number"],"number"],FPDFPage_FormFieldZOrderAtPoint:[["number","number","number","number"],"number"],FPDFPage_GenerateContent:[["number"],"boolean"],FPDFPage_GetAnnot:[["number","number"],"number"],FPDFPage_GetAnnotCount:[["number"],"number"],FPDFPage_GetAnnotIndex:[["number","number"],"number"],FPDFPage_GetArtBox:[["number","number","number","number","number"],"boolean"],FPDFPage_GetBleedBox:[["number","number","number","number","number"],"boolean"],FPDFPage_GetCropBox:[["number","number","number","number","number"],"boolean"],FPDFPage_GetDecodedThumbnailData:[["number","number","number"],"number"],FPDFPage_GetMediaBox:[["number","number","number","number","number"],"boolean"],FPDFPage_GetObject:[["number","number"],"number"],FPDFPage_GetRawThumbnailData:[["number","number","number"],"number"],FPDFPage_GetRotation:[["number"],"number"],FPDFPage_GetThumbnailAsBitmap:[["number"],"number"],FPDFPage_GetTrimBox:[["number","number","number","number","number"],"boolean"],FPDFPage_HasFormFieldAtPoint:[["number","number","number","number"],"number"],FPDFPage_HasTransparency:[["number"],"boolean"],FPDFPage_InsertClipPath:[["number","number"],null],FPDFPage_InsertObject:[["number","number"],null],FPDFPage_InsertObjectAtIndex:[["number","number","number"],"boolean"],FPDFPage_New:[["number","number","number","number"],"number"],FPDFPage_RemoveAnnot:[["number","number"],"boolean"],FPDFPage_RemoveObject:[["number","number"],"boolean"],FPDFPage_SetArtBox:[["number","number","number","number","number"],null],FPDFPage_SetBleedBox:[["number","number","number","number","number"],null],FPDFPage_SetCropBox:[["number","number","number","number","number"],null],FPDFPage_SetMediaBox:[["number","number","number","number","number"],null],FPDFPage_SetRotation:[["number","number"],null],FPDFPage_SetTrimBox:[["number","number","number","number","number"],null],FPDFPage_TransformAnnots:[["number","number","number","number","number","number","number"],null],FPDFPage_TransFormWithClip:[["number","number","number"],"boolean"],FPDFPageObj_AddMark:[["number","string"],"number"],FPDFPageObj_CountMarks:[["number"],"number"],FPDFPageObj_CreateNewPath:[["number","number"],"number"],FPDFPageObj_CreateNewRect:[["number","number","number","number"],"number"],FPDFPageObj_CreateTextObj:[["number","number","number"],"number"],FPDFPageObj_Destroy:[["number"],null],FPDFPageObj_GetBounds:[["number","number","number","number","number"],"boolean"],FPDFPageObj_GetClipPath:[["number"],"number"],FPDFPageObj_GetDashArray:[["number","number","number"],"boolean"],FPDFPageObj_GetDashCount:[["number"],"number"],FPDFPageObj_GetDashPhase:[["number","number"],"boolean"],FPDFPageObj_GetFillColor:[["number","number","number","number","number"],"boolean"],FPDFPageObj_GetIsActive:[["number","number"],"boolean"],FPDFPageObj_GetLineCap:[["number"],"number"],FPDFPageObj_GetLineJoin:[["number"],"number"],FPDFPageObj_GetMark:[["number","number"],"number"],FPDFPageObj_GetMarkedContentID:[["number"],"number"],FPDFPageObj_GetMatrix:[["number","number"],"boolean"],FPDFPageObj_GetRotatedBounds:[["number","number"],"boolean"],FPDFPageObj_GetStrokeColor:[["number","number","number","number","number"],"boolean"],FPDFPageObj_GetStrokeWidth:[["number","number"],"boolean"],FPDFPageObj_GetType:[["number"],"number"],FPDFPageObj_HasTransparency:[["number"],"boolean"],FPDFPageObj_NewImageObj:[["number"],"number"],FPDFPageObj_NewTextObj:[["number","string","number"],"number"],FPDFPageObj_RemoveMark:[["number","number"],"boolean"],FPDFPageObj_SetBlendMode:[["number","string"],null],FPDFPageObj_SetDashArray:[["number","number","number","number"],"boolean"],FPDFPageObj_SetDashPhase:[["number","number"],"boolean"],FPDFPageObj_SetFillColor:[["number","number","number","number","number"],"boolean"],FPDFPageObj_SetIsActive:[["number","boolean"],"boolean"],FPDFPageObj_SetLineCap:[["number","number"],"boolean"],FPDFPageObj_SetLineJoin:[["number","number"],"boolean"],FPDFPageObj_SetMatrix:[["number","number"],"boolean"],FPDFPageObj_SetStrokeColor:[["number","number","number","number","number"],"boolean"],FPDFPageObj_SetStrokeWidth:[["number","number"],"boolean"],FPDFPageObj_Transform:[["number","number","number","number","number","number","number"],null],FPDFPageObj_TransformClipPath:[["number","number","number","number","number","number","number"],null],FPDFPageObj_TransformF:[["number","number"],"boolean"],FPDFPageObjMark_CountParams:[["number"],"number"],FPDFPageObjMark_GetName:[["number","number","number","number"],"boolean"],FPDFPageObjMark_GetParamBlobValue:[["number","string","number","number","number"],"boolean"],FPDFPageObjMark_GetParamIntValue:[["number","string","number"],"boolean"],FPDFPageObjMark_GetParamKey:[["number","number","number","number","number"],"boolean"],FPDFPageObjMark_GetParamStringValue:[["number","string","number","number","number"],"boolean"],FPDFPageObjMark_GetParamValueType:[["number","string"],"number"],FPDFPageObjMark_RemoveParam:[["number","number","string"],"boolean"],FPDFPageObjMark_SetBlobParam:[["number","number","number","string","number","number"],"boolean"],FPDFPageObjMark_SetIntParam:[["number","number","number","string","number"],"boolean"],FPDFPageObjMark_SetStringParam:[["number","number","number","string","string"],"boolean"],FPDFPath_BezierTo:[["number","number","number","number","number","number","number"],"boolean"],FPDFPath_Close:[["number"],"boolean"],FPDFPath_CountSegments:[["number"],"number"],FPDFPath_GetDrawMode:[["number","number","number"],"boolean"],FPDFPath_GetPathSegment:[["number","number"],"number"],FPDFPath_LineTo:[["number","number","number"],"boolean"],FPDFPath_MoveTo:[["number","number","number"],"boolean"],FPDFPath_SetDrawMode:[["number","number","boolean"],"boolean"],FPDFPathSegment_GetClose:[["number"],"boolean"],FPDFPathSegment_GetPoint:[["number","number","number"],"boolean"],FPDFPathSegment_GetType:[["number"],"number"],FPDFSignatureObj_GetByteRange:[["number","number","number"],"number"],FPDFSignatureObj_GetContents:[["number","number","number"],"number"],FPDFSignatureObj_GetDocMDPPermission:[["number"],"number"],FPDFSignatureObj_GetReason:[["number","number","number"],"number"],FPDFSignatureObj_GetSubFilter:[["number","number","number"],"number"],FPDFSignatureObj_GetTime:[["number","number","number"],"number"],FPDFText_ClosePage:[["number"],null],FPDFText_CountChars:[["number"],"number"],FPDFText_CountRects:[["number","number","number"],"number"],FPDFText_FindClose:[["number"],null],FPDFText_FindNext:[["number"],"boolean"],FPDFText_FindPrev:[["number"],"boolean"],FPDFText_FindStart:[["number","number","number","number"],"number"],FPDFText_GetBoundedText:[["number","number","number","number","number","number","number"],"number"],FPDFText_GetCharAngle:[["number","number"],"number"],FPDFText_GetCharBox:[["number","number","number","number","number","number"],"boolean"],FPDFText_GetCharIndexAtPos:[["number","number","number","number","number"],"number"],FPDFText_GetCharIndexFromTextIndex:[["number","number"],"number"],FPDFText_GetCharOrigin:[["number","number","number","number"],"boolean"],FPDFText_GetFillColor:[["number","number","number","number","number","number"],"boolean"],FPDFText_GetFontInfo:[["number","number","number","number","number"],"number"],FPDFText_GetFontSize:[["number","number"],"number"],FPDFText_GetFontWeight:[["number","number"],"number"],FPDFText_GetLooseCharBox:[["number","number","number"],"boolean"],FPDFText_GetMatrix:[["number","number","number"],"boolean"],FPDFText_GetRect:[["number","number","number","number","number","number"],"boolean"],FPDFText_GetSchCount:[["number"],"number"],FPDFText_GetSchResultIndex:[["number"],"number"],FPDFText_GetStrokeColor:[["number","number","number","number","number","number"],"boolean"],FPDFText_GetText:[["number","number","number","number"],"number"],FPDFText_GetTextIndexFromCharIndex:[["number","number"],"number"],FPDFText_GetTextObject:[["number","number"],"number"],FPDFText_GetUnicode:[["number","number"],"number"],FPDFText_HasUnicodeMapError:[["number","number"],"number"],FPDFText_IsGenerated:[["number","number"],"number"],FPDFText_IsHyphen:[["number","number"],"number"],FPDFText_LoadCidType2Font:[["number","number","number","string","number","number"],"number"],FPDFText_LoadFont:[["number","number","number","number","boolean"],"number"],FPDFText_LoadPage:[["number"],"number"],FPDFText_LoadStandardFont:[["number","string"],"number"],FPDFText_SetCharcodes:[["number","number","number"],"boolean"],FPDFText_SetText:[["number","number"],"boolean"],FPDFTextObj_GetFont:[["number"],"number"],FPDFTextObj_GetFontSize:[["number","number"],"boolean"],FPDFTextObj_GetRenderedBitmap:[["number","number","number","number"],"number"],FPDFTextObj_GetText:[["number","number","number","number"],"number"],FPDFTextObj_GetTextRenderMode:[["number"],"number"],FPDFTextObj_SetTextRenderMode:[["number","number"],"boolean"],PDFiumExt_CloseFileWriter:[["number"],null],PDFiumExt_CloseFormFillInfo:[["number"],null],PDFiumExt_ExitFormFillEnvironment:[["number"],null],PDFiumExt_GetFileWriterData:[["number","number","number"],"number"],PDFiumExt_GetFileWriterSize:[["number"],"number"],PDFiumExt_Init:[[],null],PDFiumExt_InitFormFillEnvironment:[["number","number"],"number"],PDFiumExt_OpenFileWriter:[[],"number"],PDFiumExt_OpenFormFillInfo:[[],"number"],PDFiumExt_SaveAsCopy:[["number","number"],"number"]};async function Nl(e){return async function(e){const t={pdfium:e};for(const n in jl){const r=n,o=jl[r][0],i=jl[r][1];t[r]=e.cwrap(n,i,o)}return t}(await Ll(e))}function Bl(e,t,n,r=100){let o=e.wasmExports.malloc(r);for(let t=0;t<r;t++)e.HEAP8[o+t]=0;const i=t(o,r);let a;if(i>r){e.wasmExports.free(o),o=e.wasmExports.malloc(i);for(let t=0;t<i;t++)e.HEAP8[o+t]=0;t(o,i),a=n(o)}else a=n(o);return e.wasmExports.free(o),a}function zl(e,t){const n=t(0,0),r=e.wasmExports.malloc(n);t(r,n);const o=new ArrayBuffer(n),i=new DataView(o);for(let t=0;t<n;t++)i.setInt8(t,e.getValue(r+t,"i8"));return e.wasmExports.free(r),o}class Ul{constructor(e){this.pdfium=e,this.docs=new Map}setDocument(e,t,n){let r=this.docs.get(e);r||(r=new Vl(t,n,this.pdfium),this.docs.set(e,r))}getContext(e){return this.docs.get(e)}closeDocument(e){const t=this.docs.get(e);return!!t&&(t.dispose(),this.docs.delete(e),!0)}}class Vl{constructor(e,t,n){this.filePtr=e,this.docPtr=t,this.pageCache=new Hl(n,t)}acquirePage(e){return this.pageCache.acquire(e)}dispose(){this.pageCache.forceReleaseAll(),this.pageCache.pdf.FPDF_CloseDocument(this.docPtr),this.pageCache.pdf.pdfium.wasmExports.free(this.filePtr)}}class Hl{constructor(e,t){this.pdf=e,this.docPtr=t,this.cache=new Map}acquire(e){let t=this.cache.get(e);if(!t){const n=this.pdf.FPDF_LoadPage(this.docPtr,e);t=new Wl(this.pdf,this.docPtr,e,n,(()=>{this.cache.delete(e)})),this.cache.set(e,t)}return t.clearExpiryTimer(),t.bumpRefCount(),t}forceReleaseAll(){for(const e of this.cache.values())e.disposeImmediate();this.cache.clear()}}class Wl{constructor(e,t,n,r,o){this.pdf=e,this.docPtr=t,this.pageIdx=n,this.pagePtr=r,this.onFinalDispose=o,this.refCount=0,this.disposed=!1}bumpRefCount(){if(this.disposed)throw new Error("Context already disposed");this.refCount++}clearExpiryTimer(){this.expiryTimer&&(clearTimeout(this.expiryTimer),this.expiryTimer=void 0)}release(){this.disposed||(this.refCount--,0===this.refCount&&(this.expiryTimer=setTimeout((()=>this.disposeImmediate()),5e3)))}disposeImmediate(){this.disposed||(this.disposed=!0,void 0!==this.textPagePtr&&this.pdf.FPDFText_ClosePage(this.textPagePtr),void 0!==this.formHandle&&(this.pdf.FORM_OnBeforeClosePage(this.pagePtr,this.formHandle),this.pdf.PDFiumExt_ExitFormFillEnvironment(this.formHandle)),void 0!==this.formInfoPtr&&this.pdf.PDFiumExt_CloseFormFillInfo(this.formInfoPtr),this.pdf.FPDF_ClosePage(this.pagePtr),this.onFinalDispose())}getTextPage(){return this.ensureAlive(),void 0===this.textPagePtr&&(this.textPagePtr=this.pdf.FPDFText_LoadPage(this.pagePtr)),this.textPagePtr}getFormHandle(){return this.ensureAlive(),void 0===this.formHandle&&(this.formInfoPtr=this.pdf.PDFiumExt_OpenFormFillInfo(),this.formHandle=this.pdf.PDFiumExt_InitFormFillEnvironment(this.docPtr,this.formInfoPtr),this.pdf.FORM_OnAfterLoadPage(this.pagePtr,this.formHandle)),this.formHandle}withAnnotation(e,t){this.ensureAlive();const n=this.pdf.FPDFPage_GetAnnot(this.pagePtr,e);try{return t(n)}finally{this.pdf.FPDFPage_CloseAnnot(n)}}ensureAlive(){if(this.disposed)throw new Error("PageContext already disposed")}}var $l,ql;!function(e){e[e.Bitmap_Gray=1]="Bitmap_Gray",e[e.Bitmap_BGR=2]="Bitmap_BGR",e[e.Bitmap_BGRx=3]="Bitmap_BGRx",e[e.Bitmap_BGRA=4]="Bitmap_BGRA"}($l||($l={})),function(e){e[e.ANNOT=1]="ANNOT",e[e.LCD_TEXT=2]="LCD_TEXT",e[e.NO_NATIVETEXT=4]="NO_NATIVETEXT",e[e.GRAYSCALE=8]="GRAYSCALE",e[e.DEBUG_INFO=128]="DEBUG_INFO",e[e.NO_CATCH=256]="NO_CATCH",e[e.RENDER_LIMITEDIMAGECACHE=512]="RENDER_LIMITEDIMAGECACHE",e[e.RENDER_FORCEHALFTONE=1024]="RENDER_FORCEHALFTONE",e[e.PRINTING=2048]="PRINTING",e[e.REVERSE_BYTE_ORDER=16]="REVERSE_BYTE_ORDER"}(ql||(ql={}));const Xl="PDFiumEngine",Yl="Engine";var Zl;!function(e){e[e.Success=0]="Success",e[e.Unknown=1]="Unknown",e[e.File=2]="File",e[e.Format=3]="Format",e[e.Password=4]="Password",e[e.Security=5]="Security",e[e.Page=6]="Page",e[e.XFALoad=7]="XFALoad",e[e.XFALayout=8]="XFALayout"}(Zl||(Zl={}));const Kl=(e,t="image/webp")=>{if("undefined"==typeof OffscreenCanvas)throw new Error("OffscreenCanvas is not available in this environment. This converter is intended for browser use only. Please use createNodeImageDataToBlobConverter() or createNodeCanvasImageDataToBlobConverter() for Node.js.");const n=new ImageData(e.data,e.width,e.height),r=new OffscreenCanvas(n.width,n.height);return r.getContext("2d").putImageData(n,0,0),r.convertToBlob({type:t})};class Jl{constructor(e,t=new Te,n=Kl){this.pdfiumModule=e,this.logger=t,this.imageDataConverter=n,this.cache=new Ul(this.pdfiumModule)}initialize(){return this.logger.debug(Xl,Yl,"initialize"),this.logger.perf(Xl,Yl,"Initialize","Begin","General"),this.pdfiumModule.PDFiumExt_Init(),this.logger.perf(Xl,Yl,"Initialize","End","General"),Qe.resolve(!0)}destroy(){return this.logger.debug(Xl,Yl,"destroy"),this.logger.perf(Xl,Yl,"Destroy","Begin","General"),this.pdfiumModule.FPDF_DestroyLibrary(),this.logger.perf(Xl,Yl,"Destroy","End","General"),Qe.resolve(!0)}openDocumentUrl(e,t){const n=t?.mode??"auto",r=t?.password??"";this.logger.debug(Xl,Yl,"openDocumentUrl called",e.url,n);const o=Qe.create();return(async()=>{try{if("full-fetch"===n){(await this.fetchFullAndOpen(e,r)).wait((e=>o.resolve(e)),(e=>o.reject(e.reason)))}else if("range-request"===n){(await this.openDocumentWithRangeRequest(e,r)).wait((e=>o.resolve(e)),(e=>o.reject(e.reason)))}else{const{supportsRanges:t,fileLength:n,content:i}=await this.checkRangeSupport(e.url);if(t){(await this.openDocumentWithRangeRequest(e,r,n)).wait((e=>o.resolve(e)),(e=>o.reject(e.reason)))}else if(i){const t={id:e.id,content:i};this.openDocumentFromBuffer(t,r).wait((e=>o.resolve(e)),(e=>o.reject(e.reason)))}else{(await this.fetchFullAndOpen(e,r)).wait((e=>o.resolve(e)),(e=>o.reject(e.reason)))}}}catch(e){this.logger.error(Xl,Yl,"openDocumentUrl error",e),o.reject({code:Je.Unknown,message:String(e)})}})(),o}async checkRangeSupport(e){try{this.logger.debug(Xl,Yl,"checkRangeSupport",e);const t=await fetch(e,{method:"HEAD"}),n=t.headers.get("Content-Length");if("bytes"===t.headers.get("Accept-Ranges"))return{supportsRanges:!0,fileLength:parseInt(n??"0"),content:null};const r=await fetch(e,{headers:{Range:"bytes=0-1"}});if(200===r.status){const e=await r.arrayBuffer();return{supportsRanges:!1,fileLength:parseInt(n??"0"),content:e}}return{supportsRanges:206===r.status,fileLength:parseInt(n??"0"),content:null}}catch(e){throw this.logger.error(Xl,Yl,"checkRangeSupport failed",e),new Error("Failed to check range support: "+e)}}async fetchFullAndOpen(e,t){this.logger.debug(Xl,Yl,"fetchFullAndOpen",e.url);const n=await fetch(e.url);if(!n.ok)throw new Error(`Could not fetch PDF: ${n.statusText}`);const r=await n.arrayBuffer(),o={id:e.id,content:r};return this.openDocumentFromBuffer(o,t)}async openDocumentWithRangeRequest(e,t,n){this.logger.debug(Xl,Yl,"openDocumentWithRangeRequest",e.url);const r=n??(await this.retrieveFileLength(e.url)).fileLength;return this.openDocumentFromLoader({id:e.id,fileLength:r,callback:(t,n)=>{const r=new XMLHttpRequest;if(r.open("GET",e.url,!1),r.overrideMimeType("text/plain; charset=x-user-defined"),r.setRequestHeader("Range",`bytes=${t}-${t+n-1}`),r.send(null),206===r.status||200===r.status)return this.convertResponseToUint8Array(r.responseText);throw new Error(`Range request failed with status ${r.status}`)}},t)}async retrieveFileLength(e){this.logger.debug(Xl,Yl,"retrieveFileLength",e);const t=await fetch(e,{method:"HEAD"});if(!t.ok)throw new Error(`Failed HEAD request for file length: ${t.statusText}`);const n=t.headers.get("Content-Length")||"0",r=parseInt(n,10)||0;if(!r)throw new Error("Content-Length not found or zero.");return{fileLength:r}}convertResponseToUint8Array(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=255&e.charCodeAt(n);return t}openDocumentFromBuffer(e,t=""){this.logger.debug(Xl,Yl,"openDocumentFromBuffer",e,t),this.logger.perf(Xl,Yl,"OpenDocumentFromBuffer","Begin",e.id);const n=new Uint8Array(e.content),r=n.length,o=this.malloc(r);this.pdfiumModule.pdfium.HEAPU8.set(n,o);const i=this.pdfiumModule.FPDF_LoadMemDocument(o,r,t);if(!i){const t=this.pdfiumModule.FPDF_GetLastError();return this.logger.error(Xl,Yl,`FPDF_LoadMemDocument failed with ${t}`),this.free(o),this.logger.perf(Xl,Yl,"OpenDocumentFromBuffer","End",e.id),Qe.reject({code:t,message:"FPDF_LoadMemDocument failed"})}const a=this.pdfiumModule.FPDF_GetPageCount(i),s=[],l=this.malloc(8);for(let t=0;t<a;t++){if(!this.pdfiumModule.FPDF_GetPageSizeByIndexF(i,t,l)){const t=this.pdfiumModule.FPDF_GetLastError();return this.logger.error(Xl,Yl,`FPDF_GetPageSizeByIndexF failed with ${t}`),this.free(l),this.pdfiumModule.FPDF_CloseDocument(i),this.free(o),this.logger.perf(Xl,Yl,"OpenDocumentFromBuffer","End",e.id),Qe.reject({code:t,message:"FPDF_GetPageSizeByIndexF failed"})}const n={index:t,size:{width:this.pdfiumModule.pdfium.getValue(l,"float"),height:this.pdfiumModule.pdfium.getValue(l+4,"float")}};s.push(n)}this.free(l);const u={id:e.id,pageCount:a,pages:s};return this.cache.setDocument(e.id,o,i),this.logger.perf(Xl,Yl,"OpenDocumentFromBuffer","End",e.id),Qe.resolve(u)}openDocumentFromLoader(e,t=""){const{fileLength:n,callback:r,...o}=e;this.logger.debug(Xl,Yl,"openDocumentFromLoader",o,t),this.logger.perf(Xl,Yl,"OpenDocumentFromLoader","Begin",o.id);const i=this.pdfiumModule.pdfium.addFunction(((e,t,o,i)=>{try{if(this.logger.debug(Xl,Yl,"readBlock",t,i,o),t<0||t>=n)return this.logger.error(Xl,Yl,"Offset out of bounds:",t),0;const e=r(t,i);return new Uint8Array(this.pdfiumModule.pdfium.HEAPU8.buffer,o,e.length).set(e),e.length}catch(e){return this.logger.error(Xl,Yl,"ReadBlock error:",e),0}}),"iiiii"),a=this.malloc(12);this.pdfiumModule.pdfium.setValue(a,n,"i32"),this.pdfiumModule.pdfium.setValue(a+4,i,"i32"),this.pdfiumModule.pdfium.setValue(a+8,0,"i32");const s=this.pdfiumModule.FPDF_LoadCustomDocument(a,t);if(!s){const e=this.pdfiumModule.FPDF_GetLastError();return this.logger.error(Xl,Yl,`FPDF_LoadCustomDocument failed with ${e}`),this.free(a),this.logger.perf(Xl,Yl,"OpenDocumentFromLoader","End",o.id),Qe.reject({code:e,message:"FPDF_LoadCustomDocument failed"})}const l=this.pdfiumModule.FPDF_GetPageCount(s),u=[],d=this.malloc(8);for(let e=0;e<l;e++){if(!this.pdfiumModule.FPDF_GetPageSizeByIndexF(s,e,d)){const e=this.pdfiumModule.FPDF_GetLastError();return this.logger.error(Xl,Yl,`FPDF_GetPageSizeByIndexF failed with ${e}`),this.free(d),this.pdfiumModule.FPDF_CloseDocument(s),this.free(a),this.logger.perf(Xl,Yl,"OpenDocumentFromLoader","End",o.id),Qe.reject({code:e,message:"FPDF_GetPageSizeByIndexF failed"})}const t={index:e,size:{width:this.pdfiumModule.pdfium.getValue(d,"float"),height:this.pdfiumModule.pdfium.getValue(d+4,"float")}};u.push(t)}this.free(d);const c={id:o.id,pageCount:l,pages:u};return this.cache.setDocument(o.id,a,s),this.logger.perf(Xl,Yl,"OpenDocumentFromLoader","End",o.id),Qe.resolve(c)}getMetadata(e){this.logger.debug(Xl,Yl,"getMetadata",e),this.logger.perf(Xl,Yl,"GetMetadata","Begin",e.id);const t=this.cache.getContext(e.id);if(!t)return this.logger.perf(Xl,Yl,"GetMetadata","End",e.id),Qe.reject({code:Je.DocNotOpen,message:"document does not open"});const n={title:this.readMetaText(t.docPtr,"Title"),author:this.readMetaText(t.docPtr,"Author"),subject:this.readMetaText(t.docPtr,"Subject"),keywords:this.readMetaText(t.docPtr,"Keywords"),producer:this.readMetaText(t.docPtr,"Producer"),creator:this.readMetaText(t.docPtr,"Creator"),creationDate:this.readMetaText(t.docPtr,"CreationDate"),modificationDate:this.readMetaText(t.docPtr,"ModDate")};return this.logger.perf(Xl,Yl,"GetMetadata","End",e.id),Qe.resolve(n)}getDocPermissions(e){this.logger.debug(Xl,Yl,"getDocPermissions",e),this.logger.perf(Xl,Yl,"getDocPermissions","Begin",e.id);const t=this.cache.getContext(e.id);if(!t)return this.logger.perf(Xl,Yl,"getDocPermissions","End",e.id),Qe.reject({code:Je.DocNotOpen,message:"document does not open"});const n=this.pdfiumModule.FPDF_GetDocPermissions(t.docPtr);return Qe.resolve(n)}getDocUserPermissions(e){this.logger.debug(Xl,Yl,"getDocUserPermissions",e),this.logger.perf(Xl,Yl,"getDocUserPermissions","Begin",e.id);const t=this.cache.getContext(e.id);if(!t)return this.logger.perf(Xl,Yl,"getDocUserPermissions","End",e.id),Qe.reject({code:Je.DocNotOpen,message:"document does not open"});const n=this.pdfiumModule.FPDF_GetDocUserPermissions(t.docPtr);return Qe.resolve(n)}getSignatures(e){this.logger.debug(Xl,Yl,"getSignatures",e),this.logger.perf(Xl,Yl,"GetSignatures","Begin",e.id);const t=this.cache.getContext(e.id);if(!t)return this.logger.perf(Xl,Yl,"GetSignatures","End",e.id),Qe.reject({code:Je.DocNotOpen,message:"document does not open"});const n=[],r=this.pdfiumModule.FPDF_GetSignatureCount(t.docPtr);for(let e=0;e<r;e++){const r=this.pdfiumModule.FPDF_GetSignatureObject(t.docPtr,e),o=zl(this.pdfiumModule.pdfium,((e,t)=>this.pdfiumModule.FPDFSignatureObj_GetContents(r,e,t))),i=zl(this.pdfiumModule.pdfium,((e,t)=>4*this.pdfiumModule.FPDFSignatureObj_GetByteRange(r,e,t))),a=zl(this.pdfiumModule.pdfium,((e,t)=>this.pdfiumModule.FPDFSignatureObj_GetSubFilter(r,e,t))),s=Bl(this.pdfiumModule.pdfium,((e,t)=>this.pdfiumModule.FPDFSignatureObj_GetReason(r,e,t)),this.pdfiumModule.pdfium.UTF16ToString),l=Bl(this.pdfiumModule.pdfium,((e,t)=>this.pdfiumModule.FPDFSignatureObj_GetTime(r,e,t)),this.pdfiumModule.pdfium.UTF8ToString),u=this.pdfiumModule.FPDFSignatureObj_GetDocMDPPermission(r);n.push({contents:o,byteRange:i,subFilter:a,reason:s,time:l,docMDP:u})}return this.logger.perf(Xl,Yl,"GetSignatures","End",e.id),Qe.resolve(n)}getBookmarks(e){this.logger.debug(Xl,Yl,"getBookmarks",e),this.logger.perf(Xl,Yl,"GetBookmarks","Begin",e.id);const t=this.cache.getContext(e.id);if(!t)return this.logger.perf(Xl,Yl,"getBookmarks","End",e.id),Qe.reject({code:Je.DocNotOpen,message:"document does not open"});const n=this.readPdfBookmarks(t.docPtr,0);return this.logger.perf(Xl,Yl,"GetBookmarks","End",e.id),Qe.resolve({bookmarks:n})}renderPage(e,t,n=1,r=be.Degree0,o=1,i={withAnnotations:!1},a="image/webp"){const s=new Ie;this.logger.debug(Xl,Yl,"renderPage",e,t,n,r,o,i),this.logger.perf(Xl,Yl,"RenderPage","Begin",`${e.id}-${t.index}`);const l=this.cache.getContext(e.id);if(!l)return this.logger.perf(Xl,Yl,"RenderPage","End",`${e.id}-${t.index}`),Qe.reject({code:Je.DocNotOpen,message:"document does not open"});const u=this.renderPageRectToImageData(l,t,{origin:{x:0,y:0},size:t.size},n,r,o,i);return this.logger.perf(Xl,Yl,"RenderPage","End",`${e.id}-${t.index}`),this.imageDataConverter(u,a).then((e=>s.resolve(e))),s}renderPageRect(e,t,n,r,o,i,a,s="image/webp"){const l=new Ie;this.logger.debug(Xl,Yl,"renderPageRect",e,t,n,r,o,i,a),this.logger.perf(Xl,Yl,"RenderPageRect","Begin",`${e.id}-${t.index}`);const u=this.cache.getContext(e.id);if(!u)return this.logger.perf(Xl,Yl,"RenderPageRect","End",`${e.id}-${t.index}`),Qe.reject({code:Je.DocNotOpen,message:"document does not open"});const d=this.renderPageRectToImageData(u,t,i,n,r,o,a);return this.logger.perf(Xl,Yl,"RenderPageRect","End",`${e.id}-${t.index}`),this.imageDataConverter(d,s).then((e=>l.resolve(e))),l}getAllAnnotations(e){this.logger.debug(Xl,Yl,"getAllAnnotations",e),this.logger.perf(Xl,Yl,"GetAllAnnotations","Begin",e.id);const t=this.cache.getContext(e.id);if(!t)return this.logger.perf(Xl,Yl,"GetAllAnnotations","End",e.id),Qe.reject({code:Je.DocNotOpen,message:"document does not open"});const n=this.readAllAnnotations(e,t);return this.logger.perf(Xl,Yl,"GetAllAnnotations","End",e.id),Qe.resolve(n)}readAllAnnotations(e,t){const n={};for(let r=0;r<e.pageCount;r++){const o=this.readPageAnnotations(t,e.pages[r]);n[r]=o}return n}getPageAnnotations(e,t){this.logger.debug(Xl,Yl,"getPageAnnotations",e,t),this.logger.perf(Xl,Yl,"GetPageAnnotations","Begin",`${e.id}-${t.index}`);const n=this.cache.getContext(e.id);if(!n)return this.logger.perf(Xl,Yl,"GetPageAnnotations","End",`${e.id}-${t.index}`),Qe.reject({code:Je.DocNotOpen,message:"document does not open"});const r=this.readPageAnnotations(n,t);return this.logger.perf(Xl,Yl,"GetPageAnnotations","End",`${e.id}-${t.index}`),this.logger.debug(Xl,Yl,"GetPageAnnotations",`${e.id}-${t.index}`,r),Qe.resolve(r)}createPageAnnotation(e,t,n){this.logger.debug(Xl,Yl,"createPageAnnotation",e,t,n),this.logger.perf(Xl,Yl,"CreatePageAnnotation","Begin",`${e.id}-${t.index}`);const r=this.cache.getContext(e.id);if(!r)return this.logger.perf(Xl,Yl,"CreatePageAnnotation","End",`${e.id}-${t.index}`),Qe.reject({code:Je.DocNotOpen,message:"document does not open"});const o=r.acquirePage(t.index),i=this.pdfiumModule.FPDFPage_CreateAnnot(o.pagePtr,n.type);if(!i)return this.logger.perf(Xl,Yl,"CreatePageAnnotation","End",`${e.id}-${t.index}`),o.release(),Qe.reject({code:Je.CantCreateAnnot,message:"can not create annotation with specified type"});if(!this.setPageAnnoRect(t,o.pagePtr,i,n.rect))return this.pdfiumModule.FPDFPage_CloseAnnot(i),o.release(),this.logger.perf(Xl,Yl,"CreatePageAnnotation","End",`${e.id}-${t.index}`),Qe.reject({code:Je.CantSetAnnotRect,message:"can not set the rect of the annotation"});let a=!1;switch(n.type){case He.INK:a=this.addInkStroke(t,o.pagePtr,i,n);break;case He.STAMP:a=this.addStampContent(r.docPtr,t,o.pagePtr,i,n.rect,n.contents);break;case He.UNDERLINE:case He.STRIKEOUT:case He.SQUIGGLY:case He.HIGHLIGHT:a=this.addTextMarkupContent(t,o.pagePtr,i,n)}if(!a)return this.pdfiumModule.FPDFPage_RemoveAnnot(o.pagePtr,i),o.release(),this.logger.perf(Xl,Yl,"CreatePageAnnotation","End",`${e.id}-${t.index}`),Qe.reject({code:Je.CantSetAnnotContent,message:"can not add content of the annotation"});void 0!==n.blendMode?this.pdfiumModule.EPDFAnnot_GenerateAppearanceWithBlend(i,n.blendMode):this.pdfiumModule.EPDFAnnot_GenerateAppearance(i),this.pdfiumModule.FPDFPage_GenerateContent(o.pagePtr);const s=this.pdfiumModule.FPDFPage_GetAnnotIndex(o.pagePtr,i);return this.pdfiumModule.FPDFPage_CloseAnnot(i),o.release(),this.logger.perf(Xl,Yl,"CreatePageAnnotation","End",`${e.id}-${t.index}`),s>=0?Qe.resolve(s):Qe.reject({code:Je.CantCreateAnnot,message:"annotation created but index could not be determined"})}updatePageAnnotation(e,t,n){this.logger.debug(Xl,Yl,"updatePageAnnotation",e,t,n),this.logger.perf(Xl,Yl,"UpdatePageAnnotation","Begin",`${e.id}-${t.index}`);const r=this.cache.getContext(e.id);if(!r)return this.logger.perf(Xl,Yl,"UpdatePageAnnotation","End",`${e.id}-${t.index}`),Qe.reject({code:Je.DocNotOpen,message:"document does not open"});const o=r.acquirePage(t.index),i=this.pdfiumModule.FPDFPage_GetAnnot(o.pagePtr,n.id);if(!i)return o.release(),this.logger.perf(Xl,Yl,"UpdatePageAnnotation","End",`${e.id}-${t.index}`),Qe.reject({code:Je.NotFound,message:"annotation not found"});if(!this.setPageAnnoRect(t,o.pagePtr,i,n.rect))return this.pdfiumModule.FPDFPage_CloseAnnot(i),o.release(),this.logger.perf(Xl,Yl,"UpdatePageAnnotation","End",`${e.id}-${t.index}`),Qe.reject({code:Je.CantSetAnnotRect,message:"failed to move annotation"});let a=!1;switch(n.type){case He.INK:if(!this.pdfiumModule.FPDFAnnot_RemoveInkList(i))break;a=this.addInkStroke(t,o.pagePtr,i,n);break;case He.STAMP:for(let e=this.pdfiumModule.FPDFAnnot_GetObjectCount(i)-1;e>=0;e--)this.pdfiumModule.FPDFAnnot_RemoveObject(i,e);a=this.addStampContent(r.docPtr,t,o.pagePtr,i,n.rect,n.contents);break;case He.HIGHLIGHT:case He.UNDERLINE:case He.STRIKEOUT:case He.SQUIGGLY:a=this.addTextMarkupContent(t,o.pagePtr,i,n);break;default:a=!1}return a&&(void 0!==n.blendMode?this.pdfiumModule.EPDFAnnot_GenerateAppearanceWithBlend(i,n.blendMode):this.pdfiumModule.EPDFAnnot_GenerateAppearance(i),this.pdfiumModule.FPDFPage_GenerateContent(o.pagePtr)),this.pdfiumModule.FPDFPage_CloseAnnot(i),o.release(),this.logger.perf(Xl,Yl,"UpdatePageAnnotation","End",`${e.id}-${t.index}`),a?Qe.resolve(!0):Qe.reject({code:Je.CantSetAnnotContent,message:"failed to update annotation"})}removePageAnnotation(e,t,n){this.logger.debug(Xl,Yl,"removePageAnnotation",e,t,n),this.logger.perf(Xl,Yl,"RemovePageAnnotation","Begin",`${e.id}-${t.index}`);const r=this.cache.getContext(e.id);if(!r)return this.logger.perf(Xl,Yl,"RemovePageAnnotation","End",`${e.id}-${t.index}`),Qe.reject({code:Je.DocNotOpen,message:"document does not open"});const o=r.acquirePage(t.index);let i=!1;return i=this.pdfiumModule.FPDFPage_RemoveAnnot(o.pagePtr,n.id),i?(i=this.pdfiumModule.FPDFPage_GenerateContent(o.pagePtr),i||this.logger.error(Xl,Yl,"FPDFPage_GenerateContent Failed",`${e.id}-${t.index}`)):this.logger.error(Xl,Yl,"FPDFPage_RemoveAnnot Failed",`${e.id}-${t.index}`),o.release(),this.logger.perf(Xl,Yl,"RemovePageAnnotation","End",`${e.id}-${t.index}`),Qe.resolve(i)}getPageTextRects(e,t,n,r){this.logger.debug(Xl,Yl,"getPageTextRects",e,t,n,r),this.logger.perf(Xl,Yl,"GetPageTextRects","Begin",`${e.id}-${t.index}`);const o=this.cache.getContext(e.id);if(!o)return this.logger.perf(Xl,Yl,"GetPageTextRects","End",`${e.id}-${t.index}`),Qe.reject({code:Je.DocNotOpen,message:"document does not open"});const i=o.acquirePage(t.index),a=this.pdfiumModule.FPDFText_LoadPage(i.pagePtr),s=this.readPageTextRects(t,i.docPtr,i.pagePtr,a);return this.pdfiumModule.FPDFText_ClosePage(a),i.release(),this.logger.perf(Xl,Yl,"GetPageTextRects","End",`${e.id}-${t.index}`),Qe.resolve(s)}renderThumbnail(e,t,n,r,o){this.logger.debug(Xl,Yl,"renderThumbnail",e,t,n,r,o),this.logger.perf(Xl,Yl,"RenderThumbnail","Begin",`${e.id}-${t.index}`);if(!this.cache.getContext(e.id))return this.logger.perf(Xl,Yl,"RenderThumbnail","End",`${e.id}-${t.index}`),Qe.reject({code:Je.DocNotOpen,message:"document does not open"});n=Math.max(n,.5);const i=this.renderPage(e,t,n,r,o,{withAnnotations:!0});return this.logger.perf(Xl,Yl,"RenderThumbnail","End",`${e.id}-${t.index}`),i}getAttachments(e){this.logger.debug(Xl,Yl,"getAttachments",e),this.logger.perf(Xl,Yl,"GetAttachments","Begin",e.id);const t=this.cache.getContext(e.id);if(!t)return this.logger.perf(Xl,Yl,"GetAttachments","End",e.id),Qe.reject({code:Je.DocNotOpen,message:"document does not open"});const n=[],r=this.pdfiumModule.FPDFDoc_GetAttachmentCount(t.docPtr);for(let e=0;e<r;e++){const r=this.readPdfAttachment(t.docPtr,e);n.push(r)}return this.logger.perf(Xl,Yl,"GetAttachments","End",e.id),Qe.resolve(n)}readAttachmentContent(e,t){this.logger.debug(Xl,Yl,"readAttachmentContent",e,t),this.logger.perf(Xl,Yl,"ReadAttachmentContent","Begin",e.id);const n=this.cache.getContext(e.id);if(!n)return this.logger.perf(Xl,Yl,"ReadAttachmentContent","End",e.id),Qe.reject({code:Je.DocNotOpen,message:"document does not open"});const r=this.pdfiumModule.FPDFDoc_GetAttachment(n.docPtr,t.index),o=this.malloc(8);if(!this.pdfiumModule.FPDFAttachment_GetFile(r,0,0,o))return this.free(o),this.logger.perf(Xl,Yl,"ReadAttachmentContent","End",e.id),Qe.reject({code:Je.CantReadAttachmentSize,message:"can not read attachment size"});const i=this.pdfiumModule.pdfium.getValue(o,"i64"),a=this.malloc(i);if(!this.pdfiumModule.FPDFAttachment_GetFile(r,a,i,o))return this.free(o),this.free(a),this.logger.perf(Xl,Yl,"ReadAttachmentContent","End",e.id),Qe.reject({code:Je.CantReadAttachmentContent,message:"can not read attachment content"});const s=new ArrayBuffer(i),l=new DataView(s);for(let e=0;e<i;e++)l.setInt8(e,this.pdfiumModule.pdfium.getValue(a+e,"i8"));return this.free(o),this.free(a),this.logger.perf(Xl,Yl,"ReadAttachmentContent","End",e.id),Qe.resolve(s)}setFormFieldValue(e,t,n,r){this.logger.debug(Xl,Yl,"SetFormFieldValue",e,n,r),this.logger.perf(Xl,Yl,"SetFormFieldValue","Begin",`${e.id}-${n.id}`);const o=this.cache.getContext(e.id);if(!o)return this.logger.debug(Xl,Yl,"SetFormFieldValue","document is not opened"),this.logger.perf(Xl,Yl,"SetFormFieldValue","End",`${e.id}-${n.id}`),Qe.reject({code:Je.DocNotOpen,message:"document does not open"});const i=this.pdfiumModule.PDFiumExt_OpenFormFillInfo(),a=this.pdfiumModule.PDFiumExt_InitFormFillEnvironment(o.docPtr,i),s=o.acquirePage(t.index);this.pdfiumModule.FORM_OnAfterLoadPage(s.pagePtr,a);const l=this.pdfiumModule.FPDFPage_GetAnnot(s.pagePtr,n.id);if(!this.pdfiumModule.FORM_SetFocusedAnnot(a,l))return this.logger.debug(Xl,Yl,"SetFormFieldValue","failed to set focused annotation"),this.logger.perf(Xl,Yl,"SetFormFieldValue","End",`${e.id}-${n.id}`),this.pdfiumModule.FPDFPage_CloseAnnot(l),this.pdfiumModule.FORM_OnBeforeClosePage(s.pagePtr,a),s.release(),this.pdfiumModule.PDFiumExt_ExitFormFillEnvironment(a),this.pdfiumModule.PDFiumExt_CloseFormFillInfo(i),Qe.reject({code:Je.CantFocusAnnot,message:"failed to set focused annotation"});switch(r.kind){case"text":{if(!this.pdfiumModule.FORM_SelectAllText(a,s.pagePtr))return this.logger.debug(Xl,Yl,"SetFormFieldValue","failed to select all text"),this.logger.perf(Xl,Yl,"SetFormFieldValue","End",`${e.id}-${n.id}`),this.pdfiumModule.FORM_ForceToKillFocus(a),this.pdfiumModule.FPDFPage_CloseAnnot(l),this.pdfiumModule.FORM_OnBeforeClosePage(s.pagePtr,a),s.release(),this.pdfiumModule.PDFiumExt_ExitFormFillEnvironment(a),this.pdfiumModule.PDFiumExt_CloseFormFillInfo(i),Qe.reject({code:Je.CantSelectText,message:"failed to select all text"});const t=2*(r.text.length+1),o=this.malloc(t);this.pdfiumModule.pdfium.stringToUTF16(r.text,o,t),this.pdfiumModule.FORM_ReplaceSelection(a,s.pagePtr,o),this.free(o)}break;case"selection":if(!this.pdfiumModule.FORM_SetIndexSelected(a,s.pagePtr,r.index,r.isSelected))return this.logger.debug(Xl,Yl,"SetFormFieldValue","failed to set index selected"),this.logger.perf(Xl,Yl,"SetFormFieldValue","End",`${e.id}-${n.id}`),this.pdfiumModule.FORM_ForceToKillFocus(a),this.pdfiumModule.FPDFPage_CloseAnnot(l),this.pdfiumModule.FORM_OnBeforeClosePage(s.pagePtr,a),s.release(),this.pdfiumModule.PDFiumExt_ExitFormFillEnvironment(a),this.pdfiumModule.PDFiumExt_CloseFormFillInfo(i),Qe.reject({code:Je.CantSelectOption,message:"failed to set index selected"});break;case"checked":{const t=13;if(!this.pdfiumModule.FORM_OnChar(a,s.pagePtr,t,0))return this.logger.debug(Xl,Yl,"SetFormFieldValue","failed to set field checked"),this.logger.perf(Xl,Yl,"SetFormFieldValue","End",`${e.id}-${n.id}`),this.pdfiumModule.FORM_ForceToKillFocus(a),this.pdfiumModule.FPDFPage_CloseAnnot(l),this.pdfiumModule.FORM_OnBeforeClosePage(s.pagePtr,a),s.release(),this.pdfiumModule.PDFiumExt_ExitFormFillEnvironment(a),this.pdfiumModule.PDFiumExt_CloseFormFillInfo(i),Qe.reject({code:Je.CantCheckField,message:"failed to set field checked"})}}return this.pdfiumModule.FORM_ForceToKillFocus(a),this.pdfiumModule.FPDFPage_CloseAnnot(l),this.pdfiumModule.FORM_OnBeforeClosePage(s.pagePtr,a),s.release(),this.pdfiumModule.PDFiumExt_ExitFormFillEnvironment(a),this.pdfiumModule.PDFiumExt_CloseFormFillInfo(i),Qe.resolve(!0)}flattenPage(e,t,n){this.logger.debug(Xl,Yl,"flattenPage",e,t,n),this.logger.perf(Xl,Yl,"flattenPage","Begin",e.id);const r=this.cache.getContext(e.id);if(!r)return this.logger.perf(Xl,Yl,"flattenPage","End",e.id),Qe.reject({code:Je.DocNotOpen,message:"document does not open"});const o=r.acquirePage(t.index),i=this.pdfiumModule.FPDFPage_Flatten(o.pagePtr,n);return o.release(),this.logger.perf(Xl,Yl,"flattenPage","End",e.id),Qe.resolve(i)}extractPages(e,t){this.logger.debug(Xl,Yl,"extractPages",e,t),this.logger.perf(Xl,Yl,"ExtractPages","Begin",e.id);const n=this.cache.getContext(e.id);if(!n)return this.logger.perf(Xl,Yl,"ExtractPages","End",e.id),Qe.reject({code:Je.DocNotOpen,message:"document does not open"});const r=this.pdfiumModule.FPDF_CreateNewDocument();if(!r)return this.logger.perf(Xl,Yl,"ExtractPages","End",e.id),Qe.reject({code:Je.CantCreateNewDoc,message:"can not create new document"});const o=this.malloc(4*t.length);for(let e=0;e<t.length;e++)this.pdfiumModule.pdfium.setValue(o+4*e,t[e],"i32");if(!this.pdfiumModule.FPDF_ImportPagesByIndex(r,n.docPtr,o,t.length,0))return this.pdfiumModule.FPDF_CloseDocument(r),this.logger.perf(Xl,Yl,"ExtractPages","End",e.id),Qe.reject({code:Je.CantImportPages,message:"can not import pages to new document"});const i=this.saveDocument(r);return this.pdfiumModule.FPDF_CloseDocument(r),this.logger.perf(Xl,Yl,"ExtractPages","End",e.id),Qe.resolve(i)}extractText(e,t){this.logger.debug(Xl,Yl,"extractText",e,t),this.logger.perf(Xl,Yl,"ExtractText","Begin",e.id);const n=this.cache.getContext(e.id);if(!n)return this.logger.perf(Xl,Yl,"ExtractText","End",e.id),Qe.reject({code:Je.DocNotOpen,message:"document does not open"});const r=[];for(let e=0;e<t.length;e++){const o=n.acquirePage(t[e]),i=this.pdfiumModule.FPDFText_LoadPage(o.pagePtr),a=this.pdfiumModule.FPDFText_CountChars(i),s=this.malloc(2*(a+1));this.pdfiumModule.FPDFText_GetText(i,0,a,s);const l=this.pdfiumModule.pdfium.UTF16ToString(s);this.free(s),r.push(l),this.pdfiumModule.FPDFText_ClosePage(i),o.release()}const o=r.join("\n\n");return this.logger.perf(Xl,Yl,"ExtractText","End",e.id),Qe.resolve(o)}getTextSlices(e,t){if(this.logger.debug(Xl,Yl,"getTextSlices",e,t),this.logger.perf(Xl,Yl,"GetTextSlices","Begin",e.id),0===t.length)return this.logger.perf(Xl,Yl,"GetTextSlices","End",e.id),Qe.resolve([]);const n=this.cache.getContext(e.id);if(!n)return this.logger.perf(Xl,Yl,"GetTextSlices","End",e.id),Qe.reject({code:Je.DocNotOpen,message:"document does not open"});try{const r=new Array(t.length),o=new Map;t.forEach(((e,t)=>{(o.get(e.pageIndex)??o.set(e.pageIndex,[]).get(e.pageIndex)).push({slice:e,pos:t})}));for(const[e,t]of o){const o=n.acquirePage(e),i=o.getTextPage();for(const{slice:e,pos:n}of t){const t=this.malloc(2*(e.charCount+1));this.pdfiumModule.FPDFText_GetText(i,e.charIndex,e.charCount,t),r[n]=this.pdfiumModule.pdfium.UTF16ToString(t).replace(Re,""),this.free(t)}o.release()}return this.logger.perf(Xl,Yl,"GetTextSlices","End",e.id),Qe.resolve(r)}catch(t){return this.logger.error(Xl,Yl,"getTextSlices error",t),this.logger.perf(Xl,Yl,"GetTextSlices","End",e.id),Qe.reject({code:Je.Unknown,message:String(t)})}}merge(e){this.logger.debug(Xl,Yl,"merge",e);const t=e.map((e=>e.id)).join(".");this.logger.perf(Xl,Yl,"Merge","Begin",t);const n=this.pdfiumModule.FPDF_CreateNewDocument();if(!n)return this.logger.perf(Xl,Yl,"Merge","End",t),Qe.reject({code:Je.CantCreateNewDoc,message:"can not create new document"});const r=[];for(const o of e.reverse()){const e=new Uint8Array(o.content),i=e.length,a=this.malloc(i);this.pdfiumModule.pdfium.HEAPU8.set(e,a);const s=this.pdfiumModule.FPDF_LoadMemDocument(a,i,"");if(!s){const e=this.pdfiumModule.FPDF_GetLastError();this.logger.error(Xl,Yl,`FPDF_LoadMemDocument failed with ${e}`),this.free(a);for(const e of r)this.pdfiumModule.FPDF_CloseDocument(e.docPtr),this.free(e.filePtr);return this.logger.perf(Xl,Yl,"Merge","End",t),Qe.reject({code:e,message:"FPDF_LoadMemDocument failed"})}if(r.push({filePtr:a,docPtr:s}),!this.pdfiumModule.FPDF_ImportPages(n,s,"",0)){this.pdfiumModule.FPDF_CloseDocument(n);for(const e of r)this.pdfiumModule.FPDF_CloseDocument(e.docPtr),this.free(e.filePtr);return this.logger.perf(Xl,Yl,"Merge","End",t),Qe.reject({code:Je.CantImportPages,message:"can not import pages to new document"})}}const o=this.saveDocument(n);this.pdfiumModule.FPDF_CloseDocument(n);for(const e of r)this.pdfiumModule.FPDF_CloseDocument(e.docPtr),this.free(e.filePtr);const i={id:`${Math.random()}`,content:o};return this.logger.perf(Xl,Yl,"Merge","End",t),Qe.resolve(i)}mergePages(e){const t=e.map((e=>`${e.docId}:${e.pageIndices.join(",")}`)).join("|");this.logger.debug(Xl,Yl,"mergePages",e),this.logger.perf(Xl,Yl,"MergePages","Begin",t);const n=this.pdfiumModule.FPDF_CreateNewDocument();if(!n)return this.logger.perf(Xl,Yl,"MergePages","End",t),Qe.reject({code:Je.CantCreateNewDoc,message:"Cannot create new document"});try{for(const t of[...e].reverse()){const e=this.cache.getContext(t.docId);if(!e){this.logger.warn(Xl,Yl,`Document ${t.docId} is not open, skipping`);continue}const r=this.pdfiumModule.FPDF_GetPageCount(e.docPtr),o=t.pageIndices.filter((e=>e>=0&&e<r));if(0===o.length)continue;const i=o.map((e=>e+1)).join(",");try{if(!this.pdfiumModule.FPDF_ImportPages(n,e.docPtr,i,0))throw new Error(`Failed to import pages ${i} from document ${t.docId}`)}finally{}}const r=this.saveDocument(n),o={id:`${Math.random()}`,content:r};return this.logger.perf(Xl,Yl,"MergePages","End",t),Qe.resolve(o)}catch(e){return this.logger.error(Xl,Yl,"mergePages failed",e),this.logger.perf(Xl,Yl,"MergePages","End",t),Qe.reject({code:Je.CantImportPages,message:e instanceof Error?e.message:"Failed to merge pages"})}finally{n&&this.pdfiumModule.FPDF_CloseDocument(n)}}saveAsCopy(e){this.logger.debug(Xl,Yl,"saveAsCopy",e),this.logger.perf(Xl,Yl,"SaveAsCopy","Begin",e.id);const t=this.cache.getContext(e.id);if(!t)return this.logger.perf(Xl,Yl,"SaveAsCopy","End",e.id),Qe.reject({code:Je.DocNotOpen,message:"document does not open"});const n=this.saveDocument(t.docPtr);return this.logger.perf(Xl,Yl,"SaveAsCopy","End",e.id),Qe.resolve(n)}closeDocument(e){this.logger.debug(Xl,Yl,"closeDocument",e),this.logger.perf(Xl,Yl,"CloseDocument","Begin",e.id);const t=this.cache.getContext(e.id);return t?(t.dispose(),this.logger.perf(Xl,Yl,"CloseDocument","End",e.id),Qe.resolve(!0)):(this.logger.perf(Xl,Yl,"CloseDocument","End",e.id),Qe.reject({code:Je.DocNotOpen,message:"document does not open"}))}malloc(e){const t=this.pdfiumModule.pdfium.wasmExports.malloc(e);for(let n=0;n<e;n++)this.pdfiumModule.pdfium.HEAP8[t+n]=0;return t}free(e){this.pdfiumModule.pdfium.wasmExports.free(e)}addInkStroke(e,t,n,r){return!!this.setBorderStyle(n,Xe.SOLID,r.strokeWidth)&&(!!this.setPageAnnoRect(e,t,n,r.rect)&&(!!this.setInkList(e,n,r.inkList)&&(!!this.setAnnotString(n,"T",r.author||"")&&(!!this.setAnnotString(n,"M",tt(r.modified))&&!!this.setAnnotationColor(n,{color:r.color??"#FFFF00",opacity:r.opacity??1},qe.Color)))))}addTextMarkupContent(e,t,n,r){return!!this.setPageAnnoRect(e,t,n,r.rect)&&(!!this.syncQuadPointsAnno(e,n,r.segmentRects)&&(!!this.setAnnotString(n,"Contents",r.contents??"")&&(!!this.setAnnotString(n,"T",r.author||"")&&(!!this.setAnnotString(n,"M",tt(r.modified))&&!!this.setAnnotationColor(n,{color:r.color??"#FFFF00",opacity:r.opacity??1},qe.Color)))))}addStampContent(e,t,n,r,o,i){for(const a of i)if(a.type===Ye.IMAGE)return this.addImageObject(e,t,n,r,o.origin,a.imageData);return!1}addImageObject(e,t,n,r,o,i){const a=i.width*i.height,s=this.malloc(4*a);if(!s)return!1;for(let e=0;e<a;e++){const t=i.data[4*e],n=i.data[4*e+1],r=i.data[4*e+2],o=i.data[4*e+3];this.pdfiumModule.pdfium.setValue(s+4*e,r,"i8"),this.pdfiumModule.pdfium.setValue(s+4*e+1,n,"i8"),this.pdfiumModule.pdfium.setValue(s+4*e+2,t,"i8"),this.pdfiumModule.pdfium.setValue(s+4*e+3,o,"i8")}const l=$l.Bitmap_BGRA,u=this.pdfiumModule.FPDFBitmap_CreateEx(i.width,i.height,l,s,0);if(!u)return this.free(s),!1;const d=this.pdfiumModule.FPDFPageObj_NewImageObj(e);if(!d)return this.pdfiumModule.FPDFBitmap_Destroy(u),this.free(s),!1;if(!this.pdfiumModule.FPDFImageObj_SetBitmap(n,0,d,u))return this.pdfiumModule.FPDFBitmap_Destroy(u),this.pdfiumModule.FPDFPageObj_Destroy(d),this.free(s),!1;const c=this.malloc(24);return this.pdfiumModule.pdfium.setValue(c,i.width,"float"),this.pdfiumModule.pdfium.setValue(c+4,0,"float"),this.pdfiumModule.pdfium.setValue(c+8,0,"float"),this.pdfiumModule.pdfium.setValue(c+12,i.height,"float"),this.pdfiumModule.pdfium.setValue(c+16,0,"float"),this.pdfiumModule.pdfium.setValue(c+20,0,"float"),this.pdfiumModule.FPDFPageObj_SetMatrix(d,c)?(this.free(c),this.pdfiumModule.FPDFPageObj_Transform(d,1,0,0,1,o.x,o.y),this.pdfiumModule.FPDFAnnot_AppendObject(r,d)?(this.pdfiumModule.FPDFPage_GenerateContent(n),this.pdfiumModule.FPDFBitmap_Destroy(u),this.free(s),!0):(this.pdfiumModule.FPDFBitmap_Destroy(u),this.pdfiumModule.FPDFPageObj_Destroy(d),this.free(s),!1)):(this.free(c),this.pdfiumModule.FPDFBitmap_Destroy(u),this.pdfiumModule.FPDFPageObj_Destroy(d),this.free(s),!1)}saveDocument(e){const t=this.pdfiumModule.PDFiumExt_OpenFileWriter();this.pdfiumModule.PDFiumExt_SaveAsCopy(e,t);const n=this.pdfiumModule.PDFiumExt_GetFileWriterSize(t),r=this.malloc(n);this.pdfiumModule.PDFiumExt_GetFileWriterData(t,r,n);const o=new ArrayBuffer(n),i=new DataView(o);for(let e=0;e<n;e++)i.setInt8(e,this.pdfiumModule.pdfium.getValue(r+e,"i8"));return this.free(r),this.pdfiumModule.PDFiumExt_CloseFileWriter(t),o}readMetaText(e,t){return Bl(this.pdfiumModule.pdfium,((n,r)=>this.pdfiumModule.FPDF_GetMetaText(e,t,n,r)),this.pdfiumModule.pdfium.UTF16ToString)}readPdfBookmarks(e,t=0){let n=this.pdfiumModule.FPDFBookmark_GetFirstChild(e,t);const r=[];for(;n;){const t=this.readPdfBookmark(e,n);r.push(t);n=this.pdfiumModule.FPDFBookmark_GetNextSibling(e,n)}return r}readPdfBookmark(e,t){const n=Bl(this.pdfiumModule.pdfium,((e,n)=>this.pdfiumModule.FPDFBookmark_GetTitle(t,e,n)),this.pdfiumModule.pdfium.UTF16ToString),r=this.readPdfBookmarks(e,t);return{title:n,target:this.readPdfBookmarkTarget(e,(()=>this.pdfiumModule.FPDFBookmark_GetAction(t)),(()=>this.pdfiumModule.FPDFBookmark_GetDest(e,t))),children:r}}readPageTextRects(e,t,n,r){const o=this.pdfiumModule.FPDFText_CountRects(r,0,-1),i=[];for(let t=0;t<o;t++){const o=this.malloc(8),a=this.malloc(8),s=this.malloc(8),l=this.malloc(8);if(!this.pdfiumModule.FPDFText_GetRect(r,t,a,o,s,l)){this.free(a),this.free(o),this.free(s),this.free(l);continue}const u=this.pdfiumModule.pdfium.getValue(a,"double"),d=this.pdfiumModule.pdfium.getValue(o,"double"),c=this.pdfiumModule.pdfium.getValue(s,"double"),m=this.pdfiumModule.pdfium.getValue(l,"double");this.free(a),this.free(o),this.free(s),this.free(l);const h=this.malloc(4),g=this.malloc(4);this.pdfiumModule.FPDF_PageToDevice(n,0,0,e.size.width,e.size.height,0,u,d,h,g);const F=this.pdfiumModule.pdfium.getValue(h,"i32"),p=this.pdfiumModule.pdfium.getValue(g,"i32");this.free(h),this.free(g);const _={origin:{x:F,y:p},size:{width:Math.ceil(Math.abs(c-u)),height:Math.ceil(Math.abs(d-m))}},b=this.pdfiumModule.FPDFText_GetBoundedText(r,u,d,c,m,0,0),f=2*(b+1),P=this.malloc(f);this.pdfiumModule.FPDFText_GetBoundedText(r,u,d,c,m,P,b);const D=this.pdfiumModule.pdfium.UTF16ToString(P);this.free(P);const v=this.pdfiumModule.FPDFText_GetCharIndexAtPos(r,u,d,2,2);let y="",w=_.size.height;if(v>=0){w=this.pdfiumModule.FPDFText_GetFontSize(r,v);const e=this.pdfiumModule.FPDFText_GetFontInfo(r,v,0,0,0)+1,t=this.malloc(e),n=this.malloc(4);this.pdfiumModule.FPDFText_GetFontInfo(r,v,t,e,n),y=this.pdfiumModule.pdfium.UTF8ToString(t),this.free(t),this.free(n)}const x={content:D,rect:_,font:{family:y,size:w}};i.push(x)}return i}getPageGeometry(e,t){const n="getPageGeometry";this.logger.perf(Xl,Yl,n,"Begin",e.id);const r=this.cache.getContext(e.id);if(!r)return this.logger.perf(Xl,Yl,n,"End",e.id),Qe.reject({code:Je.DocNotOpen,message:"document does not open"});const o=r.acquirePage(t.index),i=o.getTextPage(),a=this.pdfiumModule.FPDFText_CountChars(i),s=[];for(let e=0;e<a;e++){const n=this.readGlyphInfo(t,o.pagePtr,i,e);s.push(n)}const l=this.buildRunsFromGlyphs(s,i);return o.release(),this.logger.perf(Xl,Yl,n,"End",e.id),Qe.resolve({runs:l})}buildRunsFromGlyphs(e,t){const n=[];let r=null,o=null,i=null;for(let a=0;a<e.length;a++){const s=e[a],l=this.pdfiumModule.FPDFText_GetTextObject(t,a);if(l!==o&&(o=l,r={rect:{x:s.origin.x,y:s.origin.y,width:s.size.width,height:s.size.height},charStart:a,glyphs:[]},i={minX:s.origin.x,minY:s.origin.y,maxX:s.origin.x+s.size.width,maxY:s.origin.y+s.size.height},n.push(r)),r.glyphs.push({x:s.origin.x,y:s.origin.y,width:s.size.width,height:s.size.height,flags:s.isEmpty?2:s.isSpace?1:0}),s.isEmpty)continue;const u=s.origin.x+s.size.width,d=s.origin.y+s.size.height;i.minX=Math.min(i.minX,s.origin.x),i.minY=Math.min(i.minY,s.origin.y),i.maxX=Math.max(i.maxX,u),i.maxY=Math.max(i.maxY,d),r.rect.x=i.minX,r.rect.y=i.minY,r.rect.width=i.maxX-i.minX,r.rect.height=i.maxY-i.minY}return n}readGlyphInfo(e,t,n,r){const o=this.malloc(4),i=this.malloc(4),a=this.malloc(4),s=this.malloc(4),l=this.malloc(16);let u=0,d=0,c=0,m=0,h=!1;if(this.pdfiumModule.FPDFText_GetLooseCharBox(n,r,l)){const g=this.pdfiumModule.pdfium.getValue(l,"float"),F=this.pdfiumModule.pdfium.getValue(l+4,"float"),p=this.pdfiumModule.pdfium.getValue(l+8,"float"),_=this.pdfiumModule.pdfium.getValue(l+12,"float");if(g===p||F===_)return{origin:{x:0,y:0},size:{width:0,height:0},isEmpty:!0};this.pdfiumModule.FPDF_PageToDevice(t,0,0,e.size.width,e.size.height,0,g,F,o,i),this.pdfiumModule.FPDF_PageToDevice(t,0,0,e.size.width,e.size.height,0,p,_,a,s);const b=this.pdfiumModule.pdfium.getValue(o,"i32"),f=this.pdfiumModule.pdfium.getValue(i,"i32"),P=this.pdfiumModule.pdfium.getValue(a,"i32"),D=this.pdfiumModule.pdfium.getValue(s,"i32");u=Math.min(b,P),d=Math.min(f,D),c=Math.max(1,Math.abs(P-b)),m=Math.max(1,Math.abs(D-f));h=32===this.pdfiumModule.FPDFText_GetUnicode(n,r)}return[l,o,i,a,s].forEach((e=>this.free(e))),{origin:{x:u,y:d},size:{width:c,height:m},...h&&{isSpace:h}}}getPageGlyphs(e,t){this.logger.debug(Xl,Yl,"getPageGlyphs",e,t),this.logger.perf(Xl,Yl,"getPageGlyphs","Begin",e.id);const n=this.cache.getContext(e.id);if(!n)return this.logger.perf(Xl,Yl,"getPageGlyphs","End",e.id),Qe.reject({code:Je.DocNotOpen,message:"document does not open"});const r=n.acquirePage(t.index),o=r.getTextPage(),i=this.pdfiumModule.FPDFText_CountChars(o),a=new Array(i);for(let e=0;e<i;e++){const n=this.readGlyphInfo(t,r.pagePtr,o,e);n.isEmpty||(a[e]={...n})}return r.release(),this.logger.perf(Xl,Yl,"getPageGlyphs","End",e.id),Qe.resolve(a)}readCharBox(e,t,n,r){const o=this.malloc(8),i=this.malloc(8),a=this.malloc(8),s=this.malloc(8);let l=0,u=0,d=0,c=0;if(this.pdfiumModule.FPDFText_GetCharBox(n,r,i,s,a,o)){const n=this.pdfiumModule.pdfium.getValue(o,"double"),r=this.pdfiumModule.pdfium.getValue(i,"double"),m=this.pdfiumModule.pdfium.getValue(a,"double"),h=this.pdfiumModule.pdfium.getValue(s,"double"),g=this.malloc(4),F=this.malloc(4);this.pdfiumModule.FPDF_PageToDevice(t,0,0,e.size.width,e.size.height,0,r,n,g,F),l=this.pdfiumModule.pdfium.getValue(g,"i32"),u=this.pdfiumModule.pdfium.getValue(F,"i32"),this.free(g),this.free(F),d=Math.ceil(Math.abs(h-r)),c=Math.ceil(Math.abs(n-m))}return this.free(o),this.free(i),this.free(a),this.free(s),{origin:{x:l,y:u},size:{width:d,height:c}}}readPageAnnotations(e,t){const n=e.acquirePage(t.index),r=this.pdfiumModule.FPDFPage_GetAnnotCount(n.pagePtr),o=[];for(let e=0;e<r;e++)n.withAnnotation(e,(r=>{const i=this.readPageAnnotation(t,n,r,e);i&&o.push(i)}));return o}readPageAnnotation(e,t,n,r){const o=this.pdfiumModule.FPDFAnnot_GetSubtype(n);let i;switch(o){case He.TEXT:i=this.readPdfTextAnno(e,t.pagePtr,n,r);break;case He.FREETEXT:i=this.readPdfFreeTextAnno(e,t.pagePtr,n,r);break;case He.LINK:i=this.readPdfLinkAnno(e,t.docPtr,t.pagePtr,t.getTextPage(),n,r);break;case He.WIDGET:i=this.readPdfWidgetAnno(e,t.pagePtr,n,t.getFormHandle(),r);break;case He.FILEATTACHMENT:i=this.readPdfFileAttachmentAnno(e,t.pagePtr,n,r);break;case He.INK:i=this.readPdfInkAnno(e,t.pagePtr,n,r);break;case He.POLYGON:i=this.readPdfPolygonAnno(e,t.pagePtr,n,r);break;case He.POLYLINE:i=this.readPdfPolylineAnno(e,t.pagePtr,n,r);break;case He.LINE:i=this.readPdfLineAnno(e,t.pagePtr,n,r);break;case He.HIGHLIGHT:i=this.readPdfHighlightAnno(e,t.pagePtr,n,r);break;case He.STAMP:i=this.readPdfStampAnno(t.docPtr,e,t.pagePtr,n,r);break;case He.SQUARE:i=this.readPdfSquareAnno(e,t.pagePtr,n,r);break;case He.CIRCLE:i=this.readPdfCircleAnno(e,t.pagePtr,n,r);break;case He.UNDERLINE:i=this.readPdfUnderlineAnno(e,t.pagePtr,n,r);break;case He.SQUIGGLY:i=this.readPdfSquigglyAnno(e,t.pagePtr,n,r);break;case He.STRIKEOUT:i=this.readPdfStrikeOutAnno(e,t.pagePtr,n,r);break;case He.CARET:i=this.readPdfCaretAnno(e,t.pagePtr,n,r);break;default:i=this.readPdfAnno(e,t.pagePtr,o,n,r)}return i}readAnnotationColor(e,t=qe.Color){const n=this.malloc(4),r=this.malloc(4),o=this.malloc(4),i=this.malloc(4);let a;return this.pdfiumModule.EPDFAnnot_GetColor(e,t,n,r,o,i)&&(a={red:255&this.pdfiumModule.pdfium.getValue(n,"i32"),green:255&this.pdfiumModule.pdfium.getValue(r,"i32"),blue:255&this.pdfiumModule.pdfium.getValue(o,"i32"),alpha:255&this.pdfiumModule.pdfium.getValue(i,"i32")}),this.free(n),this.free(r),this.free(o),this.free(i),a}resolveAnnotationColor(e,t=qe.Color,n={red:255,green:245,blue:155,alpha:255}){return function(e){const t=e=>Math.max(0,Math.min(255,e)),n=e=>t(e).toString(16).padStart(2,"0");return{color:`#${n(e.red)}${n(e.green)}${n(e.blue)}`,opacity:t(e.alpha)/255}}(this.readAnnotationColor(e,t)??n)}setAnnotationColor(e,t,n=qe.Color){const r=function({color:e,opacity:t}){/^#?[0-9a-f]{3}$/i.test(e)&&(e=e.replace(/^#?([0-9a-f])([0-9a-f])([0-9a-f])$/i,"#$1$1$2$2$3$3").toLowerCase());const[,n,r,o]=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(e)??(()=>{throw new Error(`Invalid hex colour: “${e}”`)})();return{red:parseInt(n,16),green:parseInt(r,16),blue:parseInt(o,16),alpha:((e,t=255)=>Math.max(0,Math.min(t,e)))(Math.round(255*t))}}(t);return this.pdfiumModule.EPDFAnnot_SetColor(e,n,255&r.red,255&r.green,255&r.blue,255&(r.alpha??255))}getBorderStyle(e){const t=this.malloc(4);let n=0,r=Xe.UNKNOWN,o=!1;return r=this.pdfiumModule.EPDFAnnot_GetBorderStyle(e,t),n=this.pdfiumModule.pdfium.getValue(t,"float"),o=r!==Xe.UNKNOWN,this.free(t),{ok:o,style:r,width:n}}setBorderStyle(e,t,n){return this.pdfiumModule.EPDFAnnot_SetBorderStyle(e,t,n)}getBorderEffect(e){const t=this.malloc(4),n=!!this.pdfiumModule.EPDFAnnot_GetBorderEffect(e,t),r=n?this.pdfiumModule.pdfium.getValue(t,"float"):0;return this.free(t),{ok:n,intensity:r}}getRectangleDifferences(e){const t=this.malloc(4),n=this.malloc(4),r=this.malloc(4),o=this.malloc(4),i=!!this.pdfiumModule.EPDFAnnot_GetRectangleDifferences(e,t,n,r,o),a=this.pdfiumModule.pdfium,s=a.getValue(t,"float"),l=a.getValue(n,"float"),u=a.getValue(r,"float"),d=a.getValue(o,"float");return this.free(t),this.free(n),this.free(r),this.free(o),{ok:i,left:s,top:l,right:u,bottom:d}}getBorderDashPattern(e){const t=this.pdfiumModule.EPDFAnnot_GetBorderDashPatternCount(e);if(0===t)return{ok:!1,pattern:[]};const n=this.malloc(4*t),r=!!this.pdfiumModule.EPDFAnnot_GetBorderDashPattern(e,n,t),o=[];if(r){const e=this.pdfiumModule.pdfium;for(let r=0;r<t;r++)o.push(e.getValue(n+4*r,"float"))}return this.free(n),{ok:r,pattern:o}}getQuadPointsAnno(e,t){const n=this.pdfiumModule.FPDFAnnot_CountAttachmentPoints(t);if(0===n)return[];const r=[];for(let o=0;o<n;o++){const n=this.malloc(32);if(this.pdfiumModule.FPDFAnnot_GetAttachmentPoints(t,o,n)){const t=[],o=[];for(let e=0;e<4;e++){const r=n+8*e;t.push(this.pdfiumModule.pdfium.getValue(r,"float")),o.push(this.pdfiumModule.pdfium.getValue(r+4,"float"))}const i=this.convertPagePointToDevicePoint(e,{x:t[0],y:o[0]}),a=this.convertPagePointToDevicePoint(e,{x:t[1],y:o[1]}),s=this.convertPagePointToDevicePoint(e,{x:t[2],y:o[2]}),l=this.convertPagePointToDevicePoint(e,{x:t[3],y:o[3]});r.push({p1:i,p2:a,p3:s,p4:l})}this.free(n)}return r.map(we)}syncQuadPointsAnno(e,t,n){const r=this.pdfiumModule.pdfium,o=this.pdfiumModule.FPDFAnnot_CountAttachmentPoints(t),i=this.malloc(32),a=t=>{const n=function(e){return{p1:{x:e.origin.x,y:e.origin.y},p2:{x:e.origin.x+e.size.width,y:e.origin.y},p3:{x:e.origin.x+e.size.width,y:e.origin.y+e.size.height},p4:{x:e.origin.x,y:e.origin.y+e.size.height}}}(t),o=this.convertDevicePointToPagePoint(e,n.p1),a=this.convertDevicePointToPagePoint(e,n.p2),s=this.convertDevicePointToPagePoint(e,n.p3),l=this.convertDevicePointToPagePoint(e,n.p4);r.setValue(i+0,o.x,"float"),r.setValue(i+4,o.y,"float"),r.setValue(i+8,a.x,"float"),r.setValue(i+12,a.y,"float"),r.setValue(i+16,l.x,"float"),r.setValue(i+20,l.y,"float"),r.setValue(i+24,s.x,"float"),r.setValue(i+28,s.y,"float")},s=Math.min(o,n.length);for(let e=0;e<s;e++)if(a(n[e]),!this.pdfiumModule.FPDFAnnot_SetAttachmentPoints(t,e,i))return this.free(i),!1;for(let e=o;e<n.length;e++)if(a(n[e]),!this.pdfiumModule.FPDFAnnot_AppendAttachmentPoints(t,i))return this.free(i),!1;return this.free(i),!0}getInkList(e,t){const n=[],r=this.pdfiumModule.FPDFAnnot_GetInkListCount(t);for(let o=0;o<r;o++){const r=[],i=this.pdfiumModule.FPDFAnnot_GetInkListPath(t,o,0,0);if(i>0){const n=8,a=this.malloc(i*n);this.pdfiumModule.FPDFAnnot_GetInkListPath(t,o,a,i);for(let t=0;t<i;t++){const n=this.pdfiumModule.pdfium.getValue(a+8*t,"float"),o=this.pdfiumModule.pdfium.getValue(a+8*t+4,"float"),{x:i,y:s}=this.convertPagePointToDevicePoint(e,{x:n,y:o});r.push({x:i,y:s})}this.free(a)}n.push({points:r})}return n}setInkList(e,t,n){for(const r of n){const n=r.points.length,o=this.malloc(8*n);for(let t=0;t<n;t++){const n=r.points[t],{x:i,y:a}=this.convertDevicePointToPagePoint(e,n);this.pdfiumModule.pdfium.setValue(o+8*t,i,"float"),this.pdfiumModule.pdfium.setValue(o+8*t+4,a,"float")}if(-1===this.pdfiumModule.FPDFAnnot_AddInkStroke(t,o,n))return this.free(o),!1;this.free(o)}return!0}readPdfTextAnno(e,t,n,r){const o=this.readPageAnnoRect(n),i=this.convertPageRectToDeviceRect(e,t,o),a=this.getAnnotString(n,"T"),s=et(this.getAnnotString(n,"M")),l=this.getAnnotString(n,"Contents")||"",u=this.getAnnotString(n,"State"),d=this.getAnnotString(n,"StateModel"),c=this.resolveAnnotationColor(n),m=this.getInReplyToId(t,n);return{pageIndex:e.index,id:r,type:He.TEXT,contents:l,...c,rect:i,inReplyToId:m,author:a,modified:s,state:u,stateModel:d}}readPdfFreeTextAnno(e,t,n,r){const o=this.readPageAnnoRect(n),i=this.convertPageRectToDeviceRect(e,t,o),a=this.getAnnotString(n,"Contents")||"",s=this.getAnnotString(n,"T"),l=et(this.getAnnotString(n,"M")),u=this.getAnnotRichContent(n);return{pageIndex:e.index,id:r,type:He.FREETEXT,richContent:u,contents:a,author:s,modified:l,rect:i}}readPdfLinkAnno(e,t,n,r,o,i){const a=this.pdfiumModule.FPDFAnnot_GetLink(o);if(!a)return;const s=this.readPageAnnoRect(o),{left:l,top:u,right:d,bottom:c}=s,m=this.convertPageRectToDeviceRect(e,n,s),h=this.getAnnotString(o,"T"),g=et(this.getAnnotString(o,"M")),F=this.pdfiumModule.FPDFText_GetBoundedText(r,l,u,d,c,0,0),p=2*(F+1),_=this.malloc(p);this.pdfiumModule.FPDFText_GetBoundedText(r,l,u,d,c,_,F);const b=this.pdfiumModule.pdfium.UTF16ToString(_);this.free(_);const f=this.readPdfLinkAnnoTarget(t,(()=>this.pdfiumModule.FPDFLink_GetAction(a)),(()=>this.pdfiumModule.FPDFLink_GetDest(t,a)));return{pageIndex:e.index,id:i,type:He.LINK,text:b,target:f,rect:m,author:h,modified:g}}readPdfWidgetAnno(e,t,n,r,o){const i=this.readPageAnnoRect(n),a=this.convertPageRectToDeviceRect(e,t,i),s=this.getAnnotString(n,"T"),l=et(this.getAnnotString(n,"M")),u=this.readPdfWidgetAnnoField(r,n);return{pageIndex:e.index,id:o,type:He.WIDGET,rect:a,field:u,author:s,modified:l}}readPdfFileAttachmentAnno(e,t,n,r){const o=this.readPageAnnoRect(n),i=this.convertPageRectToDeviceRect(e,t,o),a=this.getAnnotString(n,"T"),s=et(this.getAnnotString(n,"M"));return{pageIndex:e.index,id:r,type:He.FILEATTACHMENT,rect:i,author:a,modified:s}}readPdfInkAnno(e,t,n,r){const o=this.readPageAnnoRect(n),i=this.convertPageRectToDeviceRect(e,t,o),a=this.getAnnotString(n,"T"),s=et(this.getAnnotString(n,"M")),l=this.resolveAnnotationColor(n),{width:u}=this.getBorderStyle(n),d=this.getInkList(e,n),c=this.pdfiumModule.EPDFAnnot_GetBlendMode(n),m=this.getAnnotIntent(n);return{pageIndex:e.index,id:r,type:He.INK,...m&&{intent:m},blendMode:c,...l,strokeWidth:u,rect:i,inkList:d,author:a,modified:s}}readPdfPolygonAnno(e,t,n,r){const o=this.readPageAnnoRect(n),i=this.convertPageRectToDeviceRect(e,t,o),a=this.getAnnotString(n,"T"),s=et(this.getAnnotString(n,"M")),l=this.readPdfAnnoVertices(e,t,n);return{pageIndex:e.index,id:r,type:He.POLYGON,rect:i,vertices:l,author:a,modified:s}}readPdfPolylineAnno(e,t,n,r){const o=this.readPageAnnoRect(n),i=this.convertPageRectToDeviceRect(e,t,o),a=this.getAnnotString(n,"T"),s=et(this.getAnnotString(n,"M")),l=this.readPdfAnnoVertices(e,t,n);return{pageIndex:e.index,id:r,type:He.POLYLINE,rect:i,vertices:l,author:a,modified:s}}readPdfLineAnno(e,t,n,r){const o=this.readPageAnnoRect(n),i=this.convertPageRectToDeviceRect(e,t,o),a=this.getAnnotString(n,"T"),s=et(this.getAnnotString(n,"M")),l=this.malloc(8),u=this.malloc(8);this.pdfiumModule.FPDFAnnot_GetLine(n,l,u);const d=this.pdfiumModule.pdfium.getValue(l,"float"),c=this.pdfiumModule.pdfium.getValue(l+4,"float"),m=this.convertPagePointToDevicePoint(e,{x:d,y:c}),h=this.pdfiumModule.pdfium.getValue(u,"float"),g=this.pdfiumModule.pdfium.getValue(u+4,"float"),F=this.convertPagePointToDevicePoint(e,{x:h,y:g});return this.free(l),this.free(u),{pageIndex:e.index,id:r,type:He.LINE,rect:i,startPoint:m,endPoint:F,author:a,modified:s}}readPdfHighlightAnno(e,t,n,r){const o=this.readPageAnnoRect(n),i=this.convertPageRectToDeviceRect(e,t,o),a=this.getQuadPointsAnno(e,n),s=this.resolveAnnotationColor(n),l=this.pdfiumModule.EPDFAnnot_GetBlendMode(n),u=this.getAnnotString(n,"T"),d=et(this.getAnnotString(n,"M")),c=this.getAnnotString(n,"Contents")||"";return{pageIndex:e.index,id:r,blendMode:l,type:He.HIGHLIGHT,rect:i,contents:c,segmentRects:a,...s,author:u,modified:d}}readPdfUnderlineAnno(e,t,n,r){const o=this.readPageAnnoRect(n),i=this.convertPageRectToDeviceRect(e,t,o),a=this.getAnnotString(n,"T"),s=et(this.getAnnotString(n,"M")),l=this.getQuadPointsAnno(e,n),u=this.getAnnotString(n,"Contents")||"",d=this.resolveAnnotationColor(n),c=this.pdfiumModule.EPDFAnnot_GetBlendMode(n);return{pageIndex:e.index,id:r,blendMode:c,type:He.UNDERLINE,rect:i,contents:u,segmentRects:l,...d,author:a,modified:s}}readPdfStrikeOutAnno(e,t,n,r){const o=this.readPageAnnoRect(n),i=this.convertPageRectToDeviceRect(e,t,o),a=this.getAnnotString(n,"T"),s=et(this.getAnnotString(n,"M")),l=this.getQuadPointsAnno(e,n),u=this.getAnnotString(n,"Contents")||"",d=this.resolveAnnotationColor(n),c=this.pdfiumModule.EPDFAnnot_GetBlendMode(n);return{pageIndex:e.index,id:r,blendMode:c,type:He.STRIKEOUT,rect:i,contents:u,segmentRects:l,...d,author:a,modified:s}}readPdfSquigglyAnno(e,t,n,r){const o=this.readPageAnnoRect(n),i=this.convertPageRectToDeviceRect(e,t,o),a=this.getAnnotString(n,"T"),s=et(this.getAnnotString(n,"M")),l=this.getQuadPointsAnno(e,n),u=this.getAnnotString(n,"Contents")||"",d=this.resolveAnnotationColor(n),c=this.pdfiumModule.EPDFAnnot_GetBlendMode(n);return{pageIndex:e.index,id:r,blendMode:c,type:He.SQUIGGLY,rect:i,contents:u,segmentRects:l,...d,author:a,modified:s}}readPdfCaretAnno(e,t,n,r){const o=this.readPageAnnoRect(n),i=this.convertPageRectToDeviceRect(e,t,o),a=this.getAnnotString(n,"T"),s=et(this.getAnnotString(n,"M"));return{pageIndex:e.index,id:r,type:He.CARET,rect:i,author:a,modified:s}}readPdfStampAnno(e,t,n,r,o){const i=this.readPageAnnoRect(r),a=this.convertPageRectToDeviceRect(t,n,i),s=this.getAnnotString(r,"T"),l=et(this.getAnnotString(r,"M")),u=[],d=this.pdfiumModule.FPDFAnnot_GetObjectCount(r);for(let e=0;e<d;e++){const t=this.pdfiumModule.FPDFAnnot_GetObject(r,e),n=this.readPdfPageObject(t);n&&u.push(n)}return{pageIndex:t.index,id:o,type:He.STAMP,rect:a,contents:u,author:s,modified:l}}readPdfPageObject(e){switch(this.pdfiumModule.FPDFPageObj_GetType(e)){case Ye.PATH:return this.readPathObject(e);case Ye.IMAGE:return this.readImageObject(e);case Ye.FORM:return this.readFormObject(e)}}readPathObject(e){const t=this.pdfiumModule.FPDFPath_CountSegments(e),n=this.malloc(4),r=this.malloc(4),o=this.malloc(4),i=this.malloc(4);this.pdfiumModule.FPDFPageObj_GetBounds(e,n,r,o,i);const a={left:this.pdfiumModule.pdfium.getValue(n,"float"),bottom:this.pdfiumModule.pdfium.getValue(r,"float"),right:this.pdfiumModule.pdfium.getValue(o,"float"),top:this.pdfiumModule.pdfium.getValue(i,"float")};this.free(n),this.free(r),this.free(o),this.free(i);const s=[];for(let n=0;n<t;n++){const t=this.readPdfSegment(e,n);s.push(t)}const l=this.readPdfPageObjectTransformMatrix(e);return{type:Ye.PATH,bounds:a,segments:s,matrix:l}}readPdfSegment(e,t){const n=this.pdfiumModule.FPDFPath_GetPathSegment(e,t),r=this.pdfiumModule.FPDFPathSegment_GetType(n),o=this.pdfiumModule.FPDFPathSegment_GetClose(n),i=this.malloc(4),a=this.malloc(4);this.pdfiumModule.FPDFPathSegment_GetPoint(n,i,a);const s=this.pdfiumModule.pdfium.getValue(i,"float"),l=this.pdfiumModule.pdfium.getValue(a,"float");return this.free(i),this.free(a),{type:r,point:{x:s,y:l},isClosed:o}}readImageObject(e){const t=this.pdfiumModule.FPDFImageObj_GetBitmap(e),n=this.pdfiumModule.FPDFBitmap_GetBuffer(t),r=this.pdfiumModule.FPDFBitmap_GetWidth(t),o=this.pdfiumModule.FPDFBitmap_GetHeight(t),i=this.pdfiumModule.FPDFBitmap_GetFormat(t),a=r*o,s=new Uint8ClampedArray(4*a);for(let e=0;e<a;e++)if(i===$l.Bitmap_BGR){const t=this.pdfiumModule.pdfium.getValue(n+3*e,"i8"),r=this.pdfiumModule.pdfium.getValue(n+3*e+1,"i8"),o=this.pdfiumModule.pdfium.getValue(n+3*e+2,"i8");s[4*e]=o,s[4*e+1]=r,s[4*e+2]=t,s[4*e+3]=100}const l=new ImageData(s,r,o),u=this.readPdfPageObjectTransformMatrix(e);return{type:Ye.IMAGE,imageData:l,matrix:u}}readFormObject(e){const t=this.pdfiumModule.FPDFFormObj_CountObjects(e),n=[];for(let r=0;r<t;r++){const t=this.pdfiumModule.FPDFFormObj_GetObject(e,r),o=this.readPdfPageObject(t);o&&n.push(o)}const r=this.readPdfPageObjectTransformMatrix(e);return{type:Ye.FORM,objects:n,matrix:r}}readPdfPageObjectTransformMatrix(e){const t=this.malloc(24);if(this.pdfiumModule.FPDFPageObj_GetMatrix(e,t)){const e=this.pdfiumModule.pdfium.getValue(t,"float"),n=this.pdfiumModule.pdfium.getValue(t+4,"float"),r=this.pdfiumModule.pdfium.getValue(t+8,"float"),o=this.pdfiumModule.pdfium.getValue(t+12,"float"),i=this.pdfiumModule.pdfium.getValue(t+16,"float"),a=this.pdfiumModule.pdfium.getValue(t+20,"float");return this.free(t),{a:e,b:n,c:r,d:o,e:i,f:a}}return this.free(t),{a:1,b:0,c:0,d:1,e:0,f:0}}getStrokeWidth(e){const t=this.malloc(4),n=this.malloc(4),r=this.malloc(4),o=this.pdfiumModule.FPDFAnnot_GetBorder(e,t,n,r)?this.pdfiumModule.pdfium.getValue(r,"float"):1;return this.free(t),this.free(n),this.free(r),o}getAnnotationFlags(e){const t=this.pdfiumModule.FPDFAnnot_GetFlags(e);return n=t,Object.keys(Ze).filter((e=>!!(n&e))).map((e=>Ze[e]));var n}readPdfCircleAnno(e,t,n,r){const o=this.getAnnotationFlags(n),i=this.readPageAnnoRect(n),a=this.convertPageRectToDeviceRect(e,t,i),s=this.getAnnotString(n,"T"),l=et(this.getAnnotString(n,"M")),{color:u,opacity:d}=this.resolveAnnotationColor(n,qe.InteriorColor),{color:c}=this.resolveAnnotationColor(n);let m,h,g,{style:F,width:p}=this.getBorderStyle(n);if(F===Xe.CLOUDY||F===Xe.UNKNOWN){const{ok:e,intensity:t}=this.getBorderEffect(n);if(e){m=t,F=Xe.CLOUDY;const{ok:e,left:r,top:o,right:i,bottom:a}=this.getRectangleDifferences(n);e&&(h=[r,o,i,a])}}if(F===Xe.DASHED){const{ok:e,pattern:t}=this.getBorderDashPattern(n);e&&(g=t)}return{pageIndex:e.index,id:r,type:He.CIRCLE,flags:o,color:u,opacity:d,strokeWidth:p,strokeColor:c,strokeStyle:F,rect:a,author:s,modified:l,...void 0!==m&&{cloudyBorderIntensity:m},...void 0!==h&&{cloudyBorderInset:h},...void 0!==g&&{strokeDashArray:g}}}readPdfSquareAnno(e,t,n,r){const o=this.getAnnotationFlags(n),i=this.readPageAnnoRect(n),a=this.convertPageRectToDeviceRect(e,t,i),s=this.getAnnotString(n,"T"),l=et(this.getAnnotString(n,"M")),{color:u,opacity:d}=this.resolveAnnotationColor(n,qe.InteriorColor),{color:c}=this.resolveAnnotationColor(n);let m,h,g,{style:F,width:p}=this.getBorderStyle(n);if(F===Xe.CLOUDY||F===Xe.UNKNOWN){const{ok:e,intensity:t}=this.getBorderEffect(n);if(e){m=t,F=Xe.CLOUDY;const{ok:e,left:r,top:o,right:i,bottom:a}=this.getRectangleDifferences(n);e&&(h=[r,o,i,a])}}if(F===Xe.DASHED){const{ok:e,pattern:t}=this.getBorderDashPattern(n);e&&(g=t)}return{pageIndex:e.index,id:r,type:He.SQUARE,flags:o,color:u,opacity:d,strokeColor:c,strokeWidth:p,strokeStyle:F,rect:a,author:s,modified:l,...void 0!==m&&{cloudyBorderIntensity:m},...void 0!==h&&{cloudyBorderInset:h},...void 0!==g&&{strokeDashArray:g}}}readPdfAnno(e,t,n,r,o){const i=this.readPageAnnoRect(r),a=this.convertPageRectToDeviceRect(e,t,i),s=this.getAnnotString(r,"T"),l=et(this.getAnnotString(r,"M"));return{pageIndex:e.index,id:o,type:n,rect:a,author:s,modified:l}}getInReplyToId(e,t){const n=this.pdfiumModule.FPDFAnnot_GetLinkedAnnot(t,"IRT");if(!n)return;const r=this.pdfiumModule.FPDFPage_GetAnnotIndex(e,n);return r>=0?r:void 0}getAnnotString(e,t){const n=this.pdfiumModule.FPDFAnnot_GetStringValue(e,t,0,0);if(0===n)return;const r=2*(n+1),o=this.malloc(r);this.pdfiumModule.FPDFAnnot_GetStringValue(e,t,o,r);const i=this.pdfiumModule.pdfium.UTF16ToString(o);return this.free(o),i||void 0}getAnnotIntent(e){const t=this.pdfiumModule.EPDFAnnot_GetIntent(e,0,0);if(0===t)return;const n=2*(t+1),r=this.malloc(n);this.pdfiumModule.EPDFAnnot_GetIntent(e,r,n);const o=this.pdfiumModule.pdfium.UTF16ToString(r);return this.free(r),o&&"undefined"!==o?o:void 0}getAnnotRichContent(e){const t=this.pdfiumModule.EPDFAnnot_GetRichContent(e,0,0);if(0===t)return;const n=2*(t+1),r=this.malloc(n);this.pdfiumModule.EPDFAnnot_GetRichContent(e,r,n);const o=this.pdfiumModule.pdfium.UTF16ToString(r);return this.free(r),o||void 0}setAnnotString(e,t,n){const r=2*(n.length+1),o=this.malloc(r);this.pdfiumModule.pdfium.stringToUTF16(n,o,r);const i=this.pdfiumModule.FPDFAnnot_SetStringValue(e,t,o);return this.free(o),i}readPdfAnnoVertices(e,t,n){const r=[],o=this.pdfiumModule.FPDFAnnot_GetVertices(n,0,0),i=this.malloc(8*o);this.pdfiumModule.FPDFAnnot_GetVertices(n,i,o);for(let t=0;t<o;t++){const n=this.pdfiumModule.pdfium.getValue(i+8*t,"float"),o=this.pdfiumModule.pdfium.getValue(i+8*t+4,"float"),{x:a,y:s}=this.convertPagePointToDevicePoint(e,{x:n,y:o});r.push({x:a,y:s})}return this.free(i),r}readPdfBookmarkTarget(e,t,n){const r=t();if(r){return{type:"action",action:this.readPdfAction(e,r)}}{const t=n();if(t){return{type:"destination",destination:this.readPdfDestination(e,t)}}}}readPdfWidgetAnnoField(e,t){const n=this.pdfiumModule.FPDFAnnot_GetFormFieldFlags(e,t),r=this.pdfiumModule.FPDFAnnot_GetFormFieldType(e,t),o=Bl(this.pdfiumModule.pdfium,((n,r)=>this.pdfiumModule.FPDFAnnot_GetFormFieldName(e,t,n,r)),this.pdfiumModule.pdfium.UTF16ToString),i=Bl(this.pdfiumModule.pdfium,((n,r)=>this.pdfiumModule.FPDFAnnot_GetFormFieldAlternateName(e,t,n,r)),this.pdfiumModule.pdfium.UTF16ToString),a=Bl(this.pdfiumModule.pdfium,((n,r)=>this.pdfiumModule.FPDFAnnot_GetFormFieldValue(e,t,n,r)),this.pdfiumModule.pdfium.UTF16ToString),s=[];if(r===$e.COMBOBOX||r===$e.LISTBOX){const n=this.pdfiumModule.FPDFAnnot_GetOptionCount(e,t);for(let r=0;r<n;r++){const n=Bl(this.pdfiumModule.pdfium,((n,o)=>this.pdfiumModule.FPDFAnnot_GetOptionLabel(e,t,r,n,o)),this.pdfiumModule.pdfium.UTF16ToString),o=this.pdfiumModule.FPDFAnnot_IsOptionSelected(e,t,r);s.push({label:n,isSelected:o})}}let l=!1;return r!==$e.CHECKBOX&&r!==$e.RADIOBUTTON||(l=this.pdfiumModule.FPDFAnnot_IsChecked(e,t)),{flag:n,type:r,name:o,alternateName:i,value:a,isChecked:l,options:s}}renderAnnotation(e,t,n,r,o,i=1,a=We.Normal,s="image/webp"){this.logger.debug(Xl,Yl,"renderAnnotation",e,t,n,r,o,i,a,s),this.logger.perf(Xl,Yl,"RenderAnnotation","Begin",`${e.id}-${t.index}-${n.id}`);const l=new Ie,u=this.cache.getContext(e.id);if(!u)return this.logger.perf(Xl,Yl,"RenderAnnotation","End",`${e.id}-${t.index}-${n.id}`),Qe.reject({code:Je.DocNotOpen,message:"document does not open"});const d=u.acquirePage(t.index),c=this.pdfiumModule.FPDFPage_GetAnnot(d.pagePtr,n.id);if(!c)return d.release(),this.logger.perf(Xl,Yl,"RenderAnnotation","End",`${e.id}-${t.index}-${n.id}`),Qe.reject({code:Je.NotFound,message:"annotation not found"});const m=r*i,h=n.rect,g=De(Ce(t.size,h,o,m)),F=$l.Bitmap_BGRA,p=g.size.width*g.size.height*4,_=this.malloc(p),b=this.pdfiumModule.FPDFBitmap_CreateEx(g.size.width,g.size.height,F,_,4*g.size.width);this.pdfiumModule.FPDFBitmap_FillRect(b,0,0,g.size.width,g.size.height,0);const f=((e,t,n)=>{const{width:r,height:o}=e.size;switch(t){case 0:return{a:n,b:0,c:0,d:-n,e:0,f:o*n};case 1:return{a:0,b:n,c:n,d:0,e:0,f:0};case 2:return{a:-n,b:0,c:0,d:n,e:r*n,f:0};case 3:return{a:0,b:-n,c:-n,d:0,e:o*n,f:r*n}}})(n.rect,o,m),P=this.malloc(24);new Float32Array(this.pdfiumModule.pdfium.HEAPF32.buffer,P,6).set([f.a,f.b,f.c,f.d,f.e,f.f]);const D=ql.REVERSE_BYTE_ORDER,v=!!this.pdfiumModule.EPDF_RenderAnnotBitmap(b,d.pagePtr,c,a,P,D);if(this.free(P),this.pdfiumModule.FPDFBitmap_Destroy(b),this.pdfiumModule.FPDFPage_CloseAnnot(c),d.release(),!v)return this.free(_),this.logger.perf(Xl,Yl,"RenderAnnotation","End",`${e.id}-${t.index}-${n.id}`),Qe.reject({code:Je.Unknown,message:"EPDF_RenderAnnotBitmap failed"});const y=this.pdfiumModule.pdfium.HEAPU8.subarray(_,_+p),w={data:new Uint8ClampedArray(y),width:g.size.width,height:g.size.height};return this.free(_),this.logger.perf(Xl,Yl,"RenderAnnotation","End",`${e.id}-${t.index}-${n.id}`),this.imageDataConverter(w,s).then((e=>l.resolve(e))).catch((e=>l.reject({code:Je.Unknown,message:String(e)}))),l}renderPageRectToImageData(e,t,n,r,o,i,a){const s=$l.Bitmap_BGRA,l=De(Ce(t.size,n,o,r*i)),u=Pe(ye(t.size,o,r*i)),d=l.size.width*l.size.height*4,c=this.malloc(d),m=this.pdfiumModule.FPDFBitmap_CreateEx(l.size.width,l.size.height,s,c,4*l.size.width);this.pdfiumModule.FPDFBitmap_FillRect(m,0,0,l.size.width,l.size.height,4294967295);let h=ql.REVERSE_BYTE_ORDER;a?.withAnnotations&&(h|=ql.ANNOT);const g=e.acquirePage(t.index);this.pdfiumModule.FPDF_RenderPageBitmap(m,g.pagePtr,-l.origin.x,-l.origin.y,u.width,u.height,o,h),this.pdfiumModule.FPDFBitmap_Destroy(m),g.release();const F=this.pdfiumModule.pdfium.HEAPU8.subarray(c,c+d),p={data:new Uint8ClampedArray(F),width:l.size.width,height:l.size.height};return this.free(c),p}readPdfLinkAnnoTarget(e,t,n){const r=n();if(r){return{type:"destination",destination:this.readPdfDestination(e,r)}}{const n=t();if(n){return{type:"action",action:this.readPdfAction(e,n)}}}}readPdfAction(e,t){let n;switch(this.pdfiumModule.FPDFAction_GetType(t)){case Ve.Unsupported:n={type:Ve.Unsupported};break;case Ve.Goto:{const r=this.pdfiumModule.FPDFAction_GetDest(e,t);if(r){const t=this.readPdfDestination(e,r);n={type:Ve.Goto,destination:t}}else n={type:Ve.Unsupported}}break;case Ve.RemoteGoto:n={type:Ve.Unsupported};break;case Ve.URI:{const r=Bl(this.pdfiumModule.pdfium,((n,r)=>this.pdfiumModule.FPDFAction_GetURIPath(e,t,n,r)),this.pdfiumModule.pdfium.UTF8ToString);n={type:Ve.URI,uri:r}}break;case Ve.LaunchAppOrOpenFile:{const e=Bl(this.pdfiumModule.pdfium,((e,n)=>this.pdfiumModule.FPDFAction_GetFilePath(t,e,n)),this.pdfiumModule.pdfium.UTF8ToString);n={type:Ve.LaunchAppOrOpenFile,path:e}}}return n}readPdfDestination(e,t){const n=this.pdfiumModule.FPDFDest_GetDestPageIndex(e,t),r=this.malloc(4),o=this.malloc(16),i=this.pdfiumModule.FPDFDest_GetView(t,r,o),a=this.pdfiumModule.pdfium.getValue(r,"i32"),s=[];for(let e=0;e<a;e++){const t=o+4*e;s.push(this.pdfiumModule.pdfium.getValue(t,"float"))}if(this.free(r),this.free(o),i===Le.XYZ){const e=this.malloc(1),r=this.malloc(1),o=this.malloc(1),a=this.malloc(4),l=this.malloc(4),u=this.malloc(4);if(this.pdfiumModule.FPDFDest_GetLocationInPage(t,e,r,o,a,l,u)){const t=this.pdfiumModule.pdfium.getValue(e,"i8"),d=this.pdfiumModule.pdfium.getValue(r,"i8"),c=this.pdfiumModule.pdfium.getValue(o,"i8"),m=t?this.pdfiumModule.pdfium.getValue(a,"float"):0,h=d?this.pdfiumModule.pdfium.getValue(l,"float"):0,g=c?this.pdfiumModule.pdfium.getValue(u,"float"):0;return this.free(e),this.free(r),this.free(o),this.free(a),this.free(l),this.free(u),{pageIndex:n,zoom:{mode:i,params:{x:m,y:h,zoom:g}},view:s}}return this.free(e),this.free(r),this.free(o),this.free(a),this.free(l),this.free(u),{pageIndex:n,zoom:{mode:i,params:{x:0,y:0,zoom:0}},view:s}}return{pageIndex:n,zoom:{mode:i},view:s}}readPdfAttachment(e,t){const n=this.pdfiumModule.FPDFDoc_GetAttachment(e,t);return{index:t,name:Bl(this.pdfiumModule.pdfium,((e,t)=>this.pdfiumModule.FPDFAttachment_GetName(n,e,t)),this.pdfiumModule.pdfium.UTF16ToString),creationDate:Bl(this.pdfiumModule.pdfium,((e,t)=>this.pdfiumModule.FPDFAttachment_GetStringValue(n,"CreationDate",e,t)),this.pdfiumModule.pdfium.UTF16ToString),checksum:Bl(this.pdfiumModule.pdfium,((e,t)=>this.pdfiumModule.FPDFAttachment_GetStringValue(n,"Checksum",e,t)),this.pdfiumModule.pdfium.UTF16ToString)}}convertDevicePointToPagePoint(e,t){return{x:t.x,y:e.size.height-t.y}}convertPagePointToDevicePoint(e,t){return{x:t.x,y:e.size.height-t.y}}convertPageRectToDeviceRect(e,t,n){const{x:r,y:o}=this.convertPagePointToDevicePoint(e,{x:n.left,y:n.top});return{origin:{x:r,y:o},size:{width:Math.abs(n.right-n.left),height:Math.abs(n.top-n.bottom)}}}readPageAnnoAppearanceStreams(e){return{normal:this.readPageAnnoAppearanceStream(e,We.Normal),rollover:this.readPageAnnoAppearanceStream(e,We.Rollover),down:this.readPageAnnoAppearanceStream(e,We.Down)}}readPageAnnoAppearanceStream(e,t=We.Normal){const n=2*(this.pdfiumModule.FPDFAnnot_GetAP(e,t,0,0)+1),r=this.malloc(n);this.pdfiumModule.FPDFAnnot_GetAP(e,t,r,n);const o=this.pdfiumModule.pdfium.UTF16ToString(r);return this.free(r),o}updateAnnotationColor(e,t,n,r,o=0){this.logger.debug(Xl,Yl,"setAnnotationColor",e,t,n,r,o),this.logger.perf(Xl,Yl,"setAnnotationColor","Begin",e.id);const i=Qe.create();try{const a=this.cache.getContext(e.id);if(!a)return this.logger.perf(Xl,Yl,"setAnnotationColor","End",e.id),this.logger.warn(Xl,Yl,"setAnnotationColor: doc closed"),i.resolve(!1),i;const s=a.acquirePage(t.index),l=this.pdfiumModule.FPDFPage_GetAnnot(s.pagePtr,n.id);if(!l)return this.logger.perf(Xl,Yl,"setAnnotationColor","End",e.id),this.logger.warn(Xl,Yl,"setAnnotationColor: annot not found"),s.release(),i.resolve(!1),i;const u=this.setAnnotationColor(l,r,o);u&&this.pdfiumModule.FPDFPage_GenerateContent(s.pagePtr),this.pdfiumModule.FPDFPage_CloseAnnot(l),s.release(),this.logger.perf(Xl,Yl,"setAnnotationColor","End",e.id),i.resolve(!!u)}catch(t){this.logger.perf(Xl,Yl,"setAnnotationColor","End",e.id),this.logger.error(Xl,Yl,"setAnnotationColor: error",t),i.reject({code:Je.Unknown,message:`Failed to set annotation color: ${t instanceof Error?t.message:String(t)}`})}return i}setPageAnnoRect(e,t,n,r){const o=this.malloc(8),i=this.malloc(8);if(!this.pdfiumModule.FPDF_DeviceToPage(t,0,0,e.size.width,e.size.height,0,r.origin.x,r.origin.y,o,i))return this.free(o),this.free(i),!1;const a=this.pdfiumModule.pdfium.getValue(o,"double"),s=this.pdfiumModule.pdfium.getValue(i,"double");this.free(o),this.free(i);const l=this.malloc(16);return this.pdfiumModule.pdfium.setValue(l,a,"float"),this.pdfiumModule.pdfium.setValue(l+4,s,"float"),this.pdfiumModule.pdfium.setValue(l+8,a+r.size.width,"float"),this.pdfiumModule.pdfium.setValue(l+12,s-r.size.height,"float"),this.pdfiumModule.FPDFAnnot_SetRect(n,l)?(this.free(l),!0):(this.free(l),!1)}readPageAnnoRect(e){const t=this.malloc(16),n={left:0,top:0,right:0,bottom:0};return this.pdfiumModule.FPDFAnnot_GetRect(e,t)&&(n.left=this.pdfiumModule.pdfium.getValue(t,"float"),n.top=this.pdfiumModule.pdfium.getValue(t+4,"float"),n.right=this.pdfiumModule.pdfium.getValue(t+8,"float"),n.bottom=this.pdfiumModule.pdfium.getValue(t+12,"float")),this.free(t),n}getHighlightRects(e,t,n,r,o){const i=this.pdfiumModule.FPDFText_CountRects(n,r,o),a=[];for(let r=0;r<i;r++){const o=this.malloc(8),i=this.malloc(8),s=this.malloc(8),l=this.malloc(8);if(!this.pdfiumModule.FPDFText_GetRect(n,r,i,o,s,l)){this.free(i),this.free(o),this.free(s),this.free(l);continue}const u=this.pdfiumModule.pdfium.getValue(i,"double"),d=this.pdfiumModule.pdfium.getValue(o,"double"),c=this.pdfiumModule.pdfium.getValue(s,"double"),m=this.pdfiumModule.pdfium.getValue(l,"double");this.free(i),this.free(o),this.free(s),this.free(l);const h=this.malloc(4),g=this.malloc(4);this.pdfiumModule.FPDF_PageToDevice(t,0,0,e.size.width,e.size.height,0,u,d,h,g);const F=this.pdfiumModule.pdfium.getValue(h,"i32"),p=this.pdfiumModule.pdfium.getValue(g,"i32");this.free(h),this.free(g);const _=Math.ceil(Math.abs(c-u)),b=Math.ceil(Math.abs(d-m));a.push({origin:{x:F,y:p},size:{width:_,height:b}})}return a}searchAllPages(e,t,n=[]){this.logger.debug(Xl,Yl,"searchAllPages",e,t,n),this.logger.perf(Xl,Yl,"SearchAllPages","Begin",e.id);const r=this.cache.getContext(e.id);if(!r)return this.logger.perf(Xl,Yl,"SearchAllPages","End",e.id),Qe.resolve({results:[],total:0});const o=2*(t.length+1),i=this.malloc(o);this.pdfiumModule.pdfium.stringToUTF16(t,i,o);const a=n.reduce(((e,t)=>e|t),Ke.None),s=[],l=Qe.create();return(async()=>{for(let t=0;t<e.pageCount;t++){const n=this.searchAllInPage(r,e.pages[t],i,a);s.push(...n)}this.free(i),this.logger.perf(Xl,Yl,"SearchAllPages","End",e.id),l.resolve({results:s,total:s.length})})().catch((t=>{this.free(i),this.logger.perf(Xl,Yl,"SearchAllPages","End",e.id),l.reject({code:Je.Unknown,message:`Error searching document: ${t}`})})),l}buildContext(e,t,n,r=30){const o=/[\s\u00A0.,;:!?()\[\]{}<>/\\\-"'`"”\u2013\u2014]/;let i=t;for(;i>0&&o.test(e[i-1]);)i--;let a=0;for(;i>0&&a<r;)i--,o.test(e[i])||a++;i=(t=>{for(;t>0&&!o.test(e[t-1]);)t--;return t})(i);let s=t+n;for(;s<e.length&&o.test(e[s]);)s++;for(a=0;s<e.length&&a<r;)o.test(e[s])||a++,s++;s=(t=>{for(;t<e.length&&!o.test(e[t]);)t++;return t})(s);const l=e.slice(i,t).replace(/\s+/g," ").trimStart(),u=e.slice(t,t+n),d=e.slice(t+n,s).replace(/\s+/g," ").trimEnd();return{before:this.tidy(l),match:this.tidy(u),after:this.tidy(d),truncatedLeft:i>0,truncatedRight:s<e.length}}tidy(e){return e.replace(/-\uFFFE\s*/g,"").replace(/[\uFFFE\u00AD\u200B\u2060\uFEFF]/g,"").replace(/\s+/g," ")}searchAllInPage(e,t,n,r){const o=t.index,i=e.acquirePage(o),a=i.getTextPage(),s=this.pdfiumModule.FPDFText_CountChars(a),l=this.malloc(2*(s+1));this.pdfiumModule.FPDFText_GetText(a,0,s,l);const u=this.pdfiumModule.pdfium.UTF16ToString(l);this.free(l);const d=[],c=this.pdfiumModule.FPDFText_FindStart(a,n,r,0);for(;this.pdfiumModule.FPDFText_FindNext(c);){const e=this.pdfiumModule.FPDFText_GetSchResultIndex(c),n=this.pdfiumModule.FPDFText_GetSchCount(c),r=this.getHighlightRects(t,i.pagePtr,a,e,n),s=this.buildContext(u,e,n);d.push({pageIndex:o,charIndex:e,charCount:n,rects:r,context:s})}return this.pdfiumModule.FPDFText_FindClose(c),i.release(),d}}var Ql=Object.freeze({__proto__:null,createPdfiumEngine:async function(e,t){const n=await fetch(e),r=await n.arrayBuffer(),o=await Nl({wasmBinary:r});return new Jl(o,t)}});function eu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var tu,nu={exports:{}};
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */tu=nu,function(e,t,n,r){var o,i=["","webkit","Moz","MS","ms","o"],a=t.createElement("div"),s=Math.round,l=Math.abs,u=Date.now;function d(e,t,n){return setTimeout(_(e,n),t)}function c(e,t,n){return!!Array.isArray(e)&&(m(e,n[t],n),!0)}function m(e,t,n){var o;if(e)if(e.forEach)e.forEach(t,n);else if(e.length!==r)for(o=0;o<e.length;)t.call(n,e[o],o,e),o++;else for(o in e)e.hasOwnProperty(o)&&t.call(n,e[o],o,e)}function h(t,n,r){var o="DEPRECATED METHOD: "+n+"\n"+r+" AT \n";return function(){var n=new Error("get-stack-trace"),r=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",i=e.console&&(e.console.warn||e.console.log);return i&&i.call(e.console,o,r),t.apply(this,arguments)}}o="function"!=typeof Object.assign?function(e){if(e===r||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var o=arguments[n];if(o!==r&&null!==o)for(var i in o)o.hasOwnProperty(i)&&(t[i]=o[i])}return t}:Object.assign;var g=h((function(e,t,n){for(var o=Object.keys(t),i=0;i<o.length;)(!n||n&&e[o[i]]===r)&&(e[o[i]]=t[o[i]]),i++;return e}),"extend","Use `assign`."),F=h((function(e,t){return g(e,t,!0)}),"merge","Use `assign`.");function p(e,t,n){var r,i=t.prototype;(r=e.prototype=Object.create(i)).constructor=e,r._super=i,n&&o(r,n)}function _(e,t){return function(){return e.apply(t,arguments)}}function b(e,t){return"function"==typeof e?e.apply(t&&t[0]||r,t):e}function f(e,t){return e===r?t:e}function P(e,t,n){m(w(t),(function(t){e.addEventListener(t,n,!1)}))}function D(e,t,n){m(w(t),(function(t){e.removeEventListener(t,n,!1)}))}function v(e,t){for(;e;){if(e==t)return!0;e=e.parentNode}return!1}function y(e,t){return e.indexOf(t)>-1}function w(e){return e.trim().split(/\s+/g)}function x(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);for(var r=0;r<e.length;){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function A(e){return Array.prototype.slice.call(e,0)}function S(e,t,n){for(var r=[],o=[],i=0;i<e.length;){var a=t?e[i][t]:e[i];x(o,a)<0&&r.push(e[i]),o[i]=a,i++}return n&&(r=t?r.sort((function(e,n){return e[t]>n[t]})):r.sort()),r}function E(e,t){for(var n,o,a=t[0].toUpperCase()+t.slice(1),s=0;s<i.length;){if((o=(n=i[s])?n+a:t)in e)return o;s++}return r}var C=1;function M(t){var n=t.ownerDocument||t;return n.defaultView||n.parentWindow||e}var T="ontouchstart"in e,G=E(e,"PointerEvent")!==r,k=T&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),I="touch",O="mouse",R=24,L=["x","y"],j=["clientX","clientY"];function N(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){b(e.options.enable,[e])&&n.handler(t)},this.init()}function B(e,t,n){var o=n.pointers.length,i=n.changedPointers.length,a=1&t&&o-i==0,s=12&t&&o-i==0;n.isFirst=!!a,n.isFinal=!!s,a&&(e.session={}),n.eventType=t,function(e,t){var n=e.session,o=t.pointers,i=o.length;n.firstInput||(n.firstInput=z(t)),i>1&&!n.firstMultiple?n.firstMultiple=z(t):1===i&&(n.firstMultiple=!1);var a=n.firstInput,s=n.firstMultiple,d=s?s.center:a.center,c=t.center=U(o);t.timeStamp=u(),t.deltaTime=t.timeStamp-a.timeStamp,t.angle=$(d,c),t.distance=W(d,c),function(e,t){var n=t.center,r=e.offsetDelta||{},o=e.prevDelta||{},i=e.prevInput||{};1!==t.eventType&&4!==i.eventType||(o=e.prevDelta={x:i.deltaX||0,y:i.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y}),t.deltaX=o.x+(n.x-r.x),t.deltaY=o.y+(n.y-r.y)}(n,t),t.offsetDirection=H(t.deltaX,t.deltaY);var m,h,g=V(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=g.x,t.overallVelocityY=g.y,t.overallVelocity=l(g.x)>l(g.y)?g.x:g.y,t.scale=s?(m=s.pointers,W((h=o)[0],h[1],j)/W(m[0],m[1],j)):1,t.rotation=s?function(e,t){return $(t[1],t[0],j)+$(e[1],e[0],j)}(s.pointers,o):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,function(e,t){var n,o,i,a,s=e.lastInterval||t,u=t.timeStamp-s.timeStamp;if(8!=t.eventType&&(u>25||s.velocity===r)){var d=t.deltaX-s.deltaX,c=t.deltaY-s.deltaY,m=V(u,d,c);o=m.x,i=m.y,n=l(m.x)>l(m.y)?m.x:m.y,a=H(d,c),e.lastInterval=t}else n=s.velocity,o=s.velocityX,i=s.velocityY,a=s.direction;t.velocity=n,t.velocityX=o,t.velocityY=i,t.direction=a}(n,t);var F=e.element;v(t.srcEvent.target,F)&&(F=t.srcEvent.target),t.target=F}(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function z(e){for(var t=[],n=0;n<e.pointers.length;)t[n]={clientX:s(e.pointers[n].clientX),clientY:s(e.pointers[n].clientY)},n++;return{timeStamp:u(),pointers:t,center:U(t),deltaX:e.deltaX,deltaY:e.deltaY}}function U(e){var t=e.length;if(1===t)return{x:s(e[0].clientX),y:s(e[0].clientY)};for(var n=0,r=0,o=0;o<t;)n+=e[o].clientX,r+=e[o].clientY,o++;return{x:s(n/t),y:s(r/t)}}function V(e,t,n){return{x:t/e||0,y:n/e||0}}function H(e,t){return e===t?1:l(e)>=l(t)?e<0?2:4:t<0?8:16}function W(e,t,n){n||(n=L);var r=t[n[0]]-e[n[0]],o=t[n[1]]-e[n[1]];return Math.sqrt(r*r+o*o)}function $(e,t,n){n||(n=L);var r=t[n[0]]-e[n[0]],o=t[n[1]]-e[n[1]];return 180*Math.atan2(o,r)/Math.PI}N.prototype={handler:function(){},init:function(){this.evEl&&P(this.element,this.evEl,this.domHandler),this.evTarget&&P(this.target,this.evTarget,this.domHandler),this.evWin&&P(M(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&D(this.element,this.evEl,this.domHandler),this.evTarget&&D(this.target,this.evTarget,this.domHandler),this.evWin&&D(M(this.element),this.evWin,this.domHandler)}};var q={mousedown:1,mousemove:2,mouseup:4},X="mousedown",Y="mousemove mouseup";function Z(){this.evEl=X,this.evWin=Y,this.pressed=!1,N.apply(this,arguments)}p(Z,N,{handler:function(e){var t=q[e.type];1&t&&0===e.button&&(this.pressed=!0),2&t&&1!==e.which&&(t=4),this.pressed&&(4&t&&(this.pressed=!1),this.callback(this.manager,t,{pointers:[e],changedPointers:[e],pointerType:O,srcEvent:e}))}});var K={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},J={2:I,3:"pen",4:O,5:"kinect"},Q="pointerdown",ee="pointermove pointerup pointercancel";function te(){this.evEl=Q,this.evWin=ee,N.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}e.MSPointerEvent&&!e.PointerEvent&&(Q="MSPointerDown",ee="MSPointerMove MSPointerUp MSPointerCancel"),p(te,N,{handler:function(e){var t=this.store,n=!1,r=e.type.toLowerCase().replace("ms",""),o=K[r],i=J[e.pointerType]||e.pointerType,a=i==I,s=x(t,e.pointerId,"pointerId");1&o&&(0===e.button||a)?s<0&&(t.push(e),s=t.length-1):12&o&&(n=!0),s<0||(t[s]=e,this.callback(this.manager,o,{pointers:t,changedPointers:[e],pointerType:i,srcEvent:e}),n&&t.splice(s,1))}});var ne={touchstart:1,touchmove:2,touchend:4,touchcancel:8};function re(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,N.apply(this,arguments)}function oe(e,t){var n=A(e.touches),r=A(e.changedTouches);return 12&t&&(n=S(n.concat(r),"identifier",!0)),[n,r]}p(re,N,{handler:function(e){var t=ne[e.type];if(1===t&&(this.started=!0),this.started){var n=oe.call(this,e,t);12&t&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:I,srcEvent:e})}}});var ie={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ae="touchstart touchmove touchend touchcancel";function se(){this.evTarget=ae,this.targetIds={},N.apply(this,arguments)}function le(e,t){var n=A(e.touches),r=this.targetIds;if(3&t&&1===n.length)return r[n[0].identifier]=!0,[n,n];var o,i,a=A(e.changedTouches),s=[],l=this.target;if(i=n.filter((function(e){return v(e.target,l)})),1===t)for(o=0;o<i.length;)r[i[o].identifier]=!0,o++;for(o=0;o<a.length;)r[a[o].identifier]&&s.push(a[o]),12&t&&delete r[a[o].identifier],o++;return s.length?[S(i.concat(s),"identifier",!0),s]:void 0}function ue(){N.apply(this,arguments);var e=_(this.handler,this);this.touch=new se(this.manager,e),this.mouse=new Z(this.manager,e),this.primaryTouch=null,this.lastTouches=[]}function de(e,t){1&e?(this.primaryTouch=t.changedPointers[0].identifier,ce.call(this,t)):12&e&&ce.call(this,t)}function ce(e){var t=e.changedPointers[0];if(t.identifier===this.primaryTouch){var n={x:t.clientX,y:t.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var e=r.indexOf(n);e>-1&&r.splice(e,1)}),2500)}}function me(e){for(var t=e.srcEvent.clientX,n=e.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var o=this.lastTouches[r],i=Math.abs(t-o.x),a=Math.abs(n-o.y);if(i<=25&&a<=25)return!0}return!1}p(se,N,{handler:function(e){var t=ie[e.type],n=le.call(this,e,t);n&&this.callback(this.manager,t,{pointers:n[0],changedPointers:n[1],pointerType:I,srcEvent:e})}}),p(ue,N,{handler:function(e,t,n){var r=n.pointerType==I,o=n.pointerType==O;if(!(o&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)de.call(this,t,n);else if(o&&me.call(this,n))return;this.callback(e,t,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var he=E(a.style,"touchAction"),ge=he!==r,Fe="compute",pe="auto",_e="manipulation",be="none",fe="pan-x",Pe="pan-y",De=function(){if(!ge)return!1;var t={},n=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(r){t[r]=!n||e.CSS.supports("touch-action",r)})),t}();function ve(e,t){this.manager=e,this.set(t)}ve.prototype={set:function(e){e==Fe&&(e=this.compute()),ge&&this.manager.element.style&&De[e]&&(this.manager.element.style[he]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return m(this.manager.recognizers,(function(t){b(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))})),function(e){if(y(e,be))return be;var t=y(e,fe),n=y(e,Pe);return t&&n?be:t||n?t?fe:Pe:y(e,_e)?_e:pe}(e.join(" "))},preventDefaults:function(e){var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented)t.preventDefault();else{var r=this.actions,o=y(r,be)&&!De[be],i=y(r,Pe)&&!De[Pe],a=y(r,fe)&&!De[fe];if(o){var s=1===e.pointers.length,l=e.distance<2,u=e.deltaTime<250;if(s&&l&&u)return}if(!a||!i)return o||i&&6&n||a&&n&R?this.preventSrc(t):void 0}},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var ye=32;function we(e){this.options=o({},this.defaults,e||{}),this.id=C++,this.manager=null,this.options.enable=f(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function xe(e){return 16&e?"cancel":8&e?"end":4&e?"move":2&e?"start":""}function Ae(e){return 16==e?"down":8==e?"up":2==e?"left":4==e?"right":""}function Se(e,t){var n=t.manager;return n?n.get(e):e}function Ee(){we.apply(this,arguments)}function Ce(){Ee.apply(this,arguments),this.pX=null,this.pY=null}function Me(){Ee.apply(this,arguments)}function Te(){we.apply(this,arguments),this._timer=null,this._input=null}function Ge(){Ee.apply(this,arguments)}function ke(){Ee.apply(this,arguments)}function Ie(){we.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Oe(e,t){return(t=t||{}).recognizers=f(t.recognizers,Oe.defaults.preset),new Re(e,t)}function Re(e,t){var n;this.options=o({},Oe.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=e,this.input=new((n=this).options.inputClass||(G?te:k?se:T?ue:Z))(n,B),this.touchAction=new ve(this,this.options.touchAction),Le(this,!0),m(this.options.recognizers,(function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])}),this)}function Le(e,t){var n,r=e.element;r.style&&(m(e.options.cssProps,(function(o,i){n=E(r.style,i),t?(e.oldCssProps[n]=r.style[n],r.style[n]=o):r.style[n]=e.oldCssProps[n]||""})),t||(e.oldCssProps={}))}we.prototype={defaults:{},set:function(e){return o(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(c(e,"recognizeWith",this))return this;var t=this.simultaneous;return t[(e=Se(e,this)).id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return c(e,"dropRecognizeWith",this)||(e=Se(e,this),delete this.simultaneous[e.id]),this},requireFailure:function(e){if(c(e,"requireFailure",this))return this;var t=this.requireFail;return-1===x(t,e=Se(e,this))&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(c(e,"dropRequireFailure",this))return this;e=Se(e,this);var t=x(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){var t=this,n=this.state;function r(n){t.manager.emit(n,e)}n<8&&r(t.options.event+xe(n)),r(t.options.event),e.additionalEvent&&r(e.additionalEvent),n>=8&&r(t.options.event+xe(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=ye},canEmit:function(){for(var e=0;e<this.requireFail.length;){if(!(33&this.requireFail[e].state))return!1;e++}return!0},recognize:function(e){var t=o({},e);if(!b(this.options.enable,[this,t]))return this.reset(),void(this.state=ye);56&this.state&&(this.state=1),this.state=this.process(t),30&this.state&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},p(Ee,we,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return 0===t||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=6&t,o=this.attrTest(e);return r&&(8&n||!o)?16|t:r||o?4&n?8|t:2&t?4|t:2:ye}}),p(Ce,Ee,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var e=this.options.direction,t=[];return 6&e&&t.push(Pe),e&R&&t.push(fe),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,o=e.direction,i=e.deltaX,a=e.deltaY;return o&t.direction||(6&t.direction?(o=0===i?1:i<0?2:4,n=i!=this.pX,r=Math.abs(e.deltaX)):(o=0===a?1:a<0?8:16,n=a!=this.pY,r=Math.abs(e.deltaY))),e.direction=o,n&&r>t.threshold&&o&t.direction},attrTest:function(e){return Ee.prototype.attrTest.call(this,e)&&(2&this.state||!(2&this.state)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=Ae(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),p(Me,Ee,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[be]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},emit:function(e){if(1!==e.scale){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),p(Te,we,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[pe]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,o=e.deltaTime>t.time;if(this._input=e,!r||!n||12&e.eventType&&!o)this.reset();else if(1&e.eventType)this.reset(),this._timer=d((function(){this.state=8,this.tryEmit()}),t.time,this);else if(4&e.eventType)return 8;return ye},reset:function(){clearTimeout(this._timer)},emit:function(e){8===this.state&&(e&&4&e.eventType?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=u(),this.manager.emit(this.options.event,this._input)))}}),p(Ge,Ee,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[be]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)}}),p(ke,Ee,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Ce.prototype.getTouchAction.call(this)},attrTest:function(e){var t,n=this.options.direction;return 30&n?t=e.overallVelocity:6&n?t=e.overallVelocityX:n&R&&(t=e.overallVelocityY),this._super.attrTest.call(this,e)&&n&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&l(t)>this.options.velocity&&4&e.eventType},emit:function(e){var t=Ae(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),p(Ie,we,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[_e]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,o=e.deltaTime<t.time;if(this.reset(),1&e.eventType&&0===this.count)return this.failTimeout();if(r&&o&&n){if(4!=e.eventType)return this.failTimeout();var i=!this.pTime||e.timeStamp-this.pTime<t.interval,a=!this.pCenter||W(this.pCenter,e.center)<t.posThreshold;if(this.pTime=e.timeStamp,this.pCenter=e.center,a&&i?this.count+=1:this.count=1,this._input=e,0==this.count%t.taps)return this.hasRequireFailures()?(this._timer=d((function(){this.state=8,this.tryEmit()}),t.interval,this),2):8}return ye},failTimeout:function(){return this._timer=d((function(){this.state=ye}),this.options.interval,this),ye},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Oe.VERSION="2.0.7",Oe.defaults={domEvents:!1,touchAction:Fe,enable:!0,inputTarget:null,inputClass:null,preset:[[Ge,{enable:!1}],[Me,{enable:!1},["rotate"]],[ke,{direction:6}],[Ce,{direction:6},["swipe"]],[Ie],[Ie,{event:"doubletap",taps:2},["tap"]],[Te]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Re.prototype={set:function(e){return o(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?2:1},recognize:function(e){var t=this.session;if(!t.stopped){var n;this.touchAction.preventDefaults(e);var r=this.recognizers,o=t.curRecognizer;(!o||o&&8&o.state)&&(o=t.curRecognizer=null);for(var i=0;i<r.length;)n=r[i],2===t.stopped||o&&n!=o&&!n.canRecognizeWith(o)?n.reset():n.recognize(e),!o&&14&n.state&&(o=t.curRecognizer=n),i++}},get:function(e){if(e instanceof we)return e;for(var t=this.recognizers,n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(c(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(c(e,"remove",this))return this;if(e=this.get(e)){var t=this.recognizers,n=x(t,e);-1!==n&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){if(e!==r&&t!==r){var n=this.handlers;return m(w(e),(function(e){n[e]=n[e]||[],n[e].push(t)})),this}},off:function(e,t){if(e!==r){var n=this.handlers;return m(w(e),(function(e){t?n[e]&&n[e].splice(x(n[e],t),1):delete n[e]})),this}},emit:function(e,n){this.options.domEvents&&function(e,n){var r=t.createEvent("Event");r.initEvent(e,!0,!0),r.gesture=n,n.target.dispatchEvent(r)}(e,n);var r=this.handlers[e]&&this.handlers[e].slice();if(r&&r.length){n.type=e,n.preventDefault=function(){n.srcEvent.preventDefault()};for(var o=0;o<r.length;)r[o](n),o++}},destroy:function(){this.element&&Le(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},o(Oe,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:ye,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:R,DIRECTION_ALL:30,Manager:Re,Input:N,TouchAction:ve,TouchInput:se,MouseInput:Z,PointerEventInput:te,TouchMouseInput:ue,SingleTouchInput:re,Recognizer:we,AttrRecognizer:Ee,Tap:Ie,Pan:Ce,Swipe:ke,Pinch:Me,Rotate:Ge,Press:Te,on:P,off:D,each:m,merge:F,extend:g,assign:o,inherit:p,bindFn:_,prefixed:E}),(void 0!==e?e:"undefined"!=typeof self?self:{}).Hammer=Oe,tu.exports?tu.exports=Oe:e.Hammer=Oe}(window,document);var ru=eu(nu.exports),ou=Object.freeze({__proto__:null,default:ru});export{Ml as default};
