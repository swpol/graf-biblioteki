{"version":3,"file":"index.cjs","sources":["../../../core/dist/preact/index.js","../../src/preact/hooks/use-selection.ts","../../../plugin-interaction-manager/dist/preact/index.js","../../src/preact/components/selection-layer.tsx","../../src/preact/components/copy-to-clipboard.tsx"],"sourcesContent":["import { createContext as b } from \"preact\";\nimport { u as w } from \"../jsxRuntime.module-Bzuv3cXw.js\";\nimport { useState as a, useRef as m, useEffect as f, useContext as S } from \"preact/hooks\";\nimport { P as v, a as C } from \"../math-ChSRQF3r.js\";\nconst P = b({\n  registry: null,\n  isInitializing: !0,\n  pluginsReady: !1\n});\nfunction F({ engine: t, onInitialized: r, plugins: e, children: i }) {\n  const [o, s] = a(null), [u, c] = a(!0), [y, d] = a(!1), l = m(r);\n  return f(() => {\n    l.current = r;\n  }, [r]), f(() => {\n    const n = new v(t);\n    return n.registerPluginBatch(e), (async () => {\n      var p;\n      await n.initialize(), !n.isDestroyed() && (await ((p = l.current) == null ? void 0 : p.call(l, n)), !n.isDestroyed() && (n.pluginsReady().then(() => {\n        n.isDestroyed() || d(!0);\n      }), s(n), c(!1)));\n    })().catch(console.error), () => {\n      n.destroy(), s(null), c(!0), d(!1);\n    };\n  }, [t, e]), /* @__PURE__ */ w(P.Provider, { value: { registry: o, isInitializing: u, pluginsReady: y }, children: typeof i == \"function\" ? i({ registry: o, isInitializing: u, pluginsReady: y }) : i });\n}\nfunction g() {\n  const t = S(P);\n  if (t === void 0)\n    throw new Error(\"useCapability must be used within a PDFContext.Provider\");\n  const { registry: r, isInitializing: e } = t;\n  if (e)\n    return t;\n  if (r === null)\n    throw new Error(\"PDF registry failed to initialize properly\");\n  return t;\n}\nfunction h(t) {\n  const { registry: r } = g();\n  if (r === null)\n    return {\n      plugin: null,\n      isLoading: !0,\n      ready: new Promise(() => {\n      })\n    };\n  const e = r.getPlugin(t);\n  if (!e)\n    throw new Error(`Plugin ${t} not found`);\n  return {\n    plugin: e,\n    isLoading: !1,\n    ready: e.ready()\n  };\n}\nfunction L(t) {\n  const { plugin: r, isLoading: e, ready: i } = h(t);\n  if (!r)\n    return {\n      provides: null,\n      isLoading: e,\n      ready: i\n    };\n  if (!r.provides)\n    throw new Error(`Plugin ${t} does not provide a capability`);\n  return {\n    provides: r.provides(),\n    isLoading: e,\n    ready: i\n  };\n}\nfunction V() {\n  const { registry: t } = g(), [r, e] = a(null);\n  return f(() => {\n    if (!t) return;\n    e(t.getStore().getState());\n    const i = t.getStore().subscribe((o, s) => {\n      e(s);\n    });\n    return () => i();\n  }, [t]), r;\n}\nfunction $() {\n  const { registry: t } = g(), [r, e] = a(null);\n  return f(() => {\n    if (!t) return;\n    const i = t.getStore();\n    e(i.getState().core);\n    const o = i.subscribe((s, u, c) => {\n      i.isCoreAction(s) && !C(u.core, c.core) && e(u.core);\n    });\n    return () => o();\n  }, [t]), r;\n}\nexport {\n  F as EmbedPDF,\n  P as PDFContext,\n  L as useCapability,\n  $ as useCoreState,\n  h as usePlugin,\n  g as useRegistry,\n  V as useStoreState\n};\n//# sourceMappingURL=index.js.map\n","import { useCapability, usePlugin } from '@embedpdf/core/preact';\nimport { SelectionPlugin } from '@embedpdf/plugin-selection';\n\nexport const useSelectionCapability = () => useCapability<SelectionPlugin>(SelectionPlugin.id);\nexport const useSelectionPlugin = () => usePlugin<SelectionPlugin>(SelectionPlugin.id);\n","import { u as g } from \"../jsxRuntime.module-D89ud_rY.js\";\nimport { useContext as E, useState as y, useEffect as a, useRef as P, useCallback as M } from \"preact/hooks\";\nimport { c as v, r as L } from \"../index-Q-vI1_iw.js\";\nimport { createContext as z } from \"preact\";\nimport { I, i as S } from \"../reducer-Dda407Go.js\";\nconst A = z({\n  registry: null,\n  isInitializing: !0,\n  pluginsReady: !1\n});\nfunction R() {\n  const e = E(A);\n  if (e === void 0)\n    throw new Error(\"useCapability must be used within a PDFContext.Provider\");\n  const { registry: n, isInitializing: t } = e;\n  if (t)\n    return e;\n  if (n === null)\n    throw new Error(\"PDF registry failed to initialize properly\");\n  return e;\n}\nfunction x(e) {\n  const { registry: n } = R();\n  if (n === null)\n    return {\n      plugin: null,\n      isLoading: !0,\n      ready: new Promise(() => {\n      })\n    };\n  const t = n.getPlugin(e);\n  if (!t)\n    throw new Error(`Plugin ${e} not found`);\n  return {\n    plugin: t,\n    isLoading: !1,\n    ready: t.ready()\n  };\n}\nfunction D(e) {\n  const { plugin: n, isLoading: t, ready: r } = x(e);\n  if (!n)\n    return {\n      provides: null,\n      isLoading: t,\n      ready: r\n    };\n  if (!n.provides)\n    throw new Error(`Plugin ${e} does not provide a capability`);\n  return {\n    provides: n.provides(),\n    isLoading: t,\n    ready: r\n  };\n}\nconst X = () => x(I.id), s = () => D(I.id);\nfunction Y() {\n  const { provides: e } = s(), [n, t] = y(S);\n  return a(() => {\n    if (e)\n      return e.onStateChange((r) => {\n        t(r);\n      });\n  }, [e]), {\n    provides: e,\n    state: n\n  };\n}\nfunction j() {\n  const { provides: e } = s();\n  return {\n    setCursor: (n, t, r = 0) => {\n      e == null || e.setCursor(n, t, r);\n    },\n    removeCursor: (n) => {\n      e == null || e.removeCursor(n);\n    }\n  };\n}\nfunction q({ modeId: e, pageIndex: n }) {\n  const { provides: t } = s();\n  return {\n    register: (r, i) => {\n      const u = (i == null ? void 0 : i.modeId) ?? e, o = (i == null ? void 0 : i.pageIndex) ?? n;\n      return u ? t == null ? void 0 : t.registerHandlers({\n        modeId: u,\n        handlers: r,\n        pageIndex: o\n      }) : t == null ? void 0 : t.registerAlways({\n        scope: o !== void 0 ? { type: \"page\", pageIndex: o } : { type: \"global\" },\n        handlers: r\n      });\n    }\n  };\n}\nfunction F() {\n  const { provides: e } = s(), [n, t] = y(() => {\n    const r = e == null ? void 0 : e.getActiveInteractionMode();\n    return (r == null ? void 0 : r.scope) === \"page\" && !!r.exclusive;\n  });\n  return a(() => {\n    if (e)\n      return e.onModeChange(() => {\n        const r = e.getActiveInteractionMode();\n        t((r == null ? void 0 : r.scope) === \"page\" && !!(r != null && r.exclusive));\n      });\n  }, [e]), n;\n}\nconst J = ({\n  children: e,\n  style: n,\n  ...t\n}) => {\n  const r = P(null), { provides: i } = s();\n  return a(() => {\n    if (!(!i || !r.current))\n      return v(i, { type: \"global\" }, r.current);\n  }, [i]), /* @__PURE__ */ g(\n    \"div\",\n    {\n      ref: r,\n      style: {\n        width: \"100%\",\n        height: \"100%\",\n        ...n\n      },\n      ...t,\n      children: e\n    }\n  );\n}, K = ({\n  pageIndex: e,\n  children: n,\n  pageWidth: t,\n  pageHeight: r,\n  rotation: i,\n  scale: u,\n  convertEventToPoint: o,\n  style: C,\n  ...h\n}) => {\n  const c = P(null), { provides: l } = s(), m = F(), d = M(\n    (f, w) => {\n      const p = w.getBoundingClientRect(), b = {\n        x: f.clientX - p.left,\n        y: f.clientY - p.top\n      };\n      return L(\n        { width: t, height: r },\n        b,\n        i,\n        u\n      );\n    },\n    [t, r, i, u]\n  );\n  return a(() => {\n    if (!(!l || !c.current))\n      return v(\n        l,\n        { type: \"page\", pageIndex: e },\n        c.current,\n        o || d\n      );\n  }, [l, e, o, d]), /* @__PURE__ */ g(\n    \"div\",\n    {\n      ref: c,\n      style: {\n        ...C\n      },\n      ...h,\n      children: [\n        n,\n        m && /* @__PURE__ */ g(\"div\", { style: { position: \"absolute\", top: 0, left: 0, right: 0, bottom: 0, zIndex: 10 } })\n      ]\n    }\n  );\n};\nexport {\n  J as GlobalPointerProvider,\n  K as PagePointerProvider,\n  j as useCursor,\n  Y as useInteractionManager,\n  s as useInteractionManagerCapability,\n  X as useInteractionManagerPlugin,\n  F as useIsPageExclusive,\n  q as usePointerHandlers\n};\n//# sourceMappingURL=index.js.map\n","/** @jsxImportSource preact */\nimport { useCallback, useEffect, useMemo, useRef, useState } from 'preact/hooks';\nimport { ignore, PdfErrorCode, PdfPageGeometry, Position, Rect } from '@embedpdf/models';\nimport {\n  useCursor,\n  useInteractionManagerCapability,\n  usePointerHandlers,\n} from '@embedpdf/plugin-interaction-manager/preact';\nimport { PointerEventHandlersWithLifecycle } from '@embedpdf/plugin-interaction-manager';\nimport { glyphAt } from '@embedpdf/plugin-selection';\n\nimport { useSelectionCapability } from '../hooks';\n\ntype Props = {\n  pageIndex: number;\n  scale: number;\n  background?: string;\n};\n\nexport function SelectionLayer({ pageIndex, scale, background = 'rgba(33,150,243)' }: Props) {\n  const { provides: sel } = useSelectionCapability();\n  const { provides: im } = useInteractionManagerCapability();\n  const { register } = usePointerHandlers({ pageIndex });\n  const [rects, setRects] = useState<Array<Rect>>([]);\n  const [boundingRect, setBoundingRect] = useState<Rect | null>(null);\n  const { setCursor, removeCursor } = useCursor();\n  const geoCacheRef = useRef<PdfPageGeometry | null>(null);\n\n  /* subscribe to rect updates */\n  useEffect(() => {\n    if (!sel) return;\n    return sel.onSelectionChange(() => {\n      const mode = im?.getActiveMode();\n      if (mode === 'default') {\n        setRects(sel.getHighlightRectsForPage(pageIndex));\n        setBoundingRect(sel.getBoundingRectForPage(pageIndex));\n      } else {\n        setRects([]);\n        setBoundingRect(null);\n      }\n    });\n  }, [sel, pageIndex]);\n\n  /* cheap glyphAt cache for the active page */\n  const cachedGlyphAt = useCallback((pt: Position) => {\n    const geo = geoCacheRef.current;\n    return geo ? glyphAt(geo, pt) : -1;\n  }, []);\n\n  // Initialize geometry cache\n  useEffect(() => {\n    if (!sel) return;\n    const task = sel.getGeometry(pageIndex);\n    task.wait((g) => (geoCacheRef.current = g), ignore);\n\n    return () => {\n      task.abort({\n        code: PdfErrorCode.Cancelled,\n        message: 'Cancelled',\n      });\n      geoCacheRef.current = null;\n    };\n  }, [sel, pageIndex]);\n\n  const handlers = useMemo(\n    (): PointerEventHandlersWithLifecycle<PointerEvent> => ({\n      onPointerDown: (point, _evt, modeId) => {\n        if (!sel) return;\n        if (!sel.isEnabledForMode(modeId)) return;\n        // clear the selection\n        sel.clear();\n        const task = sel.getGeometry(pageIndex);\n        task.wait((geo) => {\n          const g = glyphAt(geo, point);\n          if (g !== -1) sel.begin(pageIndex, g);\n        }, ignore);\n      },\n      onPointerMove: (point, _evt, modeId) => {\n        if (!sel) return;\n        if (!sel.isEnabledForMode(modeId)) return;\n        const g = cachedGlyphAt(point);\n        if (g !== -1) {\n          setCursor('selection-text', 'text', 10);\n        } else {\n          removeCursor('selection-text');\n        }\n        if (g !== -1) sel.update(pageIndex, g);\n      },\n      onPointerUp: (_point, _evt, modeId) => {\n        if (!sel) return;\n        if (!sel.isEnabledForMode(modeId)) return;\n        sel.end();\n      },\n      onHandlerActiveEnd(modeId) {\n        if (!sel) return;\n        if (!sel.isEnabledForMode(modeId)) return;\n\n        sel.clear();\n      },\n    }),\n    [sel, pageIndex, cachedGlyphAt],\n  );\n\n  useEffect(() => {\n    if (!register) return;\n    return register(handlers);\n  }, [register, handlers]);\n\n  if (!boundingRect) return null;\n\n  return (\n    <div\n      style={{\n        position: 'absolute',\n        left: boundingRect.origin.x * scale,\n        top: boundingRect.origin.y * scale,\n        width: boundingRect.size.width * scale,\n        height: boundingRect.size.height * scale,\n        mixBlendMode: 'multiply',\n        isolation: 'isolate',\n      }}\n    >\n      {rects.map((b, i) => (\n        <div\n          key={i}\n          style={{\n            position: 'absolute',\n            left: (b.origin.x - boundingRect.origin.x) * scale,\n            top: (b.origin.y - boundingRect.origin.y) * scale,\n            width: b.size.width * scale,\n            height: b.size.height * scale,\n            background,\n            pointerEvents: 'none',\n          }}\n        />\n      ))}\n    </div>\n  );\n}\n","import { useEffect } from 'preact/hooks';\n\nimport { useSelectionCapability } from '../hooks';\n\nexport function CopyToClipboard() {\n  const { provides: sel } = useSelectionCapability();\n\n  useEffect(() => {\n    if (!sel) return;\n    return sel.onCopyToClipboard((text) => {\n      navigator.clipboard.writeText(text);\n    });\n  }, [sel]);\n\n  return null;\n}\n"],"names":["P","b","g","t","S","r","e","h","L","useSelectionCapability","useCapability","SelectionPlugin","useSelectionPlugin","usePlugin","A","z","R","E","n","x","D","s","I","j","q","i","u","o","SelectionLayer","pageIndex","scale","background","sel","im","useInteractionManagerCapability","register","usePointerHandlers","rects","setRects","useState","boundingRect","setBoundingRect","setCursor","removeCursor","useCursor","geoCacheRef","useRef","useEffect","cachedGlyphAt","useCallback","pt","geo","glyphAt","task","ignore","PdfErrorCode","handlers","useMemo","point","_evt","modeId","_point","jsx","CopyToClipboard","text"],"mappings":"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"}