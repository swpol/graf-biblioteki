"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const l=require("preact"),p=require("preact/hooks"),d=require("../selection-plugin-DJLc-Ifx.cjs"),R=require("../jsxRuntime.module-BSRTsKji.cjs"),At=require("../index-Q-vI1_iw-D2nGhF_a.cjs");function Rt(t,e){for(var n in e)t[n]=e[n];return t}function U(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var o in e)if(o!=="__source"&&t[o]!==e[o])return!0;return!1}function N(t,e){this.props=t,this.context=e}(N.prototype=new l.Component).isPureReactComponent=!0,N.prototype.shouldComponentUpdate=function(t,e){return U(this.props,t)||U(this.state,e)};var L=l.options.__b;l.options.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),L&&L(t)};var Ut=l.options.__e;l.options.__e=function(t,e,n,o){if(t.then){for(var r,u=e;u=u.__;)if((r=u.__c)&&r.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),r.__c(t,e)}Ut(t,e,n,o)};var F=l.options.unmount;function dt(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(o){typeof o.__c=="function"&&o.__c()}),t.__c.__H=null),(t=Rt({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=e),t.__c.__e=!0,t.__c=null),t.__k=t.__k&&t.__k.map(function(o){return dt(o,e,n)})),t}function vt(t,e,n){return t&&n&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(o){return vt(o,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=n)),t}function P(){this.__u=0,this.o=null,this.__b=null}function ht(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function m(){this.i=null,this.l=null}l.options.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&32&t.__u&&(t.type=null),F&&F(t)},(P.prototype=new l.Component).__c=function(t,e){var n=e.__c,o=this;o.o==null&&(o.o=[]),o.o.push(n);var r=ht(o.__v),u=!1,i=function(){u||(u=!0,n.__R=null,r?r(a):a())};n.__R=i;var a=function(){if(!--o.__u){if(o.state.__a){var _=o.state.__a;o.__v.__k[0]=vt(_,_.__c.__P,_.__c.__O)}var s;for(o.setState({__a:o.__b=null});s=o.o.pop();)s.forceUpdate()}};o.__u++||32&e.__u||o.setState({__a:o.__b=o.__v.__k[0]}),t.then(i,i)},P.prototype.componentWillUnmount=function(){this.o=[]},P.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),o=this.__v.__k[0].__c;this.__v.__k[0]=dt(this.__b,n,o.__O=o.__P)}this.__b=null}var r=e.__a&&l.createElement(l.Fragment,null,t.fallback);return r&&(r.__u&=-33),[l.createElement(l.Fragment,null,e.__a?null:t.children),r]};var M=function(t,e,n){if(++n[1]===n[0]&&t.l.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(n=t.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.i=n=n[2]}};(m.prototype=new l.Component).__a=function(t){var e=this,n=ht(e.__v),o=e.l.get(t);return o[0]++,function(r){var u=function(){e.props.revealOrder?(o.push(r),M(e,t,o)):r()};n?n(u):u()}},m.prototype.render=function(t){this.i=null,this.l=new Map;var e=l.toChildArray(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.l.set(e[n],this.i=[1,0,this.i]);return t.children},m.prototype.componentDidUpdate=m.prototype.componentDidMount=function(){var t=this;this.l.forEach(function(e,n){M(t,n,e)})};var Nt=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Lt=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Ft=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Mt=/[A-Z0-9]/g,Vt=typeof document<"u",Wt=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(t)};l.Component.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(l.Component.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var V=l.options.event;function Ht(){}function zt(){return this.cancelBubble}function Dt(){return this.defaultPrevented}l.options.event=function(t){return V&&(t=V(t)),t.persist=Ht,t.isPropagationStopped=zt,t.isDefaultPrevented=Dt,t.nativeEvent=t};var jt={enumerable:!1,configurable:!0,get:function(){return this.class}},W=l.options.vnode;l.options.vnode=function(t){typeof t.type=="string"&&function(e){var n=e.props,o=e.type,r={},u=o.indexOf("-")===-1;for(var i in n){var a=n[i];if(!(i==="value"&&"defaultValue"in n&&a==null||Vt&&i==="children"&&o==="noscript"||i==="class"||i==="className")){var _=i.toLowerCase();i==="defaultValue"&&"value"in n&&n.value==null?i="value":i==="download"&&a===!0?a="":_==="translate"&&a==="no"?a=!1:_[0]==="o"&&_[1]==="n"?_==="ondoubleclick"?i="ondblclick":_!=="onchange"||o!=="input"&&o!=="textarea"||Wt(n.type)?_==="onfocus"?i="onfocusin":_==="onblur"?i="onfocusout":Ft.test(i)&&(i=_):_=i="oninput":u&&Lt.test(i)?i=i.replace(Mt,"-$&").toLowerCase():a===null&&(a=void 0),_==="oninput"&&r[i=_]&&(i="oninputCapture"),r[i]=a}}o=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=l.toChildArray(n.children).forEach(function(s){s.props.selected=r.value.indexOf(s.props.value)!=-1})),o=="select"&&r.defaultValue!=null&&(r.value=l.toChildArray(n.children).forEach(function(s){s.props.selected=r.multiple?r.defaultValue.indexOf(s.props.value)!=-1:r.defaultValue==s.props.value})),n.class&&!n.className?(r.class=n.class,Object.defineProperty(r,"className",jt)):(n.className&&!n.class||n.class&&n.className)&&(r.class=r.className=n.className),e.props=r}(t),t.$$typeof=Nt,W&&W(t)};var H=l.options.__r;l.options.__r=function(t){H&&H(t),t.__c};var z=l.options.diffed;l.options.diffed=function(t){z&&z(t);var e=t.props,n=t.__e;n!=null&&t.type==="textarea"&&"value"in e&&e.value!==n.value&&(n.value=e.value==null?"":e.value)};const Tt=l.createContext({registry:null,isInitializing:!0,pluginsReady:!1});function Bt(){const t=p.useContext(Tt);if(t===void 0)throw new Error("useCapability must be used within a PDFContext.Provider");const{registry:e,isInitializing:n}=t;if(n)return t;if(e===null)throw new Error("PDF registry failed to initialize properly");return t}function mt(t){const{registry:e}=Bt();if(e===null)return{plugin:null,isLoading:!0,ready:new Promise(()=>{})};const n=e.getPlugin(t);if(!n)throw new Error(`Plugin ${t} not found`);return{plugin:n,isLoading:!1,ready:n.ready()}}function It(t){const{plugin:e,isLoading:n,ready:o}=mt(t);if(!e)return{provides:null,isLoading:n,ready:o};if(!e.provides)throw new Error(`Plugin ${t} does not provide a capability`);return{provides:e.provides(),isLoading:n,ready:o}}const O=()=>It(d.SelectionPlugin.id),Zt=()=>mt(d.SelectionPlugin.id);function qt(t,e){for(var n in e)t[n]=e[n];return t}function D(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var o in e)if(o!=="__source"&&t[o]!==e[o])return!0;return!1}function j(t,e){this.props=t,this.context=e}(j.prototype=new l.Component).isPureReactComponent=!0,j.prototype.shouldComponentUpdate=function(t,e){return D(this.props,t)||D(this.state,e)};var T=l.options.__b;l.options.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),T&&T(t)};var Gt=l.options.__e;l.options.__e=function(t,e,n,o){if(t.then){for(var r,u=e;u=u.__;)if((r=u.__c)&&r.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),r.__c(t,e)}Gt(t,e,n,o)};var B=l.options.unmount;function yt(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(o){typeof o.__c=="function"&&o.__c()}),t.__c.__H=null),(t=qt({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=e),t.__c.__e=!0,t.__c=null),t.__k=t.__k&&t.__k.map(function(o){return yt(o,e,n)})),t}function gt(t,e,n){return t&&n&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(o){return gt(o,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=n)),t}function k(){this.__u=0,this.o=null,this.__b=null}function bt(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function y(){this.i=null,this.l=null}l.options.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&32&t.__u&&(t.type=null),B&&B(t)},(k.prototype=new l.Component).__c=function(t,e){var n=e.__c,o=this;o.o==null&&(o.o=[]),o.o.push(n);var r=bt(o.__v),u=!1,i=function(){u||(u=!0,n.__R=null,r?r(a):a())};n.__R=i;var a=function(){if(!--o.__u){if(o.state.__a){var _=o.state.__a;o.__v.__k[0]=gt(_,_.__c.__P,_.__c.__O)}var s;for(o.setState({__a:o.__b=null});s=o.o.pop();)s.forceUpdate()}};o.__u++||32&e.__u||o.setState({__a:o.__b=o.__v.__k[0]}),t.then(i,i)},k.prototype.componentWillUnmount=function(){this.o=[]},k.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),o=this.__v.__k[0].__c;this.__v.__k[0]=yt(this.__b,n,o.__O=o.__P)}this.__b=null}var r=e.__a&&l.createElement(l.Fragment,null,t.fallback);return r&&(r.__u&=-33),[l.createElement(l.Fragment,null,e.__a?null:t.children),r]};var I=function(t,e,n){if(++n[1]===n[0]&&t.l.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(n=t.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.i=n=n[2]}};(y.prototype=new l.Component).__a=function(t){var e=this,n=bt(e.__v),o=e.l.get(t);return o[0]++,function(r){var u=function(){e.props.revealOrder?(o.push(r),I(e,t,o)):r()};n?n(u):u()}},y.prototype.render=function(t){this.i=null,this.l=new Map;var e=l.toChildArray(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.l.set(e[n],this.i=[1,0,this.i]);return t.children},y.prototype.componentDidUpdate=y.prototype.componentDidMount=function(){var t=this;this.l.forEach(function(e,n){I(t,n,e)})};var Qt=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Jt=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Kt=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Xt=/[A-Z0-9]/g,Yt=typeof document<"u",te=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(t)};l.Component.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(l.Component.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var Z=l.options.event;function ee(){}function ne(){return this.cancelBubble}function oe(){return this.defaultPrevented}l.options.event=function(t){return Z&&(t=Z(t)),t.persist=ee,t.isPropagationStopped=ne,t.isDefaultPrevented=oe,t.nativeEvent=t};var re={enumerable:!1,configurable:!0,get:function(){return this.class}},q=l.options.vnode;l.options.vnode=function(t){typeof t.type=="string"&&function(e){var n=e.props,o=e.type,r={},u=o.indexOf("-")===-1;for(var i in n){var a=n[i];if(!(i==="value"&&"defaultValue"in n&&a==null||Yt&&i==="children"&&o==="noscript"||i==="class"||i==="className")){var _=i.toLowerCase();i==="defaultValue"&&"value"in n&&n.value==null?i="value":i==="download"&&a===!0?a="":_==="translate"&&a==="no"?a=!1:_[0]==="o"&&_[1]==="n"?_==="ondoubleclick"?i="ondblclick":_!=="onchange"||o!=="input"&&o!=="textarea"||te(n.type)?_==="onfocus"?i="onfocusin":_==="onblur"?i="onfocusout":Kt.test(i)&&(i=_):_=i="oninput":u&&Jt.test(i)?i=i.replace(Xt,"-$&").toLowerCase():a===null&&(a=void 0),_==="oninput"&&r[i=_]&&(i="oninputCapture"),r[i]=a}}o=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=l.toChildArray(n.children).forEach(function(s){s.props.selected=r.value.indexOf(s.props.value)!=-1})),o=="select"&&r.defaultValue!=null&&(r.value=l.toChildArray(n.children).forEach(function(s){s.props.selected=r.multiple?r.defaultValue.indexOf(s.props.value)!=-1:r.defaultValue==s.props.value})),n.class&&!n.className?(r.class=n.class,Object.defineProperty(r,"className",re)):(n.className&&!n.class||n.class&&n.className)&&(r.class=r.className=n.className),e.props=r}(t),t.$$typeof=Qt,q&&q(t)};var G=l.options.__r;l.options.__r=function(t){G&&G(t),t.__c};var Q=l.options.diffed;l.options.diffed=function(t){Q&&Q(t);var e=t.props,n=t.__e;n!=null&&t.type==="textarea"&&"value"in e&&e.value!==n.value&&(n.value=e.value==null?"":e.value)};function ie(t,e){for(var n in e)t[n]=e[n];return t}function J(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var o in e)if(o!=="__source"&&t[o]!==e[o])return!0;return!1}function K(t,e){this.props=t,this.context=e}(K.prototype=new l.Component).isPureReactComponent=!0,K.prototype.shouldComponentUpdate=function(t,e){return J(this.props,t)||J(this.state,e)};var X=l.options.__b;l.options.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),X&&X(t)};var le=l.options.__e;l.options.__e=function(t,e,n,o){if(t.then){for(var r,u=e;u=u.__;)if((r=u.__c)&&r.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),r.__c(t,e)}le(t,e,n,o)};var Y=l.options.unmount;function Ct(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(o){typeof o.__c=="function"&&o.__c()}),t.__c.__H=null),(t=ie({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=e),t.__c.__e=!0,t.__c=null),t.__k=t.__k&&t.__k.map(function(o){return Ct(o,e,n)})),t}function Pt(t,e,n){return t&&n&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(o){return Pt(o,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=n)),t}function w(){this.__u=0,this.o=null,this.__b=null}function kt(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function g(){this.i=null,this.l=null}l.options.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&32&t.__u&&(t.type=null),Y&&Y(t)},(w.prototype=new l.Component).__c=function(t,e){var n=e.__c,o=this;o.o==null&&(o.o=[]),o.o.push(n);var r=kt(o.__v),u=!1,i=function(){u||(u=!0,n.__R=null,r?r(a):a())};n.__R=i;var a=function(){if(!--o.__u){if(o.state.__a){var _=o.state.__a;o.__v.__k[0]=Pt(_,_.__c.__P,_.__c.__O)}var s;for(o.setState({__a:o.__b=null});s=o.o.pop();)s.forceUpdate()}};o.__u++||32&e.__u||o.setState({__a:o.__b=o.__v.__k[0]}),t.then(i,i)},w.prototype.componentWillUnmount=function(){this.o=[]},w.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),o=this.__v.__k[0].__c;this.__v.__k[0]=Ct(this.__b,n,o.__O=o.__P)}this.__b=null}var r=e.__a&&l.createElement(l.Fragment,null,t.fallback);return r&&(r.__u&=-33),[l.createElement(l.Fragment,null,e.__a?null:t.children),r]};var tt=function(t,e,n){if(++n[1]===n[0]&&t.l.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(n=t.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.i=n=n[2]}};(g.prototype=new l.Component).__a=function(t){var e=this,n=kt(e.__v),o=e.l.get(t);return o[0]++,function(r){var u=function(){e.props.revealOrder?(o.push(r),tt(e,t,o)):r()};n?n(u):u()}},g.prototype.render=function(t){this.i=null,this.l=new Map;var e=l.toChildArray(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.l.set(e[n],this.i=[1,0,this.i]);return t.children},g.prototype.componentDidUpdate=g.prototype.componentDidMount=function(){var t=this;this.l.forEach(function(e,n){tt(t,n,e)})};var _e=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,ue=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,ae=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,se=/[A-Z0-9]/g,ce=typeof document<"u",pe=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(t)};l.Component.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(l.Component.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var et=l.options.event;function fe(){}function de(){return this.cancelBubble}function ve(){return this.defaultPrevented}l.options.event=function(t){return et&&(t=et(t)),t.persist=fe,t.isPropagationStopped=de,t.isDefaultPrevented=ve,t.nativeEvent=t};var he={enumerable:!1,configurable:!0,get:function(){return this.class}},nt=l.options.vnode;l.options.vnode=function(t){typeof t.type=="string"&&function(e){var n=e.props,o=e.type,r={},u=o.indexOf("-")===-1;for(var i in n){var a=n[i];if(!(i==="value"&&"defaultValue"in n&&a==null||ce&&i==="children"&&o==="noscript"||i==="class"||i==="className")){var _=i.toLowerCase();i==="defaultValue"&&"value"in n&&n.value==null?i="value":i==="download"&&a===!0?a="":_==="translate"&&a==="no"?a=!1:_[0]==="o"&&_[1]==="n"?_==="ondoubleclick"?i="ondblclick":_!=="onchange"||o!=="input"&&o!=="textarea"||pe(n.type)?_==="onfocus"?i="onfocusin":_==="onblur"?i="onfocusout":ae.test(i)&&(i=_):_=i="oninput":u&&ue.test(i)?i=i.replace(se,"-$&").toLowerCase():a===null&&(a=void 0),_==="oninput"&&r[i=_]&&(i="oninputCapture"),r[i]=a}}o=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=l.toChildArray(n.children).forEach(function(s){s.props.selected=r.value.indexOf(s.props.value)!=-1})),o=="select"&&r.defaultValue!=null&&(r.value=l.toChildArray(n.children).forEach(function(s){s.props.selected=r.multiple?r.defaultValue.indexOf(s.props.value)!=-1:r.defaultValue==s.props.value})),n.class&&!n.className?(r.class=n.class,Object.defineProperty(r,"className",he)):(n.className&&!n.class||n.class&&n.className)&&(r.class=r.className=n.className),e.props=r}(t),t.$$typeof=_e,nt&&nt(t)};var ot=l.options.__r;l.options.__r=function(t){ot&&ot(t),t.__c};var rt=l.options.diffed;l.options.diffed=function(t){rt&&rt(t);var e=t.props,n=t.__e;n!=null&&t.type==="textarea"&&"value"in e&&e.value!==n.value&&(n.value=e.value==null?"":e.value)};const me=l.createContext({registry:null,isInitializing:!0,pluginsReady:!1});function ye(){const t=p.useContext(me);if(t===void 0)throw new Error("useCapability must be used within a PDFContext.Provider");const{registry:e,isInitializing:n}=t;if(n)return t;if(e===null)throw new Error("PDF registry failed to initialize properly");return t}function ge(t){const{registry:e}=ye();if(e===null)return{plugin:null,isLoading:!0,ready:new Promise(()=>{})};const n=e.getPlugin(t);if(!n)throw new Error(`Plugin ${t} not found`);return{plugin:n,isLoading:!1,ready:n.ready()}}function be(t){const{plugin:e,isLoading:n,ready:o}=ge(t);if(!e)return{provides:null,isLoading:n,ready:o};if(!e.provides)throw new Error(`Plugin ${t} does not provide a capability`);return{provides:e.provides(),isLoading:n,ready:o}}function Ce(t,e){for(var n in e)t[n]=e[n];return t}function it(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var o in e)if(o!=="__source"&&t[o]!==e[o])return!0;return!1}function lt(t,e){this.props=t,this.context=e}(lt.prototype=new l.Component).isPureReactComponent=!0,lt.prototype.shouldComponentUpdate=function(t,e){return it(this.props,t)||it(this.state,e)};var _t=l.options.__b;l.options.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),_t&&_t(t)};var Pe=l.options.__e;l.options.__e=function(t,e,n,o){if(t.then){for(var r,u=e;u=u.__;)if((r=u.__c)&&r.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),r.__c(t,e)}Pe(t,e,n,o)};var ut=l.options.unmount;function wt(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(o){typeof o.__c=="function"&&o.__c()}),t.__c.__H=null),(t=Ce({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=e),t.__c.__e=!0,t.__c=null),t.__k=t.__k&&t.__k.map(function(o){return wt(o,e,n)})),t}function Et(t,e,n){return t&&n&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(o){return Et(o,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=n)),t}function E(){this.__u=0,this.o=null,this.__b=null}function Ot(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function b(){this.i=null,this.l=null}l.options.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&32&t.__u&&(t.type=null),ut&&ut(t)},(E.prototype=new l.Component).__c=function(t,e){var n=e.__c,o=this;o.o==null&&(o.o=[]),o.o.push(n);var r=Ot(o.__v),u=!1,i=function(){u||(u=!0,n.__R=null,r?r(a):a())};n.__R=i;var a=function(){if(!--o.__u){if(o.state.__a){var _=o.state.__a;o.__v.__k[0]=Et(_,_.__c.__P,_.__c.__O)}var s;for(o.setState({__a:o.__b=null});s=o.o.pop();)s.forceUpdate()}};o.__u++||32&e.__u||o.setState({__a:o.__b=o.__v.__k[0]}),t.then(i,i)},E.prototype.componentWillUnmount=function(){this.o=[]},E.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),o=this.__v.__k[0].__c;this.__v.__k[0]=wt(this.__b,n,o.__O=o.__P)}this.__b=null}var r=e.__a&&l.createElement(l.Fragment,null,t.fallback);return r&&(r.__u&=-33),[l.createElement(l.Fragment,null,e.__a?null:t.children),r]};var at=function(t,e,n){if(++n[1]===n[0]&&t.l.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(n=t.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.i=n=n[2]}};(b.prototype=new l.Component).__a=function(t){var e=this,n=Ot(e.__v),o=e.l.get(t);return o[0]++,function(r){var u=function(){e.props.revealOrder?(o.push(r),at(e,t,o)):r()};n?n(u):u()}},b.prototype.render=function(t){this.i=null,this.l=new Map;var e=l.toChildArray(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.l.set(e[n],this.i=[1,0,this.i]);return t.children},b.prototype.componentDidUpdate=b.prototype.componentDidMount=function(){var t=this;this.l.forEach(function(e,n){at(t,n,e)})};var ke=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,we=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Ee=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Oe=/[A-Z0-9]/g,Se=typeof document<"u",$e=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(t)};l.Component.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(l.Component.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var st=l.options.event;function xe(){}function Ae(){return this.cancelBubble}function Re(){return this.defaultPrevented}l.options.event=function(t){return st&&(t=st(t)),t.persist=xe,t.isPropagationStopped=Ae,t.isDefaultPrevented=Re,t.nativeEvent=t};var Ue={enumerable:!1,configurable:!0,get:function(){return this.class}},ct=l.options.vnode;l.options.vnode=function(t){typeof t.type=="string"&&function(e){var n=e.props,o=e.type,r={},u=o.indexOf("-")===-1;for(var i in n){var a=n[i];if(!(i==="value"&&"defaultValue"in n&&a==null||Se&&i==="children"&&o==="noscript"||i==="class"||i==="className")){var _=i.toLowerCase();i==="defaultValue"&&"value"in n&&n.value==null?i="value":i==="download"&&a===!0?a="":_==="translate"&&a==="no"?a=!1:_[0]==="o"&&_[1]==="n"?_==="ondoubleclick"?i="ondblclick":_!=="onchange"||o!=="input"&&o!=="textarea"||$e(n.type)?_==="onfocus"?i="onfocusin":_==="onblur"?i="onfocusout":Ee.test(i)&&(i=_):_=i="oninput":u&&we.test(i)?i=i.replace(Oe,"-$&").toLowerCase():a===null&&(a=void 0),_==="oninput"&&r[i=_]&&(i="oninputCapture"),r[i]=a}}o=="select"&&r.multiple&&Array.isArray(r.value)&&(r.value=l.toChildArray(n.children).forEach(function(s){s.props.selected=r.value.indexOf(s.props.value)!=-1})),o=="select"&&r.defaultValue!=null&&(r.value=l.toChildArray(n.children).forEach(function(s){s.props.selected=r.multiple?r.defaultValue.indexOf(s.props.value)!=-1:r.defaultValue==s.props.value})),n.class&&!n.className?(r.class=n.class,Object.defineProperty(r,"className",Ue)):(n.className&&!n.class||n.class&&n.className)&&(r.class=r.className=n.className),e.props=r}(t),t.$$typeof=ke,ct&&ct(t)};var pt=l.options.__r;l.options.__r=function(t){pt&&pt(t),t.__c};var ft=l.options.diffed;l.options.diffed=function(t){ft&&ft(t);var e=t.props,n=t.__e;n!=null&&t.type==="textarea"&&"value"in e&&e.value!==n.value&&(n.value=e.value==null?"":e.value)};const S=()=>be(At.w.id);function Ne(){const{provides:t}=S();return{setCursor:(e,n,o=0)=>{t==null||t.setCursor(e,n,o)},removeCursor:e=>{t==null||t.removeCursor(e)}}}function Le({modeId:t,pageIndex:e}){const{provides:n}=S();return{register:(o,r)=>{const u=(r==null?void 0:r.modeId)??t,i=(r==null?void 0:r.pageIndex)??e;return u?n==null?void 0:n.registerHandlers({modeId:u,handlers:o,pageIndex:i}):n==null?void 0:n.registerAlways({scope:i!==void 0?{type:"page",pageIndex:i}:{type:"global"},handlers:o})}}}function Fe({pageIndex:t,scale:e,background:n="rgba(33,150,243)"}){const{provides:o}=O(),{provides:r}=S(),{register:u}=Le({pageIndex:t}),[i,a]=p.useState([]),[_,s]=p.useState(null),{setCursor:St,removeCursor:$t}=Ne(),C=p.useRef(null);p.useEffect(()=>{if(o)return o.onSelectionChange(()=>{(r==null?void 0:r.getActiveMode())==="default"?(a(o.getHighlightRectsForPage(t)),s(o.getBoundingRectForPage(t))):(a([]),s(null))})},[o,t]);const $=p.useCallback(c=>{const f=C.current;return f?d.glyphAt(f,c):-1},[]);p.useEffect(()=>{if(!o)return;const c=o.getGeometry(t);return c.wait(f=>C.current=f,d.ignore),()=>{c.abort({code:d.PdfErrorCode.Cancelled,message:"Cancelled"}),C.current=null}},[o,t]);const x=p.useMemo(()=>({onPointerDown:(c,f,v)=>{if(!o||!o.isEnabledForMode(v))return;o.clear(),o.getGeometry(t).wait(xt=>{const A=d.glyphAt(xt,c);A!==-1&&o.begin(t,A)},d.ignore)},onPointerMove:(c,f,v)=>{if(!o||!o.isEnabledForMode(v))return;const h=$(c);h!==-1?St("selection-text","text",10):$t("selection-text"),h!==-1&&o.update(t,h)},onPointerUp:(c,f,v)=>{o&&o.isEnabledForMode(v)&&o.end()},onHandlerActiveEnd(c){o&&o.isEnabledForMode(c)&&o.clear()}}),[o,t,$]);return p.useEffect(()=>{if(u)return u(x)},[u,x]),_?R.u("div",{style:{position:"absolute",left:_.origin.x*e,top:_.origin.y*e,width:_.size.width*e,height:_.size.height*e,mixBlendMode:"multiply",isolation:"isolate"},children:i.map((c,f)=>R.u("div",{style:{position:"absolute",left:(c.origin.x-_.origin.x)*e,top:(c.origin.y-_.origin.y)*e,width:c.size.width*e,height:c.size.height*e,background:n,pointerEvents:"none"}},f))}):null}function Me(){const{provides:t}=O();return p.useEffect(()=>{if(t)return t.onCopyToClipboard(e=>{navigator.clipboard.writeText(e)})},[t]),null}exports.CopyToClipboard=Me;exports.SelectionLayer=Fe;exports.useSelectionCapability=O;exports.useSelectionPlugin=Zt;
//# sourceMappingURL=index.cjs.map
