{"version":3,"file":"index.cjs","sources":["../../../core/dist/vue/index.js","../../src/vue/hooks/use-selection.ts","../../../plugin-interaction-manager/dist/vue/index.js","../../src/vue/components/selection-layer.vue","../../src/vue/components/copy-to-clipboard.vue"],"sourcesContent":["import { inject as p, ref as u, onMounted as a, onBeforeUnmount as l, shallowRef as d, watch as v, computed as y, defineComponent as m, provide as P, renderSlot as w } from \"vue\";\nimport { a as h, P as S } from \"../math-ChSRQF3r.js\";\nconst f = Symbol(\"pdfKey\");\nfunction c() {\n  const r = p(f);\n  if (!r) throw new Error(\"useRegistry must be used inside <EmbedPDF>\");\n  return r;\n}\nfunction b() {\n  const { registry: r } = c(), e = u();\n  return a(() => {\n    const o = r.value.getStore();\n    e.value = o.getState().core;\n    const t = o.subscribe((s, n, i) => {\n      o.isCoreAction(s) && !h(n.core, i.core) && (e.value = n.core);\n    });\n    l(t);\n  }), e;\n}\nfunction R(r) {\n  const { registry: e } = c(), o = d(null), t = u(!0), s = u(new Promise(() => {\n  })), n = () => {\n    var g;\n    if (!e.value) return;\n    const i = e.value.getPlugin(r);\n    if (!i) throw new Error(`Plugin ${r} not found`);\n    o.value = i, t.value = !1, s.value = ((g = i.ready) == null ? void 0 : g.call(i)) ?? Promise.resolve();\n  };\n  return a(n), v(e, n), { plugin: o, isLoading: t, ready: s };\n}\nfunction z(r) {\n  const { plugin: e, isLoading: o, ready: t } = R(r);\n  return { provides: y(() => {\n    if (!e.value) return null;\n    if (!e.value.provides)\n      throw new Error(`Plugin ${r} does not implement provides()`);\n    return e.value.provides();\n  }), isLoading: o, ready: t };\n}\nfunction C() {\n  const { registry: r } = c(), e = u();\n  function o() {\n    return r.value ? (e.value = r.value.getStore().getState(), r.value.getStore().subscribe((s, n) => e.value = n)) : () => {\n    };\n  }\n  let t = o();\n  return v(r, () => {\n    t == null || t(), t = o();\n  }), l(() => t == null ? void 0 : t()), e;\n}\nconst F = /* @__PURE__ */ m({\n  __name: \"embed-pdf\",\n  props: {\n    engine: {},\n    plugins: {},\n    onInitialized: { type: Function }\n  },\n  setup(r) {\n    const e = r, o = d(null), t = u(!0), s = u(!1);\n    return P(f, { registry: o, isInitializing: t, pluginsReady: s }), a(async () => {\n      var i;\n      const n = new S(e.engine);\n      n.registerPluginBatch(e.plugins), await n.initialize(), await ((i = e.onInitialized) == null ? void 0 : i.call(e, n)), o.value = n, t.value = !1, n.pluginsReady().then(() => s.value = !0);\n    }), l(() => {\n      var n;\n      return (n = o.value) == null ? void 0 : n.destroy();\n    }), (n, i) => w(n.$slots, \"default\", {\n      registry: o.value,\n      isInitializing: t.value,\n      pluginsReady: s.value\n    });\n  }\n});\nexport {\n  F as EmbedPDF,\n  z as useCapability,\n  b as useCoreState,\n  R as usePlugin,\n  c as useRegistry,\n  C as useStoreState\n};\n//# sourceMappingURL=index.js.map\n","import { useCapability, usePlugin } from '@embedpdf/core/vue';\nimport { SelectionPlugin } from '@embedpdf/plugin-selection';\n\n/**\n * Hook to get the selection plugin's capability API.\n * This provides methods for controlling and listening to selection events.\n */\nexport const useSelectionCapability = () => useCapability<SelectionPlugin>(SelectionPlugin.id);\n\n/**\n * Hook to get the raw selection plugin instance.\n * Useful for accessing plugin-specific properties or methods not exposed in the capability.\n */\nexport const useSelectionPlugin = () => usePlugin<SelectionPlugin>(SelectionPlugin.id);\n","import { computed as g, shallowRef as x, ref as u, onMounted as b, watch as C, inject as E, watchEffect as c, readonly as f, defineComponent as P, createElementBlock as v, openBlock as d, renderSlot as m, createCommentVNode as w, unref as R } from \"vue\";\nimport { c as y, r as M } from \"../index-Q-vI1_iw.js\";\nimport { I as h, i as k } from \"../reducer-Dda407Go.js\";\nconst $ = Symbol(\"pdfKey\");\nfunction H() {\n  const t = E($);\n  if (!t) throw new Error(\"useRegistry must be used inside <EmbedPDF>\");\n  return t;\n}\nfunction I(t) {\n  const { registry: e } = H(), r = x(null), n = u(!0), o = u(new Promise(() => {\n  })), a = () => {\n    var i;\n    if (!e.value) return;\n    const s = e.value.getPlugin(t);\n    if (!s) throw new Error(`Plugin ${t} not found`);\n    r.value = s, n.value = !1, o.value = ((i = s.ready) == null ? void 0 : i.call(s)) ?? Promise.resolve();\n  };\n  return b(a), C(e, a), { plugin: r, isLoading: n, ready: o };\n}\nfunction S(t) {\n  const { plugin: e, isLoading: r, ready: n } = I(t);\n  return { provides: g(() => {\n    if (!e.value) return null;\n    if (!e.value.provides)\n      throw new Error(`Plugin ${t} does not implement provides()`);\n    return e.value.provides();\n  }), isLoading: r, ready: n };\n}\nconst F = () => I(h.id), l = () => S(h.id);\nfunction W() {\n  const { provides: t } = l(), e = u(k);\n  return c((r) => {\n    if (t.value) {\n      const n = t.value.onStateChange((o) => {\n        e.value = o;\n      });\n      r(n);\n    }\n  }), {\n    provides: t,\n    state: f(e)\n  };\n}\nfunction j() {\n  const { provides: t } = l();\n  return {\n    setCursor: (e, r, n = 0) => {\n      var o;\n      (o = t.value) == null || o.setCursor(e, r, n);\n    },\n    removeCursor: (e) => {\n      var r;\n      (r = t.value) == null || r.removeCursor(e);\n    }\n  };\n}\nfunction D({ modeId: t, pageIndex: e }) {\n  const { provides: r } = l();\n  return {\n    register: (n, o) => {\n      const a = (o == null ? void 0 : o.modeId) ?? t, i = (o == null ? void 0 : o.pageIndex) ?? e;\n      if (r.value)\n        return a ? r.value.registerHandlers({\n          modeId: a,\n          handlers: n,\n          pageIndex: i\n        }) : r.value.registerAlways({\n          scope: i !== void 0 ? { type: \"page\", pageIndex: i } : { type: \"global\" },\n          handlers: n\n        });\n    }\n  };\n}\nfunction A() {\n  const { provides: t } = l(), e = u(!1);\n  return c((r) => {\n    if (t.value) {\n      const n = t.value.getActiveInteractionMode();\n      e.value = (n == null ? void 0 : n.scope) === \"page\" && !!(n != null && n.exclusive);\n      const o = t.value.onModeChange(() => {\n        if (!t.value) return;\n        const a = t.value.getActiveInteractionMode();\n        e.value = (a == null ? void 0 : a.scope) === \"page\" && !!(a != null && a.exclusive);\n      });\n      r(o);\n    }\n  }), f(e);\n}\nconst G = /* @__PURE__ */ P({\n  __name: \"global-pointer-provider\",\n  setup(t) {\n    const e = u(null), { provides: r } = l();\n    return c((n) => {\n      if (r.value && e.value) {\n        const o = y(r.value, { type: \"global\" }, e.value);\n        n(o);\n      }\n    }), (n, o) => (d(), v(\"div\", {\n      ref_key: \"divRef\",\n      ref: e,\n      style: {\n        width: \"100%\",\n        height: \"100%\"\n      }\n    }, [\n      m(n.$slots, \"default\")\n    ], 512));\n  }\n}), B = {\n  key: 0,\n  style: { position: \"absolute\", top: 0, left: 0, right: 0, bottom: 0, zIndex: 10 }\n}, K = /* @__PURE__ */ P({\n  __name: \"page-pointer-provider\",\n  props: {\n    pageIndex: {},\n    pageWidth: {},\n    pageHeight: {},\n    rotation: {},\n    scale: {},\n    convertEventToPoint: { type: Function }\n  },\n  setup(t) {\n    const e = t, r = u(null), { provides: n } = l(), o = A(), a = g(() => (i, s) => {\n      const p = s.getBoundingClientRect(), _ = {\n        x: i.clientX - p.left,\n        y: i.clientY - p.top\n      };\n      return M(\n        { width: e.pageWidth, height: e.pageHeight },\n        _,\n        e.rotation,\n        e.scale\n      );\n    });\n    return c((i) => {\n      if (n.value && r.value) {\n        const s = y(\n          n.value,\n          { type: \"page\", pageIndex: e.pageIndex },\n          r.value,\n          e.convertEventToPoint || a.value\n        );\n        i(s);\n      }\n    }), (i, s) => (d(), v(\"div\", {\n      ref_key: \"divRef\",\n      ref: r\n    }, [\n      m(i.$slots, \"default\"),\n      R(o) ? (d(), v(\"div\", B)) : w(\"\", !0)\n    ], 512));\n  }\n});\nexport {\n  G as GlobalPointerProvider,\n  K as PagePointerProvider,\n  j as useCursor,\n  W as useInteractionManager,\n  l as useInteractionManagerCapability,\n  F as useInteractionManagerPlugin,\n  A as useIsPageExclusive,\n  D as usePointerHandlers\n};\n//# sourceMappingURL=index.js.map\n","<script setup lang=\"ts\">\nimport { ref, watchEffect, computed } from 'vue';\nimport { ignore, PdfErrorCode, PdfPageGeometry, Rect } from '@embedpdf/models';\nimport {\n  useCursor,\n  useInteractionManagerCapability,\n  usePointerHandlers,\n} from '@embedpdf/plugin-interaction-manager/vue';\nimport { PointerEventHandlersWithLifecycle } from '@embedpdf/plugin-interaction-manager';\nimport { glyphAt } from '@embedpdf/plugin-selection';\nimport { useSelectionCapability } from '../hooks';\n\ninterface Props {\n  pageIndex: number;\n  scale: number;\n  background?: string;\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  background: 'rgba(33, 150, 243)', // Default selection color\n});\n\nconst { provides: sel } = useSelectionCapability();\nconst { provides: im } = useInteractionManagerCapability();\nconst { register } = usePointerHandlers({ pageIndex: props.pageIndex });\nconst { setCursor, removeCursor } = useCursor();\n\nconst rects = ref<Rect[]>([]);\nconst boundingRect = ref<Rect | null>(null);\n\n// Subscribe to selection changes and update the rendered rectangles\nwatchEffect((onCleanup) => {\n  if (sel.value) {\n    const unsubscribe = sel.value.onSelectionChange(() => {\n      const mode = im.value?.getActiveMode();\n      if (mode === 'default') {\n        rects.value = sel.value!.getHighlightRectsForPage(props.pageIndex);\n        boundingRect.value = sel.value!.getBoundingRectForPage(props.pageIndex);\n      } else {\n        rects.value = [];\n        boundingRect.value = null;\n      }\n    });\n    onCleanup(unsubscribe);\n  }\n});\n\n// Cache page geometry for faster hit-testing during pointer moves\nlet geoCache: PdfPageGeometry | undefined;\nwatchEffect((onCleanup) => {\n  if (sel.value) {\n    const task = sel.value.getGeometry(props.pageIndex);\n    task.wait((g) => (geoCache = g), ignore);\n\n    onCleanup(() => {\n      task.abort({\n        code: PdfErrorCode.Cancelled,\n        message: 'SelectionLayer unmounted',\n      });\n    });\n  }\n});\n\nconst handlers = computed(\n  (): PointerEventHandlersWithLifecycle<PointerEvent> => ({\n    onPointerDown: (point, _evt, modeId) => {\n      if (!sel.value || !sel.value.isEnabledForMode(modeId)) return;\n      sel.value.clear();\n      const task = sel.value.getGeometry(props.pageIndex);\n      task.wait((geo) => {\n        const g = glyphAt(geo, point);\n        if (g !== -1) sel.value!.begin(props.pageIndex, g);\n      }, ignore);\n    },\n    onPointerMove: (point, _evt, modeId) => {\n      if (!sel.value || !sel.value.isEnabledForMode(modeId)) return;\n      const g = geoCache ? glyphAt(geoCache, point) : -1;\n      if (g !== -1) {\n        setCursor('selection-text', 'text', 10);\n        sel.value.update(props.pageIndex, g);\n      } else {\n        removeCursor('selection-text');\n      }\n    },\n    onPointerUp: (_point, _evt, modeId) => {\n      if (!sel.value || !sel.value.isEnabledForMode(modeId)) return;\n      sel.value.end();\n    },\n    onHandlerActiveEnd: (modeId) => {\n      if (!sel.value || !sel.value.isEnabledForMode(modeId)) return;\n      sel.value.clear();\n    },\n  }),\n);\n\n// Register the pointer handlers with the interaction manager\nwatchEffect((onCleanup) => {\n  if (register) {\n    const cleanup = register(handlers.value);\n    if (cleanup) onCleanup(cleanup);\n  }\n});\n</script>\n\n<template>\n  <div\n    v-if=\"boundingRect\"\n    :style=\"{\n      position: 'absolute',\n      left: `${boundingRect.origin.x * scale}px`,\n      top: `${boundingRect.origin.y * scale}px`,\n      width: `${boundingRect.size.width * scale}px`,\n      height: `${boundingRect.size.height * scale}px`,\n      mixBlendMode: 'multiply',\n      isolation: 'isolate',\n      pointerEvents: 'none',\n    }\"\n  >\n    <div\n      v-for=\"(rect, i) in rects\"\n      :key=\"i\"\n      :style=\"{\n        position: 'absolute',\n        left: `${(rect.origin.x - boundingRect.origin.x) * scale}px`,\n        top: `${(rect.origin.y - boundingRect.origin.y) * scale}px`,\n        width: `${rect.size.width * scale}px`,\n        height: `${rect.size.height * scale}px`,\n        background: background,\n      }\"\n    />\n  </div>\n</template>\n","<script setup lang=\"ts\">\nimport { watchEffect } from 'vue';\nimport { useSelectionCapability } from '../hooks';\n\nconst { provides: sel } = useSelectionCapability();\n\n// This effect runs when the component is mounted and the capability is available.\n// It automatically handles unsubscribing when the component is unmounted.\nwatchEffect((onCleanup) => {\n  if (sel.value) {\n    const unsubscribe = sel.value.onCopyToClipboard((text) => {\n      // Use the Clipboard API to write the text\n      navigator.clipboard.writeText(text).catch((err) => {\n        console.error('Failed to copy text to clipboard:', err);\n      });\n    });\n\n    // Register the cleanup function to run on unmount or re-run\n    onCleanup(unsubscribe);\n  }\n});\n</script>\n\n<template>\n  <!-- This component renders nothing to the DOM -->\n</template>\n"],"names":["f","c","r","p","R","e","o","d","t","u","s","n","g","i","a","v","z","y","useSelectionCapability","useCapability","SelectionPlugin","useSelectionPlugin","usePlugin","$","H","E","I","x","b","C","S","l","h","j","D","props","__props","sel","im","useInteractionManagerCapability","register","usePointerHandlers","setCursor","removeCursor","useCursor","rects","ref","boundingRect","watchEffect","onCleanup","unsubscribe","_a","geoCache","task","ignore","PdfErrorCode","handlers","computed","point","_evt","modeId","geo","glyphAt","_point","cleanup","_createElementBlock","_normalizeStyle","scale","_openBlock","_Fragment","_renderList","rect","background","text","err"],"mappings":"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"}