"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const g=require("../jsxRuntime.module-BSRTsKji.cjs"),o=require("preact/hooks"),d=require("../index-DcaIcdvh.cjs"),E=require("preact"),f=require("../reducer-Jka7ZKi4.cjs"),M=E.createContext({registry:null,isInitializing:!0,pluginsReady:!1});function S(){const e=o.useContext(M);if(e===void 0)throw new Error("useCapability must be used within a PDFContext.Provider");const{registry:n,isInitializing:t}=e;if(t)return e;if(n===null)throw new Error("PDF registry failed to initialize properly");return e}function p(e){const{registry:n}=S();if(n===null)return{plugin:null,isLoading:!0,ready:new Promise(()=>{})};const t=n.getPlugin(e);if(!t)throw new Error(`Plugin ${e} not found`);return{plugin:t,isLoading:!1,ready:t.ready()}}function m(e){const{plugin:n,isLoading:t,ready:r}=p(e);if(!n)return{provides:null,isLoading:t,ready:r};if(!n.provides)throw new Error(`Plugin ${e} does not provide a capability`);return{provides:n.provides(),isLoading:t,ready:r}}const L=()=>p(f.InteractionManagerPlugin.id),s=()=>m(f.InteractionManagerPlugin.id);function q(){const{provides:e}=s(),[n,t]=o.useState(f.initialState);return o.useEffect(()=>{if(e)return e.onStateChange(r=>{t(r)})},[e]),{provides:e,state:n}}function R(){const{provides:e}=s();return{setCursor:(n,t,r=0)=>{e==null||e.setCursor(n,t,r)},removeCursor:n=>{e==null||e.removeCursor(n)}}}function z({modeId:e,pageIndex:n}){const{provides:t}=s();return{register:(r,i)=>{const a=(i==null?void 0:i.modeId)??e,u=(i==null?void 0:i.pageIndex)??n;return a?t==null?void 0:t.registerHandlers({modeId:a,handlers:r,pageIndex:u}):t==null?void 0:t.registerAlways({scope:u!==void 0?{type:"page",pageIndex:u}:{type:"global"},handlers:r})}}}function I(){const{provides:e}=s(),[n,t]=o.useState(()=>{const r=e==null?void 0:e.getActiveInteractionMode();return(r==null?void 0:r.scope)==="page"&&!!r.exclusive});return o.useEffect(()=>{if(e)return e.onModeChange(()=>{const r=e.getActiveInteractionMode();t((r==null?void 0:r.scope)==="page"&&!!(r!=null&&r.exclusive))})},[e]),n}const A=({children:e,style:n,...t})=>{const r=o.useRef(null),{provides:i}=s();return o.useEffect(()=>{if(!(!i||!r.current))return d.createPointerProvider(i,{type:"global"},r.current)},[i]),g.u("div",{ref:r,style:{width:"100%",height:"100%",...n},...t,children:e})},j=({pageIndex:e,children:n,pageWidth:t,pageHeight:r,rotation:i,scale:a,convertEventToPoint:u,style:x,...C})=>{const c=o.useRef(null),{provides:l}=s(),b=I(),P=o.useCallback((y,h)=>{const v=h.getBoundingClientRect(),w={x:y.clientX-v.left,y:y.clientY-v.top};return d.restorePosition({width:t,height:r},w,i,a)},[t,r,i,a]);return o.useEffect(()=>{if(!(!l||!c.current))return d.createPointerProvider(l,{type:"page",pageIndex:e},c.current,u||P)},[l,e,u,P]),g.u("div",{ref:c,style:{...x},...C,children:[n,b&&g.u("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:10}})]})};exports.GlobalPointerProvider=A;exports.PagePointerProvider=j;exports.useCursor=R;exports.useInteractionManager=q;exports.useInteractionManagerCapability=s;exports.useInteractionManagerPlugin=L;exports.useIsPageExclusive=I;exports.usePointerHandlers=z;
//# sourceMappingURL=index.cjs.map
