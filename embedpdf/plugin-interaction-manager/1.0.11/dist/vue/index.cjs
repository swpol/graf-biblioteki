"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const t=require("vue"),c=require("../index-DcaIcdvh.cjs"),d=require("../reducer-Jka7ZKi4.cjs"),P=Symbol("pdfKey");function y(){const n=t.inject(P);if(!n)throw new Error("useRegistry must be used inside <EmbedPDF>");return n}function g(n){const{registry:e}=y(),o=t.shallowRef(null),r=t.ref(!0),a=t.ref(new Promise(()=>{})),i=()=>{var u;if(!e.value)return;const s=e.value.getPlugin(n);if(!s)throw new Error(`Plugin ${n} not found`);o.value=s,r.value=!1,a.value=((u=s.ready)==null?void 0:u.call(s))??Promise.resolve()};return t.onMounted(i),t.watch(e,i),{plugin:o,isLoading:r,ready:a}}function h(n){const{plugin:e,isLoading:o,ready:r}=g(n);return{provides:t.computed(()=>{if(!e.value)return null;if(!e.value.provides)throw new Error(`Plugin ${n} does not implement provides()`);return e.value.provides()}),isLoading:o,ready:r}}const m=()=>g(d.InteractionManagerPlugin.id),l=()=>h(d.InteractionManagerPlugin.id);function I(){const{provides:n}=l(),e=t.ref(d.initialState);return t.watchEffect(o=>{if(n.value){const r=n.value.onStateChange(a=>{e.value=a});o(r)}}),{provides:n,state:t.readonly(e)}}function E(){const{provides:n}=l();return{setCursor:(e,o,r=0)=>{var a;(a=n.value)==null||a.setCursor(e,o,r)},removeCursor:e=>{var o;(o=n.value)==null||o.removeCursor(e)}}}function b({modeId:n,pageIndex:e}){const{provides:o}=l();return{register:(r,a)=>{const i=(a==null?void 0:a.modeId)??n,u=(a==null?void 0:a.pageIndex)??e;if(o.value)return i?o.value.registerHandlers({modeId:i,handlers:r,pageIndex:u}):o.value.registerAlways({scope:u!==void 0?{type:"page",pageIndex:u}:{type:"global"},handlers:r})}}}function f(){const{provides:n}=l(),e=t.ref(!1);return t.watchEffect(o=>{if(n.value){const r=n.value.getActiveInteractionMode();e.value=(r==null?void 0:r.scope)==="page"&&!!(r!=null&&r.exclusive);const a=n.value.onModeChange(()=>{if(!n.value)return;const i=n.value.getActiveInteractionMode();e.value=(i==null?void 0:i.scope)==="page"&&!!(i!=null&&i.exclusive)});o(a)}}),t.readonly(e)}const x=t.defineComponent({__name:"global-pointer-provider",setup(n){const e=t.ref(null),{provides:o}=l();return t.watchEffect(r=>{if(o.value&&e.value){const a=c.createPointerProvider(o.value,{type:"global"},e.value);r(a)}}),(r,a)=>(t.openBlock(),t.createElementBlock("div",{ref_key:"divRef",ref:e,style:{width:"100%",height:"100%"}},[t.renderSlot(r.$slots,"default")],512))}}),_={key:0,style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:10}},C=t.defineComponent({__name:"page-pointer-provider",props:{pageIndex:{},pageWidth:{},pageHeight:{},rotation:{},scale:{},convertEventToPoint:{type:Function}},setup(n){const e=n,o=t.ref(null),{provides:r}=l(),a=f(),i=t.computed(()=>(u,s)=>{const v=s.getBoundingClientRect(),p={x:u.clientX-v.left,y:u.clientY-v.top};return c.restorePosition({width:e.pageWidth,height:e.pageHeight},p,e.rotation,e.scale)});return t.watchEffect(u=>{if(r.value&&o.value){const s=c.createPointerProvider(r.value,{type:"page",pageIndex:e.pageIndex},o.value,e.convertEventToPoint||i.value);u(s)}}),(u,s)=>(t.openBlock(),t.createElementBlock("div",{ref_key:"divRef",ref:o},[t.renderSlot(u.$slots,"default"),t.unref(a)?(t.openBlock(),t.createElementBlock("div",_)):t.createCommentVNode("",!0)],512))}});exports.GlobalPointerProvider=x;exports.PagePointerProvider=C;exports.useCursor=E;exports.useInteractionManager=I;exports.useInteractionManagerCapability=l;exports.useInteractionManagerPlugin=m;exports.useIsPageExclusive=f;exports.usePointerHandlers=b;
//# sourceMappingURL=index.cjs.map
