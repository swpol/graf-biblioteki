"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const x=require("preact"),o=require("preact/hooks"),a=require("../scroll-plugin-BGE-Zr8w.cjs"),l=require("../jsxRuntime.module-BSRTsKji.cjs"),P=x.createContext({registry:null,isInitializing:!0,pluginsReady:!1});function y(){const e=o.useContext(P);if(e===void 0)throw new Error("useCapability must be used within a PDFContext.Provider");const{registry:r,isInitializing:i}=e;if(i)return e;if(r===null)throw new Error("PDF registry failed to initialize properly");return e}function h(e){const{registry:r}=y();if(r===null)return{plugin:null,isLoading:!0,ready:new Promise(()=>{})};const i=r.getPlugin(e);if(!i)throw new Error(`Plugin ${e} not found`);return{plugin:i,isLoading:!1,ready:i.ready()}}function w(e){const{plugin:r,isLoading:i,ready:n}=h(e);if(!r)return{provides:null,isLoading:i,ready:n};if(!r.provides)throw new Error(`Plugin ${e} does not provide a capability`);return{provides:r.provides(),isLoading:i,ready:n}}const f=()=>h(a.ScrollPlugin.id),d=()=>w(a.ScrollPlugin.id),v=()=>{const{provides:e}=d(),[r,i]=o.useState(1),[n,s]=o.useState(1);return o.useEffect(()=>{if(e)return e.onPageChange(({pageNumber:u,totalPages:t})=>{i(u),s(t)})},[e]),{...e,currentPage:r,totalPages:n}};function m({renderPage:e,overlayElements:r,...i}){const{provides:n}=d(),{plugin:s}=f(),{registry:u}=y(),[t,S]=o.useState(()=>(n==null?void 0:n.getScrollerLayout())??null);if(o.useEffect(()=>{if(n)return n.onScrollerData(S)},[n]),o.useEffect(()=>{s&&s.setLayoutReady()},[s]),!t||!u)return null;const g=u.getStore().getState();return l.u("div",{...i,style:{width:`${t.totalWidth}px`,height:`${t.totalHeight}px`,position:"relative",boxSizing:"border-box",margin:"0 auto",...t.strategy===a.ScrollStrategy.Horizontal&&{display:"flex",flexDirection:"row"}},children:[l.u("div",{style:{...t.strategy===a.ScrollStrategy.Horizontal?{width:t.startSpacing,height:"100%",flexShrink:0}:{height:t.startSpacing,width:"100%"}}}),l.u("div",{style:{gap:t.pageGap,display:"flex",alignItems:"center",position:"relative",boxSizing:"border-box",...t.strategy===a.ScrollStrategy.Horizontal?{flexDirection:"row",minHeight:"100%"}:{flexDirection:"column",minWidth:"fit-content"}},children:t.items.map(p=>l.u("div",{style:{display:"flex",justifyContent:"center",gap:t.pageGap},children:p.pageLayouts.map(c=>l.u("div",{style:{width:`${c.rotatedWidth}px`,height:`${c.rotatedHeight}px`},children:e({...c,rotation:g.core.rotation,scale:g.core.scale,document:g.core.document})},c.pageNumber))},p.pageNumbers[0]))}),l.u("div",{style:{...t.strategy===a.ScrollStrategy.Horizontal?{width:t.endSpacing,height:"100%",flexShrink:0}:{height:t.endSpacing,width:"100%"}}}),r]})}exports.Scroller=m;exports.useScroll=v;exports.useScrollCapability=d;exports.useScrollPlugin=f;
//# sourceMappingURL=index.cjs.map
