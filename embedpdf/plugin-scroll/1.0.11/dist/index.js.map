{"version":3,"file":"index.js","sources":["../src/lib/manifest.ts","../src/lib/reducer.ts","../src/lib/index.ts"],"sourcesContent":["import { PluginManifest } from '@embedpdf/core';\nimport { ScrollPluginConfig } from './types';\n\nexport const SCROLL_PLUGIN_ID = 'scroll';\n\nexport const manifest: PluginManifest<ScrollPluginConfig> = {\n  id: SCROLL_PLUGIN_ID,\n  name: 'Scroll Plugin',\n  version: '1.0.0',\n  provides: ['scroll'],\n  requires: ['viewport'],\n  optional: [],\n  defaultConfig: {\n    enabled: true,\n    pageGap: 10,\n  },\n};\n","import { Reducer, CoreState, SET_SCALE, SetScaleAction } from '@embedpdf/core';\nimport { ScrollState, ScrollStrategy, ScrollPluginConfig, ScrollMetrics } from './types';\nimport {\n  ScrollAction,\n  UPDATE_SCROLL_STATE,\n  SET_DESIRED_SCROLL_POSITION,\n  UPDATE_TOTAL_PAGES,\n} from './actions';\n\nexport const defaultScrollMetrics: ScrollMetrics = {\n  currentPage: 1,\n  visiblePages: [],\n  pageVisibilityMetrics: [],\n  renderedPageIndexes: [],\n  scrollOffset: { x: 0, y: 0 },\n  startSpacing: 0,\n  endSpacing: 0,\n};\n\nexport const initialState: (coreState: CoreState, config: ScrollPluginConfig) => ScrollState = (\n  coreState,\n  config,\n) => ({\n  virtualItems: [],\n  totalPages: coreState.pages.length,\n  totalContentSize: { width: 0, height: 0 },\n  desiredScrollPosition: { x: 0, y: 0 },\n  strategy: config.strategy ?? ScrollStrategy.Vertical,\n  pageGap: config.pageGap ?? 10,\n  scale: coreState.scale,\n  ...defaultScrollMetrics,\n});\n\nexport const scrollReducer: Reducer<ScrollState, ScrollAction | SetScaleAction> = (\n  state,\n  action,\n) => {\n  switch (action.type) {\n    case UPDATE_TOTAL_PAGES:\n      return { ...state, totalPages: action.payload };\n    case SET_SCALE:\n      return { ...state, scale: action.payload };\n    case UPDATE_SCROLL_STATE:\n      return { ...state, ...action.payload };\n    case SET_DESIRED_SCROLL_POSITION:\n      return { ...state, desiredScrollPosition: action.payload };\n    default:\n      return state;\n  }\n};\n","import { PluginPackage } from '@embedpdf/core';\nimport { ScrollPlugin } from './scroll-plugin';\nimport { manifest, SCROLL_PLUGIN_ID } from './manifest';\nimport { ScrollPluginConfig, ScrollState } from './types';\nimport { scrollReducer, initialState } from './reducer';\nimport { ScrollAction } from './actions';\n\nexport const ScrollPluginPackage: PluginPackage<\n  ScrollPlugin,\n  ScrollPluginConfig,\n  ScrollState,\n  ScrollAction\n> = {\n  manifest,\n  create: (registry, _engine, config) => new ScrollPlugin(SCROLL_PLUGIN_ID, registry, config),\n  reducer: scrollReducer,\n  initialState: (coreState, config) => initialState(coreState, config),\n};\n\nexport * from './scroll-plugin';\nexport * from './types';\nexport * from './manifest';\nexport * from './types/virtual-item';\n"],"names":["SCROLL_PLUGIN_ID","manifest","defaultScrollMetrics","initialState","coreState","config","ScrollStrategy","scrollReducer","state","action","UPDATE_TOTAL_PAGES","SET_SCALE","UPDATE_SCROLL_STATE","SET_DESIRED_SCROLL_POSITION","ScrollPluginPackage","registry","_engine","ScrollPlugin"],"mappings":";AAGO,MAAMA,IAAmB,UAEnBC,IAA+C;AAAA,EAC1D,IAAID;AAAA,EACJ,MAAM;AAAA,EACN,SAAS;AAAA,EACT,UAAU,CAAC,QAAQ;AAAA,EACnB,UAAU,CAAC,UAAU;AAAA,EACrB,UAAU,CAAA;AAAA,EACV,eAAe;AAAA,IACb,SAAS;AAAA,IACT,SAAS;AAAA,EAAA;AAEb,GCPaE,IAAsC;AAAA,EACjD,aAAa;AAAA,EACb,cAAc,CAAA;AAAA,EACd,uBAAuB,CAAA;AAAA,EACvB,qBAAqB,CAAA;AAAA,EACrB,cAAc,EAAE,GAAG,GAAG,GAAG,EAAA;AAAA,EACzB,cAAc;AAAA,EACd,YAAY;AACd,GAEaC,IAAkF,CAC7FC,GACAC,OACI;AAAA,EACJ,cAAc,CAAA;AAAA,EACd,YAAYD,EAAU,MAAM;AAAA,EAC5B,kBAAkB,EAAE,OAAO,GAAG,QAAQ,EAAA;AAAA,EACtC,uBAAuB,EAAE,GAAG,GAAG,GAAG,EAAA;AAAA,EAClC,UAAUC,EAAO,YAAYC,EAAe;AAAA,EAC5C,SAASD,EAAO,WAAW;AAAA,EAC3B,OAAOD,EAAU;AAAA,EACjB,GAAGF;AACL,IAEaK,IAAqE,CAChFC,GACAC,MACG;AACH,UAAQA,EAAO,MAAA;AAAA,IACb,KAAKC;AACH,aAAO,EAAE,GAAGF,GAAO,YAAYC,EAAO,QAAA;AAAA,IACxC,KAAKE;AACH,aAAO,EAAE,GAAGH,GAAO,OAAOC,EAAO,QAAA;AAAA,IACnC,KAAKG;AACH,aAAO,EAAE,GAAGJ,GAAO,GAAGC,EAAO,QAAA;AAAA,IAC/B,KAAKI;AACH,aAAO,EAAE,GAAGL,GAAO,uBAAuBC,EAAO,QAAA;AAAA,IACnD;AACE,aAAOD;AAAA,EAAA;AAEb,GC1CaM,IAKT;AAAA,EACF,UAAAb;AAAA,EACA,QAAQ,CAACc,GAAUC,GAASX,MAAW,IAAIY,EAAajB,GAAkBe,GAAUV,CAAM;AAAA,EAC1F,SAASE;AAAA,EACT,cAAc,CAACH,GAAWC,MAAWF,EAAaC,GAAWC,CAAM;AACrE;"}